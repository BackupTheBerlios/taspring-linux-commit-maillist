<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r7657 - Lobby/TASClient
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2013-October/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7657%20-%20Lobby/TASClient&In-Reply-To=%3Cmailman.7864.1382556544.1322.taspring-linux-commit%40lists.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r7657 - Lobby/TASClient</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7657%20-%20Lobby/TASClient&In-Reply-To=%3Cmailman.7864.1382556544.1322.taspring-linux-commit%40lists.berlios.de%3E"
       TITLE="[Taspring-linux-commit] r7657 - Lobby/TASClient">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Wed Oct 23 21:19:13 CEST 2013</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2427">[ date ]</a>
              <a href="thread.html#2427">[ thread ]</a>
              <a href="subject.html#2427">[ subject ]</a>
              <a href="author.html#2427">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: satirik
Date: 2013-10-23 21:19:13 +0200 (Wed, 23 Oct 2013)
New Revision: 7657

Modified:
   Lobby/TASClient/MainUnit.dfm
   Lobby/TASClient/MainUnit.pas
   Lobby/TASClient/TASClient.dof
   Lobby/TASClient/TASClient.res
Log:
* bug fixed when entering an invalid regexp in the battle filters

Modified: Lobby/TASClient/MainUnit.dfm
===================================================================
--- Lobby/TASClient/MainUnit.dfm	2013-08-05 18:13:53 UTC (rev 7656)
+++ Lobby/TASClient/MainUnit.dfm	2013-10-23 19:19:13 UTC (rev 7657)
@@ -23,8 +23,8 @@
   object MainTitleBar: TSpTBXTitleBar
     Left = 0
     Top = 0
-    Width = 874
-    Height = 540
+    Width = 866
+    Height = 529
     Caption = 'TASClient'
     Active = False
     object TBControlItem1: TTBControlItem
@@ -207,8 +207,8 @@
     object Panel1: TSpTBXPanel
       Left = 0
       Top = 104
-      Width = 874
-      Height = 436
+      Width = 866
+      Height = 425
       Caption = 'Panel1'
       Align = alClient
       TabOrder = 1
@@ -217,18 +217,18 @@
       object MainDockPanel: TDockPanel
         Left = 0
         Top = 0
-        Width = 874
-        Height = 436
+        Width = 866
+        Height = 425
         Align = alClient
         BevelOuter = bvNone
         DockSite = True
         TabOrder = 0
         TabPosition = tpTop
         object PlayerListPanel: TSpTBXPanel
-          Left = 662
+          Left = 654
           Top = 0
           Width = 212
-          Height = 91
+          Height = 80
           Caption = 'Players'
           Align = alRight
           DragKind = dkDock
@@ -241,7 +241,7 @@
             Left = 0
             Top = 57
             Width = 212
-            Height = 34
+            Height = 23
             Style = lbOwnerDrawFixed
             Align = alClient
             DragMode = dmAutomatic
@@ -352,8 +352,8 @@
         end
         object BattlesPanel: TSpTBXPanel
           Left = 0
-          Top = 91
-          Width = 874
+          Top = 80
+          Width = 866
           Height = 345
           Caption = 'Battles'
           Align = alBottom
@@ -365,7 +365,7 @@
           object QuickJoinPanel: TSpTBXPanel
             Left = 0
             Top = 0
-            Width = 874
+            Width = 866
             Height = 25
             Hint = 'Quick join panel'
             Caption = 'QuickJoinPanel'
@@ -390,7 +390,7 @@
               ShowHint = True
             end
             object btSpecatateNow: TSpTBXButton
-              Left = 742
+              Left = 734
               Top = 0
               Width = 132
               Height = 25
@@ -421,7 +421,7 @@
           object VDTBattles: TVirtualDrawTree
             Left = 0
             Top = 25
-            Width = 672
+            Width = 664
             Height = 123
             Align = alClient
             BevelInner = bvNone
@@ -544,7 +544,7 @@
               item
                 MinWidth = 2
                 Position = 8
-                Width = 101
+                Width = 93
                 WideText = 'Players'
                 WideHint = 
                   'x+y/z , x = players , y = spectators , z = max players . Then co' +
@@ -554,7 +554,7 @@
           object FilterGroup: TSpTBXPanel
             Left = 0
             Top = 172
-            Width = 874
+            Width = 866
             Height = 173
             Caption = 'FilterGroup'
             Align = alBottom
@@ -564,7 +564,7 @@
             object FiltersTabs: TSpTBXTabControl
               Left = 0
               Top = 0
-              Width = 874
+              Width = 866
               Height = 173
               Align = alClient
               ActiveTabIndex = 0
@@ -580,13 +580,13 @@
               object SpTBXTabSheet2: TSpTBXTabSheet
                 Left = 0
                 Top = 0
-                Width = 874
-                Height = 150
+                Width = 866
+                Height = 148
                 Caption = 'Presets'
                 ImageIndex = -1
                 DesignSize = (
-                  874
-                  150)
+                  866
+                  148)
                 TabItem = 'SpTBXTabItem2'
                 object PresetListbox: TSpTBXListBox
                   Left = 152
@@ -662,8 +662,8 @@
               object SpTBXTabSheet1: TSpTBXTabSheet
                 Left = 0
                 Top = 0
-                Width = 874
-                Height = 150
+                Width = 866
+                Height = 148
                 Caption = 'Filters'
                 ImageIndex = -1
                 TabItem = 'SpTBXTabItem1'
@@ -1045,7 +1045,7 @@
           object EnableFiltersPanel: TSpTBXPanel
             Left = 0
             Top = 148
-            Width = 874
+            Width = 866
             Height = 24
             Align = alBottom
             TabOrder = 3
@@ -1068,7 +1068,7 @@
               OnClick = EnableFiltersClick
             end
             object FiltersButton: TSpTBXButton
-              Left = 632
+              Left = 624
               Top = 3
               Width = 242
               Height = 21
@@ -1102,13 +1102,13 @@
             object pnlQuickBattleFilters: TSpTBXPanel
               Left = 128
               Top = 3
-              Width = 504
+              Width = 496
               Height = 21
               Align = alClient
               TabOrder = 4
               Borders = False
               DesignSize = (
-                504
+                496
                 21)
               object BattleFiltersTextbox: TSpTBXButtonEdit
                 Left = 0
@@ -1130,7 +1130,7 @@
             object SpacerPanel3: TSpTBXPanel
               Left = 0
               Top = 0
-              Width = 874
+              Width = 866
               Height = 3
               Align = alTop
               TabOrder = 5
@@ -1138,7 +1138,7 @@
             end
           end
           object BattlePlayersPanel: TSpTBXPanel
-            Left = 695
+            Left = 687
             Top = 25
             Width = 179
             Height = 123
@@ -1176,7 +1176,7 @@
             end
           end
           object BattlePlayersButton: TSpTBXButton
-            Left = 672
+            Left = 664
             Top = 25
             Width = 17
             Height = 123
@@ -1187,7 +1187,7 @@
             ImageIndex = 3
           end
           object BattlePlayersSplitter: TSpTBXSplitter
-            Left = 689
+            Left = 681
             Top = 25
             Width = 6
             Height = 123
@@ -1200,14 +1200,14 @@
     object Panel4: TSpTBXPanel
       Left = 0
       Top = 22
-      Width = 874
+      Width = 866
       Height = 41
       Align = alTop
       TabOrder = 2
       BorderType = pbrRaised
       TBXStyleBackground = True
       DesignSize = (
-        874
+        866
         41)
       object OptionsSpeedButton: TSpTBXSpeedButton
         Left = 456
@@ -1307,7 +1307,7 @@
     object NewsMainPanel: TSpTBXPanel
       Left = 0
       Top = 63
-      Width = 874
+      Width = 866
       Height = 41
       Caption = 'NewsMainPanel'
       Align = alTop
@@ -1316,7 +1316,7 @@
       object ExpandNewsButton: TSpTBXButton
         Left = 0
         Top = 29
-        Width = 874
+        Width = 866
         Height = 12
         Align = alBottom
         TabOrder = 0
@@ -1327,7 +1327,7 @@
       object ScrollingNewsPanel: TSpTBXPanel
         Left = 0
         Top = 0
-        Width = 874
+        Width = 866
         Height = 29
         Align = alClient
         TabOrder = 1

Modified: Lobby/TASClient/MainUnit.pas
===================================================================
--- Lobby/TASClient/MainUnit.pas	2013-08-05 18:13:53 UTC (rev 7656)
+++ Lobby/TASClient/MainUnit.pas	2013-10-23 19:19:13 UTC (rev 7657)
@@ -1869,7 +1869,7 @@
   end;
 
   SCROLLING_NEWS_RSS_URL: string = '<A HREF="http://www.springinfo.info/feed/">http://www.springinfo.info/feed/</A>';//'<A HREF="http://springfiles.com/rss2.php?s=20">http://springfiles.com/rss2.php?s=20</A>';
-  NEWS_URL:string = '<A HREF="http://springrts.com/news.php">http://springrts.com/news.php</A>';
+  NEWS_URL:string = '<A HREF="http://www.springinfo.info">http://www.springinfo.info</A>';
   DISABLE_FADEIN: boolean = false;
   AUTOUPDATE_URL: string = '<A HREF="http://tasclient.no-ip.org/TASClient_update_v5.txt">http://tasclient.no-ip.org/TASClient_update_v5.txt</A>';
   TASCLIENT_REGISTRY_KEY: string = 'Software\TASClient';
@@ -10620,11 +10620,14 @@
   if BattleFiltersTextbox.Text &lt;&gt; '' then
   begin
     tmpStr := Battle.Description+' '+IFF(TClient(Battle.Clients[0]).isRenamed,TClient(Battle.Clients[0]).Name+' '+TClient(Battle.Clients[0]).DisplayName,TClient(Battle.Clients[0]).Name)+' '+Battle.Map+' '+Battle.ModName+' '+Battle.ClientsToString(' ',True)+' '+Battle.ClientsToString(' ',False);
-    if not RegExpr.ExecRegExpr(LowerCase(BattleFiltersTextbox.Text),LowerCase(tmpStr)) then
-    begin
-      Result := False;
-      Exit;
-    end;
+    try
+      if not RegExpr.ExecRegExpr(LowerCase(BattleFiltersTextbox.Text),LowerCase(tmpStr)) then
+      begin
+        Result := False;
+        Exit;
+      end;
+    except
+    end
   end;
 
   // simple filters
@@ -10692,11 +10695,13 @@
         else
           raise Exception.Create(_('Filter type not handled.'));
 
-
-        if RegExpr.ExecRegExpr(LowerCase(value),LowerCase(tmpStr)) xor contains then
-        begin
-          Result := False;
-          Exit;
+        try
+          if RegExpr.ExecRegExpr(LowerCase(value),LowerCase(tmpStr)) xor contains then
+          begin
+            Result := False;
+            Exit;
+          end;
+        except
         end;
       end; // if
     end; // with

Modified: Lobby/TASClient/TASClient.dof
===================================================================
--- Lobby/TASClient/TASClient.dof	2013-08-05 18:13:53 UTC (rev 7656)
+++ Lobby/TASClient/TASClient.dof	2013-10-23 19:19:13 UTC (rev 7657)
@@ -115,7 +115,7 @@
 MajorVer=1
 MinorVer=4
 Release=0
-Build=1392
+Build=1395
 Debug=0
 PreRelease=0
 Special=0
@@ -126,7 +126,7 @@
 [Version Info Keys]
 CompanyName=
 FileDescription=TASClient
-FileVersion=1.4.0.1392
+FileVersion=1.4.0.1395
 InternalName=
 LegalCopyright=
 LegalTrademarks=

Modified: Lobby/TASClient/TASClient.res
===================================================================
(Binary files differ)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2427">[ date ]</a>
              <a href="thread.html#2427">[ thread ]</a>
              <a href="subject.html#2427">[ subject ]</a>
              <a href="author.html#2427">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
