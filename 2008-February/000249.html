<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r5442 - in trunk/Lobby/AFLobby/src/aflobby:	. UI
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5442%20-%20in%20trunk/Lobby/AFLobby/src/aflobby%3A%0A%09.%20UI&In-Reply-To=%3CE1JL54K-0006nX-54%40proserver.fnord.lan%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000248.html">
   <LINK REL="Next"  HREF="000250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r5442 - in trunk/Lobby/AFLobby/src/aflobby:	. UI</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5442%20-%20in%20trunk/Lobby/AFLobby/src/aflobby%3A%0A%09.%20UI&In-Reply-To=%3CE1JL54K-0006nX-54%40proserver.fnord.lan%3E"
       TITLE="[Taspring-linux-commit] r5442 - in trunk/Lobby/AFLobby/src/aflobby:	. UI">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Sat Feb  2 00:13:12 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000248.html">[Taspring-linux-commit] r5441 - in trunk: rts/Game rts/System	tools/DedicatedServer
</A></li>
        <LI>Next message: <A HREF="000250.html">[Taspring-linux-commit] r5443 - trunk/Lobby/TASServer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#249">[ date ]</a>
              <a href="thread.html#249">[ thread ]</a>
              <a href="subject.html#249">[ subject ]</a>
              <a href="author.html#249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tnowell
Date: 2008-02-02 00:13:11 +0100 (Sat, 02 Feb 2008)
New Revision: 5442

Added:
   trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.form
   trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.java
Modified:
   trunk/Lobby/AFLobby/src/aflobby/CChannelView.form
   trunk/Lobby/AFLobby/src/aflobby/CChannelView.java
   trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.form
   trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.java
   trunk/Lobby/AFLobby/src/aflobby/CUnitSyncJNIBindings.java
   trunk/Lobby/AFLobby/src/aflobby/LMain.java
   trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTableModel.java
Log:
- disabled the autodetect button that doesnt do anything yet
- added a playertablepanel class
- changed untisync bindings under windows ot use the filepaths

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannelView.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannelView.form	2008-02-01 22:23:02 UTC (rev 5441)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannelView.form	2008-02-01 23:13:11 UTC (rev 5442)
@@ -282,9 +282,7 @@
                         &lt;Font component=&quot;ladderLabel&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;1&quot;/&gt;
                       &lt;/FontInfo&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;PlainString value=&quot;Not registered to the ladder&quot;/&gt;
-                    &lt;/Property&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Not registered to the ladder&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton12&quot;&gt;
@@ -309,9 +307,7 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton14&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;PlainString value=&quot;Darkstars.co.uk&quot;/&gt;
-                    &lt;/Property&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Darkstars.co.uk&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton14ActionPerformed&quot;/&gt;
@@ -423,11 +419,11 @@
               &lt;Layout&gt;
                 &lt;DimensionLayout dim=&quot;0&quot;&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                           &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                               &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;813&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                                   &lt;Component id=&quot;jLabel4&quot; pref=&quot;154&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;UserSearch&quot; pref=&quot;655&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
@@ -446,8 +442,8 @@
                               &lt;Component id=&quot;jLabel4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;484&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;jScrollPane3&quot; min=&quot;-2&quot; pref=&quot;224&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;271&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannelView.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannelView.java	2008-02-01 22:23:02 UTC (rev 5441)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannelView.java	2008-02-01 23:13:11 UTC (rev 5442)
@@ -60,7 +60,7 @@
 
                 public void run() {
 
-                    usertablemodel = new CPlayerTableModel(LM);
+                    usertablemodel = new CPlayerTableModel();
                     
 
                     playertablesorter = new TableRowSorter&lt;CPlayerTableModel&gt;(usertablemodel);
@@ -312,7 +312,7 @@
         jScrollPane4.setViewportView(FServerMessages);
 
         ladderLabel.setFont(ladderLabel.getFont().deriveFont(ladderLabel.getFont().getSize()+1f));
-        ladderLabel.setText(&quot;Not registered to the ladder&quot;);
+        ladderLabel.setText(&quot;Not registered to the ladder&quot;); // NOI18N
 
         jButton12.setText(bundle.getString(&quot;CChannelView.jButton12.text&quot;)); // NOI18N
         jButton12.addActionListener(new java.awt.event.ActionListener() {
@@ -328,7 +328,7 @@
             }
         });
 
-        jButton14.setText(&quot;Darkstars.co.uk&quot;);
+        jButton14.setText(&quot;Darkstars.co.uk&quot;); // NOI18N
         jButton14.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton14ActionPerformed(evt);
@@ -510,10 +510,10 @@
         PlayerList.setLayout(PlayerListLayout);
         PlayerListLayout.setHorizontalGroup(
             PlayerListLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(PlayerListLayout.createSequentialGroup()
+            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PlayerListLayout.createSequentialGroup()
                 .addContainerGap()
-                .addGroup(PlayerListLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 813, Short.MAX_VALUE)
+                .addGroup(PlayerListLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
+                    .addComponent(jScrollPane3, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 813, Short.MAX_VALUE)
                     .addGroup(PlayerListLayout.createSequentialGroup()
                         .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, 154, Short.MAX_VALUE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
@@ -528,8 +528,8 @@
                     .addComponent(UserSearch, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                     .addComponent(jLabel4))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 484, Short.MAX_VALUE)
-                .addContainerGap())
+                .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 224, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addContainerGap(271, Short.MAX_VALUE))
         );
 
         tabpane.addTab(bundle.getString(&quot;CChannelView.PlayerList.TabConstraints.tabTitle&quot;), PlayerList); // NOI18N

Modified: trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.form	2008-02-01 22:23:02 UTC (rev 5441)
+++ trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.form	2008-02-01 23:13:11 UTC (rev 5442)
@@ -146,7 +146,7 @@
             &lt;Font component=&quot;jLabel5&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;10&quot;/&gt;
           &lt;/FontInfo&gt;
         &lt;/Property&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;First Run&quot; noResource=&quot;true&quot;/&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Welcome To AFLobby!! First Run&quot; noResource=&quot;true&quot;/&gt;
       &lt;/Properties&gt;
     &lt;/Component&gt;
     &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel6&quot;&gt;
@@ -282,6 +282,7 @@
     &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton2&quot;&gt;
       &lt;Properties&gt;
         &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Autodetect&quot;/&gt;
+        &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
       &lt;/Properties&gt;
     &lt;/Component&gt;
     &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel7&quot;&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.java	2008-02-01 22:23:02 UTC (rev 5441)
+++ trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.java	2008-02-01 23:13:11 UTC (rev 5442)
@@ -75,7 +75,7 @@
         setResizable(false);
 
         jLabel5.setFont(jLabel5.getFont().deriveFont(jLabel5.getFont().getSize()+10f));
-        jLabel5.setText(&quot;First Run&quot;); // NOI18N
+        jLabel5.setText(&quot;Welcome To AFLobby!! First Run&quot;); // NOI18N
 
         jLabel6.setFont(jLabel6.getFont().deriveFont(jLabel6.getFont().getSize()+5f));
         jLabel6.setText(&quot;Spring&quot;); // NOI18N
@@ -146,6 +146,7 @@
         });
 
         jButton2.setText(&quot;Autodetect&quot;);
+        jButton2.setEnabled(false);
 
         jLabel7.setText(&quot;&lt;html&gt;This is your first run of AFLobby. AFLobby needs to know where your games are installed. Please browse and set their locations below. If you do not set their locations then AFLobby will assume they're not installed. &lt;br&gt;\n&lt;br&gt;\nIf locations are set incorrectly AFLobby may not work correctly and cause bugs, so double check you have the right values set. If you make a mistake you can change these values later in settings. &quot;);
 

Modified: trunk/Lobby/AFLobby/src/aflobby/CUnitSyncJNIBindings.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CUnitSyncJNIBindings.java	2008-02-01 22:23:02 UTC (rev 5441)
+++ trunk/Lobby/AFLobby/src/aflobby/CUnitSyncJNIBindings.java	2008-02-01 23:13:11 UTC (rev 5442)
@@ -47,17 +47,17 @@
     public static boolean LoadUnitSync(String libpath) {
         String intendedpath = &quot;current working directory&quot;;
         try {
-            if (Misc.isWindows()) {
+            /*if (Misc.isWindows()) {
                 System.loadLibrary(&quot;unitsync&quot;);
 //                java.lang.Runtime.getRuntime ().load (intendedpath+System.getProperty (&quot;file.separator&quot;)+&quot;unitsync.dll&quot;);
-            } else {
+            } else {*/
                 intendedpath = CUserSettings.GetValue(&quot;unitsyncpath&quot;);
                 System.load(intendedpath);
-            }
+            //}
 
-            if(Misc.isWindows() &amp;&amp; (!Main.dev_environment)){
-                Misc.getURLContent(&quot;<A HREF="http://www.darkstars.co.uk/linkcounter.php">http://www.darkstars.co.uk/linkcounter.php</A>&quot;,&quot;&quot;);
-            }
+            //if(Misc.isWindows() &amp;&amp; (!Main.dev_environment)){
+            //    Misc.getURLContent(&quot;<A HREF="http://www.darkstars.co.uk/linkcounter.php">http://www.darkstars.co.uk/linkcounter.php</A>&quot;,&quot;&quot;);
+            //}
             
             if(CContentManager.installed_engines.contains(&quot;spring&quot;)==false){
                 CContentManager.installed_engines.add(&quot;spring&quot;);
@@ -88,90 +88,90 @@
     }
 
 
-    public static native String     GetSpringVersion();
+    public static native String     GetSpringVersion        ();
 
-    public static native void       Message(String p_szMessage);
+    public static native void       Message                 (String p_szMessage);
 
-    public static native int        Init(boolean isServer, int id);
-    public static native void       UnInit();
+    public static native int        Init                    (boolean isServer, int id);
+    public static native void       UnInit                  ();
 
-    public static native int        ProcessUnits();
-    public static native int        ProcessUnitsNoChecksum();
+    public static native int        ProcessUnits            ();
+    public static native int        ProcessUnitsNoChecksum  ();
 
-    public static native String     GetCurrentList();
+    public static native String     GetCurrentList          ();
 
-    public static native void       AddClient(int id, String unitList);
-    public static native void       RemoveClient(int id);
+    public static native void       AddClient               (int id, String unitList);
+    public static native void       RemoveClient            (int id);
 
-    public static native String     GetClientDiff(int id);
-    public static native void       InstallClientDiff(String diff);
+    public static native String     GetClientDiff           (int id);
+    public static native void       InstallClientDiff       (String diff);
 
-    public static native int        GetUnitCount();
-    public static native String     GetUnitName(int unit);
-    public static native String     GetFullUnitName(int unit);
-    public static native int        IsUnitDisabled(int unit);
-    public static native int        IsUnitDisabledByClient(int unit, int clientId);
+    public static native int        GetUnitCount            ();
+    public static native String     GetUnitName             (int unit);
+    public static native String     GetFullUnitName         (int unit);
+    public static native int        IsUnitDisabled          (int unit);
+    public static native int        IsUnitDisabledByClient  (int unit, int clientId);
 
 
-    public static native void       AddArchive(String name);
-    public static native void       AddAllArchives(String root);
+    public static native void       AddArchive              (String name);
+    public static native void       AddAllArchives          (String root);
 
-    public static native String     GetArchiveChecksum(String arname); //unsigned integer
+    public static native String     GetArchiveChecksum      (String arname); //unsigned integer
 
-    public static native int        GetMapCount();
-    public static native String     GetMapName(int index);
+    public static native int        GetMapCount             ();
+    public static native String     GetMapName              (int index);
 
     //public static native int      GetMapInfoEx(String name, MapInfo outInfo, int version);
 
     //public static native void*    GetMinimap(String filename, int miplevel);
     
-    public static native int        GetMapArchiveCount(String mapName);
-    public static native String     GetMapArchiveName(int index);
-    public static native String     GetMapChecksum(int index); // unsigned
+    public static native int        GetMapArchiveCount      (String mapName);
+    public static native String     GetMapArchiveName       (int index);
+    public static native String     GetMapChecksum          (int index); // unsigned
 
-    public static native int        GetPrimaryModCount();
+    public static native int        GetPrimaryModCount      ();
 
-    public static native String     GetPrimaryModName(int index);
-    public static native String     GetPrimaryModArchive(int index);
+    public static native String     GetPrimaryModName       (int index);
+    public static native String     GetPrimaryModArchive    (int index);
     public static native int        GetPrimaryModArchiveCount(int index);
     public static native String     GetPrimaryModArchiveList(int arnr);
 
-    public static native int        GetPrimaryModIndex(String name);
+    public static native int        GetPrimaryModIndex      (String name);
 
-    public static native String     GetPrimaryModChecksum(int index); //unsigned
+    public static native String     GetPrimaryModChecksum   (int index); //unsigned
     public static native String     GetPrimaryModChecksumFromName(String name);
     
     public static native String     GetPrimaryModDescription(int index);
-    public static native String     GetPrimaryModMutator(int index);
-    public static native String     GetPrimaryModVersion(int index);
-    public static native String     GetPrimaryModShortGame(int index);
-    public static native String     GetPrimaryModGame(int index);
-    public static native String     GetPrimaryModShortName(int index);
+    public static native String     GetPrimaryModMutator    (int index);
+    public static native String     GetPrimaryModVersion    (int index);
+    public static native String     GetPrimaryModShortGame  (int index);
+    public static native String     GetPrimaryModGame       (int index);
+    public static native String     GetPrimaryModShortName  (int index);
 
-    public static native int        GetSideCount();
-    public static native String     GetSideName(int side);
+    public static native int        GetSideCount            ();
+    public static native String     GetSideName             (int side);
 
 
-    public static native int        OpenFileVFS(String name);
-    public static native void       CloseFileVFS(int handle);
-    public static native String     ReadFileVFS(int handle);
-    public static native int        FileSizeVFS(int handle);
+    public static native int        OpenFileVFS             (String name);
+    public static native void       CloseFileVFS            (int handle);
+    public static native String     ReadFileVFS             (int handle);
+    public static native int        FileSizeVFS             (int handle);
 
-    public static native int        InitFindVFS ();
-    public static native String     SearchVFS (String pattern);////////////
+    public static native int        InitFindVFS             ();
+    public static native String     SearchVFS               (String pattern);
     
-    public static native int        OpenArchive(String name);
-    public static native void       CloseArchive(int archive);
-    public static native int        FindFilesArchive(int archive, int cur, String nameBuf, int size);
+    public static native int        OpenArchive             (String name);
+    public static native void       CloseArchive            (int archive);
+    public static native int        FindFilesArchive        (int archive, int cur, String nameBuf, int size);
 
-    public static native int        OpenArchiveFile(int archive, String name);
-    public static native String     ReadArchiveFile(int archive, int handle);
-    public static native void       CloseArchiveFile(int archive, int handle);
-    public static native int        SizeArchiveFile(int archive, int handle);
+    public static native int        OpenArchiveFile         (int archive, String name);
+    public static native String     ReadArchiveFile         (int archive, int handle);
+    public static native void       CloseArchiveFile        (int archive, int handle);
+    public static native int        SizeArchiveFile         (int archive, int handle);
 
-    public static native String     GetDataDirs(boolean write);
+    public static native String     GetDataDirs             (boolean write);
 
-    public static native boolean    WriteMiniMap(String mapfile, String imagename, int miplevel);
+    public static native boolean    WriteMiniMap            (String mapfile, String imagename, int miplevel);
     
     // 0.76b1+ additions
     
@@ -180,47 +180,47 @@
     
     // Spring settings and configuration options
     
-    public static native void       SetSpringConfigFloat(String name, float value);
-    public static native void       SetSpringConfigInt(String name, int value);
-    public static native void       SetSpringConfigString(String name, String value);
+    public static native void       SetSpringConfigFloat    (String name, float value);
+    public static native void       SetSpringConfigInt      (String name, int value);
+    public static native void       SetSpringConfigString   (String name, String value);
     
-    public static native float      GetSpringConfigFloat(String name, float defvalue);
-    public static native int        GetSpringConfigInt(String name, int defvalue);
-    public static native String     GetSpringConfigString(String name, String defvalue);
+    public static native float      GetSpringConfigFloat    (String name, float defvalue);
+    public static native int        GetSpringConfigInt      (String name, int defvalue);
+    public static native String     GetSpringConfigString   (String name, String defvalue);
     
     
     // lua custom lobby settings
     
-    public static native int        GetMapOptionCount(String mapName);
-    public static native int        GetModOptionCount();
+    public static native int        GetMapOptionCount       (String mapName);
+    public static native int        GetModOptionCount       ();
     
-    public static native String     GetOptionKey(int optIndex);
-    public static native String     GetOptionName(int optIndex);
-    public static native String     GetOptionDesc(int optIndex);
-    public static native int        GetOptionType(int optIndex);
+    public static native String     GetOptionKey            (int optIndex);
+    public static native String     GetOptionName           (int optIndex);
+    public static native String     GetOptionDesc           (int optIndex);
+    public static native int        GetOptionType           (int optIndex);
     
     
     // boolean options
     
-    public static native int        GetOptionBoolDef(int optIndex);
+    public static native int        GetOptionBoolDef        (int optIndex);
     
     
     // Number Options
-    public static native float      GetOptionNumberDef(int optIndex);
-    public static native float      GetOptionNumberMin(int optIndex);
-    public static native float      GetOptionNumberMax(int optIndex);
-    public static native float      GetOptionNumberStep(int optIndex);
+    public static native float      GetOptionNumberDef      (int optIndex);
+    public static native float      GetOptionNumberMin      (int optIndex);
+    public static native float      GetOptionNumberMax      (int optIndex);
+    public static native float      GetOptionNumberStep     (int optIndex);
     
     // String options
-    public static native String     GetOptionStringDef(int optIndex);
-    public static native int        GetOptionStringMaxLen(int optIndex);
+    public static native String     GetOptionStringDef      (int optIndex);
+    public static native int        GetOptionStringMaxLen   (int optIndex);
     
     // List options
-    public static native int        GetOptionListCount(int optIndex);
-    public static native String     GetOptionListDef(int optIndex);
-    public static native String     GetOptionListItemKey(int optIndex, int itemIndex);
-    public static native String     GetOptionListItemName(int optIndex, int itemIndex);
-    public static native String     GetOptionListItemDesc(int optIndex, int itemIndex);
+    public static native int        GetOptionListCount      (int optIndex);
+    public static native String     GetOptionListDef        (int optIndex);
+    public static native String     GetOptionListItemKey    (int optIndex, int itemIndex);
+    public static native String     GetOptionListItemName   (int optIndex, int itemIndex);
+    public static native String     GetOptionListItemDesc   (int optIndex, int itemIndex);
     
     
 }

Modified: trunk/Lobby/AFLobby/src/aflobby/LMain.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/LMain.java	2008-02-01 22:23:02 UTC (rev 5441)
+++ trunk/Lobby/AFLobby/src/aflobby/LMain.java	2008-02-01 23:13:11 UTC (rev 5442)
@@ -100,6 +100,7 @@
     
     
     public void start (){
+        
         Runnable doWorkRunnable = new Runnable () {
             public void run () { setVisible (true); }
         };
@@ -112,8 +113,10 @@
         new Timer ().schedule (new UpdateTask (this),
             10,        //initial delay
             30);  //subsequent rate
+        
         Toasts.Init (&quot;&quot;);
         Agree.Init (this);
+        
         DoValidate ();
     }
     

Modified: trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTableModel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTableModel.java	2008-02-01 22:23:02 UTC (rev 5441)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTableModel.java	2008-02-01 23:13:11 UTC (rev 5442)
@@ -12,7 +12,6 @@
 
 import aflobby.CChannel;
 import aflobby.CPlayer;
-import aflobby.LMain;
 import aflobby.Misc;
 import java.util.ArrayList;
 import java.util.Iterator;
@@ -26,13 +25,10 @@
 public class CPlayerTableModel extends AbstractTableModel {
 
     
-    LMain LM;
-    //CChannelView cv;
     private String[] columns = {&quot;Flag&quot;,&quot;Rank&quot;,&quot;...&quot;,&quot;Username&quot;,&quot;Status&quot;};//{java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CBattleTableModel.Description&quot;), java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CBattleTableModel.Status&quot;), java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CBattleTableModel.Map&quot;), java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CBattleTableModel.Mod&quot;), java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CBattleTableModel.Host&quot;), java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CBattleTableModel.Players&quot;)}; //,&quot;ID&quot;&quot;Private?&quot;,
     public ArrayList&lt;CPlayer&gt; players = new ArrayList&lt;CPlayer&gt;();
 
-    public CPlayerTableModel(LMain L) {
-        LM = L;
+    public CPlayerTableModel() {
         //this.cv = cv;
     }
 

Added: trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.form	                        (rev 0)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.form	2008-02-01 23:13:11 UTC (rev 5442)
@@ -0,0 +1,94 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.3&quot; maxVersion=&quot;1.5&quot; type=&quot;org.netbeans.modules.form.forminfo.JPanelFormInfo&quot;&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_autoResourcing&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_autoSetComponentName&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_i18nAutoMode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_layoutCodeTarget&quot; type=&quot;java.lang.Integer&quot; value=&quot;1&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout&gt;
+    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;EmptySpace min=&quot;0&quot; pref=&quot;400&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;380&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jLabel4&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;UserSearch&quot; pref=&quot;289&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;EmptySpace min=&quot;0&quot; pref=&quot;300&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;UserSearch&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jLabel4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;252&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+  &lt;/Layout&gt;
+  &lt;SubComponents&gt;
+    &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;UserSearch&quot;&gt;
+      &lt;Events&gt;
+        &lt;EventHandler event=&quot;keyTyped&quot; listener=&quot;java.awt.event.KeyListener&quot; parameters=&quot;java.awt.event.KeyEvent&quot; handler=&quot;UserSearchKeyTyped&quot;/&gt;
+      &lt;/Events&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel4&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;background&quot; type=&quot;java.awt.Color&quot; editor=&quot;org.netbeans.beaninfo.editors.ColorEditor&quot;&gt;
+          &lt;Color blue=&quot;ff&quot; green=&quot;ff&quot; red=&quot;ff&quot; type=&quot;rgb&quot;/&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.editors2.FontEditor&quot;&gt;
+          &lt;FontInfo relative=&quot;true&quot;&gt;
+            &lt;Font component=&quot;jLabel4&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;1&quot;/&gt;
+          &lt;/FontInfo&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+          &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CChannelView.jLabel4.text&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane3&quot;&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+      &lt;/AuxValues&gt;
+
+      &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;UserTable&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+              &lt;Connection code=&quot;usertablemodel&quot; type=&quot;code&quot;/&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;rowSorter&quot; type=&quot;javax.swing.RowSorter&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+              &lt;Connection code=&quot;playertablesorter&quot; type=&quot;code&quot;/&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;showHorizontalLines&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;Events&gt;
+            &lt;EventHandler event=&quot;mousePressed&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;UserTableMousePressed&quot;/&gt;
+          &lt;/Events&gt;
+        &lt;/Component&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.java	                        (rev 0)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.java	2008-02-01 23:13:11 UTC (rev 5442)
@@ -0,0 +1,189 @@
+/*
+ * CPlayerTablePanel.java
+ *
+ * Created on 01 February 2008, 22:13
+ */
+
+package aflobby.UI;
+
+import aflobby.CPlayer;
+import aflobby.CPlayerDataWindow;
+import aflobby.LMain;
+import aflobby.helpers.AlphanumComparator;
+import java.util.regex.PatternSyntaxException;
+import javax.swing.RowFilter;
+import javax.swing.SwingUtilities;
+import javax.swing.table.TableRowSorter;
+
+/**
+ *
+ * @author  tarendai-std
+ */
+public class CPlayerTablePanel extends javax.swing.JPanel {
+    
+    CPlayerTableModel usertablemodel = null;
+    TableRowSorter&lt;CPlayerTableModel&gt; playertablesorter = null;
+    LMain LM;
+    
+    /** Creates new form CPlayerTablePanel
+     * @param LM 
+     */
+    public CPlayerTablePanel(LMain LM) {
+        this.LM = LM;
+        Runnable doWorkRunnable = new Runnable() {
+
+                public void run() {
+
+                    usertablemodel = new CPlayerTableModel();
+
+                    playertablesorter = new TableRowSorter&lt;CPlayerTableModel&gt;(usertablemodel);
+                    playertablesorter.setComparator(3, new AlphanumComparator());
+
+                    initComponents();
+                }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+
+    }
+    
+    public CPlayerTablePanel() {
+        Runnable doWorkRunnable = new Runnable() {
+
+                public void run() {
+
+                    usertablemodel = new CPlayerTableModel();
+
+                    playertablesorter = new TableRowSorter&lt;CPlayerTableModel&gt;(usertablemodel);
+                    playertablesorter.setComparator(3, new AlphanumComparator());
+
+                    initComponents();
+                }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+
+    }
+    
+    /**
+     * 
+     * @param p
+     */
+    public void AddPlayer(CPlayer p){
+        //
+        usertablemodel.AddPlayer(p);
+    }
+    
+    /**
+     * 
+     * @param p
+     */
+    public void RemovePlayer(CPlayer p){
+        usertablemodel.RemovePlayer(p);
+    }
+    
+    /**
+     * 
+     */
+    public void ClearPlayers(){
+        usertablemodel.clear();
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+
+        UserSearch = new javax.swing.JTextField();
+        jLabel4 = new javax.swing.JLabel();
+        jScrollPane3 = new javax.swing.JScrollPane();
+        UserTable = new javax.swing.JTable();
+
+        UserSearch.addKeyListener(new java.awt.event.KeyAdapter() {
+            public void keyTyped(java.awt.event.KeyEvent evt) {
+                UserSearchKeyTyped(evt);
+            }
+        });
+
+        jLabel4.setBackground(new java.awt.Color(255, 255, 255));
+        jLabel4.setFont(jLabel4.getFont().deriveFont(jLabel4.getFont().getSize()+1f));
+        java.util.ResourceBundle bundle = java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;); // NOI18N
+        jLabel4.setText(bundle.getString(&quot;CChannelView.jLabel4.text&quot;)); // NOI18N
+
+        UserTable.setModel(usertablemodel);
+        UserTable.setRowSorter(playertablesorter);
+        UserTable.setShowHorizontalLines(false);
+        UserTable.addMouseListener(new java.awt.event.MouseAdapter() {
+            public void mousePressed(java.awt.event.MouseEvent evt) {
+                UserTableMousePressed(evt);
+            }
+        });
+        jScrollPane3.setViewportView(UserTable);
+
+        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
+        this.setLayout(layout);
+        layout.setHorizontalGroup(
+            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGap(0, 400, Short.MAX_VALUE)
+            .addGroup(layout.createSequentialGroup()
+                .addContainerGap()
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                    .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
+                    .addGroup(layout.createSequentialGroup()
+                        .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                        .addComponent(UserSearch, javax.swing.GroupLayout.DEFAULT_SIZE, 289, Short.MAX_VALUE)))
+                .addContainerGap())
+        );
+        layout.setVerticalGroup(
+            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGap(0, 300, Short.MAX_VALUE)
+            .addGroup(layout.createSequentialGroup()
+                .addContainerGap()
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                    .addComponent(UserSearch, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
+                    .addComponent(jLabel4))
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 252, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+
+    private void UserSearchKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_UserSearchKeyTyped
+        Runnable doWorkRunnable = new Runnable() {
+            public void run() {
+                try {
+                    playertablesorter.setRowFilter(
+                            RowFilter.regexFilter(UserSearch.getText()));
+                } catch (PatternSyntaxException pse) {
+                    //System.err.println(&quot;Bad regex pattern&quot;);
+                }
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+    }//GEN-LAST:event_UserSearchKeyTyped
+
+    private void UserTableMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_UserTableMousePressed
+        if (evt.getClickCount() &gt; 1) {
+            String n = (String) UserTable.getValueAt(UserTable.getSelectedRow(), 3);
+            
+            CPlayer cp = LM.playermanager.GetPlayer(n);
+            if(cp == null){
+                return;
+            }
+            
+            aflobby.CPlayerDataWindow p = new CPlayerDataWindow(LM, cp);
+            p.setVisible(true);
+        }
+    }//GEN-LAST:event_UserTableMousePressed
+    
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    private javax.swing.JTextField UserSearch;
+    private javax.swing.JTable UserTable;
+    private javax.swing.JLabel jLabel4;
+    private javax.swing.JScrollPane jScrollPane3;
+    // End of variables declaration//GEN-END:variables
+    
+}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000248.html">[Taspring-linux-commit] r5441 - in trunk: rts/Game rts/System	tools/DedicatedServer
</A></li>
	<LI>Next message: <A HREF="000250.html">[Taspring-linux-commit] r5443 - trunk/Lobby/TASServer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#249">[ date ]</a>
              <a href="thread.html#249">[ thread ]</a>
              <a href="subject.html#249">[ subject ]</a>
              <a href="author.html#249">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
