<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r5450 - in trunk/Lobby/AFLobby/src/aflobby:	. UI helpers
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5450%20-%20in%20trunk/Lobby/AFLobby/src/aflobby%3A%0A%09.%20UI%20helpers&In-Reply-To=%3CE1JLoMx-0007aZ-L9%40proserver.fnord.lan%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000256.html">
   <LINK REL="Next"  HREF="000258.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r5450 - in trunk/Lobby/AFLobby/src/aflobby:	. UI helpers</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5450%20-%20in%20trunk/Lobby/AFLobby/src/aflobby%3A%0A%09.%20UI%20helpers&In-Reply-To=%3CE1JLoMx-0007aZ-L9%40proserver.fnord.lan%3E"
       TITLE="[Taspring-linux-commit] r5450 - in trunk/Lobby/AFLobby/src/aflobby:	. UI helpers">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Mon Feb  4 00:35:27 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000256.html">[Taspring-linux-commit] r5449 - trunk/Lobby/TASServer
</A></li>
        <LI>Next message: <A HREF="000258.html">[Taspring-linux-commit] r5451 - in trunk/Lobby/AFLobby/src/aflobby:	. UI helpers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#257">[ date ]</a>
              <a href="thread.html#257">[ thread ]</a>
              <a href="subject.html#257">[ subject ]</a>
              <a href="author.html#257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tnowell
Date: 2008-02-04 00:35:27 +0100 (Mon, 04 Feb 2008)
New Revision: 5450

Added:
   trunk/Lobby/AFLobby/src/aflobby/CAFLExceptionHandler.java
   trunk/Lobby/AFLobby/src/aflobby/UI/CErrorWindow.form
   trunk/Lobby/AFLobby/src/aflobby/UI/CErrorWindow.java
Modified:
   trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form
   trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java
   trunk/Lobby/AFLobby/src/aflobby/CChannel.form
   trunk/Lobby/AFLobby/src/aflobby/CChannel.java
   trunk/Lobby/AFLobby/src/aflobby/CChannelView.form
   trunk/Lobby/AFLobby/src/aflobby/CChannelView.java
   trunk/Lobby/AFLobby/src/aflobby/CEvent.java
   trunk/Lobby/AFLobby/src/aflobby/CPlayers.java
   trunk/Lobby/AFLobby/src/aflobby/CSettings.form
   trunk/Lobby/AFLobby/src/aflobby/CSettings.java
   trunk/Lobby/AFLobby/src/aflobby/Main.java
   trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.form
   trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.java
   trunk/Lobby/AFLobby/src/aflobby/helpers/CStringHelper.java
   trunk/Lobby/AFLobby/src/aflobby/languages.properties
   trunk/Lobby/AFLobby/src/aflobby/languages_fr_FR.properties
   trunk/Lobby/AFLobby/src/aflobby/languages_zh_CN.properties
Log:
- added an error window
- added an uncaught exception handler
- minor comment typos fixed
- fixed playertable crashes due to adding players before the GUI was initialized
- added NEWUSRADDED event
- added says checkbox option
- changed the slashes to make it compatible with current tasclient.
- removed an unused arraylist that was beign maintained but served no functional purpose
- columns in the playertable are now set with maximum widths to improve display
- added playertables to channels and removed the list controls they replaced.

Added: trunk/Lobby/AFLobby/src/aflobby/CAFLExceptionHandler.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CAFLExceptionHandler.java	                        (rev 0)
+++ trunk/Lobby/AFLobby/src/aflobby/CAFLExceptionHandler.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -0,0 +1,36 @@
+/*
+ * To change this template, choose Tools | Templates
+ * and open the template in the editor.
+ */
+
+package aflobby;
+
+import aflobby.UI.CErrorWindow;
+import java.awt.Frame;
+import java.lang.Thread.UncaughtExceptionHandler;
+import javax.swing.JFrame;
+import javax.swing.JOptionPane;
+
+/**
+ *
+ * @author tarendai-std
+ */
+public class CAFLExceptionHandler  implements UncaughtExceptionHandler {
+    
+  public void uncaughtException(Thread t, Throwable e) {
+    // Here you should have a more robust, permanent record of problems
+    //JOptionPane.showMessageDialog(findActiveFrame(),
+    //    e.toString(), &quot;Exception Occurred&quot;, JOptionPane.OK_OPTION);
+    CErrorWindow ew = new CErrorWindow(e);
+    e.printStackTrace();
+  }
+  private Frame findActiveFrame() {
+    Frame[] frames = JFrame.getFrames();
+    for (int i = 0; i &lt; frames.length; i++) {
+      if (frames[i].isVisible()) {
+        return frames[i];
+      }
+    }
+    return null;
+  }
+}
\ No newline at end of file

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form	2008-02-03 23:35:27 UTC (rev 5450)
@@ -11,9 +11,7 @@
   &lt;/NonVisualComponents&gt;
   &lt;Properties&gt;
     &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
-    &lt;Property name=&quot;title&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-      &lt;PlainString value=&quot;BattleName :: Server&quot;/&gt;
-    &lt;/Property&gt;
+    &lt;Property name=&quot;title&quot; type=&quot;java.lang.String&quot; value=&quot;BattleName :: Server&quot; noResource=&quot;true&quot;/&gt;
     &lt;Property name=&quot;extendedState&quot; type=&quot;int&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
       &lt;Connection code=&quot;MAXIMIZED_BOTH&quot; type=&quot;code&quot;/&gt;
     &lt;/Property&gt;
@@ -86,9 +84,9 @@
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;jToolBar2&quot; alignment=&quot;0&quot; pref=&quot;747&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
+                                  &lt;Component id=&quot;jToolBar2&quot; alignment=&quot;0&quot; pref=&quot;523&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
                                   &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;683&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;459&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                       &lt;Component id=&quot;sayButton&quot; min=&quot;-2&quot; pref=&quot;58&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
                                   &lt;/Group&gt;
@@ -110,7 +108,7 @@
                               &lt;/Group&gt;
                           &lt;/Group&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jSplitPane1&quot; pref=&quot;750&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jSplitPane1&quot; pref=&quot;526&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                               &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;jLabel7&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
                           &lt;/Group&gt;
@@ -125,13 +123,13 @@
                       &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                           &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jSplitPane1&quot; pref=&quot;401&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jSplitPane1&quot; pref=&quot;409&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;jToolBar2&quot; min=&quot;-2&quot; pref=&quot;25&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                               &lt;Component id=&quot;jLabel7&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace pref=&quot;139&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace pref=&quot;147&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;LockToggle&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
@@ -267,13 +265,13 @@
                               &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;ColourPanel&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
                           &lt;/Group&gt;
-                          &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;748&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;524&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                     &lt;/DimensionLayout&gt;
                     &lt;DimensionLayout dim=&quot;1&quot;&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jScrollPane2&quot; pref=&quot;173&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane2&quot; pref=&quot;177&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
@@ -396,9 +394,7 @@
                         &lt;Property name=&quot;icon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
                           &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/colourpickerwheel16.png&quot;/&gt;
                         &lt;/Property&gt;
-                        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                          &lt;PlainString value=&quot;Change Colour&quot;/&gt;
-                        &lt;/Property&gt;
+                        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Change Colour&quot; noResource=&quot;true&quot;/&gt;
                         &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
                           &lt;Insets value=&quot;[2, 6, 2, 6]&quot;/&gt;
                         &lt;/Property&gt;
@@ -422,7 +418,7 @@
                       &lt;Layout&gt;
                         &lt;DimensionLayout dim=&quot;0&quot;&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;EmptySpace min=&quot;0&quot; pref=&quot;285&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace min=&quot;0&quot; pref=&quot;61&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                         &lt;/DimensionLayout&gt;
                         &lt;DimensionLayout dim=&quot;1&quot;&gt;
@@ -727,9 +723,7 @@
               &lt;SubComponents&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton1&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;PlainString value=&quot;Fix Teams&quot;/&gt;
-                    &lt;/Property&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Fix Teams&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton1ActionPerformed&quot;/&gt;
@@ -737,9 +731,7 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton2&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;PlainString value=&quot;Force FFA&quot;/&gt;
-                    &lt;/Property&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Force FFA&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton2ActionPerformed&quot;/&gt;
@@ -931,9 +923,7 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;AddAIButton&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Add AI&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Add AI&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;AddAIButtonActionPerformed&quot;/&gt;
@@ -943,23 +933,17 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel9&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Add an AI&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Add an AI&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel10&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Modify an AI&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Modify an AI&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel11&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;AI to edit:&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;AI to edit:&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;MyAIsCombo&quot;&gt;
@@ -975,9 +959,7 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;RemoveAIButton&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Remove This AI&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Remove This AI&quot; noResource=&quot;true&quot;/&gt;
                 &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
@@ -986,9 +968,7 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;UpdateAIButton&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Update AI&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Update AI&quot; noResource=&quot;true&quot;/&gt;
                 &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
@@ -997,9 +977,7 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel12&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;AI Race:&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;AI Race:&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;EditAIRaceCombo&quot;&gt;
@@ -1012,9 +990,7 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel13&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;AI Ally:&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;AI Ally:&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;EditAIAllyCombo&quot;&gt;
@@ -1046,23 +1022,17 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel14&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Choose an AI:&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Choose an AI:&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel15&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Pick a name:&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Pick a name:&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel16&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;(no spaces in AI names)&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;(no spaces in AI names)&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;AddAIRaceCombo&quot;&gt;
@@ -1074,16 +1044,12 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel17&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;AI Race:&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;AI Race:&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel18&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Difficulty:&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Difficulty:&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;jComboBox5&quot;&gt;
@@ -1103,9 +1069,7 @@
                 &lt;Property name=&quot;icon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
                   &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/colourpickerwheel.png&quot;/&gt;
                 &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Change Colour&quot;/&gt;
-                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Change Colour&quot; noResource=&quot;true&quot;/&gt;
                 &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
@@ -1362,9 +1326,7 @@
                     &lt;/Property&gt;
                     &lt;Property name=&quot;lineWrap&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
                     &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;PlainString value=&quot;Please press refresh below&quot;/&gt;
-                    &lt;/Property&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Please press refresh below&quot; noResource=&quot;true&quot;/&gt;
                     &lt;Property name=&quot;wrapStyleWord&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -2951,6 +2951,8 @@
                 value = v.toString();
             }
             
+            key = key.replaceAll(&quot;/&quot;, &quot;\\\\&quot;);
+            
             String pair = &quot;\t&quot;+key+&quot;=&quot;+value;
             s += pair;
         }

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannel.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannel.form	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannel.form	2008-02-03 23:35:27 UTC (rev 5450)
@@ -266,10 +266,9 @@
               &lt;Layout&gt;
                 &lt;DimensionLayout dim=&quot;0&quot;&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;285&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
                               &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                                   &lt;Component id=&quot;jButton1&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;37&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -278,13 +277,14 @@
                                   &lt;Component id=&quot;jButton5&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;27&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;
                               &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;channelPrivateLabel&quot; pref=&quot;134&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;channelPrivateLabel&quot; pref=&quot;161&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;playerCountLabel&quot; min=&quot;-2&quot; pref=&quot;145&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
+                      &lt;Component id=&quot;playerTablePanel&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;
                 &lt;DimensionLayout dim=&quot;1&quot;&gt;
@@ -302,47 +302,12 @@
                               &lt;Component id=&quot;channelPrivateLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jScrollPane2&quot; pref=&quot;375&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;playerTablePanel&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;
               &lt;/Layout&gt;
               &lt;SubComponents&gt;
-                &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-                      &lt;Dimension value=&quot;[253, 23]&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-                  &lt;/AuxValues&gt;
-
-                  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-                  &lt;SubComponents&gt;
-                    &lt;Component class=&quot;javax.swing.JList&quot; name=&quot;ChannelPlayerList&quot;&gt;
-                      &lt;Properties&gt;
-                        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                          &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                        &lt;/Property&gt;
-                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ListModel&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                          &lt;Connection code=&quot;vmodel&quot; type=&quot;code&quot;/&gt;
-                        &lt;/Property&gt;
-                        &lt;Property name=&quot;selectionMode&quot; type=&quot;int&quot; value=&quot;0&quot;/&gt;
-                        &lt;Property name=&quot;toolTipText&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                          &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CChannel.ChannelPlayerList.toolTipText&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                        &lt;/Property&gt;
-                      &lt;/Properties&gt;
-                      &lt;Events&gt;
-                        &lt;EventHandler event=&quot;mousePressed&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;ChannelPlayerListMousePressed&quot;/&gt;
-                      &lt;/Events&gt;
-                      &lt;AuxValues&gt;
-                        &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;PlayerListRenderer renderer2= new PlayerListRenderer ();&amp;#xa;ChannelPlayerList.setCellRenderer (renderer2);&quot;/&gt;
-                      &lt;/AuxValues&gt;
-                    &lt;/Component&gt;
-                  &lt;/SubComponents&gt;
-                &lt;/Container&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton1&quot;&gt;
                   &lt;Properties&gt;
                     &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
@@ -415,6 +380,24 @@
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton5ActionPerformed&quot;/&gt;
                   &lt;/Events&gt;
                 &lt;/Component&gt;
+                &lt;Container class=&quot;aflobby.UI.CPlayerTablePanel&quot; name=&quot;playerTablePanel&quot;&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;playerTablePanel.LM = LM;&quot;/&gt;
+                  &lt;/AuxValues&gt;
+
+                  &lt;Layout&gt;
+                    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace min=&quot;0&quot; pref=&quot;332&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                    &lt;/DimensionLayout&gt;
+                    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace min=&quot;0&quot; pref=&quot;386&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                    &lt;/DimensionLayout&gt;
+                  &lt;/Layout&gt;
+                &lt;/Container&gt;
               &lt;/SubComponents&gt;
             &lt;/Container&gt;
             &lt;Component class=&quot;aflobby.CChatPanel&quot; name=&quot;chatpanel&quot;&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannel.java	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannel.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -19,7 +19,9 @@
 import java.io.IOException;
 import java.lang.reflect.InvocationTargetException;
 import java.net.URL;
+import java.text.DateFormat;
 import java.util.Date;
+import java.util.Locale;
 import java.util.TreeMap;
 import java.util.logging.FileHandler;
 import java.util.logging.Level;
@@ -40,11 +42,6 @@
     public String lastsent = &quot;&quot;;
     public String Channel = &quot;&quot;;
     public LMain LM;
-    //public DefaultListModel listModel;
-    //public SortedListModel SListModel;
-    //public Vector&lt;String&gt; players = new Vector&lt;String&gt;();
-    //public JAutoDownScroll jas;
-    //public Timer jast;
     public boolean inchannel = true;
     //private boolean wipenext;
     public static ImageIcon[] ranks = null;
@@ -53,8 +50,6 @@
     
     FileHandler txtLog = null;
     Logger logger = null;
-    CVectorListModel vmodel = new CVectorListModel();
-
     
     public static ImageIcon GetFlagIcon(String flag){
         if(flag == null){
@@ -143,7 +138,17 @@
             logger = Logger.getLogger(&quot;channel.&quot; + channel);
             logger.setLevel(Level.INFO);
             logger.addHandler(txtLog);
-            logger.info(&quot;logging started&quot;);
+            
+            Date today;
+            String dateOut;
+            DateFormat formatter;
+
+            formatter = DateFormat.getDateTimeInstance(DateFormat.FULL,
+                                   DateFormat.LONG);
+            today = new Date();
+            dateOut = formatter.format(today);
+
+            logger.info(&quot;logging started at &quot;+dateOut + &quot; &quot; + Locale.getDefault());
             /*CEvent e = new CEvent ();
             e.data = new String[2];
             e.data[1] = Channel;
@@ -388,7 +393,7 @@
     }
 
     public void NewEvent(final CEvent e) {
-        if (e.data[0].equalsIgnoreCase(&quot;SAID&quot;)) {
+        if (e.IsEvent(&quot;SAID&quot;)) {
             if (e.data[1].equalsIgnoreCase(Channel)) {
                 // Add!!!!!
                 final String time = CStringHelper.getHTMLTimestamp();
@@ -420,7 +425,7 @@
                 };
                 SwingUtilities.invokeLater(doWorkRunnable);
             }
-        } else if (e.data[0].equalsIgnoreCase(&quot;SAIDEX&quot;)) {
+        } else if (e.IsEvent(&quot;SAIDEX&quot;)) {
             if (e.data[1].equalsIgnoreCase(Channel)) {
                 // Add!!!!! SAIDEX main w00t heheh
                 String time = CStringHelper.getHTMLTimestamp();
@@ -480,8 +485,8 @@
                 topic = aflobby.CChatPanel.ParseChatText(topic);
                 topic = &quot;&lt;font face=\&quot;Bitstream Vera Sans Mono, Andale Mono, &quot; +
                         &quot;Consolas, Courier New, Courier, Monospace\&quot; size=\&quot;3\&quot;&gt;&quot; +
-                        &quot;&lt;b&gt;Topic : &lt;br&gt;&quot; + topic + &quot;&lt;br&gt; set by :&quot; + e.data[2] + 
-                        &quot; on &quot; + topicset.toString() + &quot;&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&quot;;
+                        &quot;Topic : &lt;br&gt;&quot; + topic + &quot;&lt;br&gt; set by :&quot; + e.data[2] + 
+                        &quot; on &quot; + topicset.toString() + &quot;&lt;/font&gt;&lt;br&gt;&quot;;
                 
                 if (chatpanel != null) {
                     chatpanel.AddRawHTML(topic);
@@ -520,11 +525,13 @@
 
     void RemovePlayer(final String player, final String reason) {
 
-        //players.remove (player);
+        //final 
         Runnable doWorkRunnable = new Runnable() {
 
             public void run() {
-                vmodel.removeElement(player);
+                CPlayer p = LM.playermanager.GetPlayer(player);
+                playerTablePanel.RemovePlayer(p);
+                
                 if (FilJoin.isSelected() == false) {
                     String r = &quot;&quot;;
                     if (reason.equalsIgnoreCase(&quot;&quot;) == false) {
@@ -534,7 +541,8 @@
                             &quot;size=\&quot;3\&quot; color=\&quot;996699\&quot;&gt;&lt;b&gt; &quot; + player + &quot; has&quot; +
                             &quot; Left #&quot; + Channel + &quot; &quot; + r + &quot;&lt;/b&gt;&lt;/font&gt;&quot;);
                 }
-                int i = vmodel.getSize();
+                
+                int i = playerTablePanel.PlayerCount();
                 playerCountLabel.setText(i +&quot; Players in Channel&quot;);
             }
         };
@@ -545,7 +553,7 @@
         Runnable doWorkRunnable = new Runnable() {
 
             public void run() {
-                vmodel.removeAllElements();
+                playerTablePanel.ClearPlayers();
                 playerCountLabel.setText(&quot;0 Players in Channel&quot;);
                 //jList1.removeAll ();
             }
@@ -564,15 +572,18 @@
         //}else{
 //        final Object[] o = players.toArray ().clone ();
 //        Arrays.sort (o,new Comparer ());
-        Runnable doWorkRunnable = new Runnable() {
+        
+        //final 
+        //if (p != null) {
+            Runnable doWorkRunnable = new Runnable() {
 
-            public void run() {
-                vmodel.addElement(player);
-                //jList1.setListData (o);
-                if (!JustJoined) {
-                    if (FilJoin.isSelected() == false) {
-                        CPlayer p = LM.playermanager.GetPlayer(player);
-                        if (p != null) {
+                public void run() {
+                    CPlayer p = LM.playermanager.GetPlayer(player);
+                    playerTablePanel.AddPlayer(p);
+
+                    if (!JustJoined) {
+                        if (FilJoin.isSelected() == false) {
+                        
                             String flag=&quot; &quot;;
                             if(Boolean.valueOf(CUserSettings.GetValue(&quot;ui.channelview.userjoinflags&quot;, &quot;false&quot;))){
                                 flag = p.GetFlagHTML();
@@ -586,12 +597,14 @@
                                     &quot; #&quot; + Channel + &quot;&lt;/b&gt;&lt;/font&gt;&quot;);
                         }
                     }
+                
+                    int i = playerTablePanel.PlayerCount();
+                    playerCountLabel.setText(i +&quot; Players in Channel&quot;);
                 }
-                int i = vmodel.getSize();
-                playerCountLabel.setText(i +&quot; Players in Channel&quot;);
-            }
-        };
-        SwingUtilities.invokeLater(doWorkRunnable);
+            };
+            SwingUtilities.invokeLater(doWorkRunnable);
+        //}
+        
     }
     //}
 
@@ -616,13 +629,13 @@
         smileybox = new aflobby.UI.CSmileyCombo();
         jSplitPane1 = new javax.swing.JSplitPane();
         jPanel5 = new javax.swing.JPanel();
-        jScrollPane2 = new javax.swing.JScrollPane();
-        ChannelPlayerList = new javax.swing.JList();
         jButton1 = new javax.swing.JButton();
         jButton2 = new javax.swing.JButton();
         playerCountLabel = new javax.swing.JLabel();
         channelPrivateLabel = new javax.swing.JLabel();
         jButton5 = new javax.swing.JButton();
+        playerTablePanel = new aflobby.UI.CPlayerTablePanel();
+        playerTablePanel.LM = LM;
         /*
         chatpanel = //;
         */
@@ -764,21 +777,6 @@
 
         jPanel5.setMaximumSize(new java.awt.Dimension(500, 32767));
 
-        jScrollPane2.setMinimumSize(new java.awt.Dimension(253, 23));
-
-        ChannelPlayerList.setFont(CUISettings.GetFont(12,false));
-        ChannelPlayerList.setModel(vmodel);
-        ChannelPlayerList.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
-        ChannelPlayerList.setToolTipText(bundle.getString(&quot;CChannel.ChannelPlayerList.toolTipText&quot;)); // NOI18N
-        PlayerListRenderer renderer2= new PlayerListRenderer ();
-        ChannelPlayerList.setCellRenderer (renderer2);
-        ChannelPlayerList.addMouseListener(new java.awt.event.MouseAdapter() {
-            public void mousePressed(java.awt.event.MouseEvent evt) {
-                ChannelPlayerListMousePressed(evt);
-            }
-        });
-        jScrollPane2.setViewportView(ChannelPlayerList);
-
         jButton1.setFont(CUISettings.GetFont(12,false));
         jButton1.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/images/UI/close_orange.gif&quot;))); // NOI18N
         jButton1.setText(bundle.getString(&quot;CChannel.jButton1.text&quot;)); // NOI18N
@@ -820,14 +818,24 @@
             }
         });
 
+        javax.swing.GroupLayout playerTablePanelLayout = new javax.swing.GroupLayout(playerTablePanel);
+        playerTablePanel.setLayout(playerTablePanelLayout);
+        playerTablePanelLayout.setHorizontalGroup(
+            playerTablePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGap(0, 332, Short.MAX_VALUE)
+        );
+        playerTablePanelLayout.setVerticalGroup(
+            playerTablePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGap(0, 386, Short.MAX_VALUE)
+        );
+
         javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
         jPanel5.setLayout(jPanel5Layout);
         jPanel5Layout.setHorizontalGroup(
             jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel5Layout.createSequentialGroup()
+            .addGroup(jPanel5Layout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
-                    .addComponent(jScrollPane2, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 257, Short.MAX_VALUE)
                     .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel5Layout.createSequentialGroup()
                         .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 37, javax.swing.GroupLayout.PREFERRED_SIZE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
@@ -835,10 +843,11 @@
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addComponent(jButton5, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE))
                     .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel5Layout.createSequentialGroup()
-                        .addComponent(channelPrivateLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 106, Short.MAX_VALUE)
+                        .addComponent(channelPrivateLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 161, Short.MAX_VALUE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addComponent(playerCountLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE)))
                 .addContainerGap())
+            .addComponent(playerTablePanel, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
         );
 
         jPanel5Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jButton1, jButton2, jButton5});
@@ -856,8 +865,7 @@
                     .addComponent(playerCountLabel)
                     .addComponent(channelPrivateLabel))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 375, Short.MAX_VALUE)
-                .addContainerGap())
+                .addComponent(playerTablePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
         );
 
         jPanel5Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {jButton1, jButton2, jButton5});
@@ -920,16 +928,6 @@
         this.ExitChannel();
     }//GEN-LAST:event_jButton1MouseReleased
 
-    private void ChannelPlayerListMousePressed (java.awt.event.MouseEvent evt) {//GEN-FIRST:event_ChannelPlayerListMousePressed
-// TODO add your handling code here:
-        if (evt.getClickCount() &gt; 1) {
-            String n = (String) ChannelPlayerList.getSelectedValue ();
-            aflobby.CPlayerDataWindow p = new CPlayerDataWindow(
-                    LM, LM.playermanager.GetPlayer(n));
-            p.setVisible(true);
-        }
-    }//GEN-LAST:event_ChannelPlayerListMousePressed
-
     private void jButton3MousePressed (java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton3MousePressed
         SendMessage();
     }//GEN-LAST:event_jButton3MousePressed
@@ -976,7 +974,6 @@
     }//GEN-LAST:event_MultiLineMenuItemActionPerformed
 
     // Variables declaration - do not modify//GEN-BEGIN:variables
-    private javax.swing.JList ChannelPlayerList;
     private javax.swing.JMenuItem ClearChatMenuItem;
     private javax.swing.JToggleButton FilJoin;
     private javax.swing.JToggleButton JAutoScrollToggle;
@@ -989,13 +986,13 @@
     private javax.swing.JButton jButton5;
     private javax.swing.JPanel jPanel2;
     private javax.swing.JPanel jPanel5;
-    private javax.swing.JScrollPane jScrollPane2;
     private javax.swing.JScrollPane jScrollPane3;
     private javax.swing.JSplitPane jSplitPane1;
     private javax.swing.JSplitPane jSplitPane2;
     private javax.swing.JTextArea messageinput;
     private javax.swing.JPopupMenu optionsPopupMenu;
     private javax.swing.JLabel playerCountLabel;
+    private aflobby.UI.CPlayerTablePanel playerTablePanel;
     private aflobby.UI.CSmileyCombo smileybox;
     // End of variables declaration//GEN-END:variables
 

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannelView.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannelView.form	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannelView.form	2008-02-03 23:35:27 UTC (rev 5450)
@@ -112,7 +112,6 @@
                           &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Component id=&quot;jScrollPane4&quot; alignment=&quot;0&quot; pref=&quot;813&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;WelcomeLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;465&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                                   &lt;Component id=&quot;number_of_battles&quot; min=&quot;-2&quot; pref=&quot;272&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -155,6 +154,7 @@
                                   &lt;Component id=&quot;jButton15&quot; min=&quot;-2&quot; pref=&quot;190&quot; max=&quot;-2&quot; attributes=&quot;2&quot;/&gt;
                                   &lt;EmptySpace min=&quot;-2&quot; pref=&quot;132&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;
+                              &lt;Component id=&quot;WelcomeLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;595&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
@@ -163,9 +163,9 @@
                 &lt;DimensionLayout dim=&quot;1&quot;&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;WelcomeLabel&quot; min=&quot;-2&quot; pref=&quot;34&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
                               &lt;Component id=&quot;jButton8&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; pref=&quot;41&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;jButton4&quot; linkSize=&quot;1&quot; pref=&quot;41&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
@@ -397,20 +397,15 @@
                 &lt;/Component&gt;
               &lt;/SubComponents&gt;
             &lt;/Container&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;PlayerList&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;Events&gt;
-                &lt;EventHandler event=&quot;componentShown&quot; listener=&quot;java.awt.event.ComponentListener&quot; parameters=&quot;java.awt.event.ComponentEvent&quot; handler=&quot;PlayerListComponentShown&quot;/&gt;
-              &lt;/Events&gt;
+            &lt;Container class=&quot;aflobby.UI.CPlayerTablePanel&quot; name=&quot;playerTablePanel&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;playerTablePanel.LM = LM;&quot;/&gt;
+              &lt;/AuxValues&gt;
               &lt;Constraints&gt;
                 &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
-                  &lt;JTabbedPaneConstraints tabName=&quot;Player List&quot;&gt;
+                  &lt;JTabbedPaneConstraints tabName=&quot;PlayerList&quot;&gt;
                     &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CChannelView.PlayerList.TabConstraints.tabTitle&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
+                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CChannelView.playerTablePanel.TabConstraints.tabTitle&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                     &lt;/Property&gt;
                   &lt;/JTabbedPaneConstraints&gt;
                 &lt;/Constraint&gt;
@@ -419,83 +414,15 @@
               &lt;Layout&gt;
                 &lt;DimensionLayout dim=&quot;0&quot;&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;813&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;jLabel4&quot; pref=&quot;154&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;UserSearch&quot; pref=&quot;655&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
+                      &lt;EmptySpace min=&quot;0&quot; pref=&quot;833&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;
                 &lt;DimensionLayout dim=&quot;1&quot;&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;UserSearch&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jLabel4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jScrollPane3&quot; min=&quot;-2&quot; pref=&quot;224&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;271&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
+                      &lt;EmptySpace min=&quot;0&quot; pref=&quot;532&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;
               &lt;/Layout&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;UserSearch&quot;&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;keyTyped&quot; listener=&quot;java.awt.event.KeyListener&quot; parameters=&quot;java.awt.event.KeyEvent&quot; handler=&quot;UserSearchKeyTyped&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel4&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;background&quot; type=&quot;java.awt.Color&quot; editor=&quot;org.netbeans.beaninfo.editors.ColorEditor&quot;&gt;
-                      &lt;Color blue=&quot;ff&quot; green=&quot;ff&quot; red=&quot;ff&quot; type=&quot;rgb&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.editors2.FontEditor&quot;&gt;
-                      &lt;FontInfo relative=&quot;true&quot;&gt;
-                        &lt;Font component=&quot;jLabel4&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;1&quot;/&gt;
-                      &lt;/FontInfo&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;labelFor&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                      &lt;ComponentRef name=&quot;UserSearch&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CChannelView.jLabel4.text&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-                &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane3&quot;&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-                  &lt;/AuxValues&gt;
-
-                  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-                  &lt;SubComponents&gt;
-                    &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;UserTable&quot;&gt;
-                      &lt;Properties&gt;
-                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                          &lt;Connection code=&quot;usertablemodel&quot; type=&quot;code&quot;/&gt;
-                        &lt;/Property&gt;
-                        &lt;Property name=&quot;rowSorter&quot; type=&quot;javax.swing.RowSorter&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                          &lt;Connection code=&quot;playertablesorter&quot; type=&quot;code&quot;/&gt;
-                        &lt;/Property&gt;
-                        &lt;Property name=&quot;showHorizontalLines&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-                      &lt;/Properties&gt;
-                      &lt;Events&gt;
-                        &lt;EventHandler event=&quot;mousePressed&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;UserTableMousePressed&quot;/&gt;
-                      &lt;/Events&gt;
-                    &lt;/Component&gt;
-                  &lt;/SubComponents&gt;
-                &lt;/Container&gt;
-              &lt;/SubComponents&gt;
             &lt;/Container&gt;
             &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel3&quot;&gt;
               &lt;Properties&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannelView.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannelView.java	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannelView.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -6,7 +6,6 @@
 
 package aflobby;
 
-import aflobby.UI.CPlayerTableModel;
 import aflobby.UI.CUISettings;
 import aflobby.UI.CUserSettings;
 import aflobby.UI.CView;
@@ -22,16 +21,13 @@
 import java.util.Iterator;
 import java.util.TreeMap;
 import java.util.concurrent.ExecutionException;
-import java.util.regex.PatternSyntaxException;
 import javax.swing.DefaultComboBoxModel;
 import javax.swing.JTable;
-import javax.swing.RowFilter;
 import javax.swing.SpinnerNumberModel;
 import javax.swing.SwingUtilities;
 import javax.swing.SwingWorker;
 import javax.swing.table.DefaultTableCellRenderer;
 
-import javax.swing.table.TableRowSorter;
 import org.jvnet.lafwidget.LafWidget;
 import org.jvnet.lafwidget.tabbed.DefaultTabPreviewPainter;
 
@@ -47,8 +43,6 @@
     CChannelList  cChannelList = null;
     CSettings cSettings = null;
     CBattleList cBattleList = null;
-    CPlayerTableModel usertablemodel = null;
-    TableRowSorter&lt;CPlayerTableModel&gt; playertablesorter = null;
     
 
     public CChannelView(LMain L) {
@@ -60,12 +54,6 @@
 
                 public void run() {
 
-                    usertablemodel = new CPlayerTableModel();
-                    
-
-                    playertablesorter = new TableRowSorter&lt;CPlayerTableModel&gt;(usertablemodel);
-                    playertablesorter.setComparator(3, new AlphanumComparator());
-
                     initComponents();
                     Initialize();
 
@@ -193,7 +181,13 @@
         UserTitle = &quot;Main lobby page&quot;;
     }
 
+    private void AddPlayer( CPlayer cPlayer ) {
+        
+        
+        playerTablePanel.AddPlayer(cPlayer);
+    }
 
+
     // public javax.swing.JPanel jPanel1aaaaa;
     //public javax.swing.JScrollPane jScrollPane1aaaa;
     /** This method is called from within the constructor to
@@ -225,11 +219,8 @@
         jButton4 = new javax.swing.JButton();
         jButton5 = new javax.swing.JButton();
         jButton8 = new javax.swing.JButton();
-        PlayerList = new javax.swing.JPanel();
-        UserSearch = new javax.swing.JTextField();
-        jLabel4 = new javax.swing.JLabel();
-        jScrollPane3 = new javax.swing.JScrollPane();
-        UserTable = new javax.swing.JTable();
+        playerTablePanel = new aflobby.UI.CPlayerTablePanel();
+        playerTablePanel.LM = LM;
         jPanel3 = new javax.swing.JPanel();
         HostBattleName = new javax.swing.JTextField();
         HostMaxPlayers = new javax.swing.JSpinner();
@@ -400,7 +391,6 @@
                 .addContainerGap()
                 .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                     .addComponent(jScrollPane4, javax.swing.GroupLayout.DEFAULT_SIZE, 813, Short.MAX_VALUE)
-                    .addComponent(WelcomeLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 465, javax.swing.GroupLayout.PREFERRED_SIZE)
                     .addGroup(jPanel7Layout.createSequentialGroup()
                         .addComponent(number_of_battles, javax.swing.GroupLayout.PREFERRED_SIZE, 272, javax.swing.GroupLayout.PREFERRED_SIZE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
@@ -433,7 +423,8 @@
                         .addComponent(jButton14, javax.swing.GroupLayout.DEFAULT_SIZE, 159, Short.MAX_VALUE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addComponent(jButton15, javax.swing.GroupLayout.PREFERRED_SIZE, 190, javax.swing.GroupLayout.PREFERRED_SIZE)
-                        .addGap(132, 132, 132)))
+                        .addGap(132, 132, 132))
+                    .addComponent(WelcomeLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 595, javax.swing.GroupLayout.PREFERRED_SIZE))
                 .addContainerGap())
         );
 
@@ -478,61 +469,18 @@
 
         tabpane.addTab(bundle.getString(&quot;CChannelView.jPanel7.TabConstraints.tabTitle_1&quot;), jPanel7); // NOI18N
 
-        PlayerList.setFont(CUISettings.GetFont(12,false));
-        PlayerList.addComponentListener(new java.awt.event.ComponentAdapter() {
-            public void componentShown(java.awt.event.ComponentEvent evt) {
-                PlayerListComponentShown(evt);
-            }
-        });
-
-        UserSearch.addKeyListener(new java.awt.event.KeyAdapter() {
-            public void keyTyped(java.awt.event.KeyEvent evt) {
-                UserSearchKeyTyped(evt);
-            }
-        });
-
-        jLabel4.setBackground(new java.awt.Color(255, 255, 255));
-        jLabel4.setFont(jLabel4.getFont().deriveFont(jLabel4.getFont().getSize()+1f));
-        jLabel4.setLabelFor(UserSearch);
-        jLabel4.setText(bundle.getString(&quot;CChannelView.jLabel4.text&quot;)); // NOI18N
-
-        UserTable.setModel(usertablemodel);
-        UserTable.setRowSorter(playertablesorter);
-        UserTable.setShowHorizontalLines(false);
-        UserTable.addMouseListener(new java.awt.event.MouseAdapter() {
-            public void mousePressed(java.awt.event.MouseEvent evt) {
-                UserTableMousePressed(evt);
-            }
-        });
-        jScrollPane3.setViewportView(UserTable);
-
-        javax.swing.GroupLayout PlayerListLayout = new javax.swing.GroupLayout(PlayerList);
-        PlayerList.setLayout(PlayerListLayout);
-        PlayerListLayout.setHorizontalGroup(
-            PlayerListLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PlayerListLayout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(PlayerListLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
-                    .addComponent(jScrollPane3, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 813, Short.MAX_VALUE)
-                    .addGroup(PlayerListLayout.createSequentialGroup()
-                        .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, 154, Short.MAX_VALUE)
-                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addComponent(UserSearch, javax.swing.GroupLayout.DEFAULT_SIZE, 655, Short.MAX_VALUE)))
-                .addContainerGap())
+        javax.swing.GroupLayout playerTablePanelLayout = new javax.swing.GroupLayout(playerTablePanel);
+        playerTablePanel.setLayout(playerTablePanelLayout);
+        playerTablePanelLayout.setHorizontalGroup(
+            playerTablePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGap(0, 833, Short.MAX_VALUE)
         );
-        PlayerListLayout.setVerticalGroup(
-            PlayerListLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(PlayerListLayout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(PlayerListLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
-                    .addComponent(UserSearch, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
-                    .addComponent(jLabel4))
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 224, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap(271, Short.MAX_VALUE))
+        playerTablePanelLayout.setVerticalGroup(
+            playerTablePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGap(0, 532, Short.MAX_VALUE)
         );
 
-        tabpane.addTab(bundle.getString(&quot;CChannelView.PlayerList.TabConstraints.tabTitle&quot;), PlayerList); // NOI18N
+        tabpane.addTab(bundle.getString(&quot;CChannelView.playerTablePanel.TabConstraints.tabTitle&quot;), playerTablePanel); // NOI18N
 
         jPanel3.setEnabled(CUnitSyncJNIBindings.loaded);
         jPanel3.setFont(CUISettings.GetFont(12,false));
@@ -794,9 +742,6 @@
         LM.connection.SendLine (&quot;MYSTATUS &quot; + status);
         }*/
     }//GEN-LAST:event_StatusComboActionPerformed
-
-    private void PlayerListComponentShown (java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_PlayerListComponentShown
-    }//GEN-LAST:event_PlayerListComponentShown
     public boolean search_changed = false;
 
     private void LogOutButtonMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_LogOutButtonMouseReleased
@@ -956,32 +901,6 @@
         CUserSettings.PutValue(&quot;UI.lasthosted.name&quot;, HostBattleName.getText());
         
     }//GEN-LAST:event_HostButtonActionPerformed
-
-    private void UserTableMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_UserTableMousePressed
-        if (evt.getClickCount() &gt; 1) {
-            String n = (String) UserTable.getValueAt(UserTable.getSelectedRow(), 3);
-            CPlayer cp = LM.playermanager.GetPlayer(n);
-            if(cp == null){
-                return;
-            }
-            aflobby.CPlayerDataWindow p = new CPlayerDataWindow(LM, cp);
-            p.setVisible(true);
-        }
-    }//GEN-LAST:event_UserTableMousePressed
-
-    private void UserSearchKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_UserSearchKeyTyped
-        Runnable doWorkRunnable = new Runnable () {
-            public void run () {
-                try {
-                    playertablesorter.setRowFilter(
-                    RowFilter.regexFilter(UserSearch.getText()));
-                } catch (PatternSyntaxException pse) {
-                    //System.err.println(&quot;Bad regex pattern&quot;);
-                }
-            }
-        };
-        SwingUtilities.invokeLater (doWorkRunnable);
-    }//GEN-LAST:event_UserSearchKeyTyped
     
     boolean started = false;
     int fredrawcounter = 80;
@@ -1211,17 +1130,10 @@
             c1.Init(LM, e.data[1]);
             newchannels = true;
 
-        } else if (e.IsEvent(&quot;ADDUSER&quot;)) {
-            AddPlayer(e.data[1]);
+        } else if (e.IsEvent(CEvent.NEWUSRADDED)) {
+            AddPlayer((CPlayer)e.a);
         } else if (e.IsEvent(&quot;ACCEPTED&quot;)) {
-            String s = aflobby.UI.CUserSettings.GetStartScript();
-            if (s.equals(&quot;&quot;) == false) {
-                String[] lines = s.split(&quot;\n&quot;);
-                for (int h = 0; h &lt; lines.length; ++h) {
-                    //System.out.println(lines[h]);
-                    startupcommands.add(lines[h]);
-                }
-            }
+            
             LM.protocol.SendTraffic(&quot;GETINGAMETIME&quot;);
             SwingWorker worker = new SwingWorker&lt;Boolean, Void&gt;() {
 
@@ -1250,13 +1162,19 @@
             RefreshContent();
             LM.SetFocus(this);
             
+            String s = aflobby.UI.CUserSettings.GetStartScript();
+            if (s.equals(&quot;&quot;) == false) {
+                String[] lines = s.split(&quot;\n&quot;);
+                for (int h = 0; h &lt; lines.length; ++h) {
+                    //System.out.println(lines[h]);
+                    startupcommands.add(lines[h]);
+                }
+            }
             
+            
             Runnable doWorkRunnable = new Runnable() {
                 public void run() {
-                    usertablemodel.clear();
-                    UserTable.getColumnModel().getColumn(0).setMaxWidth(50);
-                    UserTable.getColumnModel().getColumn(1).setMaxWidth(50);
-                    UserTable.getColumnModel().getColumn(2).setMaxWidth(50);
+                    playerTablePanel.ClearPlayers();
                     
                 }
             };
@@ -1267,7 +1185,7 @@
                 public void run() {
                     for(String s : LM.playermanager.activeplayers){
                         CPlayer p = LM.playermanager.GetPlayer(s);
-                        usertablemodel.AddPlayer(p);
+                        playerTablePanel.AddPlayer(p);
                     }
                 }
             };
@@ -1390,7 +1308,7 @@
         };
         SwingUtilities.invokeLater(doWorkRunnable);
     }
-    ArrayList&lt;String&gt; players = new ArrayList&lt;String&gt;();
+    //ArrayList&lt;String&gt; players = new ArrayList&lt;String&gt;();
 
     void AddPlayer(String player) {
         if (player.equals(&quot;&quot;)) {
@@ -1398,12 +1316,9 @@
         } else if (player == null) {
             return;
         }
-        if (players.contains(player) == false) {
-            synchronized (players) {
-                players.add(player);
-            }
-            usertablemodel.AddPlayer(LM.playermanager.GetPlayer(player));
-        }
+
+        playerTablePanel.AddPlayer(LM.playermanager.GetPlayer(player));
+        
         search_changed = true;
         //ReDrawPlayerList ();
     }
@@ -1414,18 +1329,13 @@
         } else if (player == null) {
             return;
         }
-        synchronized (players) {
-            players.remove(player);
-        }
-        usertablemodel.RemovePlayer(LM.playermanager.GetPlayer(player));
+        playerTablePanel.RemovePlayer(LM.playermanager.GetPlayer(player));
         search_changed = true;
         //ReDrawPlayerList ();
     }
 
     void ClearPlayers() {
-        synchronized (players) {
-            players.clear();
-        }
+        this.playerTablePanel.ClearPlayers();
     }
 
 
@@ -1495,12 +1405,9 @@
     private javax.swing.JComboBox HostRankLimitCombo;
     private javax.swing.JTextField HostUDPPort;
     private javax.swing.JButton LogOutButton;
-    private javax.swing.JPanel PlayerList;
     private javax.swing.JTextField SearchBox;
     private javax.swing.JSplitPane SplitPane;
     private javax.swing.JComboBox StatusCombo;
-    private javax.swing.JTextField UserSearch;
-    private javax.swing.JTable UserTable;
     private javax.swing.JLabel WelcomeLabel;
     private javax.swing.JButton hostReloadmodlist;
     private javax.swing.JLabel ingame_label;
@@ -1520,7 +1427,6 @@
     private javax.swing.JLabel jLabel11;
     private javax.swing.JLabel jLabel12;
     private javax.swing.JLabel jLabel2;
-    private javax.swing.JLabel jLabel4;
     private javax.swing.JLabel jLabel5;
     private javax.swing.JLabel jLabel6;
     private javax.swing.JLabel jLabel7;
@@ -1528,11 +1434,11 @@
     private javax.swing.JLabel jLabel9;
     private javax.swing.JPanel jPanel3;
     private javax.swing.JPanel jPanel7;
-    private javax.swing.JScrollPane jScrollPane3;
     private javax.swing.JScrollPane jScrollPane4;
     private javax.swing.JLabel ladderLabel;
     private javax.swing.JComboBox laddercomboBox;
     private javax.swing.JLabel number_of_battles;
+    private aflobby.UI.CPlayerTablePanel playerTablePanel;
     public javax.swing.JTabbedPane tabpane;
     private javax.swing.ButtonGroup tabplacementGroup;
     // End of variables declaration//GEN-END:variables

Modified: trunk/Lobby/AFLobby/src/aflobby/CEvent.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CEvent.java	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CEvent.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -33,7 +33,10 @@
     public final static String TIMER =&quot;TIMER&quot;;
     
     
+    public final static String NEWUSRADDED = &quot;NEWUSRADDED&quot;;
     
+    
+    
     public final static String CHANNELCLOSED =&quot;channelclose&quot;;
     public final static String CHANNELREAD =&quot;channeltabread&quot;;
     public final static String CHANNELUNREAD =&quot;channeltabunread&quot;;

Modified: trunk/Lobby/AFLobby/src/aflobby/CPlayers.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CPlayers.java	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CPlayers.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -89,7 +89,7 @@
     
     
     public void NewEvent (final CEvent e){
-        if(e.IsEvent(&quot;ADDUSER&quot;)==true){
+        if(e.IsEvent(&quot;ADDUSER&quot;)){
             activeplayers.add (e.data[1]);
             if(inactiveplayers.contains (e.data[1])==false){
                 inactiveplayers.remove (e.data[1]);
@@ -97,6 +97,9 @@
                 p.setCpu(e.data[3] + &quot;Mhz&quot;);
                 p.setCountry(e.data[2]);
                 players.add (p);
+                CEvent ne = new CEvent(CEvent.NEWUSRADDED);
+                ne.a = p;
+                LM.core.NewEvent(ne);
             }
         }else if(e.IsEvent(&quot;REMOVEUSER&quot;)){
             activeplayers.remove (e.data[1]);

Modified: trunk/Lobby/AFLobby/src/aflobby/CSettings.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CSettings.form	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CSettings.form	2008-02-03 23:35:27 UTC (rev 5450)
@@ -1007,9 +1007,9 @@
         &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
-              &lt;JTabbedPaneConstraints tabName=&quot;Chat Colours&quot;&gt;
+              &lt;JTabbedPaneConstraints tabName=&quot;Chat&quot;&gt;
                 &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;PlainString value=&quot;Chat Colours&quot;/&gt;
+                  &lt;PlainString value=&quot;Chat&quot;/&gt;
                 &lt;/Property&gt;
                 &lt;Property name=&quot;tabIcon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
                   &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/colourpickerwheel16.png&quot;/&gt;
@@ -1028,6 +1028,7 @@
                       &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;jCheckBox4&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;TextColourCombo&quot; linkSize=&quot;9&quot; alignment=&quot;0&quot; pref=&quot;791&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                               &lt;Component id=&quot;jScrollPane2&quot; linkSize=&quot;9&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                               &lt;Component id=&quot;jLabel18&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -1058,7 +1059,9 @@
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;jLabel19&quot; min=&quot;-2&quot; pref=&quot;111&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;236&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;jCheckBox4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;211&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;
@@ -1136,6 +1139,17 @@
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;At the moment only a few of the text types are customizeable but in the next release the full spectrum should be available.&lt;br&gt;&amp;#xa;&lt;br&gt;&amp;#xa;The preview pane will also contain something useful in the next release.&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;jCheckBox4&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;selected&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                      &lt;Connection code=&quot;CUserSettings.GetValue(&quot;ui.chat.says&quot;, &quot;true&quot;).equals(&quot;false&quot;)&quot; type=&quot;code&quot;/&gt;
+                    &lt;/Property&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Show Says:&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;Events&gt;
+                    &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jCheckBox4ActionPerformed&quot;/&gt;
+                  &lt;/Events&gt;
+                &lt;/Component&gt;
               &lt;/SubComponents&gt;
             &lt;/Container&gt;
           &lt;/SubComponents&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CSettings.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CSettings.java	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/CSettings.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -252,6 +252,7 @@
         jButton18 = new javax.swing.JButton();
         TextColourPanel = new javax.swing.JPanel();
         jLabel19 = new javax.swing.JLabel();
+        jCheckBox4 = new javax.swing.JCheckBox();
         LadderPane = new javax.swing.JPanel();
         jLabel5 = new javax.swing.JLabel();
         ladderPassBox = new javax.swing.JTextField();
@@ -909,6 +910,14 @@
 
         jLabel19.setText(&quot;&lt;html&gt;At the moment only a few of the text types are customizeable but in the next release the full spectrum should be available.&lt;br&gt;\n&lt;br&gt;\nThe preview pane will also contain something useful in the next release.&quot;); // NOI18N
 
+        jCheckBox4.setSelected(CUserSettings.GetValue(&quot;ui.chat.says&quot;, &quot;true&quot;).equals(&quot;false&quot;));
+        jCheckBox4.setText(&quot;Show Says:&quot;);
+        jCheckBox4.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jCheckBox4ActionPerformed(evt);
+            }
+        });
+
         javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
         jPanel2.setLayout(jPanel2Layout);
         jPanel2Layout.setHorizontalGroup(
@@ -916,6 +925,7 @@
             .addGroup(jPanel2Layout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                    .addComponent(jCheckBox4)
                     .addComponent(TextColourCombo, 0, 791, Short.MAX_VALUE)
                     .addComponent(jScrollPane2)
                     .addComponent(jLabel18)
@@ -944,14 +954,16 @@
                     .addComponent(jButton18))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addComponent(jLabel19, javax.swing.GroupLayout.PREFERRED_SIZE, 111, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap(236, Short.MAX_VALUE))
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addComponent(jCheckBox4)
+                .addContainerGap(211, Short.MAX_VALUE))
         );
 
         jPanel2Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {TextColourPanel, jButton18});
 
         jScrollPane1.setViewportView(jPanel2);
 
-        settingsTabPane.addTab(&quot;Chat Colours&quot;, new javax.swing.ImageIcon(getClass().getResource(&quot;/images/UI/colourpickerwheel16.png&quot;)), jScrollPane1); // NOI18N
+        settingsTabPane.addTab(&quot;Chat&quot;, new javax.swing.ImageIcon(getClass().getResource(&quot;/images/UI/colourpickerwheel16.png&quot;)), jScrollPane1); // NOI18N
 
         jLabel5.setText(&quot;Ladder password&quot;); // NOI18N
 
@@ -1333,6 +1345,11 @@
         });
     }//GEN-LAST:event_jButton20ActionPerformed
 
+    private void jCheckBox4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCheckBox4ActionPerformed
+        CUserSettings.GetValue(&quot;ui.chat.says&quot;, &quot;true&quot;).equals(&quot;false&quot;);
+        CUserSettings.PutValue(&quot;ui.chat.says&quot;, &quot;&quot;+jCheckBox4.isSelected());
+    }//GEN-LAST:event_jCheckBox4ActionPerformed
+
     // Variables declaration - do not modify//GEN-BEGIN:variables
     private javax.swing.JCheckBox BattlePositionCheckBox;
     private javax.swing.JTextPane CLogonScriptText;
@@ -1376,6 +1393,7 @@
     private javax.swing.JCheckBox jCheckBox1;
     private javax.swing.JCheckBox jCheckBox2;
     private javax.swing.JCheckBox jCheckBox3;
+    private javax.swing.JCheckBox jCheckBox4;
     private javax.swing.JEditorPane jEditorPane1;
     private javax.swing.JLabel jLabel1;
     private javax.swing.JLabel jLabel10;

Modified: trunk/Lobby/AFLobby/src/aflobby/Main.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/Main.java	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/Main.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -189,7 +189,7 @@
      * displaying debug data, and the filesystem functions change behaviour to
      * use the active workign directory to prevent IDEs suffering.
      * 
-     * chat - This palces AFLobby in chatmode. All tabs referencing battles are
+     * chat - This places AFLobby in chatmode. All tabs referencing battles are
      * removed and all attempts to load and use unitsync are skipped. This
      * should be used by users running fof of usb drives or who want a lobby
      * client without requiring a spring install.
@@ -197,7 +197,7 @@
      * @param args the command line arguments
      */
     public static void main (String[] args) {
-        // TODO code application logic here
+
         for (String s : args){
             if(s.equalsIgnoreCase(&quot;netbeans&quot;)){
                 dev_environment = true;
@@ -209,6 +209,7 @@
                 return;
             }
         }
+        Thread.setDefaultUncaughtExceptionHandler(new CAFLExceptionHandler());
         
         javax.swing.SwingUtilities.invokeLater (new Runnable () {
             public void run () {

Added: trunk/Lobby/AFLobby/src/aflobby/UI/CErrorWindow.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/CErrorWindow.form	                        (rev 0)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/CErrorWindow.form	2008-02-03 23:35:27 UTC (rev 5450)
@@ -0,0 +1,84 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.5&quot; maxVersion=&quot;1.5&quot; type=&quot;org.netbeans.modules.form.forminfo.JFrameFormInfo&quot;&gt;
+  &lt;Properties&gt;
+    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
+    &lt;Property name=&quot;title&quot; type=&quot;java.lang.String&quot; value=&quot;UnCaught Exception&quot;/&gt;
+    &lt;Property name=&quot;locationByPlatform&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+  &lt;/Properties&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_autoResourcing&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_autoSetComponentName&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_i18nAutoMode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_layoutCodeTarget&quot; type=&quot;java.lang.Integer&quot; value=&quot;1&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout&gt;
+    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jLabel2&quot; alignment=&quot;0&quot; pref=&quot;631&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;631&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jLabel1&quot; alignment=&quot;0&quot; pref=&quot;631&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+              &lt;Component id=&quot;jLabel1&quot; min=&quot;-2&quot; pref=&quot;36&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace type=&quot;unrelated&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jLabel2&quot; min=&quot;-2&quot; pref=&quot;14&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace type=&quot;unrelated&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jScrollPane1&quot; pref=&quot;274&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+  &lt;/Layout&gt;
+  &lt;SubComponents&gt;
+    &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+      &lt;/AuxValues&gt;
+
+      &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JTextPane&quot; name=&quot;jTextPane1&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+              &lt;Connection code=&quot;msg&quot; type=&quot;code&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+        &lt;/Component&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel1&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.editors2.FontEditor&quot;&gt;
+          &lt;FontInfo relative=&quot;true&quot;&gt;
+            &lt;Font component=&quot;jLabel1&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;10&quot;/&gt;
+          &lt;/FontInfo&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Uncaught Exception&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel2&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Please report this to darkstars.co.uk for fixing, and make sure you have the latest version of aflobby&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/Lobby/AFLobby/src/aflobby/UI/CErrorWindow.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/CErrorWindow.java	                        (rev 0)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/CErrorWindow.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -0,0 +1,108 @@
+/*
+ * CErrorWindow.java
+ *
+ * Created on 03 February 2008, 22:55
+ */
+
+package aflobby.UI;
+
+import javax.swing.SwingUtilities;
+
+/**
+ *
+ * @author  tarendai-std
+ */
+public class CErrorWindow extends javax.swing.JFrame {
+    Throwable e;
+    String msg;
+    /** Creates new form CErrorWindow
+     * @param e 
+     */
+    public CErrorWindow(Throwable e) {
+        this.e = e;
+        msg = e.toString()+&quot;\n&quot;;
+        msg += e.getLocalizedMessage()+&quot;\n&quot;;
+        for(StackTraceElement se : e.getStackTrace()){
+            msg += &quot;\t&quot;+se.toString()+&quot;\n&quot;;
+        }
+        Runnable doWorkRunnable = new Runnable() {
+
+                    public void run() {
+                        initComponents();
+                        setVisible(true);
+                    }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+
+        jScrollPane1 = new javax.swing.JScrollPane();
+        jTextPane1 = new javax.swing.JTextPane();
+        jLabel1 = new javax.swing.JLabel();
+        jLabel2 = new javax.swing.JLabel();
+
+        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
+        setTitle(&quot;UnCaught Exception&quot;);
+        setLocationByPlatform(true);
+
+        jTextPane1.setText(msg);
+        jScrollPane1.setViewportView(jTextPane1);
+
+        jLabel1.setFont(jLabel1.getFont().deriveFont(jLabel1.getFont().getSize()+10f));
+        jLabel1.setText(&quot;Uncaught Exception&quot;);
+
+        jLabel2.setText(&quot;&lt;html&gt;Please report this to darkstars.co.uk for fixing, and make sure you have the latest version of aflobby&quot;);
+
+        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
+        getContentPane().setLayout(layout);
+        layout.setHorizontalGroup(
+            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
+                .addContainerGap()
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
+                    .addComponent(jLabel2, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 631, Short.MAX_VALUE)
+                    .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 631, Short.MAX_VALUE)
+                    .addComponent(jLabel1, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 631, Short.MAX_VALUE))
+                .addContainerGap())
+        );
+        layout.setVerticalGroup(
+            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
+                .addContainerGap()
+                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
+                .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 14, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
+                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 274, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String args[]) {
+        //java.awt.EventQueue.invokeLater(new Runnable() {
+        //    public void run() {
+        //        new CErrorWindow().setVisible(true);
+        //    }
+        //});
+    }
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    private javax.swing.JLabel jLabel1;
+    private javax.swing.JLabel jLabel2;
+    private javax.swing.JScrollPane jScrollPane1;
+    private javax.swing.JTextPane jTextPane1;
+    // End of variables declaration//GEN-END:variables
+    
+}

Modified: trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.form	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.form	2008-02-03 23:35:27 UTC (rev 5450)
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
 
-&lt;Form version=&quot;1.3&quot; maxVersion=&quot;1.5&quot; type=&quot;org.netbeans.modules.form.forminfo.JPanelFormInfo&quot;&gt;
+&lt;Form version=&quot;1.5&quot; maxVersion=&quot;1.5&quot; type=&quot;org.netbeans.modules.form.forminfo.JPanelFormInfo&quot;&gt;
   &lt;AuxValues&gt;
     &lt;AuxValue name=&quot;FormSettings_autoResourcing&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
     &lt;AuxValue name=&quot;FormSettings_autoSetComponentName&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
@@ -15,15 +15,14 @@
   &lt;Layout&gt;
     &lt;DimensionLayout dim=&quot;0&quot;&gt;
       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;EmptySpace min=&quot;0&quot; pref=&quot;400&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
               &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;380&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;457&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jLabel4&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;UserSearch&quot; pref=&quot;289&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jLabel4&quot; min=&quot;-2&quot; pref=&quot;61&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace type=&quot;unrelated&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;UserSearch&quot; pref=&quot;386&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
               &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -32,12 +31,11 @@
     &lt;/DimensionLayout&gt;
     &lt;DimensionLayout dim=&quot;1&quot;&gt;
       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;EmptySpace min=&quot;0&quot; pref=&quot;300&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Component id=&quot;UserSearch&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Component id=&quot;jLabel4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;UserSearch&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
               &lt;/Group&gt;
               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
               &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;252&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
@@ -82,7 +80,6 @@
             &lt;Property name=&quot;rowSorter&quot; type=&quot;javax.swing.RowSorter&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
               &lt;Connection code=&quot;playertablesorter&quot; type=&quot;code&quot;/&gt;
             &lt;/Property&gt;
-            &lt;Property name=&quot;showHorizontalLines&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
           &lt;/Properties&gt;
           &lt;Events&gt;
             &lt;EventHandler event=&quot;mousePressed&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;UserTableMousePressed&quot;/&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.java	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/CPlayerTablePanel.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -10,9 +10,11 @@
 import aflobby.CPlayerDataWindow;
 import aflobby.LMain;
 import aflobby.helpers.AlphanumComparator;
+import java.util.ArrayList;
 import java.util.regex.PatternSyntaxException;
 import javax.swing.RowFilter;
 import javax.swing.SwingUtilities;
+import javax.swing.table.TableColumnModel;
 import javax.swing.table.TableRowSorter;
 
 /**
@@ -23,7 +25,8 @@
     
     CPlayerTableModel usertablemodel = null;
     TableRowSorter&lt;CPlayerTableModel&gt; playertablesorter = null;
-    LMain LM;
+    ArrayList&lt;CPlayer&gt; players = new ArrayList&lt;CPlayer&gt;();
+    public LMain LM;
     
     /** Creates new form CPlayerTablePanel
      * @param LM 
@@ -35,6 +38,9 @@
                 public void run() {
 
                     usertablemodel = new CPlayerTableModel();
+                    for(CPlayer p : players){
+                        usertablemodel.AddPlayer(p);
+                    }
 
                     playertablesorter = new TableRowSorter&lt;CPlayerTableModel&gt;(usertablemodel);
                     playertablesorter.setComparator(3, new AlphanumComparator());
@@ -52,41 +58,77 @@
                 public void run() {
 
                     usertablemodel = new CPlayerTableModel();
+                    for(CPlayer p : players){
+                        usertablemodel.AddPlayer(p);
+                    }
 
                     playertablesorter = new TableRowSorter&lt;CPlayerTableModel&gt;(usertablemodel);
                     playertablesorter.setComparator(3, new AlphanumComparator());
+                }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+        
+        Runnable doWorkRunnable1 = new Runnable() {
 
+                public void run() {
                     initComponents();
                 }
         };
-        SwingUtilities.invokeLater(doWorkRunnable);
+        SwingUtilities.invokeLater(doWorkRunnable1);
+        
+        Runnable doWorkRunnable2 = new Runnable() {
 
+                public void run() {
+                    TableColumnModel c = UserTable.getColumnModel();
+                    c.getColumn(0).setMaxWidth(28);
+                    c.getColumn(1).setMaxWidth(28);
+                    c.getColumn(2).setMaxWidth(28);
+                    c.getColumn(4).setMaxWidth(40);
+                }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable2);
+
     }
     
     /**
      * 
      * @param p
      */
-    public void AddPlayer(CPlayer p){
+    public void AddPlayer(final CPlayer p){
         //
-        usertablemodel.AddPlayer(p);
+        players.add(p);
+        if(usertablemodel != null){
+            usertablemodel.AddPlayer(p);
+        }
     }
     
     /**
      * 
      * @param p
      */
-    public void RemovePlayer(CPlayer p){
-        usertablemodel.RemovePlayer(p);
+    public void RemovePlayer(final CPlayer p){
+        players.add(p);
+        if(usertablemodel != null){
+            usertablemodel.RemovePlayer(p);
+        }
     }
     
     /**
      * 
      */
     public void ClearPlayers(){
-        usertablemodel.clear();
+        if(usertablemodel != null) {
+            usertablemodel.clear();
+        }
+        players.clear();
+        
     }
+
     
+    public int PlayerCount(){
+        return players.size();
+    }
+    
     /** This method is called from within the constructor to
      * initialize the form.
      * WARNING: Do NOT modify this code. The content of this method is
@@ -113,7 +155,6 @@
 
         UserTable.setModel(usertablemodel);
         UserTable.setRowSorter(playertablesorter);
-        UserTable.setShowHorizontalLines(false);
         UserTable.addMouseListener(new java.awt.event.MouseAdapter() {
             public void mousePressed(java.awt.event.MouseEvent evt) {
                 UserTableMousePressed(evt);
@@ -125,25 +166,23 @@
         this.setLayout(layout);
         layout.setHorizontalGroup(
             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGap(0, 400, Short.MAX_VALUE)
             .addGroup(layout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
+                    .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 457, Short.MAX_VALUE)
                     .addGroup(layout.createSequentialGroup()
-                        .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addComponent(UserSearch, javax.swing.GroupLayout.DEFAULT_SIZE, 289, Short.MAX_VALUE)))
+                        .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 61, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
+                        .addComponent(UserSearch, javax.swing.GroupLayout.DEFAULT_SIZE, 386, Short.MAX_VALUE)))
                 .addContainerGap())
         );
         layout.setVerticalGroup(
             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGap(0, 300, Short.MAX_VALUE)
             .addGroup(layout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
-                    .addComponent(UserSearch, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
-                    .addComponent(jLabel4))
+                    .addComponent(jLabel4)
+                    .addComponent(UserSearch, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 252, Short.MAX_VALUE)
                 .addContainerGap())

Modified: trunk/Lobby/AFLobby/src/aflobby/helpers/CStringHelper.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/helpers/CStringHelper.java	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/helpers/CStringHelper.java	2008-02-03 23:35:27 UTC (rev 5450)
@@ -8,6 +8,7 @@
 import aflobby.CTextColours;
 import aflobby.ColourHelper;
 import aflobby.Misc;
+import aflobby.UI.CUserSettings;
 import java.awt.Color;
 import java.security.MessageDigest;
 import java.security.NoSuchAlgorithmException;
@@ -29,7 +30,12 @@
     }
     
     public static String getUserChat(String user){
-        return user +&quot; &quot;+java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CPrivateMessageWindow._says:&quot;);
+        if(CUserSettings.GetValue(&quot;ui.chat.says&quot;,&quot;true&quot;).equalsIgnoreCase(&quot;true&quot;)){
+            return user +&quot; &quot;+java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CPrivateMessageWindow._says:&quot;);
+        }else{
+            return user+&quot; &quot;;
+            
+        }
         //
     }
     

Modified: trunk/Lobby/AFLobby/src/aflobby/languages.properties
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/languages.properties	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/languages.properties	2008-02-03 23:35:27 UTC (rev 5450)
@@ -237,8 +237,6 @@
 
 CChannelView.FServerMessages.contentType=text/html
 
-CChannelView.PlayerList.TabConstraints.tabTitle=Player List
-
 CChannelView.jPanel5.TabConstraints.tabTitle=On Login
 
 CChannelView.CLogonScriptText.text=click reload to edit
@@ -262,8 +260,6 @@
 
 CChannelView.jLabel8.text=Password
 
-CChannelView.jLabel4.text=Search for user\:
-
 CChannelView.jPanel3.TabConstraints.tabTitle=Host Game
 
 CChannelView.jPanel4.TabConstraints.tabTitle=Battles
@@ -305,8 +301,6 @@
 
 CChannel.JAutoScrollToggle.text=AutoScroll
 CChannel.FilJoin.text=Filter Join/Leave
-
-CChannel.ChannelPlayerList.toolTipText=Double click on a users name to \nopen a private message
 CChannel.jButton2.text=
 
 CToast.title=Messages
@@ -334,7 +328,7 @@
 CChannelView.jButton4.text=Get Help
 CChannel.playerCountLabel.text=0 Players in Channel
 CChannel.channelPrivateLabel.text=private channel
-CChannelView.jButton5.text=Show Raw Traffic Window
+CChannelView.jButton5.text=Toggle Raw Traffic Window
 CChannelView.jButton8.text_1=Report Bug
 CChannelView.ShowMenu.text=Show/Filter
 CChannelView.jLabel2.text_1=Game Engine
@@ -350,3 +344,5 @@
 AFLobby=
 CChannelView.jPanel7.TabConstraints.tabTitle_1=Start
 CChannel.MutliLineToggle.text=Multiline message emulation
+CChannelView.playerTablePanel.TabConstraints.tabTitle=PlayerList
+CChannelView.jLabel4.text=Search

Modified: trunk/Lobby/AFLobby/src/aflobby/languages_fr_FR.properties
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/languages_fr_FR.properties	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/languages_fr_FR.properties	2008-02-03 23:35:27 UTC (rev 5450)
@@ -178,8 +178,6 @@
 
 CChannelView.jTabbedPane1.TabConstraints.tabTitle=Arrangements
 
-CChannelView.PlayerList.TabConstraints.tabTitle=Liste de joueur
-
 CChannelView.jPanel5.TabConstraints.tabTitle=Sur l'ouverture
 
 CChannelView.CLogonScriptText.text=recharge de clic \u00E0 \u00E9diter
@@ -206,8 +204,6 @@
 
 CChannelView.jLabel8.text=Mot de passe
 
-CChannelView.jLabel4.text=Recherche d'utilisateur \:
-
 CChannelView.jPanel3.TabConstraints.tabTitle=Jeu de centre serveur
 
 CChannelView.hostReloadmodlist.text=Liste de mod de recharge
@@ -238,8 +234,6 @@
 
 CChannel.FilJoin.text=Le filtre se joignent/messages de cong\u00E9
 
-CChannel.ChannelPlayerList.toolTipText=Le double clic sur \u00E0 de nom d'utilisateurs \n ouvrent un message priv\u00E9
-
 CChannel.jButton2.text=Joindre sur l'ouverture
 
 CToast.title=Messages

Modified: trunk/Lobby/AFLobby/src/aflobby/languages_zh_CN.properties
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/languages_zh_CN.properties	2008-02-03 14:06:03 UTC (rev 5449)
+++ trunk/Lobby/AFLobby/src/aflobby/languages_zh_CN.properties	2008-02-03 23:35:27 UTC (rev 5450)
@@ -242,8 +242,6 @@
 
 CChannelView.FServerMessages.contentType=text/html
 
-CChannelView.PlayerList.TabConstraints.tabTitle=\u00E7\u0090\u0083\u00E5\u0091\u0098\u00E5\u0090\u008D\u00E5\u008D\u0095
-
 CChannelView.jPanel5.TabConstraints.tabTitle=\u00E5\u0085\u00B3\u00E4\u00BA\u008E\u00E7\u0099\u00BB\u00E5\u00BD\u0095
 
 CChannelView.CLogonScriptText.text=\u00E7\u0082\u00B9\u00E5\u0087\u00BB\u00E5\u0088\u00B7\u00E6\u0096\u00B0\u00E7\u00BC\u0096\u00E8\u00BE\u0091
@@ -270,8 +268,6 @@
 
 CChannelView.jLabel8.text=\u00E5\u00AF\u0086\u00E7\u00A0\u0081
 
-CChannelView.jLabel4.text=\u00E6\u0090\u009C\u00E7\u00B4\u00A2\u00E7\u0094\u00A8\u00E6\u0088\u00B7\:
-
 CChannelView.jPanel3.TabConstraints.tabTitle=\u00E6\u00B8\u00B8\u00E6\u0088\u008F\u00E4\u00B8\u00BB\u00E6\u009C\u00BA
 
 CChannelView.hostReloadmodlist.text=\u00E5\u0088\u00B7\u00E6\u0096\u00B0\u00E5\u009B\u00BD\u00E9\u0098\u00B2\u00E9\u0083\u00A8\u00E5\u0090\u008D\u00E5\u008D\u0095
@@ -302,8 +298,6 @@
 
 CChannel.FilJoin.text=\u00E8\u00BF\u0087\u00E6\u00BB\u00A4\u00E5\u0099\u00A8\u00E5\u008A\u00A0\u00E5\u0085\u00A5\u00E5\u00B9\u00B6\u00E7\u0095\u0099\u00E8\u00A8\u0080
 
-CChannel.ChannelPlayerList.toolTipText=\u00E5\u008F\u008C\u00E5\u0087\u00BB\u00E7\u0094\u00A8\u00E6\u0088\u00B7\u00E5\u0090\u008D\u00E7\u00A7\u00B0\u00E5\u00BC\u0080\u00E8\u00AE\u00BE\u00E4\u00B8\u0080\u00E4\u00B8\u00AA\u00E7\u00A7\u0081\u00E4\u00BA\u00BA\u00E8\u00AE\u00AF\u00E6\u0081\u00AF
-
 CChannel.jButton2.text=\u00E6\u008A\u00A5\u00E5\u0090\u008D\u00E7\u0099\u00BB\u00E5\u00BD\u0095
 
 CToast.title=\u00E8\u00AE\u00AF\u00E6\u0081\u00AF


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000256.html">[Taspring-linux-commit] r5449 - trunk/Lobby/TASServer
</A></li>
	<LI>Next message: <A HREF="000258.html">[Taspring-linux-commit] r5451 - in trunk/Lobby/AFLobby/src/aflobby:	. UI helpers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#257">[ date ]</a>
              <a href="thread.html#257">[ thread ]</a>
              <a href="subject.html#257">[ subject ]</a>
              <a href="author.html#257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
