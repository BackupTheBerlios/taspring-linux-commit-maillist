<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r5440 - in trunk/Lobby/AFLobby: . nbproject	nbproject/private src/aflobby src/aflobby/UI	src/aflobby/UI/battle src/aflobby/protocol/tasserver
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5440%20-%20in%20trunk/Lobby/AFLobby%3A%20.%20nbproject%0A%09nbproject/private%20src/aflobby%20src/aflobby/UI%0A%09src/aflobby/UI/battle%20src/aflobby/protocol/tasserver&In-Reply-To=%3CE1JL46F-0005oA-7Y%40proserver.fnord.lan%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000246.html">
   <LINK REL="Next"  HREF="000248.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r5440 - in trunk/Lobby/AFLobby: . nbproject	nbproject/private src/aflobby src/aflobby/UI	src/aflobby/UI/battle src/aflobby/protocol/tasserver</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5440%20-%20in%20trunk/Lobby/AFLobby%3A%20.%20nbproject%0A%09nbproject/private%20src/aflobby%20src/aflobby/UI%0A%09src/aflobby/UI/battle%20src/aflobby/protocol/tasserver&In-Reply-To=%3CE1JL46F-0005oA-7Y%40proserver.fnord.lan%3E"
       TITLE="[Taspring-linux-commit] r5440 - in trunk/Lobby/AFLobby: . nbproject	nbproject/private src/aflobby src/aflobby/UI	src/aflobby/UI/battle src/aflobby/protocol/tasserver">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Fri Feb  1 23:11:07 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000246.html">[Taspring-linux-commit] r5439 - trunk/AI/Global/NTai/AI/NTai/Tasks
</A></li>
        <LI>Next message: <A HREF="000248.html">[Taspring-linux-commit] r5441 - in trunk: rts/Game rts/System	tools/DedicatedServer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#247">[ date ]</a>
              <a href="thread.html#247">[ thread ]</a>
              <a href="subject.html#247">[ subject ]</a>
              <a href="author.html#247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tnowell
Date: 2008-02-01 23:11:06 +0100 (Fri, 01 Feb 2008)
New Revision: 5440

Added:
   trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.form
   trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.java
Modified:
   trunk/Lobby/AFLobby/AFLVersion.txt
   trunk/Lobby/AFLobby/nbproject/private/private.properties
   trunk/Lobby/AFLobby/nbproject/project.properties
   trunk/Lobby/AFLobby/src/aflobby/CBattleList.form
   trunk/Lobby/AFLobby/src/aflobby/CBattleList.java
   trunk/Lobby/AFLobby/src/aflobby/CBattleModel.java
   trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form
   trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java
   trunk/Lobby/AFLobby/src/aflobby/CChannel.form
   trunk/Lobby/AFLobby/src/aflobby/CChannel.java
   trunk/Lobby/AFLobby/src/aflobby/CChannelView.form
   trunk/Lobby/AFLobby/src/aflobby/CChannelView.java
   trunk/Lobby/AFLobby/src/aflobby/CGlestBattleModel.java
   trunk/Lobby/AFLobby/src/aflobby/CGlestBattleWindow.form
   trunk/Lobby/AFLobby/src/aflobby/CGlestBattleWindow.java
   trunk/Lobby/AFLobby/src/aflobby/CSettings.form
   trunk/Lobby/AFLobby/src/aflobby/CSettings.java
   trunk/Lobby/AFLobby/src/aflobby/LMain.java
   trunk/Lobby/AFLobby/src/aflobby/Main.java
   trunk/Lobby/AFLobby/src/aflobby/UI/CUserSettings.java
   trunk/Lobby/AFLobby/src/aflobby/UI/CView.java
   trunk/Lobby/AFLobby/src/aflobby/UI/battle/CBooleanOptionsPanel.java
   trunk/Lobby/AFLobby/src/aflobby/UI/battle/CListOptionsPanel.java
   trunk/Lobby/AFLobby/src/aflobby/UI/battle/CSliderOptionsPanel.java
   trunk/Lobby/AFLobby/src/aflobby/UI/battle/CStringOptionsPanel.java
   trunk/Lobby/AFLobby/src/aflobby/languages.properties
   trunk/Lobby/AFLobby/src/aflobby/languages_fr_FR.properties
   trunk/Lobby/AFLobby/src/aflobby/languages_zh_CN.properties
   trunk/Lobby/AFLobby/src/aflobby/protocol/tasserver/CTASServerProtocol.java
Log:
- corrected an issue with the options panels where I was changing the components after being notified that they where being while on the event dispatch thread. Now they're changed further in the future in a new event runnable which is much cleaner and faster.
- corrected some code that was doign GUI work outside the GUI dispatch thread
- fixed TASServer protocol class destruction issues and battles not beign cleared on logout causing doubling up of battles.
- changed imports using aflobby.* package rather than specifying the specific classes needed in some classes
- corrected an error where extra newlines where inserted into user settings files.
- added a startup wizard for setting filepaths on the initial run
- updated the aflobbyversion.txt
- glest battlemodel was not setting the suer as ingame when they started spring, corrected now
- corrected bugs with no discarding of the settings and battlelist controls properly in the main channelview
- fixed channels being updated twice in a row incorrectly
- removed useless fredrawcounter code
- fixed removal of channel view contorl from the main window
- removed some unused components
- minor channel fixes
- removed the my team panel in the battlewindow and the sidepanel JPanel
- moved controls to the main tab in the battlewindow such as the colour picker. They now reside inside a panel also containing the playertable
- fixed a nullpointer exception bug in the spring battlemodel class involving options
- fixed a bug in battlelist where objects wherent disposed of int he OnRemove() function, (more to the point there was no OnRemove function to begin with?!?!?!)

Modified: trunk/Lobby/AFLobby/AFLVersion.txt
===================================================================
--- trunk/Lobby/AFLobby/AFLVersion.txt	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/AFLVersion.txt	2008-02-01 22:11:06 UTC (rev 5440)
@@ -1,5 +1,7 @@
-47@@Beta 3.9.8.1@@&lt;font face=&quot;Arial, Helvetica, sans-serif&quot;&gt;&lt;h1&gt;AFLobby Beta 3.9.8.1 released!!!!&lt;/h1&gt;
+51@@Beta 3.9.9-4@@&lt;font face=&quot;Arial, Helvetica, sans-serif&quot;&gt;&lt;h1&gt;AFLobby Beta 3.9.9-4 released!!!!&lt;/h1&gt;
 See the fanfare here:
 
-&lt;a href=&quot;<A HREF="http://www.darkstars.co.uk/2007/aflobby-beta-398/">http://www.darkstars.co.uk/2007/aflobby-beta-398/</A>&quot;&gt;<A HREF="http://www.darkstars.co.uk/2007/aflobby-beta-398/">http://www.darkstars.co.uk/2007/aflobby-beta-398/</A> &lt;/a&gt;
+&lt;a href=&quot;<A HREF="http://www.darkstars.co.uk/2008/aflobby-beta-399-4-experimental/">http://www.darkstars.co.uk/2008/aflobby-beta-399-4-experimental/</A>&quot;&gt;<A HREF="http://www.darkstars.co.uk/2008/aflobby-beta-399-4-experimental/">http://www.darkstars.co.uk/2008/aflobby-beta-399-4-experimental/</A> &lt;/a&gt;
+
+This upgrade is critical, and without it you cannot use the latest lobby server!
 &lt;/font&gt;
\ No newline at end of file

Modified: trunk/Lobby/AFLobby/nbproject/private/private.properties
===================================================================
--- trunk/Lobby/AFLobby/nbproject/private/private.properties	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/nbproject/private/private.properties	2008-02-01 22:11:06 UTC (rev 5440)
@@ -1,7 +1,7 @@
 application.args=netbeans
 do.depend=true
 do.jar=true
-file.reference.substance.jar=D:\\Documents\\AFLobby\\substance.jar
+file.reference.substance.jar=D:\\SpringSVN_Development\\Lobby\\AFLobby\\substance.jar
 javac.debug=true
 javadoc.preview=true
 jaxws.endorsed.dir=C:\\Program Files\\NetBeans 6.0\\java1\\modules\\ext\\jaxws21\\api

Modified: trunk/Lobby/AFLobby/nbproject/project.properties
===================================================================
--- trunk/Lobby/AFLobby/nbproject/project.properties	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/nbproject/project.properties	2008-02-01 22:11:06 UTC (rev 5440)
@@ -27,7 +27,8 @@
 j2ee.server.type=Tomcat55
 jar.compress=true
 javac.classpath=\
-    ${file.reference.substance.jar}
+    ${file.reference.substance.jar}:\
+    ${libs.absolutelayout.classpath}
 # Space-separated list of extra javac options
 javac.compilerargs=
 javac.deprecation=false

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleList.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleList.form	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleList.form	2008-02-01 22:11:06 UTC (rev 5440)
@@ -122,20 +122,20 @@
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Component id=&quot;jScrollPane9&quot; alignment=&quot;0&quot; pref=&quot;714&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;battlesRefreshMapMod&quot; min=&quot;-2&quot; pref=&quot;182&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;battlesRefreshMapMod&quot; min=&quot;-2&quot; pref=&quot;193&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;SurpriseMeButton&quot; min=&quot;-2&quot; pref=&quot;145&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;35&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;SurpriseMeButton&quot; min=&quot;-2&quot; pref=&quot;163&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;26&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;jLabel2&quot; min=&quot;-2&quot; pref=&quot;81&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;BattlePass&quot; min=&quot;-2&quot; pref=&quot;189&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;BattlePass&quot; min=&quot;-2&quot; pref=&quot;169&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;jButton8&quot; min=&quot;-2&quot; pref=&quot;66&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jLabel19&quot; min=&quot;-2&quot; pref=&quot;248&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;264&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;battleCountLabel&quot; min=&quot;-2&quot; pref=&quot;202&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jLabel19&quot; min=&quot;-2&quot; pref=&quot;277&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;210&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;battleCountLabel&quot; min=&quot;-2&quot; pref=&quot;227&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -211,16 +211,11 @@
               &lt;Connection code=&quot;jbm&quot; type=&quot;code&quot;/&gt;
             &lt;/Property&gt;
             &lt;Property name=&quot;autoResizeMode&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
-            &lt;Property name=&quot;fillsViewportHeight&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
             &lt;Property name=&quot;rowMargin&quot; type=&quot;int&quot; value=&quot;0&quot;/&gt;
             &lt;Property name=&quot;rowSorter&quot; type=&quot;javax.swing.RowSorter&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
               &lt;Connection code=&quot;ts&quot; type=&quot;code&quot;/&gt;
             &lt;/Property&gt;
-            &lt;Property name=&quot;selectionForeground&quot; type=&quot;java.awt.Color&quot; editor=&quot;org.netbeans.beaninfo.editors.ColorEditor&quot;&gt;
-              &lt;Color blue=&quot;99&quot; green=&quot;99&quot; red=&quot;99&quot; type=&quot;rgb&quot;/&gt;
-            &lt;/Property&gt;
             &lt;Property name=&quot;showHorizontalLines&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-            &lt;Property name=&quot;showVerticalLines&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
           &lt;/Properties&gt;
           &lt;Events&gt;
             &lt;EventHandler event=&quot;mouseReleased&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;jBattleTableMouseReleased&quot;/&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleList.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleList.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleList.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -27,11 +27,15 @@
 
     TableRowSorter&lt;TableModel&gt; ts = null;
     CMyRowFilter filter = null;
+    public boolean b = false;
     
     /** Creates new form CBattleList
      * @param L
      */
     public CBattleList(LMain L) {
+        if(b){
+            int j = 5;
+        }
         LM = L;
         initComponents();
     }
@@ -180,6 +184,15 @@
             LM.Toasts.AddMessage(&quot;Game already in progress&quot;);
         }
     }
+    
+    @Override
+    public void OnRemove(){
+        //
+        b = true;
+        jbm = null;
+        ts = null;
+        filter = null;
+    }
 
     /** This method is called from within the constructor to
      * initialize the form.
@@ -324,12 +337,9 @@
         jBattleTable.setFont(jBattleTable.getFont().deriveFont(jBattleTable.getFont().getSize()+1f));
         jBattleTable.setModel(jbm);
         jBattleTable.setAutoResizeMode(javax.swing.JTable.AUTO_RESIZE_NEXT_COLUMN);
-        jBattleTable.setFillsViewportHeight(true);
         jBattleTable.setRowMargin(0);
         jBattleTable.setRowSorter(ts);
-        jBattleTable.setSelectionForeground(new java.awt.Color(153, 153, 153));
         jBattleTable.setShowHorizontalLines(false);
-        jBattleTable.setShowVerticalLines(false);
         filter = new CMyRowFilter();
         ts.setRowFilter(filter);
         jBattleTable.addMouseListener(new java.awt.event.MouseAdapter() {
@@ -389,19 +399,19 @@
                 .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                     .addComponent(jScrollPane9, javax.swing.GroupLayout.DEFAULT_SIZE, 714, Short.MAX_VALUE)
                     .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
-                        .addComponent(battlesRefreshMapMod, javax.swing.GroupLayout.PREFERRED_SIZE, 182, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addComponent(battlesRefreshMapMod, javax.swing.GroupLayout.PREFERRED_SIZE, 193, javax.swing.GroupLayout.PREFERRED_SIZE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addComponent(SurpriseMeButton, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 35, Short.MAX_VALUE)
+                        .addComponent(SurpriseMeButton, javax.swing.GroupLayout.PREFERRED_SIZE, 163, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 26, Short.MAX_VALUE)
                         .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 81, javax.swing.GroupLayout.PREFERRED_SIZE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addComponent(BattlePass, javax.swing.GroupLayout.PREFERRED_SIZE, 189, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addComponent(BattlePass, javax.swing.GroupLayout.PREFERRED_SIZE, 169, javax.swing.GroupLayout.PREFERRED_SIZE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addComponent(jButton8, javax.swing.GroupLayout.PREFERRED_SIZE, 66, javax.swing.GroupLayout.PREFERRED_SIZE))
                     .addGroup(layout.createSequentialGroup()
-                        .addComponent(jLabel19, javax.swing.GroupLayout.PREFERRED_SIZE, 248, javax.swing.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 264, Short.MAX_VALUE)
-                        .addComponent(battleCountLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 202, javax.swing.GroupLayout.PREFERRED_SIZE)))
+                        .addComponent(jLabel19, javax.swing.GroupLayout.PREFERRED_SIZE, 277, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 210, Short.MAX_VALUE)
+                        .addComponent(battleCountLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 227, javax.swing.GroupLayout.PREFERRED_SIZE)))
                 .addContainerGap())
         );
         layout.setVerticalGroup(

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleModel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleModel.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleModel.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -650,17 +650,23 @@
 
     public void PutOption(String option, Object value) {
         options.put(option, value);
-        battlewindow.UpdateBattleClients();
+        if(battlewindow != null){
+            battlewindow.UpdateBattleClients();
+        }
     }
 
     public void RemoveOption(String option) {
         options.remove(option);
-        battlewindow.UpdateBattleClients();
+        if(battlewindow != null){
+            battlewindow.UpdateBattleClients();
+        }
     }
 
     public void RemoveAllOptions() {
         options.clear();
-        battlewindow.UpdateBattleClients();
+        if(battlewindow != null){
+            battlewindow.UpdateBattleClients();
+        }
     }
     //
 }

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form	2008-02-01 22:11:06 UTC (rev 5440)
@@ -11,7 +11,9 @@
   &lt;/NonVisualComponents&gt;
   &lt;Properties&gt;
     &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
-    &lt;Property name=&quot;title&quot; type=&quot;java.lang.String&quot; value=&quot;BattleName :: Server&quot;/&gt;
+    &lt;Property name=&quot;title&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+      &lt;PlainString value=&quot;BattleName :: Server&quot;/&gt;
+    &lt;/Property&gt;
     &lt;Property name=&quot;extendedState&quot; type=&quot;int&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
       &lt;Connection code=&quot;MAXIMIZED_BOTH&quot; type=&quot;code&quot;/&gt;
     &lt;/Property&gt;
@@ -42,12 +44,12 @@
   &lt;Layout&gt;
     &lt;DimensionLayout dim=&quot;0&quot;&gt;
       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;Component id=&quot;GameOptionsPane&quot; pref=&quot;867&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
+          &lt;Component id=&quot;GameOptionsPane&quot; alignment=&quot;0&quot; pref=&quot;815&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
       &lt;/Group&gt;
     &lt;/DimensionLayout&gt;
     &lt;DimensionLayout dim=&quot;1&quot;&gt;
       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;Component id=&quot;GameOptionsPane&quot; pref=&quot;548&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
+          &lt;Component id=&quot;GameOptionsPane&quot; alignment=&quot;0&quot; pref=&quot;548&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
       &lt;/Group&gt;
     &lt;/DimensionLayout&gt;
   &lt;/Layout&gt;
@@ -69,7 +71,9 @@
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;Chat&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;Chat&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Chat&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/JTabbedPaneConstraints&gt;
             &lt;/Constraint&gt;
           &lt;/Constraints&gt;
@@ -80,40 +84,72 @@
                   &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;480&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;sayButton&quot; min=&quot;-2&quot; pref=&quot;58&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;6&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;jToolBar2&quot; alignment=&quot;0&quot; pref=&quot;747&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
+                                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;683&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;sayButton&quot; min=&quot;-2&quot; pref=&quot;58&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;/Group&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;LockToggle&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                          &lt;Component id=&quot;SpectatorToggle&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                          &lt;Component id=&quot;GameStartButton&quot; alignment=&quot;1&quot; min=&quot;-2&quot; pref=&quot;131&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;/Group&gt;
+                                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                          &lt;Component id=&quot;ReadyToggle&quot; linkSize=&quot;7&quot; min=&quot;-2&quot; pref=&quot;124&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                          &lt;Component id=&quot;ExitButton&quot; linkSize=&quot;7&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;122&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;/Group&gt;
+                                  &lt;/Group&gt;
+                              &lt;/Group&gt;
                           &lt;/Group&gt;
-                          &lt;Component id=&quot;jToolBar2&quot; alignment=&quot;0&quot; pref=&quot;550&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jSplitPane1&quot; pref=&quot;550&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace type=&quot;unrelated&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jSplitPane1&quot; pref=&quot;750&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jLabel7&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;10&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;sidepane&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;
             &lt;DimensionLayout dim=&quot;1&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;sidepane&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jSplitPane1&quot; pref=&quot;414&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;jSplitPane1&quot; pref=&quot;401&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;jToolBar2&quot; min=&quot;-2&quot; pref=&quot;25&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;jScrollPane4&quot; min=&quot;0&quot; pref=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;Component id=&quot;sayButton&quot; alignment=&quot;1&quot; pref=&quot;47&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;jLabel7&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace pref=&quot;139&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;LockToggle&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;6&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;ReadyToggle&quot; linkSize=&quot;6&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;23&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;SpectatorToggle&quot; linkSize=&quot;6&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;GameStartButton&quot; linkSize=&quot;6&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;ExitButton&quot; linkSize=&quot;6&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
                           &lt;/Group&gt;
+                          &lt;Component id=&quot;sayButton&quot; alignment=&quot;1&quot; min=&quot;-2&quot; pref=&quot;52&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jScrollPane4&quot; alignment=&quot;1&quot; min=&quot;-2&quot; pref=&quot;52&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
@@ -137,6 +173,9 @@
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                       &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Accumulate_Messages&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                     &lt;/Property&gt;
+                    &lt;Property name=&quot;maximumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+                      &lt;Dimension value=&quot;[105, 21]&quot;/&gt;
+                    &lt;/Property&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;JAutoScrollToggle&quot;&gt;
@@ -148,6 +187,9 @@
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                       &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.AutoScroll&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                     &lt;/Property&gt;
+                    &lt;Property name=&quot;maximumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+                      &lt;Dimension value=&quot;[65, 21]&quot;/&gt;
+                    &lt;/Property&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;JAutoScrollToggleActionPerformed&quot;/&gt;
@@ -163,6 +205,9 @@
                         &lt;StringItem index=&quot;3&quot; value=&quot;Item 4&quot;/&gt;
                       &lt;/StringArray&gt;
                     &lt;/Property&gt;
+                    &lt;Property name=&quot;maximumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+                      &lt;Dimension value=&quot;[300, 32767]&quot;/&gt;
+                    &lt;/Property&gt;
                   &lt;/Properties&gt;
                   &lt;AuxValues&gt;
                     &lt;AuxValue name=&quot;JavaCodeGenerator_AddingCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;cSmileyCombo1.Init(UserMessage);&quot;/&gt;
@@ -183,140 +228,6 @@
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;sayButtonActionPerformed&quot;/&gt;
               &lt;/Events&gt;
             &lt;/Component&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;sidepane&quot;&gt;
-
-              &lt;Layout&gt;
-                &lt;DimensionLayout dim=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;jLabel7&quot; pref=&quot;262&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;ExitButton&quot; pref=&quot;260&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;12&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;GameStartButton&quot; pref=&quot;260&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;12&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                      &lt;Component id=&quot;SpectatorToggle&quot; alignment=&quot;0&quot; pref=&quot;260&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                      &lt;Component id=&quot;ReadyToggle&quot; alignment=&quot;0&quot; pref=&quot;260&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                      &lt;Component id=&quot;LockToggle&quot; alignment=&quot;1&quot; pref=&quot;260&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;/Group&gt;
-                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;12&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-                &lt;DimensionLayout dim=&quot;1&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jLabel7&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;67&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;SpectatorToggle&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;ReadyToggle&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;LockToggle&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;GameStartButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;ExitButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-              &lt;/Layout&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;ExitButton&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Exit&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;alignmentX&quot; type=&quot;float&quot; value=&quot;1.0&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;mousePressed&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;ExitButtonMousePressed&quot;/&gt;
-                    &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;ExitButtonActionPerformed&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;GameStartButton&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Start&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;GameStartButtonActionPerformed&quot;/&gt;
-                  &lt;/Events&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;1&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;LockToggle&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Lock&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;LockToggleActionPerformed&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;ReadyToggle&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Ready&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;ReadyToggleActionPerformed&quot;/&gt;
-                  &lt;/Events&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;1&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;SpectatorToggle&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Spectator&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;SpectatorToggleActionPerformed&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel7&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;horizontalAlignment&quot; type=&quot;int&quot; value=&quot;0&quot;/&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.map&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;verticalAlignment&quot; type=&quot;int&quot; value=&quot;3&quot;/&gt;
-                    &lt;Property name=&quot;alignmentX&quot; type=&quot;float&quot; value=&quot;0.5&quot;/&gt;
-                    &lt;Property name=&quot;horizontalTextPosition&quot; type=&quot;int&quot; value=&quot;0&quot;/&gt;
-                    &lt;Property name=&quot;maximumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-                      &lt;Dimension value=&quot;[260, 270]&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-                      &lt;Dimension value=&quot;[260, 270]&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-                      &lt;Dimension value=&quot;[260, 270]&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;verticalTextPosition&quot; type=&quot;int&quot; value=&quot;3&quot;/&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
             &lt;Container class=&quot;javax.swing.JSplitPane&quot; name=&quot;jSplitPane1&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;dividerLocation&quot; type=&quot;int&quot; value=&quot;220&quot;/&gt;
@@ -334,31 +245,193 @@
                     &lt;/Constraint&gt;
                   &lt;/Constraints&gt;
                 &lt;/Component&gt;
-                &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-                  &lt;/AuxValues&gt;
+                &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
                   &lt;Constraints&gt;
                     &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JSplitPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JSplitPaneSupportLayout$JSplitPaneConstraintsDescription&quot;&gt;
-                      &lt;JSplitPaneConstraints position=&quot;left&quot;/&gt;
+                      &lt;JSplitPaneConstraints position=&quot;top&quot;/&gt;
                     &lt;/Constraint&gt;
                   &lt;/Constraints&gt;
 
-                  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+                  &lt;Layout&gt;
+                    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;MyTeamCombo&quot; min=&quot;-2&quot; pref=&quot;76&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;MyAllyTeamCombo&quot; min=&quot;-2&quot; pref=&quot;111&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;RaceCombo&quot; min=&quot;-2&quot; pref=&quot;133&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;ColourButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;ColourPanel&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;748&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                    &lt;/DimensionLayout&gt;
+                    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;jScrollPane2&quot; pref=&quot;173&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Component id=&quot;MyTeamCombo&quot; linkSize=&quot;2&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;MyAllyTeamCombo&quot; linkSize=&quot;2&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;21&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;RaceCombo&quot; linkSize=&quot;2&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;ColourButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;/Group&gt;
+                                  &lt;Component id=&quot;ColourPanel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                    &lt;/DimensionLayout&gt;
+                  &lt;/Layout&gt;
                   &lt;SubComponents&gt;
-                    &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;playerBattleTable&quot;&gt;
+                    &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
+                      &lt;AuxValues&gt;
+                        &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+                      &lt;/AuxValues&gt;
+
+                      &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+                      &lt;SubComponents&gt;
+                        &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;playerBattleTable&quot;&gt;
+                          &lt;Properties&gt;
+                            &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                              &lt;Connection code=&quot;playertablemodel&quot; type=&quot;code&quot;/&gt;
+                            &lt;/Property&gt;
+                            &lt;Property name=&quot;columnModel&quot; type=&quot;javax.swing.table.TableColumnModel&quot; editor=&quot;org.netbeans.modules.form.editors2.TableColumnModelEditor&quot;&gt;
+                              &lt;TableColumnModel selectionModel=&quot;0&quot;/&gt;
+                            &lt;/Property&gt;
+                            &lt;Property name=&quot;tableHeader&quot; type=&quot;javax.swing.table.JTableHeader&quot; editor=&quot;org.netbeans.modules.form.editors2.JTableHeaderEditor&quot;&gt;
+                              &lt;TableHeader reorderingAllowed=&quot;true&quot; resizingAllowed=&quot;true&quot;/&gt;
+                            &lt;/Property&gt;
+                          &lt;/Properties&gt;
+                        &lt;/Component&gt;
+                      &lt;/SubComponents&gt;
+                    &lt;/Container&gt;
+                    &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;MyTeamCombo&quot;&gt;
                       &lt;Properties&gt;
-                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                          &lt;Connection code=&quot;playertablemodel&quot; type=&quot;code&quot;/&gt;
+                        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                          &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
                         &lt;/Property&gt;
-                        &lt;Property name=&quot;columnModel&quot; type=&quot;javax.swing.table.TableColumnModel&quot; editor=&quot;org.netbeans.modules.form.editors2.TableColumnModelEditor&quot;&gt;
-                          &lt;TableColumnModel selectionModel=&quot;0&quot;/&gt;
+                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                          &lt;StringArray count=&quot;16&quot;&gt;
+                            &lt;StringItem index=&quot;0&quot; value=&quot;Team 1&quot;/&gt;
+                            &lt;StringItem index=&quot;1&quot; value=&quot;Team 2&quot;/&gt;
+                            &lt;StringItem index=&quot;2&quot; value=&quot;Team 3&quot;/&gt;
+                            &lt;StringItem index=&quot;3&quot; value=&quot;Team 4&quot;/&gt;
+                            &lt;StringItem index=&quot;4&quot; value=&quot;Team 5&quot;/&gt;
+                            &lt;StringItem index=&quot;5&quot; value=&quot;Team 6&quot;/&gt;
+                            &lt;StringItem index=&quot;6&quot; value=&quot;Team 7&quot;/&gt;
+                            &lt;StringItem index=&quot;7&quot; value=&quot;Team 8&quot;/&gt;
+                            &lt;StringItem index=&quot;8&quot; value=&quot;Team 9&quot;/&gt;
+                            &lt;StringItem index=&quot;9&quot; value=&quot;Team 10&quot;/&gt;
+                            &lt;StringItem index=&quot;10&quot; value=&quot;Team 11&quot;/&gt;
+                            &lt;StringItem index=&quot;11&quot; value=&quot;Team 12&quot;/&gt;
+                            &lt;StringItem index=&quot;12&quot; value=&quot;Team 13&quot;/&gt;
+                            &lt;StringItem index=&quot;13&quot; value=&quot;Team 14&quot;/&gt;
+                            &lt;StringItem index=&quot;14&quot; value=&quot;Team 15&quot;/&gt;
+                            &lt;StringItem index=&quot;15&quot; value=&quot;Team 16&quot;/&gt;
+                          &lt;/StringArray&gt;
                         &lt;/Property&gt;
-                        &lt;Property name=&quot;tableHeader&quot; type=&quot;javax.swing.table.JTableHeader&quot; editor=&quot;org.netbeans.modules.form.editors2.JTableHeaderEditor&quot;&gt;
-                          &lt;TableHeader reorderingAllowed=&quot;true&quot; resizingAllowed=&quot;true&quot;/&gt;
+                      &lt;/Properties&gt;
+                      &lt;Events&gt;
+                        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;MyTeamComboActionPerformed&quot;/&gt;
+                      &lt;/Events&gt;
+                    &lt;/Component&gt;
+                    &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;MyAllyTeamCombo&quot;&gt;
+                      &lt;Properties&gt;
+                        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                          &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
                         &lt;/Property&gt;
+                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                          &lt;StringArray count=&quot;16&quot;&gt;
+                            &lt;StringItem index=&quot;0&quot; value=&quot;Ally Team 1&quot;/&gt;
+                            &lt;StringItem index=&quot;1&quot; value=&quot;Ally Team 2&quot;/&gt;
+                            &lt;StringItem index=&quot;2&quot; value=&quot;Ally Team 3&quot;/&gt;
+                            &lt;StringItem index=&quot;3&quot; value=&quot;Ally Team 4&quot;/&gt;
+                            &lt;StringItem index=&quot;4&quot; value=&quot;Ally Team 5&quot;/&gt;
+                            &lt;StringItem index=&quot;5&quot; value=&quot;Ally Team 6&quot;/&gt;
+                            &lt;StringItem index=&quot;6&quot; value=&quot;Ally Team 7&quot;/&gt;
+                            &lt;StringItem index=&quot;7&quot; value=&quot;Ally Team 8&quot;/&gt;
+                            &lt;StringItem index=&quot;8&quot; value=&quot;Ally Team 9&quot;/&gt;
+                            &lt;StringItem index=&quot;9&quot; value=&quot;Ally Team 10&quot;/&gt;
+                            &lt;StringItem index=&quot;10&quot; value=&quot;Ally Team 11&quot;/&gt;
+                            &lt;StringItem index=&quot;11&quot; value=&quot;Ally Team 12&quot;/&gt;
+                            &lt;StringItem index=&quot;12&quot; value=&quot;Ally Team 13&quot;/&gt;
+                            &lt;StringItem index=&quot;13&quot; value=&quot;Ally Team 14&quot;/&gt;
+                            &lt;StringItem index=&quot;14&quot; value=&quot;Ally Team 15&quot;/&gt;
+                            &lt;StringItem index=&quot;15&quot; value=&quot;Ally Team 16&quot;/&gt;
+                          &lt;/StringArray&gt;
+                        &lt;/Property&gt;
                       &lt;/Properties&gt;
+                      &lt;Events&gt;
+                        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;MyAllyTeamComboActionPerformed&quot;/&gt;
+                      &lt;/Events&gt;
                     &lt;/Component&gt;
+                    &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;RaceCombo&quot;&gt;
+                      &lt;Properties&gt;
+                        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                          &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
+                        &lt;/Property&gt;
+                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                          &lt;StringArray count=&quot;0&quot;/&gt;
+                        &lt;/Property&gt;
+                        &lt;Property name=&quot;maximumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+                          &lt;Dimension value=&quot;[70, 25]&quot;/&gt;
+                        &lt;/Property&gt;
+                        &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+                          &lt;Dimension value=&quot;[120, 25]&quot;/&gt;
+                        &lt;/Property&gt;
+                      &lt;/Properties&gt;
+                      &lt;Events&gt;
+                        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;RaceComboActionPerformed&quot;/&gt;
+                      &lt;/Events&gt;
+                    &lt;/Component&gt;
+                    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;ColourButton&quot;&gt;
+                      &lt;Properties&gt;
+                        &lt;Property name=&quot;icon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
+                          &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/colourpickerwheel16.png&quot;/&gt;
+                        &lt;/Property&gt;
+                        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                          &lt;PlainString value=&quot;Change Colour&quot;/&gt;
+                        &lt;/Property&gt;
+                        &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                          &lt;Insets value=&quot;[2, 6, 2, 6]&quot;/&gt;
+                        &lt;/Property&gt;
+                      &lt;/Properties&gt;
+                      &lt;Events&gt;
+                        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;ColourButtonActionPerformed&quot;/&gt;
+                      &lt;/Events&gt;
+                    &lt;/Component&gt;
+                    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;ColourPanel&quot;&gt;
+                      &lt;Properties&gt;
+                        &lt;Property name=&quot;background&quot; type=&quot;java.awt.Color&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                          &lt;Connection code=&quot;Color.decode(CUserSettings.GetValue(&quot;lastbattle.colour&quot;, String.valueOf(Color.blue.getRGB())))&quot; type=&quot;code&quot;/&gt;
+                        &lt;/Property&gt;
+                        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.LineBorderInfo&quot;&gt;
+                            &lt;LineBorder roundedCorners=&quot;true&quot;/&gt;
+                          &lt;/Border&gt;
+                        &lt;/Property&gt;
+                      &lt;/Properties&gt;
+
+                      &lt;Layout&gt;
+                        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;EmptySpace min=&quot;0&quot; pref=&quot;285&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                        &lt;/DimensionLayout&gt;
+                        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;EmptySpace min=&quot;0&quot; pref=&quot;23&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                        &lt;/DimensionLayout&gt;
+                      &lt;/Layout&gt;
+                    &lt;/Container&gt;
                   &lt;/SubComponents&gt;
                 &lt;/Container&gt;
               &lt;/SubComponents&gt;
@@ -383,178 +456,94 @@
                 &lt;/Component&gt;
               &lt;/SubComponents&gt;
             &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;TeamTab&quot;&gt;
-          &lt;Constraints&gt;
-            &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
-              &lt;JTabbedPaneConstraints tabName=&quot;My Team&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;My Team&quot;/&gt;
-              &lt;/JTabbedPaneConstraints&gt;
-            &lt;/Constraint&gt;
-          &lt;/Constraints&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;ColourPanel&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;ColourButton&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;MyTeamCombo&quot; min=&quot;-2&quot; pref=&quot;184&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;MyAllyTeamCombo&quot; min=&quot;-2&quot; pref=&quot;230&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;RaceCombo&quot; min=&quot;-2&quot; pref=&quot;184&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;242&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;MyAllyTeamCombo&quot; linkSize=&quot;2&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;21&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;MyTeamCombo&quot; linkSize=&quot;2&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;RaceCombo&quot; linkSize=&quot;2&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;ColourButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;ColourPanel&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;382&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;MyTeamCombo&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;GameStartButton&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Start&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;16&quot;&gt;
-                    &lt;StringItem index=&quot;0&quot; value=&quot;Team 1&quot;/&gt;
-                    &lt;StringItem index=&quot;1&quot; value=&quot;Team 2&quot;/&gt;
-                    &lt;StringItem index=&quot;2&quot; value=&quot;Team 3&quot;/&gt;
-                    &lt;StringItem index=&quot;3&quot; value=&quot;Team 4&quot;/&gt;
-                    &lt;StringItem index=&quot;4&quot; value=&quot;Team 5&quot;/&gt;
-                    &lt;StringItem index=&quot;5&quot; value=&quot;Team 6&quot;/&gt;
-                    &lt;StringItem index=&quot;6&quot; value=&quot;Team 7&quot;/&gt;
-                    &lt;StringItem index=&quot;7&quot; value=&quot;Team 8&quot;/&gt;
-                    &lt;StringItem index=&quot;8&quot; value=&quot;Team 9&quot;/&gt;
-                    &lt;StringItem index=&quot;9&quot; value=&quot;Team 10&quot;/&gt;
-                    &lt;StringItem index=&quot;10&quot; value=&quot;Team 11&quot;/&gt;
-                    &lt;StringItem index=&quot;11&quot; value=&quot;Team 12&quot;/&gt;
-                    &lt;StringItem index=&quot;12&quot; value=&quot;Team 13&quot;/&gt;
-                    &lt;StringItem index=&quot;13&quot; value=&quot;Team 14&quot;/&gt;
-                    &lt;StringItem index=&quot;14&quot; value=&quot;Team 15&quot;/&gt;
-                    &lt;StringItem index=&quot;15&quot; value=&quot;Team 16&quot;/&gt;
-                  &lt;/StringArray&gt;
+              &lt;/Properties&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;GameStartButtonActionPerformed&quot;/&gt;
+              &lt;/Events&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;1&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;ExitButton&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Exit&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
+                &lt;Property name=&quot;alignmentX&quot; type=&quot;float&quot; value=&quot;1.0&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
-                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;MyTeamComboActionPerformed&quot;/&gt;
+                &lt;EventHandler event=&quot;mousePressed&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;ExitButtonMousePressed&quot;/&gt;
+                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;ExitButtonActionPerformed&quot;/&gt;
               &lt;/Events&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;MyAllyTeamCombo&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;SpectatorToggle&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Spectator&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;16&quot;&gt;
-                    &lt;StringItem index=&quot;0&quot; value=&quot;Ally Team 1&quot;/&gt;
-                    &lt;StringItem index=&quot;1&quot; value=&quot;Ally Team 2&quot;/&gt;
-                    &lt;StringItem index=&quot;2&quot; value=&quot;Ally Team 3&quot;/&gt;
-                    &lt;StringItem index=&quot;3&quot; value=&quot;Ally Team 4&quot;/&gt;
-                    &lt;StringItem index=&quot;4&quot; value=&quot;Ally Team 5&quot;/&gt;
-                    &lt;StringItem index=&quot;5&quot; value=&quot;Ally Team 6&quot;/&gt;
-                    &lt;StringItem index=&quot;6&quot; value=&quot;Ally Team 7&quot;/&gt;
-                    &lt;StringItem index=&quot;7&quot; value=&quot;Ally Team 8&quot;/&gt;
-                    &lt;StringItem index=&quot;8&quot; value=&quot;Ally Team 9&quot;/&gt;
-                    &lt;StringItem index=&quot;9&quot; value=&quot;Ally Team 10&quot;/&gt;
-                    &lt;StringItem index=&quot;10&quot; value=&quot;Ally Team 11&quot;/&gt;
-                    &lt;StringItem index=&quot;11&quot; value=&quot;Ally Team 12&quot;/&gt;
-                    &lt;StringItem index=&quot;12&quot; value=&quot;Ally Team 13&quot;/&gt;
-                    &lt;StringItem index=&quot;13&quot; value=&quot;Ally Team 14&quot;/&gt;
-                    &lt;StringItem index=&quot;14&quot; value=&quot;Ally Team 15&quot;/&gt;
-                    &lt;StringItem index=&quot;15&quot; value=&quot;Ally Team 16&quot;/&gt;
-                  &lt;/StringArray&gt;
-                &lt;/Property&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
-                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;MyAllyTeamComboActionPerformed&quot;/&gt;
+                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;SpectatorToggleActionPerformed&quot;/&gt;
               &lt;/Events&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;RaceCombo&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;ReadyToggle&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Ready&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;maximumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-                  &lt;Dimension value=&quot;[70, 25]&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-                  &lt;Dimension value=&quot;[120, 25]&quot;/&gt;
-                &lt;/Property&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
-                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;RaceComboActionPerformed&quot;/&gt;
+                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;ReadyToggleActionPerformed&quot;/&gt;
               &lt;/Events&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;1&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;ColourButton&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;LockToggle&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;icon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
-                  &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/colourpickerwheel.png&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Lock&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Change Colour&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
-                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;ColourButtonActionPerformed&quot;/&gt;
+                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;LockToggleActionPerformed&quot;/&gt;
               &lt;/Events&gt;
             &lt;/Component&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;ColourPanel&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel7&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;background&quot; type=&quot;java.awt.Color&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;Color.decode(CUserSettings.GetValue(&quot;lastbattle.colour&quot;, String.valueOf(Color.blue.getRGB())))&quot; type=&quot;code&quot;/&gt;
+                &lt;Property name=&quot;horizontalAlignment&quot; type=&quot;int&quot; value=&quot;0&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.map&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.LineBorderInfo&quot;&gt;
-                    &lt;LineBorder roundedCorners=&quot;true&quot;/&gt;
-                  &lt;/Border&gt;
+                &lt;Property name=&quot;verticalAlignment&quot; type=&quot;int&quot; value=&quot;3&quot;/&gt;
+                &lt;Property name=&quot;alignmentX&quot; type=&quot;float&quot; value=&quot;0.5&quot;/&gt;
+                &lt;Property name=&quot;horizontalTextPosition&quot; type=&quot;int&quot; value=&quot;0&quot;/&gt;
+                &lt;Property name=&quot;maximumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+                  &lt;Dimension value=&quot;[260, 270]&quot;/&gt;
                 &lt;/Property&gt;
+                &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+                  &lt;Dimension value=&quot;[260, 270]&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+                  &lt;Dimension value=&quot;[260, 270]&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;verticalTextPosition&quot; type=&quot;int&quot; value=&quot;3&quot;/&gt;
               &lt;/Properties&gt;
-
-              &lt;Layout&gt;
-                &lt;DimensionLayout dim=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace min=&quot;0&quot; pref=&quot;608&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-                &lt;DimensionLayout dim=&quot;1&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace min=&quot;0&quot; pref=&quot;43&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-              &lt;/Layout&gt;
-            &lt;/Container&gt;
+            &lt;/Component&gt;
           &lt;/SubComponents&gt;
         &lt;/Container&gt;
         &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;MapTab&quot;&gt;
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;Maps&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;Maps&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Maps&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/JTabbedPaneConstraints&gt;
             &lt;/Constraint&gt;
           &lt;/Constraints&gt;
@@ -563,20 +552,20 @@
             &lt;DimensionLayout dim=&quot;0&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
                           &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
                               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;MapPickerLabel&quot; min=&quot;-2&quot; pref=&quot;450&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;1&quot;&gt;
                               &lt;EmptySpace min=&quot;-2&quot; pref=&quot;7&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;reload_maplist&quot; min=&quot;-2&quot; pref=&quot;154&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;reload_maplist&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;ChMapButton&quot; min=&quot;-2&quot; pref=&quot;130&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;ChMapButton&quot; min=&quot;-2&quot; pref=&quot;222&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace type=&quot;unrelated&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;382&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;330&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -669,7 +658,9 @@
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;Game Options&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;Game Options&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Game Options&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/JTabbedPaneConstraints&gt;
             &lt;/Constraint&gt;
           &lt;/Constraints&gt;
@@ -677,14 +668,11 @@
           &lt;Layout&gt;
             &lt;DimensionLayout dim=&quot;0&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;842&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;240&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;HostButtonsPanel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
+                          &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;790&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;HostButtonsPanel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
@@ -693,7 +681,7 @@
             &lt;DimensionLayout dim=&quot;1&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;HostButtonsPanel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;jScrollPane1&quot; pref=&quot;447&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
@@ -739,7 +727,9 @@
               &lt;SubComponents&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton1&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Fix Teams&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                      &lt;PlainString value=&quot;Fix Teams&quot;/&gt;
+                    &lt;/Property&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton1ActionPerformed&quot;/&gt;
@@ -747,7 +737,9 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton2&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Force FFA&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                      &lt;PlainString value=&quot;Force FFA&quot;/&gt;
+                    &lt;/Property&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton2ActionPerformed&quot;/&gt;
@@ -795,7 +787,9 @@
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;Skirmish AI&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;Skirmish AI&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Skirmish AI&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/JTabbedPaneConstraints&gt;
             &lt;/Constraint&gt;
           &lt;/Constraints&gt;
@@ -807,7 +801,7 @@
                       &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                           &lt;Component id=&quot;jLabel9&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;145&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;jSeparator1&quot; alignment=&quot;0&quot; pref=&quot;842&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;jSeparator1&quot; alignment=&quot;0&quot; pref=&quot;790&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                                   &lt;Component id=&quot;jLabel14&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -937,7 +931,9 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;AddAIButton&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Add AI&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Add AI&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;AddAIButtonActionPerformed&quot;/&gt;
@@ -947,17 +943,23 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel9&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Add an AI&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Add an AI&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel10&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Modify an AI&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Modify an AI&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel11&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;AI to edit:&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;AI to edit:&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;MyAIsCombo&quot;&gt;
@@ -973,7 +975,9 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;RemoveAIButton&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Remove This AI&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Remove This AI&quot;/&gt;
+                &lt;/Property&gt;
                 &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
@@ -982,7 +986,9 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;UpdateAIButton&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Update AI&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Update AI&quot;/&gt;
+                &lt;/Property&gt;
                 &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
@@ -991,7 +997,9 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel12&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;AI Race:&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;AI Race:&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;EditAIRaceCombo&quot;&gt;
@@ -1004,7 +1012,9 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel13&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;AI Ally:&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;AI Ally:&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;EditAIAllyCombo&quot;&gt;
@@ -1036,17 +1046,23 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel14&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Choose an AI:&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Choose an AI:&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel15&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Pick a name:&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Pick a name:&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel16&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;(no spaces in AI names)&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;(no spaces in AI names)&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;AddAIRaceCombo&quot;&gt;
@@ -1058,12 +1074,16 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel17&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;AI Race:&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;AI Race:&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel18&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Difficulty:&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Difficulty:&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;jComboBox5&quot;&gt;
@@ -1083,7 +1103,9 @@
                 &lt;Property name=&quot;icon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
                   &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/colourpickerwheel.png&quot;/&gt;
                 &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Change Colour&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Change Colour&quot;/&gt;
+                &lt;/Property&gt;
                 &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
@@ -1102,7 +1124,7 @@
               &lt;Layout&gt;
                 &lt;DimensionLayout dim=&quot;0&quot;&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace min=&quot;0&quot; pref=&quot;379&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace min=&quot;0&quot; pref=&quot;327&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;
                 &lt;DimensionLayout dim=&quot;1&quot;&gt;
@@ -1118,7 +1140,9 @@
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;Restricted Units&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;Restricted Units&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Restricted Units&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/JTabbedPaneConstraints&gt;
             &lt;/Constraint&gt;
           &lt;/Constraints&gt;
@@ -1134,8 +1158,8 @@
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;UnRestrictAllUnitsButton&quot; alignment=&quot;0&quot; pref=&quot;248&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
-                          &lt;Component id=&quot;UnRestrictUnitButton&quot; pref=&quot;248&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
+                          &lt;Component id=&quot;UnRestrictAllUnitsButton&quot; alignment=&quot;0&quot; pref=&quot;196&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
+                          &lt;Component id=&quot;UnRestrictUnitButton&quot; pref=&quot;196&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
                           &lt;Component id=&quot;jPanel5&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -1181,8 +1205,8 @@
                       &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;RestrictedUnitsCombo&quot; alignment=&quot;0&quot; pref=&quot;216&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;RestrictUnitButton&quot; alignment=&quot;0&quot; pref=&quot;216&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;RestrictedUnitsCombo&quot; alignment=&quot;0&quot; pref=&quot;164&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;RestrictUnitButton&quot; alignment=&quot;0&quot; pref=&quot;164&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
@@ -1282,7 +1306,9 @@
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;Script&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;Script&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Script&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/JTabbedPaneConstraints&gt;
             &lt;/Constraint&gt;
           &lt;/Constraints&gt;
@@ -1293,9 +1319,9 @@
                   &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jScrollPane12&quot; alignment=&quot;1&quot; pref=&quot;842&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;jScrollPane12&quot; alignment=&quot;1&quot; pref=&quot;790&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jLabel8&quot; pref=&quot;572&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jLabel8&quot; pref=&quot;520&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;jButton4&quot; min=&quot;-2&quot; pref=&quot;266&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
@@ -1336,7 +1362,9 @@
                     &lt;/Property&gt;
                     &lt;Property name=&quot;lineWrap&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
                     &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Please press refresh below&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                      &lt;PlainString value=&quot;Please press refresh below&quot;/&gt;
+                    &lt;/Property&gt;
                     &lt;Property name=&quot;wrapStyleWord&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -116,7 +116,6 @@
         Runnable doWorkRunnable2 = new Runnable() {
 
             public void run() {
-                Color c = sidepane.getBackground();
 
                 playerBattleTable.getColumnModel().getColumn(0).setMaxWidth(50);
                 playerBattleTable.getColumnModel().getColumn(1).setMaxWidth(50);
@@ -130,7 +129,6 @@
                 playerBattleTable.getColumnModel().getColumn(10).setMaxWidth(40);
                     
                 setLocationRelativeTo(null); // center the window on the screen
-                sidepane.setBackground(c.darker().darker());
                 requestFocusInWindow();
             }
         };
@@ -444,11 +442,15 @@
         CEvent e = new CEvent(CEvent.EXITEDBATTLE);
         LM.core.NewGUIEvent(e);
         
-        tjb.cancel();
-        tjb = null;
+        if(tjb != null){
+            tjb.cancel();
+            tjb = null;
+        }
+        
+        battlemodel.Exit();
         battlemodel = null;
         
-        LM.battleModel.Exit();
+        
 
         Runnable doWorkRunnable = new Runnable() {
             public void run() {
@@ -1508,25 +1510,24 @@
         JAutoScrollToggle = new javax.swing.JToggleButton();
         cSmileyCombo1 = new aflobby.UI.CSmileyCombo();
         sayButton = new javax.swing.JButton();
-        sidepane = new javax.swing.JPanel();
-        ExitButton = new javax.swing.JButton();
-        GameStartButton = new javax.swing.JButton();
-        LockToggle = new javax.swing.JToggleButton();
-        ReadyToggle = new javax.swing.JToggleButton();
-        SpectatorToggle = new javax.swing.JToggleButton();
-        jLabel7 = new javax.swing.JLabel();
         jSplitPane1 = new javax.swing.JSplitPane();
         Chat = new aflobby.CChatPanel();
+        jPanel1 = new javax.swing.JPanel();
         jScrollPane2 = new javax.swing.JScrollPane();
         playerBattleTable = new javax.swing.JTable();
-        jScrollPane4 = new javax.swing.JScrollPane();
-        UserMessage = new javax.swing.JTextArea();
-        TeamTab = new javax.swing.JPanel();
         MyTeamCombo = new javax.swing.JComboBox();
         MyAllyTeamCombo = new javax.swing.JComboBox();
         RaceCombo = new javax.swing.JComboBox();
         ColourButton = new javax.swing.JButton();
         ColourPanel = new javax.swing.JPanel();
+        jScrollPane4 = new javax.swing.JScrollPane();
+        UserMessage = new javax.swing.JTextArea();
+        GameStartButton = new javax.swing.JButton();
+        ExitButton = new javax.swing.JButton();
+        SpectatorToggle = new javax.swing.JToggleButton();
+        ReadyToggle = new javax.swing.JToggleButton();
+        LockToggle = new javax.swing.JToggleButton();
+        jLabel7 = new javax.swing.JLabel();
         MapTab = new javax.swing.JPanel();
         jScrollPane3 = new javax.swing.JScrollPane();
         MapList = new javax.swing.JList();
@@ -1601,11 +1602,13 @@
         jToggleButton3.setSelected(true);
         java.util.ResourceBundle bundle = java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;); // NOI18N
         jToggleButton3.setText(bundle.getString(&quot;CBattleWindow.Accumulate_Messages&quot;)); // NOI18N
+        jToggleButton3.setMaximumSize(new java.awt.Dimension(105, 21));
         jToolBar2.add(jToggleButton3);
 
         JAutoScrollToggle.setFont(CUISettings.GetFont(12,false));
         JAutoScrollToggle.setSelected(true);
         JAutoScrollToggle.setText(bundle.getString(&quot;CBattleWindow.AutoScroll&quot;)); // NOI18N
+        JAutoScrollToggle.setMaximumSize(new java.awt.Dimension(65, 21));
         JAutoScrollToggle.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 JAutoScrollToggleActionPerformed(evt);
@@ -1614,6 +1617,7 @@
         jToolBar2.add(JAutoScrollToggle);
 
         cSmileyCombo1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { &quot;Item 1&quot;, &quot;Item 2&quot;, &quot;Item 3&quot;, &quot;Item 4&quot; }));
+        cSmileyCombo1.setMaximumSize(new java.awt.Dimension(300, 32767));
         jToolBar2.add(cSmileyCombo1);
         cSmileyCombo1.Init(UserMessage);
 
@@ -1625,109 +1629,99 @@
             }
         });
 
-        ExitButton.setText(bundle.getString(&quot;CBattleWindow.Exit&quot;)); // NOI18N
-        ExitButton.setAlignmentX(1.0F);
-        ExitButton.addMouseListener(new java.awt.event.MouseAdapter() {
-            public void mousePressed(java.awt.event.MouseEvent evt) {
-                ExitButtonMousePressed(evt);
-            }
-        });
-        ExitButton.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                ExitButtonActionPerformed(evt);
-            }
-        });
+        jSplitPane1.setDividerLocation(220);
+        jSplitPane1.setOrientation(javax.swing.JSplitPane.VERTICAL_SPLIT);
+        jSplitPane1.setResizeWeight(0.5);
+        jSplitPane1.setOneTouchExpandable(true);
+        jSplitPane1.setRightComponent(Chat);
 
-        GameStartButton.setText(bundle.getString(&quot;CBattleWindow.Start&quot;)); // NOI18N
-        GameStartButton.addActionListener(new java.awt.event.ActionListener() {
+        playerBattleTable.setModel(playertablemodel);
+        jScrollPane2.setViewportView(playerBattleTable);
+
+        MyTeamCombo.setFont(CUISettings.GetFont(12,false));
+        MyTeamCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { &quot;Team 1&quot;, &quot;Team 2&quot;, &quot;Team 3&quot;, &quot;Team 4&quot;, &quot;Team 5&quot;, &quot;Team 6&quot;, &quot;Team 7&quot;, &quot;Team 8&quot;, &quot;Team 9&quot;, &quot;Team 10&quot;, &quot;Team 11&quot;, &quot;Team 12&quot;, &quot;Team 13&quot;, &quot;Team 14&quot;, &quot;Team 15&quot;, &quot;Team 16&quot; }));
+        MyTeamCombo.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
-                GameStartButtonActionPerformed(evt);
+                MyTeamComboActionPerformed(evt);
             }
         });
 
-        LockToggle.setText(bundle.getString(&quot;CBattleWindow.Lock&quot;)); // NOI18N
-        LockToggle.addActionListener(new java.awt.event.ActionListener() {
+        MyAllyTeamCombo.setFont(CUISettings.GetFont(12,false));
+        MyAllyTeamCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { &quot;Ally Team 1&quot;, &quot;Ally Team 2&quot;, &quot;Ally Team 3&quot;, &quot;Ally Team 4&quot;, &quot;Ally Team 5&quot;, &quot;Ally Team 6&quot;, &quot;Ally Team 7&quot;, &quot;Ally Team 8&quot;, &quot;Ally Team 9&quot;, &quot;Ally Team 10&quot;, &quot;Ally Team 11&quot;, &quot;Ally Team 12&quot;, &quot;Ally Team 13&quot;, &quot;Ally Team 14&quot;, &quot;Ally Team 15&quot;, &quot;Ally Team 16&quot; }));
+        MyAllyTeamCombo.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
-                LockToggleActionPerformed(evt);
+                MyAllyTeamComboActionPerformed(evt);
             }
         });
 
-        ReadyToggle.setText(bundle.getString(&quot;CBattleWindow.Ready&quot;)); // NOI18N
-        ReadyToggle.addActionListener(new java.awt.event.ActionListener() {
+        RaceCombo.setFont(CUISettings.GetFont(12,false));
+        RaceCombo.setMaximumSize(new java.awt.Dimension(70, 25));
+        RaceCombo.setPreferredSize(new java.awt.Dimension(120, 25));
+        RaceCombo.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
-                ReadyToggleActionPerformed(evt);
+                RaceComboActionPerformed(evt);
             }
         });
 
-        SpectatorToggle.setText(bundle.getString(&quot;CBattleWindow.Spectator&quot;)); // NOI18N
-        SpectatorToggle.addActionListener(new java.awt.event.ActionListener() {
+        ColourButton.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/images/UI/colourpickerwheel16.png&quot;))); // NOI18N
+        ColourButton.setText(&quot;Change Colour&quot;);
+        ColourButton.setMargin(new java.awt.Insets(2, 6, 2, 6));
+        ColourButton.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
-                SpectatorToggleActionPerformed(evt);
+                ColourButtonActionPerformed(evt);
             }
         });
 
-        jLabel7.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
-        jLabel7.setText(bundle.getString(&quot;CBattleWindow.map&quot;)); // NOI18N
-        jLabel7.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
-        jLabel7.setAlignmentX(0.5F);
-        jLabel7.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
-        jLabel7.setMaximumSize(new java.awt.Dimension(260, 270));
-        jLabel7.setMinimumSize(new java.awt.Dimension(260, 270));
-        jLabel7.setPreferredSize(new java.awt.Dimension(260, 270));
-        jLabel7.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
+        ColourPanel.setBackground(Color.decode(CUserSettings.GetValue(&quot;lastbattle.colour&quot;, String.valueOf(Color.blue.getRGB()))));
+        ColourPanel.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0), 1, true));
 
-        javax.swing.GroupLayout sidepaneLayout = new javax.swing.GroupLayout(sidepane);
-        sidepane.setLayout(sidepaneLayout);
-        sidepaneLayout.setHorizontalGroup(
-            sidepaneLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(sidepaneLayout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(sidepaneLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addGroup(sidepaneLayout.createSequentialGroup()
-                        .addComponent(jLabel7, javax.swing.GroupLayout.DEFAULT_SIZE, 262, Short.MAX_VALUE)
-                        .addContainerGap())
-                    .addGroup(sidepaneLayout.createSequentialGroup()
-                        .addComponent(ExitButton, javax.swing.GroupLayout.DEFAULT_SIZE, 260, Short.MAX_VALUE)
-                        .addGap(12, 12, 12))
-                    .addGroup(sidepaneLayout.createSequentialGroup()
-                        .addComponent(GameStartButton, javax.swing.GroupLayout.DEFAULT_SIZE, 260, Short.MAX_VALUE)
-                        .addGap(12, 12, 12))
-                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, sidepaneLayout.createSequentialGroup()
-                        .addGroup(sidepaneLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
-                            .addComponent(SpectatorToggle, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 260, Short.MAX_VALUE)
-                            .addComponent(ReadyToggle, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 260, Short.MAX_VALUE)
-                            .addComponent(LockToggle, javax.swing.GroupLayout.DEFAULT_SIZE, 260, Short.MAX_VALUE))
-                        .addGap(12, 12, 12))))
+        javax.swing.GroupLayout ColourPanelLayout = new javax.swing.GroupLayout(ColourPanel);
+        ColourPanel.setLayout(ColourPanelLayout);
+        ColourPanelLayout.setHorizontalGroup(
+            ColourPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGap(0, 285, Short.MAX_VALUE)
         );
-        sidepaneLayout.setVerticalGroup(
-            sidepaneLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, sidepaneLayout.createSequentialGroup()
+        ColourPanelLayout.setVerticalGroup(
+            ColourPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGap(0, 23, Short.MAX_VALUE)
+        );
+
+        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
+        jPanel1.setLayout(jPanel1Layout);
+        jPanel1Layout.setHorizontalGroup(
+            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(jPanel1Layout.createSequentialGroup()
                 .addContainerGap()
-                .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 67, Short.MAX_VALUE)
-                .addComponent(SpectatorToggle)
+                .addComponent(MyTeamCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(ReadyToggle)
+                .addComponent(MyAllyTeamCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 111, javax.swing.GroupLayout.PREFERRED_SIZE)
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(LockToggle)
+                .addComponent(RaceCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 133, javax.swing.GroupLayout.PREFERRED_SIZE)
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(GameStartButton)
+                .addComponent(ColourButton)
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(ExitButton)
+                .addComponent(ColourPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+            .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 748, Short.MAX_VALUE)
+        );
+        jPanel1Layout.setVerticalGroup(
+            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
+                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 173, Short.MAX_VALUE)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
+                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                        .addComponent(MyTeamCombo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addComponent(MyAllyTeamCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addComponent(RaceCombo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addComponent(ColourButton))
+                    .addComponent(ColourPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                 .addContainerGap())
         );
 
-        jSplitPane1.setDividerLocation(220);
-        jSplitPane1.setOrientation(javax.swing.JSplitPane.VERTICAL_SPLIT);
-        jSplitPane1.setResizeWeight(0.5);
-        jSplitPane1.setOneTouchExpandable(true);
-        jSplitPane1.setRightComponent(Chat);
+        jPanel1Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {MyAllyTeamCombo, MyTeamCombo, RaceCombo});
 
-        playerBattleTable.setModel(playertablemodel);
-        jScrollPane2.setViewportView(playerBattleTable);
+        jSplitPane1.setTopComponent(jPanel1);
 
-        jSplitPane1.setLeftComponent(jScrollPane2);
-
         UserMessage.setColumns(20);
         UserMessage.setLineWrap(true);
         UserMessage.setRows(2);
@@ -1739,127 +1733,122 @@
         });
         jScrollPane4.setViewportView(UserMessage);
 
-        javax.swing.GroupLayout chatpanelLayout = new javax.swing.GroupLayout(chatpanel);
-        chatpanel.setLayout(chatpanelLayout);
-        chatpanelLayout.setHorizontalGroup(
-            chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(chatpanelLayout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, chatpanelLayout.createSequentialGroup()
-                        .addComponent(jScrollPane4, javax.swing.GroupLayout.DEFAULT_SIZE, 480, Short.MAX_VALUE)
-                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addComponent(sayButton, javax.swing.GroupLayout.PREFERRED_SIZE, 58, javax.swing.GroupLayout.PREFERRED_SIZE)
-                        .addGap(6, 6, 6))
-                    .addComponent(jToolBar2, javax.swing.GroupLayout.DEFAULT_SIZE, 550, Short.MAX_VALUE)
-                    .addGroup(chatpanelLayout.createSequentialGroup()
-                        .addComponent(jSplitPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 550, Short.MAX_VALUE)
-                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)))
-                .addGap(10, 10, 10)
-                .addComponent(sidepane, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap())
-        );
-        chatpanelLayout.setVerticalGroup(
-            chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(chatpanelLayout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addComponent(sidepane, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, chatpanelLayout.createSequentialGroup()
-                        .addComponent(jSplitPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 414, Short.MAX_VALUE)
-                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addComponent(jToolBar2, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
-                            .addComponent(jScrollPane4, 0, 0, Short.MAX_VALUE)
-                            .addComponent(sayButton, javax.swing.GroupLayout.DEFAULT_SIZE, 47, Short.MAX_VALUE))))
-                .addContainerGap())
-        );
+        GameStartButton.setText(bundle.getString(&quot;CBattleWindow.Start&quot;)); // NOI18N
+        GameStartButton.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                GameStartButtonActionPerformed(evt);
+            }
+        });
 
-        GameOptionsPane.addTab(&quot;Chat&quot;, chatpanel);
-
-        MyTeamCombo.setFont(CUISettings.GetFont(12,false));
-        MyTeamCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { &quot;Team 1&quot;, &quot;Team 2&quot;, &quot;Team 3&quot;, &quot;Team 4&quot;, &quot;Team 5&quot;, &quot;Team 6&quot;, &quot;Team 7&quot;, &quot;Team 8&quot;, &quot;Team 9&quot;, &quot;Team 10&quot;, &quot;Team 11&quot;, &quot;Team 12&quot;, &quot;Team 13&quot;, &quot;Team 14&quot;, &quot;Team 15&quot;, &quot;Team 16&quot; }));
-        MyTeamCombo.addActionListener(new java.awt.event.ActionListener() {
+        ExitButton.setText(bundle.getString(&quot;CBattleWindow.Exit&quot;)); // NOI18N
+        ExitButton.setAlignmentX(1.0F);
+        ExitButton.addMouseListener(new java.awt.event.MouseAdapter() {
+            public void mousePressed(java.awt.event.MouseEvent evt) {
+                ExitButtonMousePressed(evt);
+            }
+        });
+        ExitButton.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
-                MyTeamComboActionPerformed(evt);
+                ExitButtonActionPerformed(evt);
             }
         });
 
-        MyAllyTeamCombo.setFont(CUISettings.GetFont(12,false));
-        MyAllyTeamCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { &quot;Ally Team 1&quot;, &quot;Ally Team 2&quot;, &quot;Ally Team 3&quot;, &quot;Ally Team 4&quot;, &quot;Ally Team 5&quot;, &quot;Ally Team 6&quot;, &quot;Ally Team 7&quot;, &quot;Ally Team 8&quot;, &quot;Ally Team 9&quot;, &quot;Ally Team 10&quot;, &quot;Ally Team 11&quot;, &quot;Ally Team 12&quot;, &quot;Ally Team 13&quot;, &quot;Ally Team 14&quot;, &quot;Ally Team 15&quot;, &quot;Ally Team 16&quot; }));
-        MyAllyTeamCombo.addActionListener(new java.awt.event.ActionListener() {
+        SpectatorToggle.setText(bundle.getString(&quot;CBattleWindow.Spectator&quot;)); // NOI18N
+        SpectatorToggle.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
-                MyAllyTeamComboActionPerformed(evt);
+                SpectatorToggleActionPerformed(evt);
             }
         });
 
-        RaceCombo.setFont(CUISettings.GetFont(12,false));
-        RaceCombo.setMaximumSize(new java.awt.Dimension(70, 25));
-        RaceCombo.setPreferredSize(new java.awt.Dimension(120, 25));
-        RaceCombo.addActionListener(new java.awt.event.ActionListener() {
+        ReadyToggle.setText(bundle.getString(&quot;CBattleWindow.Ready&quot;)); // NOI18N
+        ReadyToggle.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
-                RaceComboActionPerformed(evt);
+                ReadyToggleActionPerformed(evt);
             }
         });
 
-        ColourButton.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/images/UI/colourpickerwheel.png&quot;))); // NOI18N
-        ColourButton.setText(&quot;Change Colour&quot;);
-        ColourButton.addActionListener(new java.awt.event.ActionListener() {
+        LockToggle.setText(bundle.getString(&quot;CBattleWindow.Lock&quot;)); // NOI18N
+        LockToggle.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
-                ColourButtonActionPerformed(evt);
+                LockToggleActionPerformed(evt);
             }
         });
 
-        ColourPanel.setBackground(Color.decode(CUserSettings.GetValue(&quot;lastbattle.colour&quot;, String.valueOf(Color.blue.getRGB()))));
-        ColourPanel.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0), 1, true));
+        jLabel7.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
+        jLabel7.setText(bundle.getString(&quot;CBattleWindow.map&quot;)); // NOI18N
+        jLabel7.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
+        jLabel7.setAlignmentX(0.5F);
+        jLabel7.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
+        jLabel7.setMaximumSize(new java.awt.Dimension(260, 270));
+        jLabel7.setMinimumSize(new java.awt.Dimension(260, 270));
+        jLabel7.setPreferredSize(new java.awt.Dimension(260, 270));
+        jLabel7.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
 
-        javax.swing.GroupLayout ColourPanelLayout = new javax.swing.GroupLayout(ColourPanel);
-        ColourPanel.setLayout(ColourPanelLayout);
-        ColourPanelLayout.setHorizontalGroup(
-            ColourPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGap(0, 608, Short.MAX_VALUE)
+        javax.swing.GroupLayout chatpanelLayout = new javax.swing.GroupLayout(chatpanel);
+        chatpanel.setLayout(chatpanelLayout);
+        chatpanelLayout.setHorizontalGroup(
+            chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(chatpanelLayout.createSequentialGroup()
+                .addContainerGap()
+                .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                    .addGroup(chatpanelLayout.createSequentialGroup()
+                        .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
+                            .addComponent(jToolBar2, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 747, Short.MAX_VALUE)
+                            .addGroup(chatpanelLayout.createSequentialGroup()
+                                .addComponent(jScrollPane4, javax.swing.GroupLayout.DEFAULT_SIZE, 683, Short.MAX_VALUE)
+                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                                .addComponent(sayButton, javax.swing.GroupLayout.PREFERRED_SIZE, 58, javax.swing.GroupLayout.PREFERRED_SIZE)))
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                        .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
+                            .addComponent(LockToggle, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, chatpanelLayout.createSequentialGroup()
+                                .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
+                                    .addComponent(SpectatorToggle, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                                    .addComponent(GameStartButton, javax.swing.GroupLayout.PREFERRED_SIZE, 131, javax.swing.GroupLayout.PREFERRED_SIZE))
+                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                                .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                                    .addComponent(ReadyToggle, javax.swing.GroupLayout.PREFERRED_SIZE, 124, javax.swing.GroupLayout.PREFERRED_SIZE)
+                                    .addComponent(ExitButton, javax.swing.GroupLayout.PREFERRED_SIZE, 122, javax.swing.GroupLayout.PREFERRED_SIZE)))))
+                    .addGroup(chatpanelLayout.createSequentialGroup()
+                        .addComponent(jSplitPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 750, Short.MAX_VALUE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                        .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
+                .addContainerGap())
         );
-        ColourPanelLayout.setVerticalGroup(
-            ColourPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGap(0, 43, Short.MAX_VALUE)
-        );
 
-        javax.swing.GroupLayout TeamTabLayout = new javax.swing.GroupLayout(TeamTab);
-        TeamTab.setLayout(TeamTabLayout);
-        TeamTabLayout.setHorizontalGroup(
-            TeamTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(TeamTabLayout.createSequentialGroup()
+        chatpanelLayout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {ExitButton, ReadyToggle});
+
+        chatpanelLayout.setVerticalGroup(
+            chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(chatpanelLayout.createSequentialGroup()
                 .addContainerGap()
-                .addGroup(TeamTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
-                    .addComponent(ColourPanel, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .addComponent(ColourButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, TeamTabLayout.createSequentialGroup()
-                        .addComponent(MyTeamCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 184, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                    .addGroup(chatpanelLayout.createSequentialGroup()
+                        .addComponent(jSplitPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 401, Short.MAX_VALUE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addComponent(MyAllyTeamCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 230, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addComponent(jToolBar2, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE))
+                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, chatpanelLayout.createSequentialGroup()
+                        .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 139, Short.MAX_VALUE)
+                        .addComponent(LockToggle)))
+                .addGap(6, 6, 6)
+                .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, chatpanelLayout.createSequentialGroup()
+                        .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                            .addComponent(ReadyToggle, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
+                            .addComponent(SpectatorToggle))
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addComponent(RaceCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 184, javax.swing.GroupLayout.PREFERRED_SIZE)))
-                .addContainerGap(242, Short.MAX_VALUE))
+                        .addGroup(chatpanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                            .addComponent(GameStartButton)
+                            .addComponent(ExitButton)))
+                    .addComponent(sayButton, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE)
+                    .addComponent(jScrollPane4, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap())
         );
-        TeamTabLayout.setVerticalGroup(
-            TeamTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(TeamTabLayout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(TeamTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
-                    .addComponent(MyAllyTeamCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE)
-                    .addComponent(MyTeamCombo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
-                    .addComponent(RaceCombo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(ColourButton)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(ColourPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .addGap(382, 382, 382))
-        );
 
-        TeamTabLayout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {MyAllyTeamCombo, MyTeamCombo, RaceCombo});
+        chatpanelLayout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {ExitButton, GameStartButton, ReadyToggle, SpectatorToggle});
 
-        GameOptionsPane.addTab(&quot;My Team&quot;, TeamTab);
+        GameOptionsPane.addTab(&quot;Chat&quot;, chatpanel);
 
         MapList.setFont(CUISettings.GetFont(12,false));
         MapList.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
@@ -1896,17 +1885,17 @@
         MapTabLayout.setHorizontalGroup(
             MapTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(MapTabLayout.createSequentialGroup()
-                .addGroup(MapTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                .addGroup(MapTabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                     .addGroup(MapTabLayout.createSequentialGroup()
                         .addContainerGap()
                         .addComponent(MapPickerLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 450, javax.swing.GroupLayout.PREFERRED_SIZE))
-                    .addGroup(MapTabLayout.createSequentialGroup()
+                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, MapTabLayout.createSequentialGroup()
                         .addGap(7, 7, 7)
-                        .addComponent(reload_maplist, javax.swing.GroupLayout.PREFERRED_SIZE, 154, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addComponent(reload_maplist, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                        .addComponent(ChMapButton, javax.swing.GroupLayout.PREFERRED_SIZE, 130, javax.swing.GroupLayout.PREFERRED_SIZE)))
+                        .addComponent(ChMapButton, javax.swing.GroupLayout.PREFERRED_SIZE, 222, javax.swing.GroupLayout.PREFERRED_SIZE)))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
-                .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 382, Short.MAX_VALUE)
+                .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 330, Short.MAX_VALUE)
                 .addContainerGap())
         );
         MapTabLayout.setVerticalGroup(
@@ -1987,10 +1976,8 @@
             .addGroup(jPanel6Layout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 842, Short.MAX_VALUE)
-                    .addGroup(jPanel6Layout.createSequentialGroup()
-                        .addGap(240, 240, 240)
-                        .addComponent(HostButtonsPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
+                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 790, Short.MAX_VALUE)
+                    .addComponent(HostButtonsPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                 .addContainerGap())
         );
         jPanel6Layout.setVerticalGroup(
@@ -2078,7 +2065,7 @@
         AIColourPanel.setLayout(AIColourPanelLayout);
         AIColourPanelLayout.setHorizontalGroup(
             AIColourPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGap(0, 379, Short.MAX_VALUE)
+            .addGap(0, 327, Short.MAX_VALUE)
         );
         AIColourPanelLayout.setVerticalGroup(
             AIColourPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
@@ -2093,7 +2080,7 @@
                 .addContainerGap()
                 .addGroup(AITabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                     .addComponent(jLabel9, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE)
-                    .addComponent(jSeparator1, javax.swing.GroupLayout.DEFAULT_SIZE, 842, Short.MAX_VALUE)
+                    .addComponent(jSeparator1, javax.swing.GroupLayout.DEFAULT_SIZE, 790, Short.MAX_VALUE)
                     .addGroup(AITabLayout.createSequentialGroup()
                         .addGroup(AITabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                             .addComponent(jLabel14)
@@ -2212,8 +2199,8 @@
             .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel5Layout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
-                    .addComponent(RestrictedUnitsCombo, javax.swing.GroupLayout.Alignment.LEADING, 0, 216, Short.MAX_VALUE)
-                    .addComponent(RestrictUnitButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 216, Short.MAX_VALUE))
+                    .addComponent(RestrictedUnitsCombo, javax.swing.GroupLayout.Alignment.LEADING, 0, 164, Short.MAX_VALUE)
+                    .addComponent(RestrictUnitButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 164, Short.MAX_VALUE))
                 .addContainerGap())
         );
         jPanel5Layout.setVerticalGroup(
@@ -2259,8 +2246,8 @@
                     .addComponent(jScrollPane6, javax.swing.GroupLayout.PREFERRED_SIZE, 588, javax.swing.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addComponent(UnRestrictAllUnitsButton, javax.swing.GroupLayout.DEFAULT_SIZE, 248, Short.MAX_VALUE)
-                    .addComponent(UnRestrictUnitButton, javax.swing.GroupLayout.DEFAULT_SIZE, 248, Short.MAX_VALUE)
+                    .addComponent(UnRestrictAllUnitsButton, javax.swing.GroupLayout.DEFAULT_SIZE, 196, Short.MAX_VALUE)
+                    .addComponent(UnRestrictUnitButton, javax.swing.GroupLayout.DEFAULT_SIZE, 196, Short.MAX_VALUE)
                     .addComponent(jPanel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                 .addContainerGap())
         );
@@ -2315,9 +2302,9 @@
             .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addComponent(jScrollPane12, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 842, Short.MAX_VALUE)
+                    .addComponent(jScrollPane12, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 790, Short.MAX_VALUE)
                     .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
-                        .addComponent(jLabel8, javax.swing.GroupLayout.DEFAULT_SIZE, 572, Short.MAX_VALUE)
+                        .addComponent(jLabel8, javax.swing.GroupLayout.DEFAULT_SIZE, 520, Short.MAX_VALUE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addComponent(jButton4, javax.swing.GroupLayout.PREFERRED_SIZE, 266, javax.swing.GroupLayout.PREFERRED_SIZE)))
                 .addContainerGap())
@@ -2340,7 +2327,7 @@
         getContentPane().setLayout(layout);
         layout.setHorizontalGroup(
             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addComponent(GameOptionsPane, javax.swing.GroupLayout.DEFAULT_SIZE, 867, Short.MAX_VALUE)
+            .addComponent(GameOptionsPane, javax.swing.GroupLayout.PREFERRED_SIZE, 815, Short.MAX_VALUE)
         );
         layout.setVerticalGroup(
             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
@@ -3211,7 +3198,6 @@
     private javax.swing.JComboBox RestrictedUnitsCombo;
     private javax.swing.JTextArea ScriptPreview;
     private javax.swing.JToggleButton SpectatorToggle;
-    private javax.swing.JPanel TeamTab;
     private javax.swing.JButton UnRestrictAllUnitsButton;
     private javax.swing.JButton UnRestrictUnitButton;
     private javax.swing.JButton UpdateAIButton;
@@ -3236,6 +3222,7 @@
     private javax.swing.JLabel jLabel7;
     private javax.swing.JLabel jLabel8;
     private javax.swing.JLabel jLabel9;
+    private javax.swing.JPanel jPanel1;
     private javax.swing.JPanel jPanel2;
     private javax.swing.JPanel jPanel5;
     private javax.swing.JPanel jPanel6;
@@ -3255,7 +3242,6 @@
     private javax.swing.JTable playerBattleTable;
     private javax.swing.JButton reload_maplist;
     private javax.swing.JButton sayButton;
-    private javax.swing.JPanel sidepane;
     // End of variables declaration//GEN-END:variables
 
     public void Init(LMain L) {

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannel.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannel.form	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannel.form	2008-02-01 22:11:06 UTC (rev 5440)
@@ -269,7 +269,7 @@
                       &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;257&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;285&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
                               &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                                   &lt;Component id=&quot;jButton1&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;37&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -278,7 +278,7 @@
                                   &lt;Component id=&quot;jButton5&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;27&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;
                               &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;channelPrivateLabel&quot; pref=&quot;106&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;channelPrivateLabel&quot; pref=&quot;134&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;playerCountLabel&quot; min=&quot;-2&quot; pref=&quot;145&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannel.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannel.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -411,7 +411,7 @@
                         } else {
                             AddMessage(time + User + Msg);
                         }
-                        if (!isShowing()) {
+                        if (!chatpanel.isShowing()) {
                             CEvent e2 = new CEvent(CEvent.CHANNELUNREAD + &quot; &quot;
                                     + Channel);
                             LM.core.NewGUIEvent(e2);
@@ -465,11 +465,9 @@
         } else if (e.IsEvent(&quot;CLIENTS&quot;)) {
             // Add!!!!!
             if (e.data[1].equalsIgnoreCase(Channel)) {
-                int c = 2;
-                while (c &lt; e.data.length - 1) {
+                for (int c = 2; c &lt; e.data.length; c++) {
                     //listModel.addElement(e.data[c]);
                     AddPlayer(e.data[c], true);
-                    c++;
                 }
             }
         } else if (e.IsEvent(&quot;CHANNELTOPIC&quot;)) {
@@ -482,7 +480,7 @@
                 topic = aflobby.CChatPanel.ParseChatText(topic);
                 topic = &quot;&lt;font face=\&quot;Bitstream Vera Sans Mono, Andale Mono, &quot; +
                         &quot;Consolas, Courier New, Courier, Monospace\&quot; size=\&quot;3\&quot;&gt;&quot; +
-                        &quot;&lt;b&gt;Topic : &lt;br&gt;&quot; + topic + &quot; set by :&quot; + e.data[2] + 
+                        &quot;&lt;b&gt;Topic : &lt;br&gt;&quot; + topic + &quot;&lt;br&gt; set by :&quot; + e.data[2] + 
                         &quot; on &quot; + topicset.toString() + &quot;&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&quot;;
                 
                 if (chatpanel != null) {
@@ -899,7 +897,7 @@
     private void jButton2ActionPerformed (java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
         String s = aflobby.UI.CUserSettings.GetStartScript();
         if (s.trim().equals(&quot;&quot;)) {
-            s += &quot;\n&quot;; //System.getProperty (&quot;line.separator&quot;);
+            s += System.getProperty (&quot;line.separator&quot;);
         }
         s += &quot;/join &quot;;
         s += Channel;

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannelView.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannelView.form	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannelView.form	2008-02-01 22:11:06 UTC (rev 5440)
@@ -2,40 +2,6 @@
 
 &lt;Form version=&quot;1.5&quot; maxVersion=&quot;1.5&quot; type=&quot;org.netbeans.modules.form.forminfo.JPanelFormInfo&quot;&gt;
   &lt;NonVisualComponents&gt;
-    &lt;Container class=&quot;javax.swing.JMenuBar&quot; name=&quot;jMenuBar1&quot;&gt;
-
-      &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.DesignAbsoluteLayout&quot;&gt;
-        &lt;Property name=&quot;useNullLayout&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Menu class=&quot;javax.swing.JMenu&quot; name=&quot;jMenu1&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CChannelView.jMenu1.text&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;Events&gt;
-            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jMenu1ActionPerformed&quot;/&gt;
-          &lt;/Events&gt;
-          &lt;SubComponents&gt;
-            &lt;MenuItem class=&quot;javax.swing.JMenuItem&quot; name=&quot;jMenuItem1&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CChannelView.jMenuItem1.text&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-            &lt;/MenuItem&gt;
-            &lt;MenuItem class=&quot;javax.swing.JRadioButtonMenuItem&quot; name=&quot;jRadioButtonMenuItem1&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CChannelView.jRadioButtonMenuItem1.text&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-            &lt;/MenuItem&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Menu&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
     &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;tabplacementGroup&quot;&gt;
     &lt;/Component&gt;
   &lt;/NonVisualComponents&gt;
@@ -97,6 +63,7 @@
       &lt;SubComponents&gt;
         &lt;Container class=&quot;javax.swing.JTabbedPane&quot; name=&quot;tabpane&quot;&gt;
           &lt;Properties&gt;
+            &lt;Property name=&quot;tabLayoutPolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
             &lt;Property name=&quot;tabPlacement&quot; type=&quot;int&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
               &lt;Connection code=&quot;Integer.parseInt(CUserSettings.GetValue(&quot;UI.toptabpane.placement&quot;, &quot;&quot;+javax.swing.JTabbedPane.TOP))&quot; type=&quot;code&quot;/&gt;
             &lt;/Property&gt;
@@ -315,7 +282,9 @@
                         &lt;Font component=&quot;ladderLabel&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;1&quot;/&gt;
                       &lt;/FontInfo&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Not registered to the ladder&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                      &lt;PlainString value=&quot;Not registered to the ladder&quot;/&gt;
+                    &lt;/Property&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton12&quot;&gt;
@@ -340,7 +309,9 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton14&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Darkstars.co.uk&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                      &lt;PlainString value=&quot;Darkstars.co.uk&quot;/&gt;
+                    &lt;/Property&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton14ActionPerformed&quot;/&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannelView.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannelView.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannelView.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -16,15 +16,12 @@
 import java.awt.Color;
 import java.awt.Component;
 import java.awt.event.KeyEvent;
-import java.lang.reflect.InvocationTargetException;
 import java.util.ArrayList;
 import java.util.Arrays;
 import java.util.Collection;
 import java.util.Iterator;
 import java.util.TreeMap;
 import java.util.concurrent.ExecutionException;
-import java.util.logging.Level;
-import java.util.logging.Logger;
 import java.util.regex.PatternSyntaxException;
 import javax.swing.DefaultComboBoxModel;
 import javax.swing.JTable;
@@ -34,12 +31,10 @@
 import javax.swing.SwingWorker;
 import javax.swing.table.DefaultTableCellRenderer;
 
-//import javax.swing.text.html.*;
 import javax.swing.table.TableRowSorter;
 import org.jvnet.lafwidget.LafWidget;
 import org.jvnet.lafwidget.tabbed.DefaultTabPreviewPainter;
 
-
 /**
  *
  * @author  Shade
@@ -176,13 +171,21 @@
     @Override
     public void OnRemove() {
         
-        if(cSettings!= null){
+        if(cSettings != null){
             LM.core.RemoveModule(cSettings);
+            cSettings = null;
         }
         
         if(cBattleList != null){
             LM.core.RemoveModule(cBattleList);
+            cBattleList = null;
         }
+        
+        for(CChannel c : this.channels.values()){
+            LM.core.RemoveModule(c);
+        }
+        
+        channels.clear();
     }
 
     @Override
@@ -201,10 +204,6 @@
     // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;//GEN-BEGIN:initComponents
     private void initComponents() {
 
-        jMenuBar1 = new javax.swing.JMenuBar();
-        jMenu1 = new javax.swing.JMenu();
-        jMenuItem1 = new javax.swing.JMenuItem();
-        jRadioButtonMenuItem1 = new javax.swing.JRadioButtonMenuItem();
         tabplacementGroup = new javax.swing.ButtonGroup();
         SplitPane = new javax.swing.JSplitPane();
         tabpane = new javax.swing.JTabbedPane();
@@ -257,22 +256,6 @@
         jLabel2 = new javax.swing.JLabel();
         BottomPanel = new javax.swing.JPanel();
 
-        java.util.ResourceBundle bundle = java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;); // NOI18N
-        jMenu1.setText(bundle.getString(&quot;CChannelView.jMenu1.text&quot;)); // NOI18N
-        jMenu1.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                jMenu1ActionPerformed(evt);
-            }
-        });
-
-        jMenuItem1.setText(bundle.getString(&quot;CChannelView.jMenuItem1.text&quot;)); // NOI18N
-        jMenu1.add(jMenuItem1);
-
-        jRadioButtonMenuItem1.setText(bundle.getString(&quot;CChannelView.jRadioButtonMenuItem1.text&quot;)); // NOI18N
-        jMenu1.add(jRadioButtonMenuItem1);
-
-        jMenuBar1.add(jMenu1);
-
         setFont(CUISettings.GetFont(12,false));
         setMaximumSize(new java.awt.Dimension(2840, 2560));
         setMinimumSize(new java.awt.Dimension(840, 570));
@@ -283,6 +266,7 @@
         SplitPane.setResizeWeight(1.0);
         SplitPane.setOneTouchExpandable(true);
 
+        tabpane.setTabLayoutPolicy(javax.swing.JTabbedPane.SCROLL_TAB_LAYOUT);
         tabpane.setTabPlacement(Integer.parseInt(CUserSettings.GetValue(&quot;UI.toptabpane.placement&quot;, &quot;&quot;+javax.swing.JTabbedPane.TOP)));
         tabpane.setMaximumSize(new java.awt.Dimension(83000, 530000));
         tabpane.setMinimumSize(new java.awt.Dimension(640, 300));
@@ -293,6 +277,7 @@
 
         jPanel7.setFont(CUISettings.GetFont(12,false));
 
+        java.util.ResourceBundle bundle = java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;); // NOI18N
         LogOutButton.setText(bundle.getString(&quot;LMain.Logout&quot;)); // NOI18N
         LogOutButton.setHorizontalAlignment(javax.swing.SwingConstants.LEADING);
         LogOutButton.setMargin(new java.awt.Insets(1, 6, 1, 6));
@@ -810,10 +795,6 @@
         }*/
     }//GEN-LAST:event_StatusComboActionPerformed
 
-    private void jMenu1ActionPerformed (java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenu1ActionPerformed
-// TODO add your handling code here:
-    }//GEN-LAST:event_jMenu1ActionPerformed
-
     private void PlayerListComponentShown (java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_PlayerListComponentShown
     }//GEN-LAST:event_PlayerListComponentShown
     public boolean search_changed = false;
@@ -1012,7 +993,7 @@
     @Override
     public void Update() {
         fredrawcounter--;
-        if ((fredrawcounter == 15) || (fredrawcounter == 30) || (fredrawcounter == 45)) {
+        //if ((fredrawcounter == 2) || (fredrawcounter == 4)) {
             if (startupcommands.isEmpty() == false) {
 
                 String f = startupcommands.get(0);
@@ -1041,14 +1022,14 @@
                 }
                 //tabpane.add (&quot;#&quot;+e.data[1],c1);
             }
-        }
+        //}
         
-        if(fredrawcounter == 0){
-            fredrawcounter = 60;
-        }
-        for (CChannel cc : channels.values()) {
+        //if(fredrawcounter == 0){
+        //    fredrawcounter = 4;
+        //}
+        /*for (CChannel cc : channels.values()) {
             cc.Update();
-        }
+        }*/
     }
 
     @Override
@@ -1149,13 +1130,10 @@
                 public void run() {
                     ClearPlayers();
                     tabpane.removeAll();
-                    synchronized (channels) {
-                        channels.clear();
-                    }
                 }
             };
             SwingUtilities.invokeLater(doWorkRunnable);
-            LM.RemoveView(getTitle());
+            LM.RemoveView(this);
             if (e.IsEvent(CEvent.DISCONNECTED)) {
                 LM.Toasts.AddMessage(&quot;You've been disconnected&quot;);
             }
@@ -1548,12 +1526,8 @@
     private javax.swing.JLabel jLabel7;
     private javax.swing.JLabel jLabel8;
     private javax.swing.JLabel jLabel9;
-    private javax.swing.JMenu jMenu1;
-    private javax.swing.JMenuBar jMenuBar1;
-    private javax.swing.JMenuItem jMenuItem1;
     private javax.swing.JPanel jPanel3;
     private javax.swing.JPanel jPanel7;
-    private javax.swing.JRadioButtonMenuItem jRadioButtonMenuItem1;
     private javax.swing.JScrollPane jScrollPane3;
     private javax.swing.JScrollPane jScrollPane4;
     private javax.swing.JLabel ladderLabel;

Modified: trunk/Lobby/AFLobby/src/aflobby/CGlestBattleModel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CGlestBattleModel.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CGlestBattleModel.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -47,7 +47,7 @@
         }
         
         b.LM.protocol.SetAway(false);
-        //b.LM.protocol.SetIngame(true);
+        b.LM.protocol.SetIngame(true);
 
         try {
             p.waitFor();
@@ -55,6 +55,7 @@
             ex.printStackTrace();
         }
 
+        b.LM.protocol.SetIngame(false);
 //        }
         //b.LM.protocol.SendTraffic(&quot;GETINGAMETIME&quot;);
 //        System.out.println(&quot;loop ended&quot;);

Modified: trunk/Lobby/AFLobby/src/aflobby/CGlestBattleWindow.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CGlestBattleWindow.form	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CGlestBattleWindow.form	2008-02-01 22:11:06 UTC (rev 5440)
@@ -3,7 +3,9 @@
 &lt;Form version=&quot;1.5&quot; maxVersion=&quot;1.5&quot; type=&quot;org.netbeans.modules.form.forminfo.JFrameFormInfo&quot;&gt;
   &lt;Properties&gt;
     &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
-    &lt;Property name=&quot;title&quot; type=&quot;java.lang.String&quot; value=&quot;Glest Battle&quot;/&gt;
+    &lt;Property name=&quot;title&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+      &lt;PlainString value=&quot;Glest Battle&quot;/&gt;
+    &lt;/Property&gt;
     &lt;Property name=&quot;iconImage&quot; type=&quot;java.awt.Image&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
       &lt;Connection code=&quot;CUISettings.GetWindowIcon()&quot; type=&quot;code&quot;/&gt;
     &lt;/Property&gt;
@@ -174,7 +176,9 @@
     &lt;/Container&gt;
     &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton1&quot;&gt;
       &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Send&quot;/&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+          &lt;PlainString value=&quot;Send&quot;/&gt;
+        &lt;/Property&gt;
       &lt;/Properties&gt;
       &lt;Events&gt;
         &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton1ActionPerformed&quot;/&gt;
@@ -182,7 +186,9 @@
     &lt;/Component&gt;
     &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton2&quot;&gt;
       &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Start&quot;/&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+          &lt;PlainString value=&quot;Start&quot;/&gt;
+        &lt;/Property&gt;
         &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
           &lt;Connection code=&quot;battlemodel.AmIHost()&quot; type=&quot;code&quot;/&gt;
         &lt;/Property&gt;
@@ -193,7 +199,9 @@
     &lt;/Component&gt;
     &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton4&quot;&gt;
       &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Exit&quot;/&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+          &lt;PlainString value=&quot;Exit&quot;/&gt;
+        &lt;/Property&gt;
       &lt;/Properties&gt;
       &lt;Events&gt;
         &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton4ActionPerformed&quot;/&gt;
@@ -222,7 +230,9 @@
         &lt;Property name=&quot;selected&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
           &lt;Connection code=&quot;battlemodel.IsLocked()&quot; type=&quot;code&quot;/&gt;
         &lt;/Property&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Lock&quot;/&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+          &lt;PlainString value=&quot;Lock&quot;/&gt;
+        &lt;/Property&gt;
       &lt;/Properties&gt;
       &lt;Events&gt;
         &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;LockToggleActionPerformed&quot;/&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CGlestBattleWindow.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CGlestBattleWindow.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CGlestBattleWindow.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -244,7 +244,9 @@
     }//GEN-LAST:event_UserMessageKeyPressed
 
     private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
+        System.out.println(&quot;glest start button pressed&quot;);
         battlemodel.Start();
+        System.out.println(&quot;glest start button pressed done&quot;);
     }//GEN-LAST:event_jButton2ActionPerformed
 
     private void formWindowClosing(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowClosing

Modified: trunk/Lobby/AFLobby/src/aflobby/CSettings.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CSettings.form	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CSettings.form	2008-02-01 22:11:06 UTC (rev 5440)
@@ -59,7 +59,9 @@
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;Overview&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;Overview&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Overview&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/JTabbedPaneConstraints&gt;
             &lt;/Constraint&gt;
           &lt;/Constraints&gt;
@@ -83,6 +85,7 @@
                                       &lt;Component id=&quot;jButton12&quot; linkSize=&quot;1&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                                       &lt;Component id=&quot;jButton9&quot; linkSize=&quot;1&quot; alignment=&quot;0&quot; pref=&quot;171&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                                       &lt;Component id=&quot;jButton13&quot; linkSize=&quot;1&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;Component id=&quot;jButton20&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                                   &lt;/Group&gt;
                                   &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
@@ -92,6 +95,7 @@
                                       &lt;Component id=&quot;jLabel10&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                                       &lt;Component id=&quot;jLabel9&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                                       &lt;Component id=&quot;jLabel8&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;Component id=&quot;jLabel23&quot; alignment=&quot;0&quot; pref=&quot;433&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                                   &lt;/Group&gt;
                               &lt;/Group&gt;
                           &lt;/Group&gt;
@@ -131,8 +135,16 @@
                           &lt;/Group&gt;
                           &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jButton16&quot; linkSize=&quot;2&quot; min=&quot;-2&quot; pref=&quot;36&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;jLabel13&quot; min=&quot;-2&quot; pref=&quot;36&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;jButton16&quot; linkSize=&quot;2&quot; min=&quot;-2&quot; pref=&quot;36&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;jButton20&quot; min=&quot;-2&quot; pref=&quot;36&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;jLabel13&quot; min=&quot;-2&quot; pref=&quot;36&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;jLabel23&quot; min=&quot;-2&quot; pref=&quot;36&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace pref=&quot;218&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
@@ -147,12 +159,12 @@
                         &lt;Font component=&quot;jLabel7&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;7&quot;/&gt;
                       &lt;/FontInfo&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Please Choose an option below or to the left, changes are saved automatically&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Please Choose an option below or to the left, changes are saved automatically&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton9&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Set up Paths&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Set up Paths&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton9ActionPerformed&quot;/&gt;
@@ -160,12 +172,12 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel8&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Set up the location of unitsync and spring&lt;br&gt;&amp;#xa;These are needed to start and use spring in AFLobby&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Set up the location of unitsync and spring These are needed to start and use spring in AFLobby&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton12&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Initial Commands&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Initial Commands&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton12ActionPerformed&quot;/&gt;
@@ -173,12 +185,12 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel9&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Set up AFLobby to join channels, message people,&lt;br&gt; and do other things when you log in&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Set up AFLobby to join channels, message people, and do other things when you log in&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton13&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Interface Settings&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Interface Settings&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton13ActionPerformed&quot;/&gt;
@@ -186,7 +198,7 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton14&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Chat Highlighting&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Chat Highlighting&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton14ActionPerformed&quot;/&gt;
@@ -194,7 +206,7 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton15&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ladder Settings&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ladder Settings&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton15ActionPerformed&quot;/&gt;
@@ -202,7 +214,7 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton16&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Spring Settings&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Spring Settings&quot; noResource=&quot;true&quot;/&gt;
                     &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                       &lt;Connection code=&quot;CUserSettings.GetValue(&quot;settings.command&quot;, &quot;&quot;).equals(&quot;&quot;)==false&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
@@ -213,24 +225,37 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel10&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Change AFLobbys theme, re-arrange tabs,&lt;br&gt;the battle list, and customize other controls&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Change AFLobbys theme, re-arrange tabs, the battle list, and customize other controls&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel11&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Set up and control ladder game integration, to play&lt;br&gt; against other ranked players&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Set up and control ladder game integration, to play against other ranked players&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel13&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Start Settings++ and change springs graphics, screen resolution, &lt;br&gt;and other engine related settings&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Start Settings++ and change springs graphics, screen resolution, and other engine related settings&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel16&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Highlight words and phrases in&lt;br&gt;conversations in different colours&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Highlight words and phrases in conversations in different colours&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton20&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;First Run Wizard&quot; noResource=&quot;true&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;Events&gt;
+                    &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton20ActionPerformed&quot;/&gt;
+                  &lt;/Events&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel23&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;Re-run the initial startup wizard&quot; noResource=&quot;true&quot;/&gt;
+                  &lt;/Properties&gt;
+                &lt;/Component&gt;
               &lt;/SubComponents&gt;
             &lt;/Container&gt;
           &lt;/SubComponents&gt;
@@ -244,7 +269,9 @@
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;File Paths&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;File Paths&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;File Paths&quot;/&gt;
+                &lt;/Property&gt;
                 &lt;Property name=&quot;tabIcon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
                   &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/page.gif&quot;/&gt;
                 &lt;/Property&gt;
@@ -332,12 +359,12 @@
           &lt;SubComponents&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel2&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;UnitSync&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;UnitSync&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton6&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton6ActionPerformed&quot;/&gt;
@@ -345,12 +372,12 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel3&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Spring&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Spring&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton7&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton7ActionPerformed&quot;/&gt;
@@ -372,7 +399,7 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton8&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton8ActionPerformed&quot;/&gt;
@@ -387,12 +414,12 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel17&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Spring Settings&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Spring Settings&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton17&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton17ActionPerformed&quot;/&gt;
@@ -407,7 +434,7 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel4&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Single Player&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Single Player&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel21&quot;&gt;
@@ -417,12 +444,12 @@
                     &lt;Font bold=&quot;true&quot; component=&quot;jLabel21&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;4&quot;/&gt;
                   &lt;/FontInfo&gt;
                 &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;When you&apos;ve set the paths, restart aflobby for the changes to take effect.&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;When you&apos;ve set the paths, restart aflobby for the changes to take effect.&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel22&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Glest&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Glest&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;GlestLabel&quot;&gt;
@@ -434,7 +461,7 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton19&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton19ActionPerformed&quot;/&gt;
@@ -747,7 +774,7 @@
                     &lt;Property name=&quot;selected&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                       &lt;Connection code=&quot;CUserSettings.GetValue(&quot;looknfeel&quot;, UIManager.getSystemLookAndFeelClassName()).contains(&quot;substance&quot;)&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Use Substance theme&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Use Substance theme&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jRadioButton5ActionPerformed&quot;/&gt;
@@ -761,7 +788,7 @@
                     &lt;Property name=&quot;selected&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                       &lt;Connection code=&quot;CUserSettings.GetValue(&quot;looknfeel&quot;, UIManager.getSystemLookAndFeelClassName()).equals(UIManager.getSystemLookAndFeelClassName())&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Use Native OS theme&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Use Native OS theme&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jRadioButton6ActionPerformed&quot;/&gt;
@@ -775,7 +802,7 @@
                     &lt;Property name=&quot;selected&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                       &lt;Connection code=&quot;CUserSettings.GetValue(&quot;looknfeel&quot;, UIManager.getSystemLookAndFeelClassName()).equals(&quot;defjava&quot;)&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Use default Java theme&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Use default Java theme&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jRadioButton7ActionPerformed&quot;/&gt;
@@ -783,7 +810,7 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel1&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Main Lobby GUI theme&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Main Lobby GUI theme&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;jCheckBox1&quot;&gt;
@@ -791,7 +818,7 @@
                     &lt;Property name=&quot;selected&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                       &lt;Connection code=&quot;Boolean.valueOf(CUserSettings.GetValue(&quot;angledtabs&quot;, &quot;true&quot;))&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Use substance sideways tabs on tabs to the left and right&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Use substance sideways tabs on tabs to the left and right&quot; noResource=&quot;true&quot;/&gt;
                     &lt;Property name=&quot;enabled&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                       &lt;Connection code=&quot;CUserSettings.GetValue(&quot;looknfeel&quot;, &quot;org.jvnet.substance.skin.SubstanceBusinessBlackSteelLookAndFeel&quot;).contains(&quot;substance&quot;)&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
@@ -805,7 +832,7 @@
                     &lt;Property name=&quot;selected&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                       &lt;Connection code=&quot;CUserSettings.GetValue(&quot;ui.channelview.battlelisttopposition&quot;, &quot;true&quot;).equals(&quot;false&quot;)&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Show Battle List underneath the main tab control (TASClient style)&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Show Battle List underneath the main tab control (TASClient style)&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;BattlePositionCheckBoxActionPerformed&quot;/&gt;
@@ -816,7 +843,7 @@
                     &lt;Property name=&quot;selected&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                       &lt;Connection code=&quot;Boolean.valueOf(CUserSettings.GetValue(&quot;ui.channelview.userjoinflags&quot;, &quot;true&quot;))&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Show flags when User joins&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Show flags when User joins&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jCheckBox2ActionPerformed&quot;/&gt;
@@ -827,7 +854,7 @@
                     &lt;Property name=&quot;selected&quot; type=&quot;boolean&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                       &lt;Connection code=&quot;Boolean.valueOf(CUserSettings.GetValue(&quot;ui.channelview.userjoinranks&quot;, &quot;false&quot;))&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Show ranks when User joins&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Show ranks when User joins&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jCheckBox3ActionPerformed&quot;/&gt;
@@ -981,7 +1008,9 @@
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;Chat Colours&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;Chat Colours&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Chat Colours&quot;/&gt;
+                &lt;/Property&gt;
                 &lt;Property name=&quot;tabIcon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
                   &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/colourpickerwheel16.png&quot;/&gt;
                 &lt;/Property&gt;
@@ -1066,7 +1095,7 @@
                 &lt;/Container&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel18&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Preview:&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Preview:&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton18&quot;&gt;
@@ -1074,7 +1103,7 @@
                     &lt;Property name=&quot;icon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
                       &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/colourpickerwheel.png&quot;/&gt;
                     &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Change Colour&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Change Colour&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                   &lt;Events&gt;
                     &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton18ActionPerformed&quot;/&gt;
@@ -1104,7 +1133,7 @@
                 &lt;/Container&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel19&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;At the moment only a few of the text types are customizeable but in the next release the full spectrum should be available.&lt;br&gt;&amp;#xa;&lt;br&gt;&amp;#xa;The preview pane will also contain something useful in the next release.&quot;/&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;At the moment only a few of the text types are customizeable but in the next release the full spectrum should be available.&lt;br&gt;&amp;#xa;&lt;br&gt;&amp;#xa;The preview pane will also contain something useful in the next release.&quot; noResource=&quot;true&quot;/&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
               &lt;/SubComponents&gt;
@@ -1115,7 +1144,9 @@
           &lt;Constraints&gt;
             &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
               &lt;JTabbedPaneConstraints tabName=&quot;Ladders&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; value=&quot;Ladders&quot;/&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;PlainString value=&quot;Ladders&quot;/&gt;
+                &lt;/Property&gt;
                 &lt;Property name=&quot;tabIcon&quot; type=&quot;javax.swing.Icon&quot; editor=&quot;org.netbeans.modules.form.editors2.IconEditor&quot;&gt;
                   &lt;Image iconType=&quot;3&quot; name=&quot;/images/UI/page_favourites.gif&quot;/&gt;
                 &lt;/Property&gt;
@@ -1171,19 +1202,14 @@
           &lt;SubComponents&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel5&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ladder password&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ladder password&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;ladderPassBox&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUserSettings.GetValue(&quot;ladderpassword.&quot;+LM.protocol.GetUsername(), LM.protocol.Password())&quot; type=&quot;code&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton10&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Change Password&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Change Password&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton10ActionPerformed&quot;/&gt;
@@ -1191,7 +1217,7 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton11&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Save Password&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Save Password&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton11ActionPerformed&quot;/&gt;
@@ -1204,12 +1230,12 @@
                     &lt;Font component=&quot;jLabel26&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;2&quot;/&gt;
                   &lt;/FontInfo&gt;
                 &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ladder Properties&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ladder Properties&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel27&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Note: Currently these only affect the development ladder not the official ladder for testing purposes&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Note: Currently these only affect the development ladder not the official ladder for testing purposes&quot; noResource=&quot;true&quot;/&gt;
               &lt;/Properties&gt;
             &lt;/Component&gt;
           &lt;/SubComponents&gt;
@@ -1231,7 +1257,7 @@
             &lt;Font bold=&quot;true&quot; component=&quot;jLabel6&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;4&quot;/&gt;
           &lt;/FontInfo&gt;
         &lt;/Property&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Settings&quot;/&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Settings&quot; noResource=&quot;true&quot;/&gt;
       &lt;/Properties&gt;
     &lt;/Component&gt;
   &lt;/SubComponents&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CSettings.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CSettings.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/CSettings.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -34,10 +34,15 @@
     public CSettings(){
         this.setTitle(&quot;CSettings&quot;);
         
+        Runnable doWorkRunnable1 = new Runnable() {
+
+            public void run() {
+               initComponents();
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable1);
         
-        initComponents();
-        
-        Runnable doWorkRunnable = new Runnable() {
+        Runnable doWorkRunnable2 = new Runnable() {
 
             public void run() {
                 //setVisible(true);
@@ -51,7 +56,7 @@
                 }
             }
         };
-        SwingUtilities.invokeLater(doWorkRunnable);
+        SwingUtilities.invokeLater(doWorkRunnable2);
     }
     
     /** Creates a new CSettings form. This form can be displayed on tis own as
@@ -141,6 +146,7 @@
             SwingUtilities.invokeLater(doWorkRunnable);
         }
     }
+    
     public Color GetTextColour(String t, Color def){
         if(t != null){
             if(t.equals(&quot;&quot;)==false){
@@ -149,6 +155,7 @@
         }
         return def;
     }
+    
     public void RedrawTextPreview(){
         // draw the text preview
         String s = (String) this.TextColourCombo.getSelectedItem();
@@ -185,6 +192,8 @@
         jLabel11 = new javax.swing.JLabel();
         jLabel13 = new javax.swing.JLabel();
         jLabel16 = new javax.swing.JLabel();
+        jButton20 = new javax.swing.JButton();
+        jLabel23 = new javax.swing.JLabel();
         FilePathsPanel = new javax.swing.JPanel();
         jLabel2 = new javax.swing.JLabel();
         jButton6 = new javax.swing.JButton();
@@ -256,48 +265,48 @@
         settingsTabPane.setFont(CUISettings.GetFont(12,false));
 
         jLabel7.setFont(jLabel7.getFont().deriveFont(jLabel7.getFont().getSize()+7f));
-        jLabel7.setText(&quot;Please Choose an option below or to the left, changes are saved automatically&quot;);
+        jLabel7.setText(&quot;Please Choose an option below or to the left, changes are saved automatically&quot;); // NOI18N
 
-        jButton9.setText(&quot;Set up Paths&quot;);
+        jButton9.setText(&quot;Set up Paths&quot;); // NOI18N
         jButton9.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton9ActionPerformed(evt);
             }
         });
 
-        jLabel8.setText(&quot;&lt;html&gt;Set up the location of unitsync and spring&lt;br&gt;\nThese are needed to start and use spring in AFLobby&quot;);
+        jLabel8.setText(&quot;&lt;html&gt;Set up the location of unitsync and spring These are needed to start and use spring in AFLobby&quot;); // NOI18N
 
-        jButton12.setText(&quot;Initial Commands&quot;);
+        jButton12.setText(&quot;Initial Commands&quot;); // NOI18N
         jButton12.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton12ActionPerformed(evt);
             }
         });
 
-        jLabel9.setText(&quot;&lt;html&gt;Set up AFLobby to join channels, message people,&lt;br&gt; and do other things when you log in&quot;);
+        jLabel9.setText(&quot;&lt;html&gt;Set up AFLobby to join channels, message people, and do other things when you log in&quot;); // NOI18N
 
-        jButton13.setText(&quot;Interface Settings&quot;);
+        jButton13.setText(&quot;Interface Settings&quot;); // NOI18N
         jButton13.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton13ActionPerformed(evt);
             }
         });
 
-        jButton14.setText(&quot;Chat Highlighting&quot;);
+        jButton14.setText(&quot;Chat Highlighting&quot;); // NOI18N
         jButton14.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton14ActionPerformed(evt);
             }
         });
 
-        jButton15.setText(&quot;Ladder Settings&quot;);
+        jButton15.setText(&quot;Ladder Settings&quot;); // NOI18N
         jButton15.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton15ActionPerformed(evt);
             }
         });
 
-        jButton16.setText(&quot;Spring Settings&quot;);
+        jButton16.setText(&quot;Spring Settings&quot;); // NOI18N
         jButton16.setEnabled(CUserSettings.GetValue(&quot;settings.command&quot;, &quot;&quot;).equals(&quot;&quot;)==false);
         jButton16.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
@@ -305,14 +314,23 @@
             }
         });
 
-        jLabel10.setText(&quot;&lt;html&gt;Change AFLobbys theme, re-arrange tabs,&lt;br&gt;the battle list, and customize other controls&quot;);
+        jLabel10.setText(&quot;&lt;html&gt;Change AFLobbys theme, re-arrange tabs, the battle list, and customize other controls&quot;); // NOI18N
 
-        jLabel11.setText(&quot;&lt;html&gt;Set up and control ladder game integration, to play&lt;br&gt; against other ranked players&quot;);
+        jLabel11.setText(&quot;&lt;html&gt;Set up and control ladder game integration, to play against other ranked players&quot;); // NOI18N
 
-        jLabel13.setText(&quot;&lt;html&gt;Start Settings++ and change springs graphics, screen resolution, &lt;br&gt;and other engine related settings&quot;);
+        jLabel13.setText(&quot;&lt;html&gt;Start Settings++ and change springs graphics, screen resolution, and other engine related settings&quot;); // NOI18N
 
-        jLabel16.setText(&quot;&lt;html&gt;Highlight words and phrases in&lt;br&gt;conversations in different colours&quot;);
+        jLabel16.setText(&quot;&lt;html&gt;Highlight words and phrases in conversations in different colours&quot;); // NOI18N
 
+        jButton20.setText(&quot;First Run Wizard&quot;); // NOI18N
+        jButton20.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jButton20ActionPerformed(evt);
+            }
+        });
+
+        jLabel23.setText(&quot;&lt;html&gt;Re-run the initial startup wizard&quot;); // NOI18N
+
         javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
         jPanel4.setLayout(jPanel4Layout);
         jPanel4Layout.setHorizontalGroup(
@@ -328,7 +346,8 @@
                             .addComponent(jButton14, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                             .addComponent(jButton12, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                             .addComponent(jButton9, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 171, Short.MAX_VALUE)
-                            .addComponent(jButton13, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                            .addComponent(jButton13, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                            .addComponent(jButton20, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                             .addComponent(jLabel13, javax.swing.GroupLayout.DEFAULT_SIZE, 433, Short.MAX_VALUE)
@@ -336,7 +355,8 @@
                             .addComponent(jLabel16, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                             .addComponent(jLabel10, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                             .addComponent(jLabel9, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                            .addComponent(jLabel8, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
+                            .addComponent(jLabel8, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                            .addComponent(jLabel23, javax.swing.GroupLayout.DEFAULT_SIZE, 433, Short.MAX_VALUE))))
                 .addContainerGap())
         );
 
@@ -369,8 +389,14 @@
                     .addComponent(jLabel11, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addComponent(jButton16, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)
-                    .addComponent(jLabel13, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE))
+                    .addGroup(jPanel4Layout.createSequentialGroup()
+                        .addComponent(jButton16, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                        .addComponent(jButton20, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE))
+                    .addGroup(jPanel4Layout.createSequentialGroup()
+                        .addComponent(jLabel13, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                        .addComponent(jLabel23, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)))
                 .addContainerGap(218, Short.MAX_VALUE))
         );
 
@@ -382,18 +408,18 @@
 
         FilePathsPanel.setEnabled(!Misc.isWindows());
 
-        jLabel2.setText(&quot;UnitSync&quot;);
+        jLabel2.setText(&quot;UnitSync&quot;); // NOI18N
 
-        jButton6.setText(&quot;Browse&quot;);
+        jButton6.setText(&quot;Browse&quot;); // NOI18N
         jButton6.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton6ActionPerformed(evt);
             }
         });
 
-        jLabel3.setText(&quot;Spring&quot;);
+        jLabel3.setText(&quot;Spring&quot;); // NOI18N
 
-        jButton7.setText(&quot;Browse&quot;);
+        jButton7.setText(&quot;Browse&quot;); // NOI18N
         jButton7.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton7ActionPerformed(evt);
@@ -404,7 +430,7 @@
 
         springpathlabel.setText(CUserSettings.GetValue(&quot;springpath&quot;, &quot;&quot;));
 
-        jButton8.setText(&quot;Browse&quot;);
+        jButton8.setText(&quot;Browse&quot;); // NOI18N
         jButton8.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton8ActionPerformed(evt);
@@ -413,9 +439,9 @@
 
         SettingsPathLabel.setText(CUserSettings.GetValue(&quot;settings.command&quot;, &quot;&quot;));
 
-        jLabel17.setText(&quot;Spring Settings&quot;);
+        jLabel17.setText(&quot;Spring Settings&quot;); // NOI18N
 
-        jButton17.setText(&quot;Browse&quot;);
+        jButton17.setText(&quot;Browse&quot;); // NOI18N
         jButton17.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton17ActionPerformed(evt);
@@ -424,16 +450,16 @@
 
         SingleplayerLabel.setText(CUserSettings.GetValue(&quot;singleplayer.command&quot;, &quot;&quot;));
 
-        jLabel4.setText(&quot;Single Player&quot;);
+        jLabel4.setText(&quot;Single Player&quot;); // NOI18N
 
         jLabel21.setFont(jLabel21.getFont().deriveFont(jLabel21.getFont().getStyle() | java.awt.Font.BOLD, jLabel21.getFont().getSize()+4));
-        jLabel21.setText(&quot;When you've set the paths, restart aflobby for the changes to take effect.&quot;);
+        jLabel21.setText(&quot;When you've set the paths, restart aflobby for the changes to take effect.&quot;); // NOI18N
 
-        jLabel22.setText(&quot;Glest&quot;);
+        jLabel22.setText(&quot;Glest&quot;); // NOI18N
 
         GlestLabel.setText(CUserSettings.GetValue(&quot;singleplayer.command&quot;, &quot;&quot;));
 
-        jButton19.setText(&quot;Browse&quot;);
+        jButton19.setText(&quot;Browse&quot;); // NOI18N
         jButton19.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton19ActionPerformed(evt);
@@ -642,7 +668,7 @@
 
         buttonGroup1.add(jRadioButton5);
         jRadioButton5.setSelected(CUserSettings.GetValue(&quot;looknfeel&quot;, UIManager.getSystemLookAndFeelClassName()).contains(&quot;substance&quot;));
-        jRadioButton5.setText(&quot;Use Substance theme&quot;);
+        jRadioButton5.setText(&quot;Use Substance theme&quot;); // NOI18N
         jRadioButton5.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jRadioButton5ActionPerformed(evt);
@@ -651,7 +677,7 @@
 
         buttonGroup1.add(jRadioButton6);
         jRadioButton6.setSelected(CUserSettings.GetValue(&quot;looknfeel&quot;, UIManager.getSystemLookAndFeelClassName()).equals(UIManager.getSystemLookAndFeelClassName()));
-        jRadioButton6.setText(&quot;Use Native OS theme&quot;);
+        jRadioButton6.setText(&quot;Use Native OS theme&quot;); // NOI18N
         jRadioButton6.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jRadioButton6ActionPerformed(evt);
@@ -660,17 +686,17 @@
 
         buttonGroup1.add(jRadioButton7);
         jRadioButton7.setSelected(CUserSettings.GetValue(&quot;looknfeel&quot;, UIManager.getSystemLookAndFeelClassName()).equals(&quot;defjava&quot;));
-        jRadioButton7.setText(&quot;Use default Java theme&quot;);
+        jRadioButton7.setText(&quot;Use default Java theme&quot;); // NOI18N
         jRadioButton7.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jRadioButton7ActionPerformed(evt);
             }
         });
 
-        jLabel1.setText(&quot;Main Lobby GUI theme&quot;);
+        jLabel1.setText(&quot;Main Lobby GUI theme&quot;); // NOI18N
 
         jCheckBox1.setSelected(Boolean.valueOf(CUserSettings.GetValue(&quot;angledtabs&quot;, &quot;true&quot;)));
-        jCheckBox1.setText(&quot;Use substance sideways tabs on tabs to the left and right&quot;);
+        jCheckBox1.setText(&quot;Use substance sideways tabs on tabs to the left and right&quot;); // NOI18N
         jCheckBox1.setEnabled(CUserSettings.GetValue(&quot;looknfeel&quot;, &quot;org.jvnet.substance.skin.SubstanceBusinessBlackSteelLookAndFeel&quot;).contains(&quot;substance&quot;));
         jCheckBox1.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
@@ -679,7 +705,7 @@
         });
 
         BattlePositionCheckBox.setSelected(CUserSettings.GetValue(&quot;ui.channelview.battlelisttopposition&quot;, &quot;true&quot;).equals(&quot;false&quot;));
-        BattlePositionCheckBox.setText(&quot;Show Battle List underneath the main tab control (TASClient style)&quot;);
+        BattlePositionCheckBox.setText(&quot;Show Battle List underneath the main tab control (TASClient style)&quot;); // NOI18N
         BattlePositionCheckBox.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 BattlePositionCheckBoxActionPerformed(evt);
@@ -687,7 +713,7 @@
         });
 
         jCheckBox2.setSelected(Boolean.valueOf(CUserSettings.GetValue(&quot;ui.channelview.userjoinflags&quot;, &quot;true&quot;)));
-        jCheckBox2.setText(&quot;Show flags when User joins&quot;);
+        jCheckBox2.setText(&quot;Show flags when User joins&quot;); // NOI18N
         jCheckBox2.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jCheckBox2ActionPerformed(evt);
@@ -695,7 +721,7 @@
         });
 
         jCheckBox3.setSelected(Boolean.valueOf(CUserSettings.GetValue(&quot;ui.channelview.userjoinranks&quot;, &quot;false&quot;)));
-        jCheckBox3.setText(&quot;Show ranks when User joins&quot;);
+        jCheckBox3.setText(&quot;Show ranks when User joins&quot;); // NOI18N
         jCheckBox3.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jCheckBox3ActionPerformed(evt);
@@ -858,10 +884,10 @@
         jEditorPane1.setEditable(false);
         jScrollPane2.setViewportView(jEditorPane1);
 
-        jLabel18.setText(&quot;Preview:&quot;);
+        jLabel18.setText(&quot;Preview:&quot;); // NOI18N
 
         jButton18.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/images/UI/colourpickerwheel.png&quot;))); // NOI18N
-        jButton18.setText(&quot;Change Colour&quot;);
+        jButton18.setText(&quot;Change Colour&quot;); // NOI18N
         jButton18.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton18ActionPerformed(evt);
@@ -881,7 +907,7 @@
             .addGap(0, 43, Short.MAX_VALUE)
         );
 
-        jLabel19.setText(&quot;&lt;html&gt;At the moment only a few of the text types are customizeable but in the next release the full spectrum should be available.&lt;br&gt;\n&lt;br&gt;\nThe preview pane will also contain something useful in the next release.&quot;);
+        jLabel19.setText(&quot;&lt;html&gt;At the moment only a few of the text types are customizeable but in the next release the full spectrum should be available.&lt;br&gt;\n&lt;br&gt;\nThe preview pane will also contain something useful in the next release.&quot;); // NOI18N
 
         javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
         jPanel2.setLayout(jPanel2Layout);
@@ -927,18 +953,16 @@
 
         settingsTabPane.addTab(&quot;Chat Colours&quot;, new javax.swing.ImageIcon(getClass().getResource(&quot;/images/UI/colourpickerwheel16.png&quot;)), jScrollPane1); // NOI18N
 
-        jLabel5.setText(&quot;Ladder password&quot;);
+        jLabel5.setText(&quot;Ladder password&quot;); // NOI18N
 
-        ladderPassBox.setText(CUserSettings.GetValue(&quot;ladderpassword.&quot;+LM.protocol.GetUsername(), LM.protocol.Password()));
-
-        jButton10.setText(&quot;Change Password&quot;);
+        jButton10.setText(&quot;Change Password&quot;); // NOI18N
         jButton10.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton10ActionPerformed(evt);
             }
         });
 
-        jButton11.setText(&quot;Save Password&quot;);
+        jButton11.setText(&quot;Save Password&quot;); // NOI18N
         jButton11.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 jButton11ActionPerformed(evt);
@@ -946,9 +970,9 @@
         });
 
         jLabel26.setFont(jLabel26.getFont().deriveFont(jLabel26.getFont().getSize()+2f));
-        jLabel26.setText(&quot;Ladder Properties&quot;);
+        jLabel26.setText(&quot;Ladder Properties&quot;); // NOI18N
 
-        jLabel27.setText(&quot;Note: Currently these only affect the development ladder not the official ladder for testing purposes&quot;);
+        jLabel27.setText(&quot;Note: Currently these only affect the development ladder not the official ladder for testing purposes&quot;); // NOI18N
 
         javax.swing.GroupLayout LadderPaneLayout = new javax.swing.GroupLayout(LadderPane);
         LadderPane.setLayout(LadderPaneLayout);
@@ -997,7 +1021,7 @@
         });
 
         jLabel6.setFont(jLabel6.getFont().deriveFont(jLabel6.getFont().getStyle() | java.awt.Font.BOLD, jLabel6.getFont().getSize()+4));
-        jLabel6.setText(&quot;Settings&quot;);
+        jLabel6.setText(&quot;Settings&quot;); // NOI18N
 
         javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
         this.setLayout(layout);
@@ -1187,6 +1211,7 @@
         String npass = ladderPassBox.getText();
         String pass = CUserSettings.GetValue(&quot;ladderpassword.&quot;+LM.protocol.GetUsername(), LM.protocol.Password());
         String user = LM.protocol.GetUsername();
+        
         boolean r = CMeltraxLadder.ChangePassword(user, pass, npass);
         if(!r){
             LM.Toasts.AddMessage(&quot;error, could nto change password&quot;);
@@ -1195,6 +1220,7 @@
 
     private void jButton16ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton16ActionPerformed
         String c = CUserSettings.GetValue(&quot;settings.command&quot;, &quot;&quot;);
+        
         if (c.equals(&quot;&quot;)) {
             return;
         } else {
@@ -1231,6 +1257,7 @@
 
         if (returnVal == JFileChooser.APPROVE_OPTION) {
             File file = fc.getSelectedFile();
+            
             try {
                 SettingsPathLabel.setText(file.getCanonicalPath());
                 CUserSettings.PutValue(&quot;settings.command&quot;, file.getCanonicalPath());
@@ -1260,15 +1287,19 @@
 
     private void jButton18ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton18ActionPerformed
         Color c = LM.ShowColorDialog(this, &quot;Pick a Colour&quot;);
+        
         if(c == null){
             return;
         }
+        
         String s = (String) TextColourCombo.getSelectedItem();
         if(s == null){
             return;
         }
+        
         CUserSettings.PutValue(&quot;textcolours.&quot;+s, String.valueOf(c.getRGB()));
         CTextColours.load();
+        
         RedrawTextPreview();
     }//GEN-LAST:event_jButton18ActionPerformed
 
@@ -1294,6 +1325,14 @@
         }
     }//GEN-LAST:event_jButton19ActionPerformed
 
+    private void jButton20ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton20ActionPerformed
+        javax.swing.SwingUtilities.invokeLater (new Runnable () {
+            public void run () {
+                new CStartupWizard ();
+            }
+        });
+    }//GEN-LAST:event_jButton20ActionPerformed
+
     // Variables declaration - do not modify//GEN-BEGIN:variables
     private javax.swing.JCheckBox BattlePositionCheckBox;
     private javax.swing.JTextPane CLogonScriptText;
@@ -1326,6 +1365,7 @@
     private javax.swing.JButton jButton18;
     private javax.swing.JButton jButton19;
     private javax.swing.JButton jButton2;
+    private javax.swing.JButton jButton20;
     private javax.swing.JButton jButton3;
     private javax.swing.JButton jButton4;
     private javax.swing.JButton jButton5;
@@ -1352,6 +1392,7 @@
     private javax.swing.JLabel jLabel20;
     private javax.swing.JLabel jLabel21;
     private javax.swing.JLabel jLabel22;
+    private javax.swing.JLabel jLabel23;
     private javax.swing.JLabel jLabel26;
     private javax.swing.JLabel jLabel27;
     private javax.swing.JLabel jLabel3;

Added: trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.form	                        (rev 0)
+++ trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.form	2008-02-01 22:11:06 UTC (rev 5440)
@@ -0,0 +1,293 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.5&quot; maxVersion=&quot;1.5&quot; type=&quot;org.netbeans.modules.form.forminfo.JFrameFormInfo&quot;&gt;
+  &lt;Properties&gt;
+    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
+    &lt;Property name=&quot;title&quot; type=&quot;java.lang.String&quot; value=&quot;Startup Wizard&quot;/&gt;
+    &lt;Property name=&quot;iconImage&quot; type=&quot;java.awt.Image&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+      &lt;Connection code=&quot;CUISettings.GetWindowIcon()&quot; type=&quot;code&quot;/&gt;
+    &lt;/Property&gt;
+    &lt;Property name=&quot;locationByPlatform&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+    &lt;Property name=&quot;resizable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+  &lt;/Properties&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_autoResourcing&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_autoSetComponentName&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_i18nAutoMode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_layoutCodeTarget&quot; type=&quot;java.lang.Integer&quot; value=&quot;1&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout&gt;
+    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jSeparator1&quot; alignment=&quot;0&quot; pref=&quot;619&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jButton2&quot; min=&quot;-2&quot; pref=&quot;185&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;294&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jButton1&quot; min=&quot;-2&quot; pref=&quot;140&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;Component id=&quot;jLabel5&quot; alignment=&quot;0&quot; pref=&quot;619&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;jLabel4&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;jLabel17&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;95&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;29&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;SettingsPathLabel&quot; linkSize=&quot;9&quot; pref=&quot;424&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;SingleplayerLabel&quot; linkSize=&quot;9&quot; alignment=&quot;0&quot; pref=&quot;424&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;jLabel2&quot; linkSize=&quot;2&quot; alignment=&quot;0&quot; pref=&quot;118&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;jLabel3&quot; linkSize=&quot;2&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;unitsyncpathlabel&quot; linkSize=&quot;9&quot; pref=&quot;424&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;springpathlabel&quot; linkSize=&quot;9&quot; alignment=&quot;0&quot; pref=&quot;424&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;jButton6&quot; linkSize=&quot;7&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jButton8&quot; linkSize=&quot;7&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jButton17&quot; linkSize=&quot;7&quot; alignment=&quot;0&quot; pref=&quot;67&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jButton7&quot; linkSize=&quot;7&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jLabel22&quot; linkSize=&quot;2&quot; min=&quot;-2&quot; pref=&quot;96&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;GlestLabel&quot; linkSize=&quot;9&quot; min=&quot;-2&quot; pref=&quot;424&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jButton19&quot; linkSize=&quot;7&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;Component id=&quot;jLabel6&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                  &lt;Component id=&quot;jLabel1&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;484&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                  &lt;Component id=&quot;jLabel7&quot; alignment=&quot;0&quot; pref=&quot;619&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jLabel5&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace type=&quot;unrelated&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jLabel7&quot; min=&quot;-2&quot; pref=&quot;82&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jLabel6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jLabel2&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;unitsyncpathlabel&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jButton6&quot; linkSize=&quot;8&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jLabel3&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;springpathlabel&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;21&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jButton7&quot; linkSize=&quot;8&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jLabel17&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;22&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;SettingsPathLabel&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;24&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jButton8&quot; linkSize=&quot;8&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jLabel4&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;SingleplayerLabel&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;21&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jButton17&quot; linkSize=&quot;8&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;14&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jSeparator1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jLabel1&quot; min=&quot;-2&quot; pref=&quot;26&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jLabel22&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;GlestLabel&quot; linkSize=&quot;4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;21&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jButton19&quot; linkSize=&quot;8&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace pref=&quot;44&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jButton2&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jButton1&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+  &lt;/Layout&gt;
+  &lt;SubComponents&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel5&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.editors2.FontEditor&quot;&gt;
+          &lt;FontInfo relative=&quot;true&quot;&gt;
+            &lt;Font component=&quot;jLabel5&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;10&quot;/&gt;
+          &lt;/FontInfo&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;First Run&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel6&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.editors2.FontEditor&quot;&gt;
+          &lt;FontInfo relative=&quot;true&quot;&gt;
+            &lt;Font component=&quot;jLabel6&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;5&quot;/&gt;
+          &lt;/FontInfo&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Spring&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel22&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Glest&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;GlestLabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+          &lt;Connection code=&quot;CUserSettings.GetValue(&quot;singleplayer.command&quot;, &quot;&quot;)&quot; type=&quot;code&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton19&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;Events&gt;
+        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton19ActionPerformed&quot;/&gt;
+      &lt;/Events&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel2&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;UnitSync&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel3&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Spring&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;springpathlabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+          &lt;Connection code=&quot;CUserSettings.GetValue(&quot;springpath&quot;, &quot;&quot;)&quot; type=&quot;code&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;unitsyncpathlabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+          &lt;Connection code=&quot;CUserSettings.GetValue(&quot;unitsyncpath&quot;, &quot;&quot;)&quot; type=&quot;code&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton6&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;Events&gt;
+        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton6ActionPerformed&quot;/&gt;
+      &lt;/Events&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton7&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;Events&gt;
+        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton7ActionPerformed&quot;/&gt;
+      &lt;/Events&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JSeparator&quot; name=&quot;jSeparator1&quot;&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel1&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.editors2.FontEditor&quot;&gt;
+          &lt;FontInfo relative=&quot;true&quot;&gt;
+            &lt;Font component=&quot;jLabel1&quot; property=&quot;font&quot; relativeSize=&quot;true&quot; size=&quot;5&quot;/&gt;
+          &lt;/FontInfo&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Glest&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel17&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Spring Settings&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel4&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Single Player&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;SingleplayerLabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+          &lt;Connection code=&quot;CUserSettings.GetValue(&quot;singleplayer.command&quot;, &quot;&quot;)&quot; type=&quot;code&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;SettingsPathLabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+          &lt;Connection code=&quot;CUserSettings.GetValue(&quot;settings.command&quot;, &quot;&quot;)&quot; type=&quot;code&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton8&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;Events&gt;
+        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton8ActionPerformed&quot;/&gt;
+      &lt;/Events&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton17&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Browse&quot; noResource=&quot;true&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;Events&gt;
+        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton17ActionPerformed&quot;/&gt;
+      &lt;/Events&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton1&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Finish&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;Events&gt;
+        &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jButton1ActionPerformed&quot;/&gt;
+      &lt;/Events&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton2&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Autodetect&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel7&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;&lt;html&gt;This is your first run of AFLobby. AFLobby needs to know where your games are installed. Please browse and set their locations below. If you do not set their locations then AFLobby will assume they&apos;re not installed. &lt;br&gt;&amp;#xa;&lt;br&gt;&amp;#xa;If locations are set incorrectly AFLobby may not work correctly and cause bugs, so double check you have the right values set. If you make a mistake you can change these values later in settings. &quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.java	                        (rev 0)
+++ trunk/Lobby/AFLobby/src/aflobby/CStartupWizard.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -0,0 +1,374 @@
+/*
+ * CStartupWizard.java
+ *
+ * Created on 31 January 2008, 22:59
+ */
+
+package aflobby;
+
+import aflobby.UI.CUISettings;
+import aflobby.UI.CUserSettings;
+import java.io.File;
+import java.io.IOException;
+import java.util.logging.Level;
+import java.util.logging.Logger;
+import javax.swing.JFileChooser;
+import javax.swing.SwingUtilities;
+
+/**
+ *
+ * @author  tarendai-std
+ */
+public class CStartupWizard extends javax.swing.JFrame {
+    
+    public final JFileChooser fc = new JFileChooser();
+    
+    /** Creates new form CStartupWizard */
+    public CStartupWizard() {
+        
+        Runnable doWorkRunnable1 = new Runnable() {
+
+            public void run() {
+               initComponents();
+               setVisible(true);
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable1);
+        
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+
+        jLabel5 = new javax.swing.JLabel();
+        jLabel6 = new javax.swing.JLabel();
+        jLabel22 = new javax.swing.JLabel();
+        GlestLabel = new javax.swing.JLabel();
+        jButton19 = new javax.swing.JButton();
+        jLabel2 = new javax.swing.JLabel();
+        jLabel3 = new javax.swing.JLabel();
+        springpathlabel = new javax.swing.JLabel();
+        unitsyncpathlabel = new javax.swing.JLabel();
+        jButton6 = new javax.swing.JButton();
+        jButton7 = new javax.swing.JButton();
+        jSeparator1 = new javax.swing.JSeparator();
+        jLabel1 = new javax.swing.JLabel();
+        jLabel17 = new javax.swing.JLabel();
+        jLabel4 = new javax.swing.JLabel();
+        SingleplayerLabel = new javax.swing.JLabel();
+        SettingsPathLabel = new javax.swing.JLabel();
+        jButton8 = new javax.swing.JButton();
+        jButton17 = new javax.swing.JButton();
+        jButton1 = new javax.swing.JButton();
+        jButton2 = new javax.swing.JButton();
+        jLabel7 = new javax.swing.JLabel();
+
+        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
+        setTitle(&quot;Startup Wizard&quot;);
+        setIconImage(CUISettings.GetWindowIcon());
+        setLocationByPlatform(true);
+        setResizable(false);
+
+        jLabel5.setFont(jLabel5.getFont().deriveFont(jLabel5.getFont().getSize()+10f));
+        jLabel5.setText(&quot;First Run&quot;); // NOI18N
+
+        jLabel6.setFont(jLabel6.getFont().deriveFont(jLabel6.getFont().getSize()+5f));
+        jLabel6.setText(&quot;Spring&quot;); // NOI18N
+
+        jLabel22.setText(&quot;Glest&quot;); // NOI18N
+
+        GlestLabel.setText(CUserSettings.GetValue(&quot;singleplayer.command&quot;, &quot;&quot;));
+
+        jButton19.setText(&quot;Browse&quot;); // NOI18N
+        jButton19.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jButton19ActionPerformed(evt);
+            }
+        });
+
+        jLabel2.setText(&quot;UnitSync&quot;); // NOI18N
+
+        jLabel3.setText(&quot;Spring&quot;); // NOI18N
+
+        springpathlabel.setText(CUserSettings.GetValue(&quot;springpath&quot;, &quot;&quot;));
+
+        unitsyncpathlabel.setText(CUserSettings.GetValue(&quot;unitsyncpath&quot;, &quot;&quot;));
+
+        jButton6.setText(&quot;Browse&quot;); // NOI18N
+        jButton6.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jButton6ActionPerformed(evt);
+            }
+        });
+
+        jButton7.setText(&quot;Browse&quot;); // NOI18N
+        jButton7.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jButton7ActionPerformed(evt);
+            }
+        });
+
+        jLabel1.setFont(jLabel1.getFont().deriveFont(jLabel1.getFont().getSize()+5f));
+        jLabel1.setText(&quot;Glest&quot;); // NOI18N
+
+        jLabel17.setText(&quot;Spring Settings&quot;); // NOI18N
+
+        jLabel4.setText(&quot;Single Player&quot;); // NOI18N
+
+        SingleplayerLabel.setText(CUserSettings.GetValue(&quot;singleplayer.command&quot;, &quot;&quot;));
+
+        SettingsPathLabel.setText(CUserSettings.GetValue(&quot;settings.command&quot;, &quot;&quot;));
+
+        jButton8.setText(&quot;Browse&quot;); // NOI18N
+        jButton8.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jButton8ActionPerformed(evt);
+            }
+        });
+
+        jButton17.setText(&quot;Browse&quot;); // NOI18N
+        jButton17.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jButton17ActionPerformed(evt);
+            }
+        });
+
+        jButton1.setText(&quot;Finish&quot;);
+        jButton1.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jButton1ActionPerformed(evt);
+            }
+        });
+
+        jButton2.setText(&quot;Autodetect&quot;);
+
+        jLabel7.setText(&quot;&lt;html&gt;This is your first run of AFLobby. AFLobby needs to know where your games are installed. Please browse and set their locations below. If you do not set their locations then AFLobby will assume they're not installed. &lt;br&gt;\n&lt;br&gt;\nIf locations are set incorrectly AFLobby may not work correctly and cause bugs, so double check you have the right values set. If you make a mistake you can change these values later in settings. &quot;);
+
+        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
+        getContentPane().setLayout(layout);
+        layout.setHorizontalGroup(
+            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(layout.createSequentialGroup()
+                .addContainerGap()
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                    .addComponent(jSeparator1, javax.swing.GroupLayout.DEFAULT_SIZE, 619, Short.MAX_VALUE)
+                    .addGroup(layout.createSequentialGroup()
+                        .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 185, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 294, Short.MAX_VALUE)
+                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 140, javax.swing.GroupLayout.PREFERRED_SIZE))
+                    .addComponent(jLabel5, javax.swing.GroupLayout.DEFAULT_SIZE, 619, Short.MAX_VALUE)
+                    .addGroup(layout.createSequentialGroup()
+                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
+                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
+                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
+                                    .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                                    .addComponent(jLabel17, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE))
+                                .addGap(29, 29, 29)
+                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
+                                    .addComponent(SettingsPathLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 424, Short.MAX_VALUE)
+                                    .addComponent(SingleplayerLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 424, Short.MAX_VALUE)))
+                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
+                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
+                                    .addComponent(jLabel2, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 118, Short.MAX_VALUE)
+                                    .addComponent(jLabel3, javax.swing.GroupLayout.Alignment.LEADING))
+                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
+                                    .addComponent(unitsyncpathlabel, javax.swing.GroupLayout.DEFAULT_SIZE, 424, Short.MAX_VALUE)
+                                    .addComponent(springpathlabel, javax.swing.GroupLayout.DEFAULT_SIZE, 424, Short.MAX_VALUE))))
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                            .addComponent(jButton6)
+                            .addComponent(jButton8, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                            .addComponent(jButton17, javax.swing.GroupLayout.DEFAULT_SIZE, 67, Short.MAX_VALUE)
+                            .addComponent(jButton7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
+                    .addGroup(layout.createSequentialGroup()
+                        .addComponent(jLabel22, javax.swing.GroupLayout.PREFERRED_SIZE, 96, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                        .addComponent(GlestLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 424, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                        .addComponent(jButton19, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                    .addComponent(jLabel6)
+                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 484, javax.swing.GroupLayout.PREFERRED_SIZE)
+                    .addComponent(jLabel7, javax.swing.GroupLayout.DEFAULT_SIZE, 619, Short.MAX_VALUE))
+                .addContainerGap())
+        );
+
+        layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jLabel2, jLabel22, jLabel3});
+
+        layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jButton17, jButton19, jButton6, jButton7, jButton8});
+
+        layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {GlestLabel, SettingsPathLabel, SingleplayerLabel, springpathlabel, unitsyncpathlabel});
+
+        layout.setVerticalGroup(
+            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(layout.createSequentialGroup()
+                .addContainerGap()
+                .addComponent(jLabel5)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
+                .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, 82, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addComponent(jLabel6)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                    .addComponent(jLabel2)
+                    .addComponent(unitsyncpathlabel)
+                    .addComponent(jButton6))
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                    .addComponent(jLabel3)
+                    .addComponent(springpathlabel, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE)
+                    .addComponent(jButton7))
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                    .addComponent(jLabel17, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
+                    .addComponent(SettingsPathLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
+                    .addComponent(jButton8))
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                    .addComponent(jLabel4)
+                    .addComponent(SingleplayerLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE)
+                    .addComponent(jButton17))
+                .addGap(14, 14, 14)
+                .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                    .addComponent(jLabel22)
+                    .addComponent(GlestLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE)
+                    .addComponent(jButton19))
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 44, Short.MAX_VALUE)
+                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                    .addComponent(jButton2)
+                    .addComponent(jButton1))
+                .addContainerGap())
+        );
+
+        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {GlestLabel, SettingsPathLabel, SingleplayerLabel, jLabel17, jLabel2, jLabel22, jLabel3, jLabel4, springpathlabel, unitsyncpathlabel});
+
+        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {jButton17, jButton19, jButton6, jButton7, jButton8});
+
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+
+    private void jButton19ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton19ActionPerformed
+        int returnVal = fc.showOpenDialog(this);
+        
+        if (returnVal == JFileChooser.APPROVE_OPTION) {
+            File file = fc.getSelectedFile();
+            try {
+                GlestLabel.setText(file.getCanonicalPath());
+                CUserSettings.PutValue(&quot;glest.command&quot;, file.getCanonicalPath());
+            } catch (IOException ex) {
+                Logger.getLogger(CSettings.class.getName()).log(Level.SEVERE, null, ex);
+            }
+        }
+    }//GEN-LAST:event_jButton19ActionPerformed
+
+    private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton6ActionPerformed
+        int returnVal = fc.showOpenDialog(this);
+        
+        if (returnVal == JFileChooser.APPROVE_OPTION) {
+            File file = fc.getSelectedFile();
+            try {
+                
+                unitsyncpathlabel.setText(file.getCanonicalPath());
+                CUserSettings.PutValue(&quot;unitsyncpath&quot;, file.getCanonicalPath());
+            } catch (IOException ex) {
+                Logger.getLogger(CSettings.class.getName()).log(Level.SEVERE, null, ex);
+            }
+        }
+    }//GEN-LAST:event_jButton6ActionPerformed
+
+    private void jButton7ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton7ActionPerformed
+        int returnVal = fc.showOpenDialog(this);
+        
+        if (returnVal == JFileChooser.APPROVE_OPTION) {
+            File file = fc.getSelectedFile();
+            try {
+                
+                springpathlabel.setText(file.getCanonicalPath());
+                CUserSettings.PutValue(&quot;springpath&quot;, file.getCanonicalPath());
+            } catch (IOException ex) {
+                Logger.getLogger(CSettings.class.getName()).log(Level.SEVERE, null, ex);
+            }
+        }
+    }//GEN-LAST:event_jButton7ActionPerformed
+
+    private void jButton8ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton8ActionPerformed
+        int returnVal = fc.showOpenDialog(this);
+        
+        if (returnVal == JFileChooser.APPROVE_OPTION) {
+            File file = fc.getSelectedFile();
+            try {
+                SettingsPathLabel.setText(file.getCanonicalPath());
+                CUserSettings.PutValue(&quot;settings.command&quot;, file.getCanonicalPath());
+            } catch (IOException ex) {
+                Logger.getLogger(CSettings.class.getName()).log(Level.SEVERE, null, ex);
+            }
+        }
+    }//GEN-LAST:event_jButton8ActionPerformed
+
+    private void jButton17ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton17ActionPerformed
+        int returnVal = fc.showOpenDialog(this);
+        
+        if (returnVal == JFileChooser.APPROVE_OPTION) {
+            File file = fc.getSelectedFile();
+            try {
+                SingleplayerLabel.setText(file.getCanonicalPath());
+                CUserSettings.PutValue(&quot;singleplayer.command&quot;, file.getCanonicalPath());
+            } catch (IOException ex) {
+                Logger.getLogger(CSettings.class.getName()).log(Level.SEVERE, null, ex);
+            }
+        }
+    }//GEN-LAST:event_jButton17ActionPerformed
+
+    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
+        // TODO add your handling code here:
+        this.setVisible(false);
+        this.dispose();
+        CUserSettings.PutValue(&quot;showfirstrun&quot;, &quot;false&quot;);
+    }//GEN-LAST:event_jButton1ActionPerformed
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String args[]) {
+        java.awt.EventQueue.invokeLater(new Runnable() {
+            public void run() {
+                new CStartupWizard().setVisible(true);
+            }
+        });
+    }
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    private javax.swing.JLabel GlestLabel;
+    private javax.swing.JLabel SettingsPathLabel;
+    private javax.swing.JLabel SingleplayerLabel;
+    private javax.swing.JButton jButton1;
+    private javax.swing.JButton jButton17;
+    private javax.swing.JButton jButton19;
+    private javax.swing.JButton jButton2;
+    private javax.swing.JButton jButton6;
+    private javax.swing.JButton jButton7;
+    private javax.swing.JButton jButton8;
+    private javax.swing.JLabel jLabel1;
+    private javax.swing.JLabel jLabel17;
+    private javax.swing.JLabel jLabel2;
+    private javax.swing.JLabel jLabel22;
+    private javax.swing.JLabel jLabel3;
+    private javax.swing.JLabel jLabel4;
+    private javax.swing.JLabel jLabel5;
+    private javax.swing.JLabel jLabel6;
+    private javax.swing.JLabel jLabel7;
+    private javax.swing.JSeparator jSeparator1;
+    private javax.swing.JLabel springpathlabel;
+    private javax.swing.JLabel unitsyncpathlabel;
+    // End of variables declaration//GEN-END:variables
+    
+}

Modified: trunk/Lobby/AFLobby/src/aflobby/LMain.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/LMain.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/LMain.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -100,8 +100,12 @@
     
     
     public void start (){
-        setVisible (true);
+        Runnable doWorkRunnable = new Runnable () {
+            public void run () { setVisible (true); }
+        };
+        SwingUtilities.invokeLater (doWorkRunnable);
         
+        
         //protocol = new CTASServerProtocol ();
         //protocol.Init (this);
 

Modified: trunk/Lobby/AFLobby/src/aflobby/Main.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/Main.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/Main.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -166,6 +166,14 @@
                 }
             });
         }
+        if(Boolean.parseBoolean(CUserSettings.GetValue(&quot;showfirstrun&quot;, &quot;True&quot;))){
+            //
+            javax.swing.SwingUtilities.invokeLater (new Runnable () {
+                public void run () {
+                    new CStartupWizard ();
+                }
+            });
+        }
     }
     
     /**

Modified: trunk/Lobby/AFLobby/src/aflobby/UI/CUserSettings.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/CUserSettings.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/CUserSettings.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -9,7 +9,8 @@
 
 package aflobby.UI;
 
-import aflobby.*;
+import aflobby.CFSHelper;
+import aflobby.Misc;
 import aflobby.helpers.TdfParser;
 import java.io.File;
 import java.io.FileNotFoundException;
@@ -60,7 +61,7 @@
         try {
             // Create new file
             write_out = new PrintStream (new File (s));
-            write_out.print (script.replaceAll(&quot;\n&quot;, System.getProperty (&quot;line.separator&quot;)));
+            write_out.print (script);//.replaceAll(&quot;\n&quot;, System.getProperty (&quot;line.separator&quot;)));
             write_out.close ();
         } catch (FileNotFoundException e) {
             e.printStackTrace ();

Modified: trunk/Lobby/AFLobby/src/aflobby/UI/CView.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/CView.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/CView.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -9,7 +9,8 @@
 
 package aflobby.UI;
 
-import aflobby.*;
+import aflobby.CEvent;
+import aflobby.LMain;
 import aflobby.framework.IModule;
 import javax.swing.SwingUtilities;
 

Modified: trunk/Lobby/AFLobby/src/aflobby/UI/battle/CBooleanOptionsPanel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/battle/CBooleanOptionsPanel.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/battle/CBooleanOptionsPanel.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -10,6 +10,7 @@
 import aflobby.IBattleModel;
 import aflobby.LMain;
 import aflobby.framework.IModule;
+import javax.swing.SwingUtilities;
 
 /**
  *
@@ -47,7 +48,14 @@
         
         battlemodel.PutOption(key, defValue);
         
-        initComponents();
+        Runnable doWorkRunnable = new Runnable() {
+
+            public void run() {
+                initComponents();
+            }
+
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
     }
     
     /** This method is called from within the constructor to
@@ -126,12 +134,27 @@
     }// &lt;/editor-fold&gt;//GEN-END:initComponents
 
     private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
-        CheckBox.setSelected(defValue);
-        battlemodel.PutOption(key, CheckBox.isSelected());
+        Runnable doWorkRunnable = new Runnable() {
+
+            public void run() {
+                CheckBox.setSelected(defValue);
+                battlemodel.PutOption(key, CheckBox.isSelected());
+            }
+
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+        
     }//GEN-LAST:event_jButton2ActionPerformed
 
     private void CheckBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_CheckBoxActionPerformed
-        battlemodel.PutOption(key, CheckBox.isSelected());
+        Runnable doWorkRunnable = new Runnable() {
+
+            public void run() {
+                battlemodel.PutOption(key, CheckBox.isSelected());
+            }
+
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
     }//GEN-LAST:event_CheckBoxActionPerformed
     
     
@@ -162,10 +185,18 @@
                 
                 String k = pair[0];
                 k = k.replaceAll(&quot;\\\\&quot;, &quot;/&quot;);
-                String value = pair[1];
+                final String value = pair[1];
                 
                 if(k.equalsIgnoreCase(key)){
-                    CheckBox.setSelected(Integer.parseInt(value) == 1);
+                    Runnable doWorkRunnable = new Runnable() {
+
+                        public void run() {
+                            CheckBox.setSelected(Integer.parseInt(value) == 1);
+                        }
+
+                    };
+                    SwingUtilities.invokeLater(doWorkRunnable);
+                    
                 }
                 
             }

Modified: trunk/Lobby/AFLobby/src/aflobby/UI/battle/CListOptionsPanel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/battle/CListOptionsPanel.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/battle/CListOptionsPanel.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -3,7 +3,6 @@
  *
  * Created on 11 January 2008, 21:25
  */
-
 package aflobby.UI.battle;
 
 import aflobby.CEvent;
@@ -12,15 +11,14 @@
 import aflobby.framework.IModule;
 import java.util.List;
 import javax.swing.DefaultComboBoxModel;
+import javax.swing.SwingUtilities;
 
-
 /**
  *
  * @author  tarendai-std
  */
-public class CListOptionsPanel extends javax.swing.JPanel implements IModule{
-    
-    
+public class CListOptionsPanel extends javax.swing.JPanel implements IModule {
+
     boolean map;
     List&lt;ListItem&gt; items;
     int optionType;
@@ -31,7 +29,7 @@
     String key;
     IBattleModel battlemodel;
     boolean host;
-    
+
     /** Creates new form CBooleanOptionsPanel
      * @param battlemodel 
      * @param key
@@ -42,12 +40,12 @@
      * @param map 
      */
     public CListOptionsPanel(
-            IBattleModel battlemodel, String key, String defValue, List&lt;ListItem&gt; items, String title, String description, boolean map) {
-        
+            IBattleModel battlemodel, String key, String defValue, List&lt;ListItem&gt; items, String title, String description, boolean map ) {
+
         this.items = items;
-        
-        this.map = map; 
-        
+
+        this.map = map;
+
         this.host = battlemodel.AmIHost();
         this.defValue = defValue;
 
@@ -56,37 +54,45 @@
         this.description = new String(description);
         this.battlemodel = battlemodel;
         battlemodel.PutOption(key, defValue);
-        
-        initComponents();
+
+        Runnable doWorkRunnable = new Runnable() {
+
+            public void run() {
+                initComponents();
+            }
+
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+
     }
-    
+
     /**
      * 
      * @return
      */
-    public DefaultComboBoxModel GetComboModel(){
+    public DefaultComboBoxModel GetComboModel() {
         DefaultComboBoxModel c = new DefaultComboBoxModel(items.toArray().clone());
         return c;
     }
-    
-    public String GetItemName(String key){
-        for(ListItem i : items){
-            if(i.key.equalsIgnoreCase(key)){
+
+    public String GetItemName( String key ) {
+        for ( ListItem i : items ) {
+            if ( i.key.equalsIgnoreCase(key) ) {
                 return i.name;
             }
         }
         return &quot;moo&quot;;
     }
-    
-    public String GetItemKey(String name){
-        for(ListItem i : items){
-            if(i.name.equalsIgnoreCase(name)){
+
+    public String GetItemKey( String name ) {
+        for ( ListItem i : items ) {
+            if ( i.name.equalsIgnoreCase(name) ) {
                 return i.key;
             }
         }
         return &quot;moo&quot;;
     }
-    
+
     /** This method is called from within the constructor to
      * initialize the form.
      * WARNING: Do NOT modify this code. The content of this method is
@@ -162,19 +168,32 @@
                 .addContainerGap(12, Short.MAX_VALUE))
         );
     }// &lt;/editor-fold&gt;//GEN-END:initComponents
+    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
+        final String v = GetItemName(defValue);
 
-    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
-        String v = GetItemName(defValue);
-        ComboBox.setSelectedItem(v);
+        Runnable doWorkRunnable = new Runnable() {
+
+            public void run() {
+                ComboBox.setSelectedItem(v);
+            }
+
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+
         battlemodel.PutOption(key, defValue);
     }//GEN-LAST:event_jButton2ActionPerformed
 
     private void ComboBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ComboBoxActionPerformed
-        ListItem i = (ListItem) ComboBox.getSelectedItem();
-        battlemodel.PutOption(key, i.key);
+        Runnable doWorkRunnable = new Runnable() {
+            public void run() {
+                ListItem i = (ListItem) ComboBox.getSelectedItem();
+                battlemodel.PutOption(key, i.key);
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+        
     }//GEN-LAST:event_ComboBoxActionPerformed
-    
-    
+
     // Variables declaration - do not modify//GEN-BEGIN:variables
     private javax.swing.JComboBox ComboBox;
     private javax.swing.JButton jButton2;
@@ -182,42 +201,47 @@
     private javax.swing.JLabel jLabel2;
     private javax.swing.JLabel jLabel3;
     // End of variables declaration//GEN-END:variables
-
-    public void Init(LMain L) {
+    public void Init( LMain L ) {
         throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);
     }
 
     public void Update() {
-        
+
     }
 
-    public void NewEvent(CEvent e) {
-        if(e.IsEvent(&quot;SETSCRIPTTAGS&quot;)){
+    public void NewEvent( CEvent e ) {
+        if ( e.IsEvent(&quot;SETSCRIPTTAGS&quot;) ) {
             //
             String[] pairs = e.parameters.split(&quot;\t&quot;);
-            
-            for(int i = 0; i&lt; pairs.length; i++){
-                
+
+            for ( int i = 0; i &lt; pairs.length; i++ ) {
+
                 String[] pair = pairs[i].split(&quot;=&quot;);
-                
+
                 String k = pair[0];
                 k = k.replaceAll(&quot;\\\\&quot;, &quot;/&quot;);
-                String value = pair[1];
-                
-                if(k.equalsIgnoreCase(key)){
-                    ComboBox.setSelectedItem(this.GetItemName(value));
+                final String value = pair[1];
+
+                if ( k.equalsIgnoreCase(key) ) {
+                    Runnable doWorkRunnable = new Runnable() {
+                        public void run() {
+                            ComboBox.setSelectedItem(GetItemName(value));
+                        }
+                    };
+                    SwingUtilities.invokeLater(doWorkRunnable);
+                    
                 }
-                
+
             }
         }
     }
 
-    public void NewGUIEvent(CEvent e) {
+    public void NewGUIEvent( CEvent e ) {
 
     }
 
     public void OnRemove() {
         battlemodel = null;
     }
-    
+
 }

Modified: trunk/Lobby/AFLobby/src/aflobby/UI/battle/CSliderOptionsPanel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/battle/CSliderOptionsPanel.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/battle/CSliderOptionsPanel.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -10,6 +10,7 @@
 import aflobby.IBattleModel;
 import aflobby.LMain;
 import aflobby.framework.IModule;
+import javax.swing.SwingUtilities;
 
 /**
  *
@@ -55,7 +56,13 @@
         
         battlemodel.PutOption(key, defValue);
         
-        initComponents();
+        Runnable doWorkRunnable = new Runnable() {
+            public void run() {
+                initComponents();
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+        
     }
     
     /** This method is called from within the constructor to
@@ -153,20 +160,35 @@
     }// &lt;/editor-fold&gt;//GEN-END:initComponents
 
     private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
-        Slider.setValue(defValue);
-        Spinner.setValue(defValue);
+        Runnable doWorkRunnable = new Runnable() {
+            public void run() {
+                Slider.setValue(defValue);
+                Spinner.setValue(defValue);
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
         battlemodel.PutOption(key, defValue);
     }//GEN-LAST:event_jButton1ActionPerformed
 
     private void SliderStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_SliderStateChanged
         int value = Slider.getValue();
-        Spinner.setValue(value);
+        Runnable doWorkRunnable = new Runnable() {
+            public void run() {
+                Spinner.setValue(Slider.getValue());
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
         battlemodel.PutOption(key, value);
     }//GEN-LAST:event_SliderStateChanged
 
     private void SpinnerStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_SpinnerStateChanged
         Integer value = (Integer) Spinner.getValue();
-        Slider.setValue(value);
+        Runnable doWorkRunnable = new Runnable() {
+            public void run() {
+                Slider.setValue((Integer)Spinner.getValue());
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
         battlemodel.PutOption(key, value);
     }//GEN-LAST:event_SpinnerStateChanged
     
@@ -202,9 +224,14 @@
                 String value = pair[1];
                 
                 if(k.equalsIgnoreCase(key)){
-                    Integer iv = Float.valueOf(value).intValue();
-                    Slider.setValue(iv);
-                    Spinner.setValue(iv);
+                    final Integer iv = Float.valueOf(value).intValue();
+                    Runnable doWorkRunnable = new Runnable() {
+                        public void run() {
+                            Slider.setValue(iv);
+                            Spinner.setValue(iv);
+                        }
+                    };
+                    SwingUtilities.invokeLater(doWorkRunnable);
                 }
                 
             }

Modified: trunk/Lobby/AFLobby/src/aflobby/UI/battle/CStringOptionsPanel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/UI/battle/CStringOptionsPanel.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/UI/battle/CStringOptionsPanel.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -11,6 +11,7 @@
 import aflobby.LMain;
 import aflobby.UI.DocumentSizeFilter;
 import aflobby.framework.IModule;
+import javax.swing.SwingUtilities;
 import javax.swing.text.AbstractDocument;
 
 /**
@@ -52,7 +53,13 @@
         
         battlemodel.PutOption(key, defValue);
         
-        initComponents();
+        Runnable doWorkRunnable = new Runnable() {
+            public void run() {
+                initComponents();
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
+        
     }
     
     /** This method is called from within the constructor to
@@ -126,7 +133,13 @@
     }// &lt;/editor-fold&gt;//GEN-END:initComponents
 
     private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
-        TextField.setText(defValue);
+        
+        Runnable doWorkRunnable = new Runnable() {
+            public void run() {
+                TextField.setText(defValue);
+            }
+        };
+        SwingUtilities.invokeLater(doWorkRunnable);
         battlemodel.PutOption(key, TextField.getText());
     }//GEN-LAST:event_jButton2ActionPerformed
     
@@ -147,7 +160,7 @@
         
     }
 
-    public void NewEvent(CEvent e) {
+    public void NewEvent(final CEvent e) {
         if(e.IsEvent(&quot;SETSCRIPTTAGS&quot;)){
             //
             String[] pairs = e.parameters.split(&quot;\t&quot;);
@@ -158,10 +171,16 @@
                 
                 String k = pair[0];
                 k = k.replaceAll(&quot;\\\\&quot;, &quot;/&quot;);
-                String value = pair[1];
+                final String value = pair[1];
                 
                 if(k.equalsIgnoreCase(key)){
-                    TextField.setText(value);
+                    Runnable doWorkRunnable = new Runnable() {
+                        public void run() {
+                            TextField.setText(value);
+                        }
+                    };
+                    SwingUtilities.invokeLater(doWorkRunnable);
+                    
                 }
                 
             }

Modified: trunk/Lobby/AFLobby/src/aflobby/languages.properties
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/languages.properties	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/languages.properties	2008-02-01 22:11:06 UTC (rev 5440)
@@ -282,12 +282,6 @@
 
 CChannelView.SortMenu.text=Sort by
 
-CChannelView.jRadioButtonMenuItem1.text=RadioButton
-
-CChannelView.jMenuItem1.text=Item
-
-CChannelView.jMenu1.text=Menu
-
 CChannelView.jLabel10.text=NAT Traversal
 
 CChannelView.HostUDPPort.text=8452
@@ -341,7 +335,7 @@
 CChannel.playerCountLabel.text=0 Players in Channel
 CChannel.channelPrivateLabel.text=private channel
 CChannelView.jButton5.text=Show Raw Traffic Window
-CChannelView.jButton8.text_1=Report Issue/Bug
+CChannelView.jButton8.text_1=Report Bug
 CChannelView.ShowMenu.text=Show/Filter
 CChannelView.jLabel2.text_1=Game Engine
 =

Modified: trunk/Lobby/AFLobby/src/aflobby/languages_fr_FR.properties
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/languages_fr_FR.properties	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/languages_fr_FR.properties	2008-02-01 22:11:06 UTC (rev 5440)
@@ -218,12 +218,6 @@
 
 CChannelView.jLabel11.text=Limite luxuriante
 
-CChannelView.jRadioButtonMenuItem1.text=RadioButton
-
-CChannelView.jMenuItem1.text=Article
-
-CChannelView.jMenu1.text=Menu
-
 CChannelView.jLabel10.text=NAT Traversal
 
 CChannelView.HostUDPPort.text=8452

Modified: trunk/Lobby/AFLobby/src/aflobby/languages_zh_CN.properties
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/languages_zh_CN.properties	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/languages_zh_CN.properties	2008-02-01 22:11:06 UTC (rev 5440)
@@ -282,12 +282,6 @@
 
 CChannelView.jLabel11.text=\u00E6\u009E\u0081\u00E9\u0099\u0090\u00E7\u00BA\u00A7
 
-CChannelView.jRadioButtonMenuItem1.text=RadioButton
-
-CChannelView.jMenuItem1.text=Item
-
-CChannelView.jMenu1.text=Menu
-
 CChannelView.jLabel10.text=\u00E7\u00A9\u00BF\u00E8\u00B6\u008ANAT
 
 CChannelView.HostUDPPort.text=8452

Modified: trunk/Lobby/AFLobby/src/aflobby/protocol/tasserver/CTASServerProtocol.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/protocol/tasserver/CTASServerProtocol.java	2008-02-01 18:12:58 UTC (rev 5439)
+++ trunk/Lobby/AFLobby/src/aflobby/protocol/tasserver/CTASServerProtocol.java	2008-02-01 22:11:06 UTC (rev 5440)
@@ -9,10 +9,21 @@
 
 package aflobby.protocol.tasserver;
 
+import aflobby.CBattleInfo;
+import aflobby.CBattleModel;
+import aflobby.CChannelPassword;
+import aflobby.CConnection;
+import aflobby.CEvent;
+import aflobby.CGlestBattleModel;
+import aflobby.CUnitSyncJNIBindings;
+import aflobby.CUpdateChecker;
+import aflobby.JRegView;
+import aflobby.LMain;
+import aflobby.Main;
+import aflobby.Misc;
 import aflobby.helpers.CStringHelper;
 import aflobby.UI.CView;
 import aflobby.UI.WarningWindow;
-import aflobby.*;
 import aflobby.protocol.IProtocol;
 import java.io.IOException;
 import java.net.ConnectException;
@@ -30,9 +41,11 @@
     private String password=&quot;&quot;;
     int status;
     int afk=0;
-    TreeMap&lt;Integer, CBattleInfo&gt; battles = new TreeMap&lt;Integer, CBattleInfo&gt;();
+    private TreeMap&lt;Integer, CBattleInfo&gt; battles;
+    
     /** Creates a new instance of CTASServerProtocol */
     public CTASServerProtocol () {
+        battles = new TreeMap&lt;Integer, CBattleInfo&gt;();
     }
     
     public void Init (LMain L) {
@@ -267,7 +280,10 @@
     public void NewGUIEvent (final CEvent e) {
         if(e.IsEvent (CEvent.LOGGEDOUT)||e.IsEvent (CEvent.LOGOUT)){
             c.Disconnect ();
-        } else {
+        } else if(e.IsEvent(CEvent.DISCONNECT) || e.IsEvent(CEvent.DISCONNECTED)){
+            LM.protocol = null;
+            LM.core.RemoveModule(this);
+        }else {
             if(c != null){
                 c.NewGUIEvent (e);
             }
@@ -426,6 +442,8 @@
     
     public void OnRemove() {
         
+        battles.clear();
+        battles = null;
     }
 
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000246.html">[Taspring-linux-commit] r5439 - trunk/AI/Global/NTai/AI/NTai/Tasks
</A></li>
	<LI>Next message: <A HREF="000248.html">[Taspring-linux-commit] r5441 - in trunk: rts/Game rts/System	tools/DedicatedServer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#247">[ date ]</a>
              <a href="thread.html#247">[ thread ]</a>
              <a href="subject.html#247">[ subject ]</a>
              <a href="author.html#247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
