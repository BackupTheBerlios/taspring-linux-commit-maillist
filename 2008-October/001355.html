<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r6585 - trunk/Documentation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6585%20-%20trunk/Documentation&In-Reply-To=%3C20081007144755.6E3C846DF%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001354.html">
   <LINK REL="Next"  HREF="001356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r6585 - trunk/Documentation</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6585%20-%20trunk/Documentation&In-Reply-To=%3C20081007144755.6E3C846DF%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r6585 - trunk/Documentation">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Tue Oct  7 16:47:55 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001354.html">[Taspring-linux-commit] r6584 - trunk/rts/build/scons
</A></li>
        <LI>Next message: <A HREF="001356.html">[Taspring-linux-commit] r6586 - trunk/Documentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1355">[ date ]</a>
              <a href="thread.html#1355">[ thread ]</a>
              <a href="subject.html#1355">[ subject ]</a>
              <a href="author.html#1355">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jk
Date: 2008-10-07 16:47:54 +0200 (Tue, 07 Oct 2008)
New Revision: 6585

Modified:
   trunk/Documentation/changelog.txt
Log:
 * cleaned lua changelog and added new map water tags

Modified: trunk/Documentation/changelog.txt
===================================================================
--- trunk/Documentation/changelog.txt	2008-10-07 14:20:47 UTC (rev 6584)
+++ trunk/Documentation/changelog.txt	2008-10-07 14:47:54 UTC (rev 6585)
@@ -43,9 +43,9 @@
 
 Spring Engine:
  - multithreaded avi-generator
- - new water renderer: bumpwater (&quot;/water 4&quot;), pretty and fast
+ - new water renderer: bumpwater (&quot;/water 4&quot;), pretty and fast 
  - the usual speedups and performance improvements
- - Font rendering system overhaul, 
+ - Font rendering system overhaul 
  - Functionality of Sensors.tdf and Particles.tdf moved to modrules. removed Sensors.tdf or Particles.tdf
    Transfers resources.tdf to resources.lua, and resources_map.tdf to resources_map.lua.
    Sidedata.tdf -&gt; sidedata.lua
@@ -139,16 +139,34 @@
       maxheight =  200.0f,
     }
    (note:  these values can be changed by MapOptions)
+ - new water tags (mostly used by the BumpWater renderer):
+  - shoreWaves           (true)
+  - forceRendering       (false)
+  - ambientFactor        (1.0)
+  - diffuseFactor        (1.0)
+  - specularFactor       (1.0)
+  - specularPower        (20.0)
+  - diffuseColor         float3(1.0, 1.0, 1.0)
+  - specularColor        float3(light.groundSunColor)
+  - fresnelMin           (0.2)
+  - fresnelMax           (0.8)
+  - fresnelPower         (4.0)
+  - reflectionDistortion (1.0)
+  - blurBase             (2.0)
+  - blurExponent         (1.5)
+  - perlinStartFreq      (8.0)
+  - perlinLacunarity     (3.0)
+  - perlinAmplitude      (0.9)
+  - foamTexture
+  - normalTexture
+  - numTiles
+  - caustics (texture table)
 
 COB:
  - Added new COB get constants MIN (131), MAX(132) and ABS(133).
  - Added the SONAR_STEALTH (108) COB get/set parameter
 
 LUA changes:
- - added some untested code for proxied gadget events
-  (KeyPress, KeyRelease, etc...)  there's also a little widget
-  that goes along with this so that the user can control whether
-  or not the gadget code can steal their clicks
  - Added 'teamcolors.lua' to the installers
  - Renamed 'gui.lua' to 'luaui.lua'
  - Removed LuaCob, and redirected Cob2Lua calls to LuaRules
@@ -162,112 +180,112 @@
     LUA_COMPAT_OPENLIB
  - Moved most of the LuaUI call-outs into LuaUnsyncedRead
    and LuaUnsyncedCtrl. The LuaUnsyncedCtrl call-outs require
-   that the modUICtrl variable be enabled for non-user scripts
+   that the modUICtrl variable be enabled for gadget scripts
    to use them.
  - Moved most of the LuaUI call-ins into LuaCallInHandler and
    LuaHandle. The moved call-ins require that the modUICtrl
-   variable be enabled for non-user scripts to receive them.
- - Added UnitEnteredWater(unitID, unitDefID, unitTeam) call-in
- - Added UnitEnteredAir(unitID, unitDefID, unitTeam) call-in
- - Added UnitLeftWater(unitID, unitDefID, unitTeam) call-in
- - Added UnitLeftAir(unitID, unitDefID, unitTeam) call-in
- - Added the new call-ins:
+   variable be enabled for gadget scripts to receive them.
+ - Updated included gadgetHandler
+ - Removed unwanted/confusing widgets.
+ - fonts.lua can load fonts from the VFS
+   (and will create LuaUI/Fonts/ if it does not exist)
+ - Removed the unused CommandDesc 'hotkey' member
+ - Renamed CommandDescription's  'onlyKey'  to  'hidden'
+ - lua scripts now get first crack at all mouse events
+ - Treat SDD file sizes as dynamic, so that lua scripts can
+   be reloaded while dev'ing without having file size mismatches
+   (LuaRules, LuaGaia, mod widgets, etc...)
+ - Added some new constants to the lua Game{} table.
+ - Added the dynamic HeightMapTexture
+  - FLOAT32/LUMINANCE format, NEAREST/NEAREST filtering
+  - can be accessed by lua scripts using '$heightmap'
+  - can be disable by clients with 'HeightMapTex=0' (config parameter)
+ - Added multiple new callins:
+   - UnitEnteredWater(unitID, unitDefID, unitTeam)
+   - UnitEnteredAir(unitID, unitDefID, unitTeam)
+   - UnitLeftWater(unitID, unitDefID, unitTeam)
+   - UnitLeftAir(unitID, unitDefID, unitTeam)
    - PlayerChanged(playerID)  (player changed team or spectating state)
    - TeamChanged(teamID)      (team changed allyteam, not useful yet)
-   - UnitCommand(unitID, unitDefID, unitTeam, cmdID, cmdOpts, cmdParams)
-     (note that cmdOpts is a number)
+   - UnitCommand(unitID, unitDefID, unitTeam, cmdID, cmdOpts, cmdParams) (note that cmdOpts is a number)
+   - UnitMoveFailed()
+   - MoveCtrlNotify(unitID, unitDefID, unitTeam, data)
+     - currently called with data = 1 if the unit hits the ground and stops
+     - return true to disable the unit's MoveCtrl
+   - ProjectileCreated(projectileID, projectileOwnerID) (arg #2 is -1 if no owner)
+   - ProjectileDestroyed(projectileID)
+   - GamePreload() (Called at the end of the loading process)
+   - GameStart()   (Called when the game is about to start)
+   - TerraformComplete(UnitID, UnitDefID, UnitTeam, BuildUnitID, BuildUnitDefID, BuildUnitTeam)
+     (it gets called after the terraforming for a construction is complete (once
+      per terraforming builder), the return value is whether the con should stop
+      building.)
+   - DrawGenesis()
+     - called immediately following Update()
+     - called even when the game window is minimized
+     - modelview and projection matrices are identities
+     - can be used to update GPU-side physics simulation
+     textures and custom per-unit textures
+   - a real ViewResize() call-in
+ - Added the unicode values to the lua KeyPress() and KeyRelease() call-ins
+ - Replaced Spring.GetMouseMiniMapState() with:
+    Spring.GetMiniMapGeometry() -&gt;
+      posX, posY, sizeX, sizeY, minimized, maximized, &lt;false | &quot;left&quot; | &quot;right&quot;&gt;
+ - Changed the GetUnitNearestEnemy() lua call-out to:
+               GetUnitNearestEnemy(number unitID[, number range[, boolean useLos=true]])
+ - Added geometry shader support to LuaOpenGL
  - Added Spring.ValidUnitID(number id)    -&gt; boolean
  - Added Spring.ValidFeatureID(number id) -&gt; boolean
- - Added a real ViewResize() call-in
+ - Added Spring.GetUnitIsDead()
  - Added Spring.GetModUICtrl()
  - Added Spring.GetViewGeometry()   -&gt; sizeX, sizeY, posX, posY
  - Added Spring.GetWindowGeometry() -&gt; sizeX, sizeY, posX, posY
  - Added Spring.GetScreenGeometry() -&gt; sizeX, sizeY, posX, posY
- - Modified Spring.GetVisibleUnits() so that the team specifier can
-   use the ALL_UNITS, ALLY_UNITS, ENEMY_UNITS, and MY_UNITS values.
- - Replaced Spring.GetMouseMiniMapState() with:
-    Spring.GetMiniMapGeometry() -&gt;
-      posX, posY, sizeX, sizeY, minimized, maximized, &lt;false | &quot;left&quot; | &quot;right&quot;&gt;
  - Added Spring.IsAboveMiniMap(x, y) -&gt; boolean
- - Added LuaSyncedRead Spring.GetUnitLastAttacker()
- - Added LuaSyncedRead Spring.GetUnitFuel()
- - Added LuaSyncedCtrl Spring.SetUnitFuel()
- - Added LuaSyncedRead Spring.GetUnitSensorRadius(unitID, &lt;type&gt;)
- - Added LuaSyncedCtrl Spring.SetUnitSensorRadius(unitID, &lt;type&gt;, radius)
- - lua unit 'facing' parameters can now use long strings:
-    'north', 'south', 'east', 'west'
- - the Spring.UnitCreated() call-out now accepts unitDef names and unitDef IDs
- - Added the UnitMoveFailed() call-in
- - new call-ins:
-     ProjectileCreated(projectileID, projectileOwnerID) (arg #2 is -1 if no owner)
-     ProjectileDestroyed(projectileID)
- - new call-outs:
-     GetProjectilePosition(projectileID) -&gt; px, py, pz
-     GetProjectileVelocity(projectileID) -&gt; vx, vy, vz
-     SetProjectilePosition(projectileID, px, py, pz) -&gt; nil
-     SetProjectileVelocity(projectileID, vx, vy, vz) -&gt; nil
-     SetProjectileDetonate(projectileID) -&gt; nil
+ - Added Spring.GetUnitLastAttacker()
+ - Added Spring.GetUnitFuel()
+ - Added Spring.SetUnitFuel()
+ - Added Spring.GetUnitSensorRadius(unitID, &lt;type&gt;)
+ - Added Spring.SetUnitSensorRadius(unitID, &lt;type&gt;, radius)
+ - new projectile call-outs:
+     Spring.GetProjectilePosition(projectileID) -&gt; px, py, pz
+     Spring.GetProjectileVelocity(projectileID) -&gt; vx, vy, vz
+     Spring.SetProjectilePosition(projectileID, px, py, pz) -&gt; nil
+     Spring.SetProjectileVelocity(projectileID, vx, vy, vz) -&gt; nil
+     Spring.SetProjectileDetonate(projectileID) -&gt; nil
  - added the GL evaluator functions to the lua GL interface
    (note the gl.EvalEnable() and gl.EvalDisable() can only be
    called in a gl.Eval(func) block).
- - Removed the unused CommandDesc 'hotkey' member
- - Renamed CommandDescription's  onlyKey  to  hidden
- - lua scripts now get first crack at all mouse events
- - Treat SDD file sizes as dynamic, so that lua scripts can
-   be reloaded while dev'ing without having file size mismatches
-   (LuaRules, LuaGaia, mod widgets, etc...)
- - Added the Spring.GetUnitIsDead() call-out
- - Added 2 new lua callins:
-   - GamePreload: Called at the end of the loading process
-   - GameStart:   Called when the game is about to start
- - Added the unicode values to the lua KeyPress() and KeyRelease() call-ins
- - Changed the GetUnitNearestEnemy() lua call-out to:
-               GetUnitNearestEnemy(number unitID[, number range[, boolean useLos=true]])
- - Added two Lua synced callouts for controlling the collision volume properties:
-   SetUnitCollisionVolumeData(id, xs, ys, zs, xo, yo, zo, vtype, ptype, paxis)
-   and SetFeatureCollisionVolumeData() (same args)
- - Added new luaRules callin:
-   TerraformComplete(UnitID, UnitDefID, UnitTeam, BuildUnitID, BuildUnitDefID, BuildUnitTeam)
-   it gets called after the terraforming for a construction is complete (once
-   per terraforming builder), the return value is whether the con should stop
-   building.
+ - Added Spring.SetUnitCollisionVolumeData(id, xs, ys, zs, xo, yo, zo, vtype, ptype, paxis)
+     and Spring.SetFeatureCollisionVolumeData() (same args)
  - Added Spring.SetLastMessagePosition(x,y,z)
- - Added new LuaRules  MoveCtrlNotify(unitID, unitDefID, unitTeam, data)  call-in
-  - currently called with data = 1 if the unit hits the ground and stops
-  - return true to disable the unit's MoveCtrl
- - Added the dynamic HeightMapTexture
-  - FLOAT32/LUMINANCE format, NEAREST/NEAREST filtering
-  - can be accessed by lua scripts using '$heightmap'
-  - can be disable by clients with 'HeightMapTex=0' (config parameter)
- - Added the following LuaSyncedCtrl call-outs:
-    - SetUnitLosMask(unitID, allyTeamID, number | table) -&gt; nil
-    - SetUnitLosState(unitID, allyTeamID, number | table) -&gt; nil
- - Added Spring.FixedAllies() -&gt; bool
- - Reverted the GetPositionLosState() to its original configuration (no air los),
-  (and made it faster)
- - Added the  IsPosInLos()    call-out
- - Added the  IsPosInRadar()  call-out
- - Added the  IsPosInAirLos() call-out
- - New PauseSoundStream(), GetSoundStreamTime() (how long it has been playing, 
-   SetSoundStreamVolume(number) call-outs
- - Added burst, burstRate and projectiles to SetUnitWeaponState
- - Added the DrawGenesis() call-in
-   - called immediately following Update()
-   - called even when the game window is minimized
-   - modelview and projection matrices are identities
-   - can be used to update GPU-side physics simulation
-    textures and custom per-unit textures
- - Updated included gadgetHandler
- - fonts.lua can load fonts from the VFS
-   (and will create LuaUI/Fonts/ if it does not exist)
- - added the following LuaUnsyncedCtrl call-outs:
-    AddUnitIcon(string name, string texture
-                [, number size[, number distance[, bool radiusAdjust]]])
-    FreeUnitIcon(string name)
- - Added gl.ActiveShader(shaderID, function(), ...)
-   - safe way to set shader uniforms in non-drawing code
- - Added the  gl.DepthClamp(bool)      call-out  (not always available)
- - Added the  gl.UnsafeState(number, [bool reverse, ] function, ...)  call-out
+ - Added Spring.SetUnitLosMask(unitID, allyTeamID, number | table) -&gt; nil
+     and Spring.SetUnitLosState(unitID, allyTeamID, number | table) -&gt; nil
+ - Added Spring.FixedAllies()
+ - Reverted the GetPositionLosState() to its original configuration (no air los)
+ - Added Spring.IsPosInLos()
+ - Added Spring.IsPosInRadar()
+ - Added Spring.IsPosInAirLos()
+ - Added Spring.PauseSoundStream(), Spring.GetSoundStreamTime(),
+         Spring.SetSoundStreamVolume(number)
+ - Added burst, burstRate and projectiles to Spring.SetUnitWeaponState
+ - Added Spring.AddUnitIcon(string name, string texture
+                            [, number size[, number distance[, bool radiusAdjust]]])
+         Spring.FreeUnitIcon(string name)
+ - Added Spring.SetUnitSonarStealth()
+ - Added Spring.SpawnCEG(tag, px, py, pz, dx, dy, dz, rad, dmg) synced callout
+ - Added Spring.SetHeightMapFunc(lua_func,arg1,arg2,..),
+         Spring.AddHeightMap(x, y, h) -&gt; `final height`
+         Spring.SetHeightMap(x, y, h [,t]) -&gt; `absolute value changed`
+ - Added Spring.ExtractModArchiveFile(path) callout
+   For example, Spring.ExtractModArchiveFile(&quot;sounds/boom.wav&quot;)
+   will create a directory &quot;sounds/&quot; and extract &quot;boom.wav&quot; to it.
+ - Added Spring.GetUnitPiecePosDir(unitID, piece) -&gt; posx,posy,posz, dirx,diry,dirz
+ - Added Spring.GetUnitVectors(unitID) -&gt; {front_x,front_y,front_z},{up_x,up_y,up_z},{right_x,right_y,right_z}
+ - Added Spring.GetUnitWeaponVectors(unitID,weaponNum) -&gt; wpos_x,wpos_y,wpos_z, wdir_x,wdir_y,wdir_z
+ - Added gl.ActiveShader(shaderID, function(), ...) (safe way to set shader uniforms in non-drawing code)
+ - Added gl.DepthClamp(bool)  (not always available)
+ - Added gl.UnsafeState(number, [bool reverse, ] function, ...)
    (glEnable() / glDisable() for unknown states; considered 'unsafe')
  - Added Occlusion Queries:
    - Added gl.CreateQuery() -&gt; query
@@ -279,7 +297,6 @@
    - Spring.GetUnitNoDraw()  
    - Spring.GetUnitNoMinimap()
    - Spring.GetUnitNoSelect()
- - Added geometry shader support to LuaOpenGL
  - Added the fbo 'readbuffer' parameter
  - Added gl.ReadPixels(x, y, w, h [,format])
  - Added StencilTests:
@@ -293,11 +310,11 @@
    - Added gl.StencilMaskSeparate()
    - Added gl.StencilFuncSeparate()
    - Added gl.StencilOpSeparate()
- - Added  gl.BlendEquation()
- - Added  gl.BlendEquationSeparate()
- - Added  gl.BlendFunc()  -- redundant
- - Added  gl.BlendFuncSeparate()
- - Added  gl.Blending() convenience names:
+ - Added gl.BlendEquation()
+ - Added gl.BlendEquationSeparate()
+ - Added gl.BlendFunc()  -- redundant
+ - Added gl.BlendFuncSeparate()
+ - Added gl.Blending() convenience names:
     name           blend_src    blend_dst             enabled
     &quot;add&quot;          ONE          ONE                   true
     &quot;add_alpha&quot;    SRC_ALPHA    ONE                   true
@@ -314,30 +331,14 @@
      gl.PushName()
      gl.PopName()
      gl.LoadName()
- - Added GL evaluator functions to the lua GL interface.
- - If Spring.SetDrawSky(false) is set, do not draw the sun.
+ - Added gl.Texture($shading) &amp; gl.Texture($grass)
+ - Allowed to use gl.CopyToTexture with non GL_TEXTURE2D, i.e. GL_TEXTURE_RECTANGLE
+ - Modified Spring.GetVisibleUnits() so that the team specifier can
+   use the ALL_UNITS, ALLY_UNITS, ENEMY_UNITS, and MY_UNITS values.
+ - 'facing' parameters can now use long strings: 'north', 'south', 'east', 'west'
+ - Spring.UnitCreated() call-out now accepts unitDef names and unitDef IDs
  - Spring.SendCommands() can use a bunch of string arguments as well as the old
    table format. e.g Spring.SendCommands('echo aoeu', 'info 2', 'specteam 0')
- - Added some new constants to the lua Game{} table.
- - Added gl.ActiveShader(shaderID, function(), ...) safe way to set shader 
-   uniforms in non-drawing code
- - Added the Spring.SetUnitSonarStealth() lua call-out
- - Added SpawnCEG(tag, px, py, pz, dx, dy, dz, rad, dmg) synced callout
- - Added Spring.SetHeightMapFunc(lua_func,arg1,arg2,..),
-     Spring.AddHeightMap(x, y, h) -&gt; `final height`
-     Spring.SetHeightMap(x, y, h [,t]) -&gt; `absolute value changed`
- - Added an unsynced ExtractModArchiveFile(path) callout to enable LuaUI
-   widgets to extract files from mod archives.
-   For example, Spring.ExtractModArchiveFile(&quot;sounds/boom.wav&quot;)
-   will create a directory &quot;sounds/&quot; and extract &quot;boom.wav&quot; to it.
- - Added SyncedRead call-out GetUnitPiecePosDir(unitID, piece), this returns
-   the global position and forward vector of the given piece (6 return values
-   in total). The emphasis is on global, the previous call-outs only deliver 
-   relative values.
- - Added Spring.GetUnitVectors(unitID) -&gt; {front_x,front_y,front_z},{up_x,up_y,up_z},{right_x,right_y,right_z}
- - Added Spring.GetUnitWeaponVectors(unitID,weaponNum) -&gt; wpos_x,wpos_y,wpos_z, wdir_x,wdir_y,wdir_z
- - Added gl.Texture($shading) &amp; gl.Texture($grass)
- - Allowed to use gl.CopyToTexture with non GL_TEXTURE2D, i.e. GL_TEXTURE_RECTANGLE
  - Fixed Spring.UnitRendering interface to make it possible to emulate the default 3do/s3o shaders
    - fixed $shadows texture params (you can now use shadow2DProj() in glsl)
    - fixed wrong (!=0) check if uniform locations are set (they begin with 0!)
@@ -352,8 +353,8 @@
  - Fixed full-view spectators get all LuaUI  RecvLuaMsg()  messages now.
  - Fixed Spring.SetFeaturePosition().
  - Fixed Spring.SetFeatureDirection().
+ - If Spring.SetDrawSky(false) is set, do not draw the sun.
  - Fixed s3o recognition in LuaUnitDefs
- - Removed unwanted/confusing widgets.
 
 AI:
  - Added new ai value AIVAL_SCRIPT returning start script text.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001354.html">[Taspring-linux-commit] r6584 - trunk/rts/build/scons
</A></li>
	<LI>Next message: <A HREF="001356.html">[Taspring-linux-commit] r6586 - trunk/Documentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1355">[ date ]</a>
              <a href="thread.html#1355">[ thread ]</a>
              <a href="subject.html#1355">[ subject ]</a>
              <a href="author.html#1355">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
