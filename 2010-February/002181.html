<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r7411 - Lobby/TASClient
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7411%20-%20Lobby/TASClient&In-Reply-To=%3C20100210193842.8923A2E7A9%40it-l.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002180.html">
   <LINK REL="Next"  HREF="002182.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r7411 - Lobby/TASClient</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7411%20-%20Lobby/TASClient&In-Reply-To=%3C20100210193842.8923A2E7A9%40it-l.eu%3E"
       TITLE="[Taspring-linux-commit] r7411 - Lobby/TASClient">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Wed Feb 10 20:38:42 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002180.html">[Taspring-linux-commit] r7410 - Lobby/TASClient
</A></li>
        <LI>Next message: <A HREF="002182.html">[Taspring-linux-commit] r7412 - Lobby/TASClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2181">[ date ]</a>
              <a href="thread.html#2181">[ thread ]</a>
              <a href="subject.html#2181">[ subject ]</a>
              <a href="author.html#2181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: satirik
Date: 2010-02-10 20:38:41 +0100 (Wed, 10 Feb 2010)
New Revision: 7411

Modified:
   Lobby/TASClient/HelpUnit.dfm
   Lobby/TASClient/HelpUnit.pas
   Lobby/TASClient/MainUnit.dfm
   Lobby/TASClient/MainUnit.pas
   Lobby/TASClient/PreferencesFormUnit.pas
   Lobby/TASClient/TASClient.dof
   Lobby/TASClient/TASClient.res
Log:
* help updated
* new length column in battle list

Modified: Lobby/TASClient/HelpUnit.dfm
===================================================================
--- Lobby/TASClient/HelpUnit.dfm	2010-02-10 16:26:04 UTC (rev 7410)
+++ Lobby/TASClient/HelpUnit.dfm	2010-02-10 19:38:41 UTC (rev 7411)
@@ -2789,7 +2789,7 @@
         end
         object Label50: TSpTBXLabel
           Left = 288
-          Top = 216
+          Top = 232
           Width = 281
           Height = 89
           Caption = 
@@ -2921,9 +2921,9 @@
         object SpTBXLabel8: TSpTBXLabel
           Left = 288
           Top = 184
-          Width = 157
+          Width = 160
           Height = 13
-          Caption = '300- 1000 h = highly experienced'
+          Caption = '300 - 1000 h = highly experienced'
           LinkFont.Charset = DEFAULT_CHARSET
           LinkFont.Color = clBlue
           LinkFont.Height = -11
@@ -2933,9 +2933,9 @@
         object SpTBXLabel9: TSpTBXLabel
           Left = 288
           Top = 200
-          Width = 90
+          Width = 105
           Height = 13
-          Caption = '&gt; 1000 h = veteran'
+          Caption = '1000 - 3000 = veteran'
           LinkFont.Charset = DEFAULT_CHARSET
           LinkFont.Color = clBlue
           LinkFont.Height = -11
@@ -2954,6 +2954,18 @@
           LinkFont.Name = 'MS Sans Serif'
           LinkFont.Style = [fsUnderline]
         end
+        object SpTBXLabel16: TSpTBXLabel
+          Left = 288
+          Top = 216
+          Width = 80
+          Height = 13
+          Caption = '&gt; 3000 h = ghost'
+          LinkFont.Charset = DEFAULT_CHARSET
+          LinkFont.Color = clBlue
+          LinkFont.Height = -11
+          LinkFont.Name = 'MS Sans Serif'
+          LinkFont.Style = [fsUnderline]
+        end
       end
     end
     object Button3: TSpTBXButton

Modified: Lobby/TASClient/HelpUnit.pas
===================================================================
--- Lobby/TASClient/HelpUnit.pas	2010-02-10 16:26:04 UTC (rev 7410)
+++ Lobby/TASClient/HelpUnit.pas	2010-02-10 19:38:41 UTC (rev 7411)
@@ -135,6 +135,7 @@
     Image22: TImage;
     Image23: TImage;
     SpTBXLabel15: TSpTBXLabel;
+    SpTBXLabel16: TSpTBXLabel;
     procedure Button1Click(Sender: TObject);
     procedure FormCreate(Sender: TObject);
     procedure Button3Click(Sender: TObject);

Modified: Lobby/TASClient/MainUnit.dfm
===================================================================
--- Lobby/TASClient/MainUnit.dfm	2010-02-10 16:26:04 UTC (rev 7410)
+++ Lobby/TASClient/MainUnit.dfm	2010-02-10 19:38:41 UTC (rev 7411)
@@ -1,6 +1,6 @@
 object MainForm: TMainForm
-  Left = 289
-  Top = 467
+  Left = 407
+  Top = -13
   Width = 847
   Height = 521
   Caption = '.'
@@ -473,7 +473,7 @@
             Font.Height = -11
             Font.Name = 'MS Sans Serif'
             Font.Style = []
-            Header.AutoSizeIndex = 7
+            Header.AutoSizeIndex = 8
             Header.Font.Charset = DEFAULT_CHARSET
             Header.Font.Color = clWindowText
             Header.Font.Height = -11
@@ -564,6 +564,11 @@
               end
               item
                 Position = 7
+                Width = 90
+                WideText = 'Length'
+              end
+              item
+                Position = 8
                 Width = 130
                 WideText = 'Players'
                 WideHint = 
@@ -1030,16 +1035,6 @@
                     TabOrder = 15
                     OnClick = PlayersFilterClick
                   end
-                  object Image321: TImage32
-                    Left = 256
-                    Top = 64
-                    Width = 49
-                    Height = 33
-                    BitmapAlign = baTopLeft
-                    Scale = 1.000000000000000000
-                    ScaleMode = smNormal
-                    TabOrder = 16
-                  end
                 end
               end
             end

Modified: Lobby/TASClient/MainUnit.pas
===================================================================
--- Lobby/TASClient/MainUnit.pas	2010-02-10 16:26:04 UTC (rev 7410)
+++ Lobby/TASClient/MainUnit.pas	2010-02-10 19:38:41 UTC (rev 7411)
@@ -402,7 +402,7 @@
   );
 
 const
-  VERSION_NUMBER = '0.61'; // Must be float value! (with a period as a decimal seperator)
+  VERSION_NUMBER = '0.62'; // Must be float value! (with a period as a decimal seperator)
   AUTOUPDATE_URL = '<A HREF="http://tasclient.no-ip.org/TASClient_update_v3.txt">http://tasclient.no-ip.org/TASClient_update_v3.txt</A>';
   PROGRAM_VERSION = 'TASClient ' + VERSION_NUMBER;
   KEEP_ALIVE_INTERVAL = 10000; // in milliseconds. Tells us what should be the maximum &quot;silence&quot; time before we send a ping to the server.
@@ -860,6 +860,8 @@
     Visible : boolean;
     ForcedHidden: boolean;
     RefreshRanksNCupsOnSuccessReport: boolean;
+    StartTimeUknown: Boolean;
+    StartTime: TDateTime;
 
     Description: WideString;
     Map: String; // .smf file name, not archive file name!
@@ -1211,7 +1213,6 @@
     DeleteLayoutSubmenu: TSpTBXSubmenuItem;
     mnuSpringOptions: TSpTBXItem;
     EnableFilters: TSpTBXCheckBox;
-    Image321: TImage32;
     procedure mnuOpenPrivateChatClick(Sender: TObject);
     procedure mnuSelectBattleClick(Sender: TObject);
     procedure mnuPlayWithClick(Sender: TObject);
@@ -2934,6 +2935,8 @@
   CurrentHighLightGroup := nil;
   RefreshRanksNCupsOnSuccessReport := False;
   ForcedHidden := False;
+  StartTimeUknown := True;
+  StartTime := Now;
 end;
 
 destructor TBattle.Destroy;
@@ -6865,8 +6868,14 @@
       // let's check if this client is founder of any battle. If he is, we must refresh this battle's node. We must also check if he is the founder of the battle user is participating in.
       if Client.InBattle then
       begin
-        for i := 0 to Battles.Count-1 do if TClient(TBattle(Battles[i]).Clients[0]).Name = Client.Name then
+        for i := 0 to Battles.Count-1 do
+        if TClient(TBattle(Battles[i]).Clients[0]).Name = Client.Name then
         begin
+          if not Status.ReceivingLoginInfo then
+          begin
+            TBattle(Battles[i]).StartTimeUknown := False;
+            TBattle(Battles[i]).StartTime := Now;
+          end;
           if (BattleState.Battle &lt;&gt; nil) and (BattleState.Battle.ID = TBattle(Battles[i]).ID) and (Client.GetInGameStatus) and changed and (not Status.AmIInGame) then
           begin
             PostMessage(BattleForm.Handle, WM_STARTGAME, 0, 0);
@@ -8736,6 +8745,7 @@
   const PaintInfo: TVTPaintInfo);
 var
   s: WideString;
+  s2: string;
   R: TRect;
   X: Integer;
   Battle: TBattle;
@@ -8834,8 +8844,21 @@
         Inc(R.Left, RanksImageList.Width);
         s := FloatToStrF(RoundTo(avgRank+1,-2),ffFixed,7,2);
       end;
-      7: // players
+      7: // length
       begin
+        if Battle.IsBattleInProgress then
+          if Battle.StartTimeUknown then
+            s := '?:??:??'
+          else
+          begin
+            DateTimeToString(s2,'h:nn:ss',Now-Battle.StartTime);
+            s := s2;
+          end
+        else
+          s := '';
+      end;
+      8: // players
+      begin
         if Battle.BattleType = 0 then
         begin
           s := IntToStr(Battle.Clients.Count - Battle.SpectatorCount);
@@ -8904,7 +8927,8 @@
       if (Preferences.WarnIfUsingNATTraversing) and (Battle.NATType &gt; 0) then Inc(NodeWidth, BattleStatusImageList.Width);
     end;
     5: NodeWidth := Canvas.TextWidth(Battle.ModName) + 2 * AMargin; // mod
-    7: // players
+    7: NodeWidth := Canvas.TextWidth('?:??:?');
+    8: // players
     begin
       s := IntToStr(Battle.Clients.Count - Battle.SpectatorCount);
       if Battle.SpectatorCount &gt; 0 then s := s + '+' + IntToStr(Battle.SpectatorCount);
@@ -9294,6 +9318,20 @@
     end;
     // sort by description:
     7: if AnsiCompareText(Battle1.Description, Battle2.Description) = 0 then Result := 0 else if AnsiCompareText(Battle1.Description, Battle2.Description) &gt; 0 then Result := 1 else Result := -1;
+    // sort by length
+    8: if Battle1.IsBattleInProgress and Battle2.IsBattleInProgress then
+         if Battle1.StartTimeUknown then
+           Result := -1
+         else
+           if Battle2.StartTimeUknown then
+             Result := 1
+           else
+             Result := -CompareDateTime(Battle1.StartTime,Battle2.StartTime)
+       else
+         if Battle1.IsBattleInProgress and not Battle2.IsBattleInProgress then
+          Result := 1
+         else
+          Result := -1;
   else
     Result := 0;
   end; // case
@@ -9570,42 +9608,41 @@
   with (Sender as TVirtualDrawTree) do
     try
 
-    if Header.Columns[Column].Text = 'Players' then
-      R := Rect(0, 0, Canvas.TextWidth(Battle.ClientsToString) + 20, 18)
-    else if Header.Columns[Column].Text = 'Mod' then
-      R := Rect(0, 0, Canvas.TextWidth(Battle.ModName) + 20, 18)
-    else if Header.Columns[Column].Text = 'State' then
-    begin
-      if Battle.NATType &gt; 0 then
-        tmpStr := _(' NAT Traversal enabled, you may not be able to join this battle.');
-      if Battle.IsBattleInProgress then
-        R := Rect(0, 0, Canvas.TextWidth(_('Battle in progress, you can join it but you will have to wait until it ends.')) + 20, 18)
-      else if Battle.Locked then
-        R := Rect(0, 0, Canvas.TextWidth(_('Battle locked, you can''t join it.')) + 20, 18)
-      else if Battle.Password and not Battle.IsLadderBattle then
-        R := Rect(0, 0, Canvas.TextWidth(_('You need the password to join that battle.')) + 20, 18)
-      else if Battle.IsBattleFull then
-        R := Rect(0, 0, Canvas.TextWidth(_('The battle is full, you can join but you will be spectator.')+tmpStr) + 20, 18)
-      else if Battle.RankLimit &gt; Status.Me.GetRank then
-        R := Rect(0, 0, Canvas.TextWidth(_('You don''t have the rank required to join that battle. However you can still try to join it if you think you are good enough.')+tmpStr) + 20, 18)
-      else if Battle.IsLadderBattle then
-        R := Rect(0, 0, Canvas.TextWidth(_('This is a ladder battle, you can join it. Read the help(F1) for further information.')+tmpStr) + 20, 18)
-      else
-        R := Rect(0, 0, Canvas.TextWidth(_('Battle opened.')+tmpStr) + 20, 18);
-    end
-    else if Header.Columns[Column].Text = 'Map' then
-    begin
-      if Utility.MapList.IndexOf(Battle.Map) &gt; -1 then
-        R := Rect(0, 0, 110+250, 120)
-      else
-        R := Rect(0, 0, Canvas.TextWidth(Battle.Map) + 20, 18);
-    end
-    else if Header.Columns[Column].Text = 'Host' then
-      R := Rect(0, 0, Canvas.TextWidth(TClient(Battle.Clients[0]).Name) + 20, 18)
-    else if Header.Columns[Column].Text = 'Description' then
-      R := Rect(0, 0, Canvas.TextWidth(Battle.Description) + 20, 18)
-    else if Header.Columns[Column].Text = 'Avg Players rank' then
-      R := Rect(0, 0, Canvas.TextWidth(Header.Columns[Column].Hint) + 20, 18);
+    case Column of
+      8: R := Rect(0, 0, Canvas.TextWidth(Battle.ClientsToString) + 20, 18);
+      5: R := Rect(0, 0, Canvas.TextWidth(Battle.ModName) + 20, 18);
+      4:
+      begin
+        if Battle.NATType &gt; 0 then
+          tmpStr := _(' NAT Traversal enabled, you may not be able to join this battle.');
+        if Battle.IsBattleInProgress then
+          R := Rect(0, 0, Canvas.TextWidth(_('Battle in progress, you can join it but you will have to wait until it ends.')) + 20, 18)
+        else if Battle.Locked then
+          R := Rect(0, 0, Canvas.TextWidth(_('Battle locked, you can''t join it.')) + 20, 18)
+        else if Battle.Password and not Battle.IsLadderBattle then
+          R := Rect(0, 0, Canvas.TextWidth(_('You need the password to join that battle.')) + 20, 18)
+        else if Battle.IsBattleFull then
+          R := Rect(0, 0, Canvas.TextWidth(_('The battle is full, you can join but you will be spectator.')+tmpStr) + 20, 18)
+        else if Battle.RankLimit &gt; Status.Me.GetRank then
+          R := Rect(0, 0, Canvas.TextWidth(_('You don''t have the rank required to join that battle. However you can still try to join it if you think you are good enough.')+tmpStr) + 20, 18)
+        else if Battle.IsLadderBattle then
+          R := Rect(0, 0, Canvas.TextWidth(_('This is a ladder battle, you can join it. Read the help(F1) for further information.')+tmpStr) + 20, 18)
+        else
+          R := Rect(0, 0, Canvas.TextWidth(_('Battle opened.')+tmpStr) + 20, 18);
+      end;
+      3:
+      begin
+        if Utility.MapList.IndexOf(Battle.Map) &gt; -1 then
+          R := Rect(0, 0, 110+250, 120)
+        else
+          R := Rect(0, 0, Canvas.TextWidth(Battle.Map) + 20, 18);
+      end;
+      2: R := Rect(0, 0, Canvas.TextWidth(TClient(Battle.Clients[0]).Name) + 20, 18);
+      1: R := Rect(0, 0, Canvas.TextWidth(Battle.Description) + 20, 18);
+      6: R := Rect(0, 0, Canvas.TextWidth(Header.Columns[Column].Hint) + 20, 18);
+      7: R := Rect(0, 0, Canvas.TextWidth('?:??:?')+20, 18);
+    end;
+    
     except
       R := Rect(0, 0, Canvas.TextWidth('Error') + 20, 18);
     end;
@@ -9617,6 +9654,7 @@
   Battle : TBattle;
   i:integer;
   tmpStr : string;
+  s: string;
 begin
   with Sender as TVirtualDrawTree, HintCanvas do
   begin
@@ -9630,55 +9668,65 @@
 
     //Brush.Style := bsClear;
 
-    if Header.Columns[Column].Text = 'Players' then
-      TextOut(5, 2, Battle.ClientsToString)
-    else if Header.Columns[Column].Text = 'Mod' then
-      TextOut(5, 2, Battle.ModName)
-    else if Header.Columns[Column].Text = 'State' then
-    begin
-      if Battle.NATType &gt; 0 then
-        tmpStr := _(' NAT Traversal enabled, you may not be able to join this battle.');
-      if Battle.IsBattleInProgress then
-        TextOut(5, 2, _('Battle in progress, you can join it but you will have to wait until it ends.'))
-      else if Battle.Locked then
-        TextOut(5, 2, _('Battle locked, you can''t join it.'))
-      else if Battle.Password and not Battle.IsLadderBattle then
-        TextOut(5, 2, _('You need the password to join that battle.'))
-      else if Battle.IsBattleFull then
-        TextOut(5, 2, _('The battle is full, you can join but you will be spectator.')+tmpStr)
-      else if Battle.RankLimit &gt; Status.Me.GetRank then
-        TextOut(5, 2, _('You don''t have the rank required to join that battle. However you can still try to join it if you think you are good enough.')+tmpStr)
-      else if Battle.IsLadderBattle then
-        TextOut(5, 2, _('This is a ladder battle, you can join it. Read the help(F1) for further information.')+tmpStr)
-      else
-        TextOut(5, 2, 'Battle opened.'+tmpStr);
-    end
-    else if Header.Columns[Column].Text = 'Map' then
-    begin
-      if Utility.MapList.IndexOf(Battle.Map) &gt; -1 then
+    case Column of
+      8: TextOut(5, 2, Battle.ClientsToString);
+      5: TextOut(5, 2, Battle.ModName);
+      4:
       begin
-        with TMapItem(MapListForm.Maps[Utility.MapList.IndexOf(Battle.Map)]) do
+        if Battle.NATType &gt; 0 then
+          tmpStr := _(' NAT Traversal enabled, you may not be able to join this battle.');
+        if Battle.IsBattleInProgress then
+          TextOut(5, 2, _('Battle in progress, you can join it but you will have to wait until it ends.'))
+        else if Battle.Locked then
+          TextOut(5, 2, _('Battle locked, you can''t join it.'))
+        else if Battle.Password and not Battle.IsLadderBattle then
+          TextOut(5, 2, _('You need the password to join that battle.'))
+        else if Battle.IsBattleFull then
+          TextOut(5, 2, _('The battle is full, you can join but you will be spectator.')+tmpStr)
+        else if Battle.RankLimit &gt; Status.Me.GetRank then
+          TextOut(5, 2, _('You don''t have the rank required to join that battle. However you can still try to join it if you think you are good enough.')+tmpStr)
+        else if Battle.IsLadderBattle then
+          TextOut(5, 2, _('This is a ladder battle, you can join it. Read the help(F1) for further information.')+tmpStr)
+        else
+          TextOut(5, 2, 'Battle opened.'+tmpStr);
+      end;
+      3:
+      begin
+        if Utility.MapList.IndexOf(Battle.Map) &gt; -1 then
         begin
-          if MapImage &lt;&gt; nil then
-            Draw(10,10,MapImage.Picture.Bitmap);
-          Font.Style := [fsBold];
-          TextOut(120, 10, MapName);
-          Font.Style := [];
-          TextOut(120, 10+TextHeight(MapName), _('Map size: ')+IntToStr(MapInfo.Width div 64)+'x'+IntToStr(MapInfo.Height div 64));
-          TextOut(120, 10+TextHeight(MapName)*2, _('Max. metal: ')+FloatToStr(RoundTo(MapInfo.MaxMetal,-3)));
-          TextOut(120, 10+TextHeight(MapName)*3, _('Wind (min/max/avg): ')+IntToStr(MapInfo.MinWind)+'-'+IntToStr(MapInfo.MaxWind)+ '-' + IntToStr(Floor((MapInfo.MaxWind+MapInfo.MinWind)/2)));
-          DrawMultilineText(MapInfo.Description,HintCanvas,Rect(120,10+10+TextHeight(MapName)*4,R.Right-10,R.Bottom-5),alHLeft,alVTop,JustLeft,true);
-        end;
-      end
-      else
-        TextOut(5, 2, Battle.Map);
-    end
-    else if Header.Columns[Column].Text = 'Host' then
-      TextOut(5, 2, TClient(Battle.Clients[0]).Name)
-    else if Header.Columns[Column].Text = 'Description' then
-      TextOut(5, 2, Battle.Description)
-    else if Header.Columns[Column].Text = 'Avg Players rank' then
-      TextOut(5, 2, Header.Columns[Column].Hint);
+          with TMapItem(MapListForm.Maps[Utility.MapList.IndexOf(Battle.Map)]) do
+          begin
+            if MapImage &lt;&gt; nil then
+              Draw(10,10,MapImage.Picture.Bitmap);
+            Font.Style := [fsBold];
+            TextOut(120, 10, MapName);
+            Font.Style := [];
+            TextOut(120, 10+TextHeight(MapName), _('Map size: ')+IntToStr(MapInfo.Width div 64)+'x'+IntToStr(MapInfo.Height div 64));
+            TextOut(120, 10+TextHeight(MapName)*2, _('Max. metal: ')+FloatToStr(RoundTo(MapInfo.MaxMetal,-3)));
+            TextOut(120, 10+TextHeight(MapName)*3, _('Wind (min/max/avg): ')+IntToStr(MapInfo.MinWind)+'-'+IntToStr(MapInfo.MaxWind)+ '-' + IntToStr(Floor((MapInfo.MaxWind+MapInfo.MinWind)/2)));
+            DrawMultilineText(MapInfo.Description,HintCanvas,Rect(120,10+10+TextHeight(MapName)*4,R.Right-10,R.Bottom-5),alHLeft,alVTop,JustLeft,true);
+          end;
+        end
+        else
+          TextOut(5, 2, Battle.Map);
+      end;
+      2: TextOut(5, 2, TClient(Battle.Clients[0]).Name);
+      1: TextOut(5, 2, Battle.Description);
+      6: TextOut(5, 2, Header.Columns[Column].Hint);
+      7:
+      begin
+        if Battle.IsBattleInProgress then
+          if Battle.StartTimeUknown then
+            s := '?:??:??'
+          else
+          begin
+            DateTimeToString(s,'h:nn:ss',Now-Battle.StartTime);
+          end
+        else
+          s := '';
+        TextOut(5, 2, s);
+      end;
+    end;
 
     except
       TextOut(5, 2, 'Error');

Modified: Lobby/TASClient/PreferencesFormUnit.pas
===================================================================
--- Lobby/TASClient/PreferencesFormUnit.pas	2010-02-10 16:26:04 UTC (rev 7410)
+++ Lobby/TASClient/PreferencesFormUnit.pas	2010-02-10 19:38:41 UTC (rev 7411)
@@ -1311,7 +1311,8 @@
     4: Result := 1; // sort by state
     5: Result := 2; // sort by mod
     6: Result := 6; // sort by avg rank
-    7: Result := 3; // sort by players
+    8: Result := 3; // sort by players
+    7: Result := 8; // sort by length
   end; // case
 end;
 
@@ -1322,11 +1323,12 @@
     0: Result := -1; // no sorting
     1: Result := 4; // sort by state
     2: Result := 5; // sort by mod
-    3: Result := 7; // sort by players
+    3: Result := 8; // sort by players
     4: Result := 3; // sort by map
     5: Result := 2; // sort by host
     6: Result := 6; // sort by avg rank
     7: Result := 1; // sort by description
+    8: Result := 7; // sort by length
   end; // case
 end;
 

Modified: Lobby/TASClient/TASClient.dof
===================================================================
--- Lobby/TASClient/TASClient.dof	2010-02-10 16:26:04 UTC (rev 7410)
+++ Lobby/TASClient/TASClient.dof	2010-02-10 19:38:41 UTC (rev 7411)
@@ -113,9 +113,9 @@
 IncludeVerInfo=1
 AutoIncBuild=1
 MajorVer=0
-MinorVer=58
+MinorVer=62
 Release=0
-Build=782
+Build=787
 Debug=0
 PreRelease=0
 Special=0
@@ -126,7 +126,7 @@
 [Version Info Keys]
 CompanyName=
 FileDescription=Spring RTS Engine lobby client
-FileVersion=0.58.0.782
+FileVersion=0.62.0.787
 InternalName=
 LegalCopyright=
 LegalTrademarks=

Modified: Lobby/TASClient/TASClient.res
===================================================================
(Binary files differ)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002180.html">[Taspring-linux-commit] r7410 - Lobby/TASClient
</A></li>
	<LI>Next message: <A HREF="002182.html">[Taspring-linux-commit] r7412 - Lobby/TASClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2181">[ date ]</a>
              <a href="thread.html#2181">[ thread ]</a>
              <a href="subject.html#2181">[ subject ]</a>
              <a href="author.html#2181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
