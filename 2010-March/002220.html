<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r7450 - Lobby/TASClient
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2010-March/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7450%20-%20Lobby/TASClient&In-Reply-To=%3C20100329185644.DC9492B4FB%40it-l.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002219.html">
   <LINK REL="Next"  HREF="002221.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r7450 - Lobby/TASClient</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7450%20-%20Lobby/TASClient&In-Reply-To=%3C20100329185644.DC9492B4FB%40it-l.eu%3E"
       TITLE="[Taspring-linux-commit] r7450 - Lobby/TASClient">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Mon Mar 29 20:56:44 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002219.html">[Taspring-linux-commit] r7449 - Lobby/TASClient
</A></li>
        <LI>Next message: <A HREF="002221.html">[Taspring-linux-commit] r7451 - Lobby/TASClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2220">[ date ]</a>
              <a href="thread.html#2220">[ thread ]</a>
              <a href="subject.html#2220">[ subject ]</a>
              <a href="author.html#2220">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: satirik
Date: 2010-03-29 20:56:44 +0200 (Mon, 29 Mar 2010)
New Revision: 7450

Modified:
   Lobby/TASClient/AwayMessageFormUnit.dfm
   Lobby/TASClient/BattleFormUnit.dfm
   Lobby/TASClient/BattleFormUnit.pas
   Lobby/TASClient/MainUnit.dfm
   Lobby/TASClient/MainUnit.pas
   Lobby/TASClient/PreferencesFormUnit.pas
   Lobby/TASClient/PythonScriptDebugFormUnit.dfm
   Lobby/TASClient/ReplaysUnit.dfm
   Lobby/TASClient/ReplaysUnit.pas
   Lobby/TASClient/SpringSettingsProfileFormUnit.dfm
   Lobby/TASClient/UploadReplayUnit.dfm
Log:
* switch to latest sptbx part 11

Modified: Lobby/TASClient/AwayMessageFormUnit.dfm
===================================================================
--- Lobby/TASClient/AwayMessageFormUnit.dfm	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/AwayMessageFormUnit.dfm	2010-03-29 18:56:44 UTC (rev 7450)
@@ -4,7 +4,7 @@
   BorderStyle = bsDialog
   Caption = 'AwayMessageForm'
   ClientHeight = 198
-  ClientWidth = 356
+  ClientWidth = 452
   Color = clBtnFace
   Constraints.MaxHeight = 1000
   Constraints.MaxWidth = 1680
@@ -21,7 +21,7 @@
   object SpTBXTitleBar1: TSpTBXTitleBar
     Left = 0
     Top = 0
-    Width = 356
+    Width = 452
     Height = 198
     Caption = 'New away message ...'
     FixedSize = True
@@ -29,7 +29,7 @@
     object TitleEdit: TSpTBXEdit
       Left = 64
       Top = 40
-      Width = 281
+      Width = 377
       Height = 21
       TabOrder = 0
     end
@@ -48,18 +48,18 @@
       Caption = 'Message :'
     end
     object CancelButton: TSpTBXButton
-      Left = 256
+      Left = 320
       Top = 160
-      Width = 89
+      Width = 121
       Height = 25
       Caption = 'Cancel'
       TabOrder = 4
       OnClick = CancelButtonClick
     end
     object SaveAndUseButton: TSpTBXButton
-      Left = 160
+      Left = 192
       Top = 160
-      Width = 89
+      Width = 121
       Height = 25
       Caption = 'Save and Use'
       TabOrder = 3
@@ -68,7 +68,7 @@
     object UseButton: TSpTBXButton
       Left = 64
       Top = 160
-      Width = 89
+      Width = 121
       Height = 25
       Caption = 'Use'
       Font.Charset = DEFAULT_CHARSET
@@ -83,7 +83,7 @@
     object MessageRichEdit: TRichEdit
       Left = 64
       Top = 64
-      Width = 281
+      Width = 377
       Height = 89
       TabOrder = 1
     end

Modified: Lobby/TASClient/BattleFormUnit.dfm
===================================================================
--- Lobby/TASClient/BattleFormUnit.dfm	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/BattleFormUnit.dfm	2010-03-29 18:56:44 UTC (rev 7450)
@@ -4579,6 +4579,7 @@
           SelectedInOut = False
           PlainRTF = False
           UndoLimit = 0
+          AllowInPlace = False
         end
       end
     end

Modified: Lobby/TASClient/BattleFormUnit.pas
===================================================================
--- Lobby/TASClient/BattleFormUnit.pas	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/BattleFormUnit.pas	2010-03-29 18:56:44 UTC (rev 7450)
@@ -85,7 +85,7 @@
   private
 
   protected
-    Panel: TPanel;
+    Panel: TSpTBXPanel;
     CheckBox: TSpTBXCheckBox;
   public
     function GetComponent(AOwner: TWinControl;luaOptionList: TList):TWinControl;override;
@@ -102,7 +102,7 @@
   private
 
   protected
-    Panel: TPanel;
+    Panel: TSpTBXPanel;
     InputEdit: TSpTBXEdit;
   public
     MaxStringLength: Integer;
@@ -120,7 +120,7 @@
   private
 
   protected
-    Panel: TPanel;
+    Panel: TSpTBXPanel;
     InputEdit: TJvSpinEdit;
   public
     MinValue: Double;
@@ -140,7 +140,7 @@
 
   TLuaOptionList = class(TLuaOption)
   private
-    Panel: TPanel;
+    Panel: TSpTBXPanel;
     ComboBox: TSpTBXComboBox;
 
   public
@@ -4629,7 +4629,7 @@
       SkinManager.CurrentSkin.PaintBackground(Canvas,BgRect,skncListItem,itemState,True,True);
       Canvas.Brush.Style := Graphics.bsClear;
     end
-    else
+    else if (Node = FocusedNode) and focused then
     begin
       if (WhatToDraw = NormalClient) or (WhatToDraw = NormalBot) then
         Canvas.Brush.Color := clHighlight
@@ -4637,47 +4637,9 @@
         PaintInfo.Canvas.Brush.Color := $00ffdddd;
       Canvas.Font.Color := clHighlightText;
       Canvas.FillRect(CellRect);
-    end;
-
-
-    {if (Node = FocusedNode) and focused then
-    begin
-      if SkinManager.GetSkinType=sknSkin then
-      begin
-        Canvas.Font.Color := SkinManager.CurrentSkin.GetTextColor(skncListItem,sknsChecked);
-        SkinManager.CurrentSkin.PaintBackground(Canvas,BgRect,skncListItem,sknsChecked,True,True);
-        Canvas.Brush.Style := Graphics.bsClear;
-      end
-      else
-      begin
-        Canvas.Font.Color := clHighlightText;
-        Canvas.Brush.Color := clHighlight;
-        Canvas.FillRect(CellRect);
-      end;
     end
     else
-    begin
       Canvas.Font.Color := clWindowText;
-      if (WhatToDraw = NormalClient) or (WhatToDraw = NormalBot) then
-      begin
-        if hot then
-        begin
-          Canvas.Font.Color := SkinManager.CurrentSkin.GetTextColor(skncListItem,sknsHotTrack);
-          SkinManager.CurrentSkin.PaintBackground(Canvas,BgRect,skncListItem,sknsHotTrack,True,True);
-          Canvas.Brush.Style := Graphics.bsClear;
-        end
-        else
-        begin
-          PaintInfo.Canvas.Brush.Color := VDTBattleClients.Color;
-          PaintInfo.Canvas.FillRect(PaintInfo.CellRect);
-        end;
-      end
-      else
-      begin
-        PaintInfo.Canvas.Brush.Color := $00ffdddd;
-        PaintInfo.Canvas.FillRect(PaintInfo.CellRect);
-      end;
-    end;}
 
     R := ContentRect;
     InflateRect(R, -TextMargin, 0);
@@ -6367,9 +6329,9 @@
 
     AOwner.Height := AOwner.Height + 23;
 
-    Panel := TPanel.Create(AOwner);
+    Panel := TSpTBXPanel.Create(AOwner);
     Panel.Parent := AOwner;
-    Panel.BevelOuter := bvNone;
+    Panel.Borders := False;
     Panel.AutoSize := True;
     Panel.Height := 23;
 
@@ -6416,9 +6378,9 @@
 
     AOwner.Height := AOwner.Height + 20;
 
-    Panel := TPanel.Create(AOwner);
+    Panel := TSpTBXPanel.Create(AOwner);
     Panel.Parent := AOwner;
-    Panel.BevelOuter := bvNone;
+    Panel.Borders := False;
     Panel.AutoSize := True;
     Panel.Height := 23;
 
@@ -6483,9 +6445,9 @@
 
     AOwner.Height := AOwner.Height + 20;
 
-    Panel := TPanel.Create(AOwner);
+    Panel := TSpTBXPanel.Create(AOwner);
     Panel.Parent := AOwner;
-    Panel.BevelOuter := bvNone;
+    Panel.Borders := False;
     Panel.AutoSize := True;
     Panel.Height := 23;
 
@@ -6550,9 +6512,9 @@
 
     AOwner.Height := AOwner.Height + 23;
 
-    Panel := TPanel.Create(AOwner);
+    Panel := TSpTBXPanel.Create(AOwner);
     Panel.Parent := AOwner;
-    Panel.BevelOuter := bvNone;
+    Panel.Borders := False;
     Panel.AutoSize := True;
     Panel.Height := 23;
 

Modified: Lobby/TASClient/MainUnit.dfm
===================================================================
--- Lobby/TASClient/MainUnit.dfm	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/MainUnit.dfm	2010-03-29 18:56:44 UTC (rev 7450)
@@ -1,6 +1,6 @@
 object MainForm: TMainForm
-  Left = 905
-  Top = 115
+  Left = 465
+  Top = 140
   Width = 847
   Height = 521
   Caption = '.'
@@ -233,102 +233,12 @@
           TabOrder = 0
           Borders = False
           TBXStyleBackground = True
-          object PlayerFiltersPanel: TSpTBXPanel
-            Left = 0
-            Top = 28
-            Width = 212
-            Height = 22
-            Align = alTop
-            TabOrder = 0
-            Borders = False
-            DesignSize = (
-              212
-              22)
-            object SpTBXLabel4: TSpTBXLabel
-              Left = 0
-              Top = 0
-              Width = 212
-              Height = 13
-              Hint = 
-                'Simple filtering : separate keywords by a space. Regular express' +
-                'ion filtering : re=my_regular_expression'
-              Caption = 'Filter :'
-              Align = alTop
-              ParentShowHint = False
-              ShowHint = True
-            end
-            object PlayerFiltersTextbox: TSpTBXEdit
-              Left = 40
-              Top = 0
-              Width = 145
-              Height = 21
-              HelpType = htKeyword
-              Anchors = [akLeft, akTop, akRight]
-              ParentShowHint = False
-              ShowHint = False
-              TabOrder = 1
-              OnChange = PlayerFiltersTextboxChange
-            end
-            object ClearPlayersFilterButton: TSpTBXButton
-              Left = 182
-              Top = 0
-              Width = 22
-              Height = 21
-              Hint = 'Clear the filter'
-              Caption = 'X'
-              Anchors = [akTop, akRight]
-              Font.Charset = DEFAULT_CHARSET
-              Font.Color = clWindowText
-              Font.Height = -11
-              Font.Name = 'MS Sans Serif'
-              Font.Style = [fsBold]
-              ParentFont = False
-              ParentShowHint = False
-              ShowHint = True
-              TabOrder = 2
-              OnClick = ClearPlayersFilterButtonClick
-            end
-          end
-          object PlayersInfoPanel: TSpTBXPanel
-            Left = 0
-            Top = 0
-            Width = 212
-            Height = 28
-            Caption = 'PlayersInfoPanel'
-            Align = alTop
-            TabOrder = 1
-            Borders = False
-            BorderType = pbrFramed
-            object PlayersLabel: TSpTBXLabel
-              Left = 2
-              Top = 8
-              Width = 37
-              Height = 13
-              Caption = 'Players:'
-            end
-            object SortLabel: TSpTBXLabel
-              Left = 157
-              Top = 0
-              Width = 55
-              Height = 28
-              Cursor = crHandPoint
-              Caption = 'SortLabel'
-              Align = alRight
-              Font.Charset = DEFAULT_CHARSET
-              Font.Color = clBlue
-              Font.Height = -11
-              Font.Name = 'MS Sans Serif'
-              Font.Style = [fsBold, fsUnderline]
-              ParentFont = False
-              OnClick = SortLabelClick
-            end
-          end
           object ClientsListBox: TTntListBox
             Tag = -1
             Left = 0
-            Top = 50
+            Top = 57
             Width = 212
-            Height = 53
+            Height = 46
             Style = lbOwnerDrawFixed
             Align = alClient
             DragMode = dmAutomatic
@@ -341,7 +251,7 @@
             ParentFont = False
             ParentShowHint = False
             ShowHint = True
-            TabOrder = 2
+            TabOrder = 0
             OnClick = ClientsListBoxClick
             OnDblClick = ClientsListBoxDblClick
             OnDrawItem = ClientsListBoxDrawItem
@@ -351,6 +261,103 @@
             OnMouseMove = ClientsListBoxMouseMove
             OnMouseUp = ClientsListBoxMouseUp
           end
+          object ClientListOptionsPanel: TSpTBXPanel
+            Left = 0
+            Top = 0
+            Width = 212
+            Height = 57
+            Caption = 'ClientListOptionsPanel'
+            Align = alTop
+            TabOrder = 1
+            BorderType = pbrRaised
+            TBXStyleBackground = True
+            object PlayerFiltersPanel: TSpTBXPanel
+              Left = 2
+              Top = 30
+              Width = 208
+              Height = 22
+              Align = alTop
+              TabOrder = 0
+              Borders = False
+              DesignSize = (
+                208
+                22)
+              object SpTBXLabel4: TSpTBXLabel
+                Left = 2
+                Top = 0
+                Width = 28
+                Height = 13
+                Hint = 
+                  'Simple filtering : separate keywords by a space. Regular express' +
+                  'ion filtering : re=my_regular_expression'
+                Caption = 'Filter :'
+                ParentShowHint = False
+                ShowHint = True
+              end
+              object PlayerFiltersTextbox: TSpTBXEdit
+                Left = 40
+                Top = 0
+                Width = 145
+                Height = 21
+                HelpType = htKeyword
+                Anchors = [akLeft, akTop, akRight]
+                ParentShowHint = False
+                ShowHint = False
+                TabOrder = 1
+                OnChange = PlayerFiltersTextboxChange
+              end
+              object ClearPlayersFilterButton: TSpTBXButton
+                Left = 187
+                Top = 0
+                Width = 21
+                Height = 20
+                Hint = 'Clear the filter'
+                Caption = 'X'
+                Anchors = [akTop, akRight]
+                Font.Charset = DEFAULT_CHARSET
+                Font.Color = clWindowText
+                Font.Height = -11
+                Font.Name = 'MS Sans Serif'
+                Font.Style = [fsBold]
+                ParentFont = False
+                ParentShowHint = False
+                ShowHint = True
+                TabOrder = 2
+                OnClick = ClearPlayersFilterButtonClick
+              end
+            end
+            object PlayersInfoPanel: TSpTBXPanel
+              Left = 2
+              Top = 2
+              Width = 208
+              Height = 28
+              Caption = 'PlayersInfoPanel'
+              Align = alTop
+              TabOrder = 1
+              Borders = False
+              BorderType = pbrFramed
+              DesignSize = (
+                208
+                28)
+              object PlayersLabel: TSpTBXLabel
+                Left = 2
+                Top = 8
+                Width = 37
+                Height = 13
+                Caption = 'Players:'
+              end
+              object SortLabel: TSpTBXButton
+                Left = 95
+                Top = 4
+                Width = 113
+                Height = 20
+                Caption = 'SortLabel'
+                Anchors = [akLeft, akTop, akRight]
+                TabOrder = 1
+                DropDownMenu = SortPopupMenu
+              end
+            end
+          end
         end
         object BattlesPanel: TSpTBXPanel
           Left = 0
@@ -903,45 +910,22 @@
                     TabOrder = 10
                     OnClick = PlayersSignButtonClick
                   end
-                  object PlayersValueTextBox: TJvSpinEdit
-                    Left = 368
-                    Top = 8
-                    Width = 41
-                    Height = 20
-                    ButtonKind = bkStandard
-                    MaxValue = 250.000000000000000000
-                    Value = 10.000000000000000000
-                    TabOrder = 11
-                    OnChange = PlayersValueTextBoxChange
-                  end
                   object MaxPlayersSignButton: TSpTBXButton
                     Left = 344
                     Top = 55
                     Width = 25
                     Height = 20
                     Caption = '&lt;'
-                    TabOrder = 12
+                    TabOrder = 11
                     OnClick = MaxPlayersSignButtonClick
                   end
-                  object MaxPlayersValueTextBox: TJvSpinEdit
-                    Left = 368
-                    Top = 55
-                    Width = 41
-                    Height = 20
-                    ButtonKind = bkStandard
-                    MaxValue = 250.000000000000000000
-                    MinValue = 1.000000000000000000
-                    Value = 10.000000000000000000
-                    TabOrder = 13
-                    OnChange = MaxPlayersValueTextBoxChange
-                  end
                   object MaxPlayersFilter: TSpTBXCheckBox
                     Left = 248
                     Top = 56
                     Width = 78
                     Height = 15
                     Caption = 'Max Players '
-                    TabOrder = 14
+                    TabOrder = 12
                     OnClick = MaxPlayersFilterClick
                   end
                   object PlayersFilter: TSpTBXCheckBox
@@ -950,7 +934,7 @@
                     Width = 55
                     Height = 15
                     Caption = 'Players '
-                    TabOrder = 15
+                    TabOrder = 13
                     OnClick = PlayersFilterClick
                   end
                   object Players2Filter: TSpTBXCheckBox
@@ -959,7 +943,7 @@
                     Width = 55
                     Height = 15
                     Caption = 'Players '
-                    TabOrder = 16
+                    TabOrder = 14
                     OnClick = Players2FilterClick
                   end
                   object Players2SignButton: TSpTBXButton
@@ -968,27 +952,16 @@
                     Width = 25
                     Height = 20
                     Caption = '&lt;'
-                    TabOrder = 17
+                    TabOrder = 15
                     OnClick = Players2SignButtonClick
                   end
-                  object Players2ValueTextBox: TJvSpinEdit
-                    Left = 368
-                    Top = 32
-                    Width = 41
-                    Height = 20
-                    ButtonKind = bkStandard
-                    MaxValue = 250.000000000000000000
-                    Value = 10.000000000000000000
-                    TabOrder = 18
-                    OnChange = Players2ValueTextBoxChange
-                  end
                   object RankFilter: TSpTBXCheckBox
                     Left = 248
                     Top = 80
                     Width = 66
                     Height = 15
                     Caption = 'Avg Rank'
-                    TabOrder = 19
+                    TabOrder = 16
                     OnClick = RankFilterClick
                   end
                   object RankSignButton: TSpTBXButton
@@ -997,20 +970,71 @@
                     Width = 25
                     Height = 20
                     Caption = '&lt;'
-                    TabOrder = 20
+                    TabOrder = 17
                     OnClick = RankSignButtonClick
                   end
-                  object RankValueTextBox: TJvSpinEdit
-                    Left = 368
-                    Top = 79
+                  object PlayersValueTextBox: TSpTBXSpinEdit
+                    Left = 372
+                    Top = 8
                     Width = 41
-                    Height = 20
-                    ButtonKind = bkStandard
-                    MaxValue = 9.000000000000000000
-                    MinValue = 1.000000000000000000
-                    Value = 5.000000000000000000
+                    Height = 21
+                    TabOrder = 18
+                    OnChange = PlayersValueTextBoxChange
+                    SpinButton.Left = 23
+                    SpinButton.Top = 0
+                    SpinButton.Width = 14
+                    SpinButton.Height = 17
+                    SpinButton.Align = alRight
+                    SpinOptions.MaxValue = 250.000000000000000000
+                    OnValueChanged = PlayersValueTextBoxChange
+                  end
+                  object Players2ValueTextBox: TSpTBXSpinEdit
+                    Left = 372
+                    Top = 32
+                    Width = 41
+                    Height = 21
+                    TabOrder = 19
+                    OnChange = Players2ValueTextBoxChange
+                    SpinButton.Left = 23
+                    SpinButton.Top = 0
+                    SpinButton.Width = 14
+                    SpinButton.Height = 17
+                    SpinButton.Align = alRight
+                    SpinOptions.MaxValue = 250.000000000000000000
+                    OnValueChanged = Players2ValueTextBoxChange
+                  end
+                  object MaxPlayersValueTextBox: TSpTBXSpinEdit
+                    Left = 372
+                    Top = 56
+                    Width = 41
+                    Height = 21
+                    TabOrder = 20
+                    OnChange = MaxPlayersValueTextBoxChange
+                    SpinButton.Left = 23
+                    SpinButton.Top = 0
+                    SpinButton.Width = 14
+                    SpinButton.Height = 17
+                    SpinButton.Align = alRight
+                    SpinOptions.MaxValue = 250.000000000000000000
+                    SpinOptions.MinValue = 1.000000000000000000
+                    SpinOptions.Value = 1.000000000000000000
+                    OnValueChanged = MaxPlayersValueTextBoxChange
+                  end
+                  object RankValueTextBox: TSpTBXSpinEdit
+                    Left = 372
+                    Top = 80
+                    Width = 41
+                    Height = 21
                     TabOrder = 21
                     OnChange = RankValueTextBoxChange
+                    SpinButton.Left = 23
+                    SpinButton.Top = 0
+                    SpinButton.Width = 14
+                    SpinButton.Height = 17
+                    SpinButton.Align = alRight
+                    SpinOptions.MaxValue = 9.000000000000000000
+                    SpinOptions.MinValue = 1.000000000000000000
+                    OnValueChanged = RankValueTextBoxChange
                   end
                 end
               end
@@ -1197,7 +1221,7 @@
     Left = 176
     Top = 288
     Bitmap = {
-      494C010104000900040010001000FFFFFFFFFF00FFFFFFFFFFFFFFFF424D3600
+      494C010104000900040010001000FFFFFFFFFF10FFFFFFFFFFFFFFFF424D3600
       0000000000003600000028000000400000003000000001002000000000000030
       0000000000000000000000000000000000000000000000000000000000000000
       0000000000000000000000000000000000000000000000000000000000000000
@@ -1597,7 +1621,8 @@
       0000000000008001000000000000000000000000000000000000000000000000
       0000000000000000000000000000000000000000000000000000000000000000
       0000000000000000000000000000000000000000000000000000000000008001
-      000000000000C003000000000000E007}
+      000000000000C003000000000000E00700000000000000000000000000000000
+      000000000000}
   end
   object PlayerStateImageList: TImageList
     Left = 209
@@ -6449,8 +6474,8 @@
   end
   object SearchPlayerFormPopupMenu: TSpTBXFormPopupMenu
     OnPopup = SearchPlayerFormPopupMenuPopup
-    Left = 660
-    Top = 126
+    Left = 700
+    Top = 158
   end
   object HttpCli3: THttpCli
     LocalAddr = '0.0.0.0'
@@ -6617,8 +6642,8 @@
   end
   object SortPopupMenu: TSpTBXPopupMenu
     AutoHotkeys = maManual
-    Left = 736
-    Top = 116
+    Left = 728
+    Top = 164
     object Nosorting1: TSpTBXItem
       Caption = 'Don'#39't sort'
       AutoCheck = True

Modified: Lobby/TASClient/MainUnit.pas
===================================================================
--- Lobby/TASClient/MainUnit.pas	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/MainUnit.pas	2010-03-29 18:56:44 UTC (rev 7450)
@@ -1152,12 +1152,6 @@
     SpTBXItem5: TSpTBXItem;
     MainDockPanel: TDockPanel;
     PlayerListPanel: TSpTBXPanel;
-    PlayerFiltersPanel: TSpTBXPanel;
-    SpTBXLabel4: TSpTBXLabel;
-    PlayerFiltersTextbox: TSpTBXEdit;
-    ClearPlayersFilterButton: TSpTBXButton;
-    PlayersInfoPanel: TSpTBXPanel;
-    PlayersLabel: TSpTBXLabel;
     ClientsListBox: TTntListBox;
     BattlesPanel: TSpTBXPanel;
     QuickJoinPanel: TSpTBXPanel;
@@ -1198,9 +1192,7 @@
     MapsNotAvailableFilter: TSpTBXCheckBox;
     NatTraversalFilter: TSpTBXCheckBox;
     PlayersSignButton: TSpTBXButton;
-    PlayersValueTextBox: TJvSpinEdit;
     MaxPlayersSignButton: TSpTBXButton;
-    MaxPlayersValueTextBox: TJvSpinEdit;
     MaxPlayersFilter: TSpTBXCheckBox;
     PlayersFilter: TSpTBXCheckBox;
     FiltersButton: TSpTBXButton;
@@ -1213,7 +1205,6 @@
     mnuResetView: TSpTBXItem;
     mnuReloadViewLogin: TSpTBXItem;
     SpTBXItem6: TSpTBXItem;
-    SortLabel: TSpTBXLabel;
     SortPopupMenu: TSpTBXPopupMenu;
     Sortbygroup1: TSpTBXItem;
     Sortbycountry1: TSpTBXItem;
@@ -1231,17 +1222,27 @@
     SpTBXSeparatorItem27: TSpTBXSeparatorItem;
     Players2Filter: TSpTBXCheckBox;
     Players2SignButton: TSpTBXButton;
-    Players2ValueTextBox: TJvSpinEdit;
     SubMenuAutoplayFirstAvailable: TSpTBXSubmenuItem;
     SubMenuAutospecFirstAvailable: TSpTBXSubmenuItem;
     SubMenuPlaynow: TSpTBXSubmenuItem;
     SubMenuSpecnow: TSpTBXSubmenuItem;
     RankFilter: TSpTBXCheckBox;
     RankSignButton: TSpTBXButton;
-    RankValueTextBox: TJvSpinEdit;
     mnuRename: TSpTBXItem;
     ConnectButton: TSpTBXSpeedButton;
     AwayMsgsButton: TSpTBXButton;
+    PlayersValueTextBox: TSpTBXSpinEdit;
+    Players2ValueTextBox: TSpTBXSpinEdit;
+    MaxPlayersValueTextBox: TSpTBXSpinEdit;
+    RankValueTextBox: TSpTBXSpinEdit;
+    ClientListOptionsPanel: TSpTBXPanel;
+    PlayerFiltersPanel: TSpTBXPanel;
+    SpTBXLabel4: TSpTBXLabel;
+    PlayerFiltersTextbox: TSpTBXEdit;
+    ClearPlayersFilterButton: TSpTBXButton;
+    PlayersInfoPanel: TSpTBXPanel;
+    PlayersLabel: TSpTBXLabel;
+    SortLabel: TSpTBXButton;
     procedure mnuOpenPrivateChatClick(Sender: TObject);
     procedure mnuSelectBattleClick(Sender: TObject);
     procedure mnuPlayWithClick(Sender: TObject);
@@ -9043,12 +9044,14 @@
         CheckImages.Draw(Canvas,3,0,checkImgIdx);
       Canvas.Brush.Style := Graphics.bsClear;
     end
-    else
+    else if (Node = FocusedNode) and focused then
     begin
       Canvas.Font.Color := clHighlightText;
       Canvas.Brush.Color := clHighlight;
       Canvas.FillRect(CellRect);
-    end;
+    end
+    else
+      Canvas.Font.Color := clWindowText;
 
     InflateRect(R, TextMargin, 0);
     if Column = 0 then
@@ -11082,14 +11085,14 @@
 procedure TMainForm.PlayersValueTextBoxChange(Sender: TObject);
 begin
   if not PlayersValueTextBox.Focused then Exit;
-  CurrentFilters.Players.value := PlayersValueTextBox.AsInteger;
+  CurrentFilters.Players.value := PlayersValueTextBox.SpinOptions.ValueAsInteger;
   FiltersUpdated;
 end;
 
 procedure TMainForm.MaxPlayersValueTextBoxChange(Sender: TObject);
 begin
   if not MaxPlayersValueTextBox.Focused then Exit;
-  CurrentFilters.MaxPlayers.value := MaxPlayersValueTextBox.AsInteger;
+  CurrentFilters.MaxPlayers.value := MaxPlayersValueTextBox.SpinOptions.ValueAsInteger;
   FiltersUpdated;
 end;
 
@@ -13382,7 +13385,7 @@
 procedure TMainForm.Players2ValueTextBoxChange(Sender: TObject);
 begin
   if not Players2ValueTextBox.Focused then Exit;
-  CurrentFilters.Players2.value := Players2ValueTextBox.AsInteger;
+  CurrentFilters.Players2.value := Players2ValueTextBox.SpinOptions.ValueAsInteger;
   FiltersUpdated;
 end;
 
@@ -13562,7 +13565,7 @@
 procedure TMainForm.RankValueTextBoxChange(Sender: TObject);
 begin
   if not RankValueTextBox.Focused then Exit;
-  CurrentFilters.AvgRank.value := RankValueTextBox.AsInteger;
+  CurrentFilters.AvgRank.value := RankValueTextBox.SpinOptions.ValueAsInteger;
   FiltersUpdated;
 end;
 

Modified: Lobby/TASClient/PreferencesFormUnit.pas
===================================================================
--- Lobby/TASClient/PreferencesFormUnit.pas	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/PreferencesFormUnit.pas	2010-03-29 18:56:44 UTC (rev 7450)
@@ -878,6 +878,10 @@
     Colors.Normal := IfNotClNone(SkinManager.CurrentSkin.GetTextColor(skncEditFrame,sknsNormal),Colors.Normal);
     MainForm.ClientsListBox.Color := IfNotClNone(SkinManager.CurrentSkin.Options(skncListItem).Body.Color1,clWindow);
     MainForm.ClientsListBox.BorderStyle := Forms.bsNone;
+    ReplaysForm.CommentsRichEdit.Color := IfNotClNone(SkinManager.CurrentSkin.Options(skncEditFrame).Body.Color1,clWindow);
+    ReplaysForm.CommentsRichEdit.Font.Color := IfNotClNone(SkinManager.CurrentSkin.GetTextColor(skncEditFrame,sknsNormal),clWindow);
+    ReplaysForm.ScriptRichEdit.Color := IfNotClNone(SkinManager.CurrentSkin.Options(skncEditFrame).Body.Color1,clWindow);
+    ReplaysForm.ScriptRichEdit.Font.Color := IfNotClNone(SkinManager.CurrentSkin.GetTextColor(skncEditFrame,sknsNormal),clWindow);
   end
   else
   begin
@@ -886,6 +890,10 @@
     Colors.Normal := clWindowText;
     MainForm.ClientsListBox.Color := clWindow;
     MainForm.ClientsListBox.BorderStyle := Forms.bsSingle;
+    ReplaysForm.CommentsRichEdit.Color := clWindow;
+    ReplaysForm.CommentsRichEdit.Font.Color := clWindowText;
+    ReplaysForm.ScriptRichEdit.Color := clWindow;
+    ReplaysForm.ScriptRichEdit.Font.Color := clWindowText;
   end;
   BattleForm.MapOptionsScrollBox.Color :=  BattleForm.QuickLookRichEdit.Color;
   BattleForm.ModOptionsScrollBox.Color :=  BattleForm.QuickLookRichEdit.Color;

Modified: Lobby/TASClient/PythonScriptDebugFormUnit.dfm
===================================================================
--- Lobby/TASClient/PythonScriptDebugFormUnit.dfm	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/PythonScriptDebugFormUnit.dfm	2010-03-29 18:56:44 UTC (rev 7450)
@@ -1,8 +1,8 @@
 object PythonScriptDebugForm: TPythonScriptDebugForm
   Left = 450
   Top = 117
-  Width = 577
-  Height = 287
+  Width = 693
+  Height = 284
   Caption = 'PythonScriptDebug'
   Color = clBtnFace
   Font.Charset = DEFAULT_CHARSET
@@ -18,8 +18,8 @@
   object Output: TMemo
     Left = 0
     Top = 25
-    Width = 569
-    Height = 235
+    Width = 685
+    Height = 232
     Align = alClient
     Font.Charset = DEFAULT_CHARSET
     Font.Color = clWindowText
@@ -34,7 +34,7 @@
   object Panel1: TPanel
     Left = 0
     Top = 0
-    Width = 569
+    Width = 685
     Height = 25
     Align = alTop
     BevelOuter = bvNone
@@ -42,25 +42,25 @@
     object btClear: TButton
       Left = 0
       Top = 0
-      Width = 90
+      Width = 113
       Height = 25
       Caption = 'Clear'
       TabOrder = 0
       OnClick = btClearClick
     end
     object btReloadScripts: TButton
-      Left = 96
+      Left = 112
       Top = 0
-      Width = 90
+      Width = 113
       Height = 25
       Caption = 'Reload'
       TabOrder = 1
       OnClick = btReloadScriptsClick
     end
     object btLoadNewScripts: TButton
-      Left = 192
+      Left = 224
       Top = 0
-      Width = 90
+      Width = 137
       Height = 25
       Caption = 'Load new scripts'
       TabOrder = 2

Modified: Lobby/TASClient/ReplaysUnit.dfm
===================================================================
--- Lobby/TASClient/ReplaysUnit.dfm	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/ReplaysUnit.dfm	2010-03-29 18:56:44 UTC (rev 7450)
@@ -1,6 +1,6 @@
 object ReplaysForm: TReplaysForm
-  Left = 365
-  Top = 139
+  Left = 1007
+  Top = 183
   Width = 860
   Height = 631
   Caption = 'Replays'
@@ -146,21 +146,121 @@
         Width = 678
         Height = 209
         Anchors = [akLeft, akTop, akRight, akBottom]
-        ActiveTabIndex = 0
+        ActiveTabIndex = 2
         HiddenItems = &lt;&gt;
         object PlayersTab: TSpTBXTabItem
           Caption = 'Players'
-          Checked = True
         end
         object SpTBXTabItem3: TSpTBXTabItem
           Caption = 'Game settings'
         end
         object CommentsTab: TSpTBXTabItem
           Caption = 'Comments'
+          Checked = True
         end
         object SpTBXTabItem1: TSpTBXTabItem
           Caption = 'Script'
         end
+        object SpTBXTabSheet1: TSpTBXTabSheet
+          Left = 0
+          Top = 23
+          Width = 678
+          Height = 186
+          Caption = 'Script'
+          ImageIndex = -1
+          TabItem = 'SpTBXTabItem1'
+          object ScriptRichEdit: TRichEdit
+            Left = 2
+            Top = 0
+            Width = 674
+            Height = 184
+            Align = alClient
+            ReadOnly = True
+            ScrollBars = ssBoth
+            TabOrder = 0
+            WordWrap = False
+          end
+        end
+        object SpTBXTabSheet3: TSpTBXTabSheet
+          Left = 0
+          Top = 23
+          Width = 678
+          Height = 186
+          Caption = 'Players'
+          ImageIndex = -1
+          TabItem = 'PlayersTab'
+          object VDTPlayers: TVirtualDrawTree
+            Left = 2
+            Top = 0
+            Width = 674
+            Height = 184
+            Align = alClient
+            Header.AutoSizeIndex = 7
+            Header.DefaultHeight = 17
+            Header.Font.Charset = DEFAULT_CHARSET
+            Header.Font.Color = clWindowText
+            Header.Font.Height = -11
+            Header.Font.Name = 'MS Sans Serif'
+            Header.Font.Style = []
+            Header.Options = [hoAutoResize, hoColumnResize, hoDrag, hoHotTrack, hoOwnerDraw, hoShowHint, hoShowSortGlyphs, hoVisible]
+            Header.SortColumn = 2
+            Header.Style = hsFlatButtons
+            ParentShowHint = False
+            ShowHint = True
+            TabOrder = 0
+            TreeOptions.AutoOptions = [toAutoDropExpand, toAutoScrollOnExpand, toAutoSort, toAutoTristateTracking, toAutoDeleteMovedNodes]
+            TreeOptions.MiscOptions = [toAcceptOLEDrop, toCheckSupport, toFullRepaintOnResize, toInitOnSave, toToggleOnDblClick, toWheelPanning]
+            TreeOptions.PaintOptions = [toShowButtons, toShowDropmark, toThemeAware, toUseBlendedImages]
+            TreeOptions.SelectionOptions = [toFullRowSelect]
+            OnCompareNodes = VDTPlayersCompareNodes
+            OnDrawNode = VDTPlayersDrawNode
+            OnHeaderClick = VDTPlayersHeaderClick
+            OnHeaderDraw = VDTPlayersHeaderDraw
+            Columns = &lt;
+              item
+                Position = 0
+                Width = 200
+                WideText = 'Player'
+              end
+              item
+                Position = 1
+                WideText = 'Id'
+              end
+              item
+                Position = 2
+                Width = 60
+                WideText = 'Team'
+              end
+              item
+                Position = 3
+                Width = 60
+                WideText = 'MP/M'
+                WideHint = 'Mouse movement in pixel per minute'
+              end
+              item
+                Position = 4
+                WideText = 'MC/M'
+                WideHint = 'Mouse clicks per minute'
+              end
+              item
+                Position = 5
+                WideText = 'KP/M'
+                WideHint = 'Keyboard presses per minute'
+              end
+              item
+                Position = 6
+                Width = 60
+                WideText = 'Cmds/M'
+                WideHint = 'Commands per minute'
+              end
+              item
+                Position = 7
+                Width = 140
+                WideText = 'ACS'
+                WideHint = 'Averange commands size (units affected per command)'
+              end&gt;
+          end
+        end
         object SpTBXTabSheet4: TSpTBXTabSheet
           Left = 0
           Top = 23
@@ -328,106 +428,6 @@
             OnChange = CommentsRichEditChange
           end
         end
-        object SpTBXTabSheet1: TSpTBXTabSheet
-          Left = 0
-          Top = 23
-          Width = 678
-          Height = 186
-          Caption = 'Script'
-          ImageIndex = -1
-          TabItem = 'SpTBXTabItem1'
-          object ScriptRichEdit: TRichEdit
-            Left = 2
-            Top = 0
-            Width = 674
-            Height = 184
-            Align = alClient
-            ReadOnly = True
-            ScrollBars = ssBoth
-            TabOrder = 0
-            WordWrap = False
-          end
-        end
-        object SpTBXTabSheet3: TSpTBXTabSheet
-          Left = 0
-          Top = 23
-          Width = 678
-          Height = 186
-          Caption = 'Players'
-          ImageIndex = -1
-          TabItem = 'PlayersTab'
-          object VDTPlayers: TVirtualDrawTree
-            Left = 2
-            Top = 0
-            Width = 674
-            Height = 184
-            Align = alClient
-            Header.AutoSizeIndex = 7
-            Header.DefaultHeight = 17
-            Header.Font.Charset = DEFAULT_CHARSET
-            Header.Font.Color = clWindowText
-            Header.Font.Height = -11
-            Header.Font.Name = 'MS Sans Serif'
-            Header.Font.Style = []
-            Header.Options = [hoAutoResize, hoColumnResize, hoDrag, hoHotTrack, hoOwnerDraw, hoShowHint, hoShowSortGlyphs, hoVisible]
-            Header.SortColumn = 2
-            Header.Style = hsFlatButtons
-            ParentShowHint = False
-            ShowHint = True
-            TabOrder = 0
-            TreeOptions.AutoOptions = [toAutoDropExpand, toAutoScrollOnExpand, toAutoSort, toAutoTristateTracking, toAutoDeleteMovedNodes]
-            TreeOptions.MiscOptions = [toAcceptOLEDrop, toCheckSupport, toFullRepaintOnResize, toInitOnSave, toToggleOnDblClick, toWheelPanning]
-            TreeOptions.PaintOptions = [toShowButtons, toShowDropmark, toThemeAware, toUseBlendedImages]
-            TreeOptions.SelectionOptions = [toFullRowSelect]
-            OnCompareNodes = VDTPlayersCompareNodes
-            OnDrawNode = VDTPlayersDrawNode
-            OnHeaderClick = VDTPlayersHeaderClick
-            OnHeaderDraw = VDTPlayersHeaderDraw
-            Columns = &lt;
-              item
-                Position = 0
-                Width = 200
-                WideText = 'Player'
-              end
-              item
-                Position = 1
-                WideText = 'Id'
-              end
-              item
-                Position = 2
-                Width = 60
-                WideText = 'Team'
-              end
-              item
-                Position = 3
-                Width = 60
-                WideText = 'MP/M'
-                WideHint = 'Mouse movement in pixel per minute'
-              end
-              item
-                Position = 4
-                WideText = 'MC/M'
-                WideHint = 'Mouse clicks per minute'
-              end
-              item
-                Position = 5
-                WideText = 'KP/M'
-                WideHint = 'Keyboard presses per minute'
-              end
-              item
-                Position = 6
-                Width = 60
-                WideText = 'Cmds/M'
-                WideHint = 'Commands per minute'
-              end
-              item
-                Position = 7
-                Width = 140
-                WideText = 'ACS'
-                WideHint = 'Averange commands size (units affected per command)'
-              end&gt;
-          end
-        end
       end
       object WatchButton: TSpTBXButton
         Left = 595
@@ -654,7 +654,7 @@
           object PresetListbox: TSpTBXListBox
             Left = 152
             Top = 26
-            Width = 725
+            Width = 681
             Height = 167
             Anchors = [akLeft, akTop, akRight]
             ItemHeight = 16
@@ -839,46 +839,13 @@
               TabOrder = 5
               OnClick = btFilterMetalClick
             end
-            object speFilterMetal: TJvSpinEdit
-              Left = 136
-              Top = 8
-              Width = 57
-              Height = 20
-              ButtonKind = bkStandard
-              MaxValue = 10000.000000000000000000
-              Value = 5000.000000000000000000
-              TabOrder = 6
-              OnChange = speFilterMetalChange
-            end
-            object speFilterEnergy: TJvSpinEdit
-              Left = 136
-              Top = 32
-              Width = 57
-              Height = 20
-              ButtonKind = bkStandard
-              MaxValue = 10000.000000000000000000
-              Value = 5000.000000000000000000
-              TabOrder = 7
-              OnChange = speFilterEnergyChange
-            end
-            object speFilterUnits: TJvSpinEdit
-              Left = 136
-              Top = 56
-              Width = 57
-              Height = 20
-              ButtonKind = bkStandard
-              MaxValue = 10000.000000000000000000
-              Value = 3000.000000000000000000
-              TabOrder = 8
-              OnChange = speFilterUnitsChange
-            end
             object chkFilterPlayers: TSpTBXCheckBox
               Left = 8
               Top = 82
               Width = 52
               Height = 15
               Caption = 'Players'
-              TabOrder = 9
+              TabOrder = 6
               OnClick = chkFilterPlayersClick
             end
             object btFilterPlayers: TSpTBXButton
@@ -887,28 +854,16 @@
               Width = 17
               Height = 20
               Caption = '&gt;'
-              TabOrder = 10
+              TabOrder = 7
               OnClick = btFilterPlayersClick
             end
-            object speFilterPlayers: TJvSpinEdit
-              Left = 136
-              Top = 80
-              Width = 57
-              Height = 20
-              ButtonKind = bkStandard
-              MaxValue = 16.000000000000000000
-              MinValue = 1.000000000000000000
-              Value = 16.000000000000000000
-              TabOrder = 11
-              OnChange = speFilterPlayersChange
-            end
             object chkFilterLength: TSpTBXCheckBox
               Left = 8
               Top = 106
               Width = 76
               Height = 15
               Caption = 'Length (min)'
-              TabOrder = 12
+              TabOrder = 8
               OnClick = chkFilterLengthClick
             end
             object btFilterLength: TSpTBXButton
@@ -917,38 +872,16 @@
               Width = 17
               Height = 20
               Caption = '&gt;'
-              TabOrder = 13
+              TabOrder = 9
               OnClick = btFilterLengthClick
             end
-            object speFilterLength: TJvSpinEdit
-              Left = 136
-              Top = 104
-              Width = 57
-              Height = 20
-              ButtonKind = bkStandard
-              MaxValue = 1440.000000000000000000
-              Value = 1440.000000000000000000
-              TabOrder = 14
-              OnChange = speFilterLengthChange
-            end
-            object speFilterFileSize: TJvSpinEdit
-              Left = 136
-              Top = 128
-              Width = 57
-              Height = 20
-              ButtonKind = bkStandard
-              MaxValue = 10000.000000000000000000
-              Value = 3000.000000000000000000
-              TabOrder = 15
-              OnChange = speFilterFileSizeChange
-            end
             object btFilterFileSize: TSpTBXButton
               Left = 120
               Top = 128
               Width = 17
               Height = 20
               Caption = '&gt;'
-              TabOrder = 16
+              TabOrder = 10
               OnClick = btFilterFileSizeClick
             end
             object chkFilterFileSize: TSpTBXCheckBox
@@ -957,7 +890,7 @@
               Width = 77
               Height = 15
               Caption = 'File size (kB)'
-              TabOrder = 17
+              TabOrder = 11
               OnClick = chkFilterFileSizeClick
             end
             object chkFilterGrade: TSpTBXCheckBox
@@ -966,7 +899,7 @@
               Width = 47
               Height = 15
               Caption = 'Grade'
-              TabOrder = 18
+              TabOrder = 12
               OnClick = chkFilterGradeClick
             end
             object btFilterGrade: TSpTBXButton
@@ -975,20 +908,120 @@
               Width = 17
               Height = 20
               Caption = '&gt;'
-              TabOrder = 19
+              TabOrder = 13
               OnClick = btFilterGradeClick
             end
-            object speFilterGrade: TJvSpinEdit
-              Left = 136
+            object speFilterMetal: TSpTBXSpinEdit
+              Left = 140
+              Top = 8
+              Width = 57
+              Height = 21
+              TabOrder = 14
+              OnChange = speFilterMetalChange
+              SpinButton.Left = 39
+              SpinButton.Top = 0
+              SpinButton.Width = 14
+              SpinButton.Height = 17
+              SpinButton.Align = alRight
+              SpinOptions.MaxValue = 10000.000000000000000000
+              SpinOptions.Value = 5000.000000000000000000
+              OnValueChanged = speFilterMetalChange
+            end
+            object speFilterEnergy: TSpTBXSpinEdit
+              Left = 140
+              Top = 32
+              Width = 57
+              Height = 21
+              TabOrder = 15
+              OnChange = speFilterEnergyChange
+              SpinButton.Left = 39
+              SpinButton.Top = 0
+              SpinButton.Width = 14
+              SpinButton.Height = 17
+              SpinButton.Align = alRight
+              SpinOptions.MaxValue = 10000.000000000000000000
+              SpinOptions.Value = 5000.000000000000000000
+              OnValueChanged = speFilterEnergyChange
+            end
+            object speFilterUnits: TSpTBXSpinEdit
+              Left = 140
+              Top = 56
+              Width = 57
+              Height = 21
+              TabOrder = 16
+              OnChange = speFilterUnitsChange
+              SpinButton.Left = 39
+              SpinButton.Top = 0
+              SpinButton.Width = 14
+              SpinButton.Height = 17
+              SpinButton.Align = alRight
+              SpinOptions.MaxValue = 10000.000000000000000000
+              SpinOptions.Value = 3000.000000000000000000
+              OnValueChanged = speFilterUnitsChange
+            end
+            object speFilterPlayers: TSpTBXSpinEdit
+              Left = 140
+              Top = 80
+              Width = 57
+              Height = 21
+              TabOrder = 17
+              OnChange = speFilterPlayersChange
+              SpinButton.Left = 39
+              SpinButton.Top = 0
+              SpinButton.Width = 14
+              SpinButton.Height = 17
+              SpinButton.Align = alRight
+              SpinOptions.MaxValue = 200.000000000000000000
+              SpinOptions.Value = 16.000000000000000000
+              OnValueChanged = speFilterPlayersChange
+            end
+            object speFilterLength: TSpTBXSpinEdit
+              Left = 140
+              Top = 104
+              Width = 57
+              Height = 21
+              TabOrder = 18
+              OnChange = speFilterLengthChange
+              SpinButton.Left = 39
+              SpinButton.Top = 0
+              SpinButton.Width = 14
+              SpinButton.Height = 17
+              SpinButton.Align = alRight
+              SpinOptions.MaxValue = 1440.000000000000000000
+              SpinOptions.Value = 20.000000000000000000
+              OnValueChanged = speFilterLengthChange
+            end
+            object speFilterFileSize: TSpTBXSpinEdit
+              Left = 140
+              Top = 128
+              Width = 57
+              Height = 21
+              TabOrder = 19
+              OnChange = speFilterFileSizeChange
+              SpinButton.Left = 39
+              SpinButton.Top = 0
+              SpinButton.Width = 14
+              SpinButton.Height = 17
+              SpinButton.Align = alRight
+              SpinOptions.MaxValue = 10000.000000000000000000
+              SpinOptions.Value = 1500.000000000000000000
+              OnValueChanged = speFilterFileSizeChange
+            end
+            object speFilterGrade: TSpTBXSpinEdit
+              Left = 140
               Top = 152
               Width = 57
-              Height = 20
-              ButtonKind = bkStandard
-              MaxValue = 10.000000000000000000
-              MinValue = 1.000000000000000000
-              Value = 10.000000000000000000
+              Height = 21
               TabOrder = 20
               OnChange = speFilterGradeChange
+              SpinButton.Left = 39
+              SpinButton.Top = 0
+              SpinButton.Width = 14
+              SpinButton.Height = 17
+              SpinButton.Align = alRight
+              SpinOptions.MaxValue = 10.000000000000000000
+              SpinOptions.Value = 5.000000000000000000
+              OnValueChanged = speFilterGradeChange
             end
           end
           object SpTBXGroupBox3: TSpTBXGroupBox
@@ -1194,7 +1227,7 @@
         ImageIndex = 1
       end
       object chkEnableFilters: TSpTBXCheckBox
-        Left = 569
+        Left = 561
         Top = 2
         Width = 275
         Height = 18

Modified: Lobby/TASClient/ReplaysUnit.pas
===================================================================
--- Lobby/TASClient/ReplaysUnit.pas	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/ReplaysUnit.pas	2010-03-29 18:56:44 UTC (rev 7450)
@@ -105,21 +105,14 @@
     btFilterUnits: TSpTBXButton;
     btFilterEnergy: TSpTBXButton;
     btFilterMetal: TSpTBXButton;
-    speFilterMetal: TJvSpinEdit;
-    speFilterEnergy: TJvSpinEdit;
-    speFilterUnits: TJvSpinEdit;
     chkFilterPlayers: TSpTBXCheckBox;
     btFilterPlayers: TSpTBXButton;
-    speFilterPlayers: TJvSpinEdit;
     chkFilterLength: TSpTBXCheckBox;
     btFilterLength: TSpTBXButton;
-    speFilterLength: TJvSpinEdit;
-    speFilterFileSize: TJvSpinEdit;
     btFilterFileSize: TSpTBXButton;
     chkFilterFileSize: TSpTBXCheckBox;
     chkFilterGrade: TSpTBXCheckBox;
     btFilterGrade: TSpTBXButton;
-    speFilterGrade: TJvSpinEdit;
     SpTBXGroupBox3: TSpTBXGroupBox;
     chkFilterFixed: TSpTBXCheckBox;
     chkFilterRandom: TSpTBXCheckBox;
@@ -135,6 +128,13 @@
     FilterList: TVirtualStringTree;
     FiltersButton: TSpTBXButton;
     chkEnableFilters: TSpTBXCheckBox;
+    speFilterMetal: TSpTBXSpinEdit;
+    speFilterEnergy: TSpTBXSpinEdit;
+    speFilterUnits: TSpTBXSpinEdit;
+    speFilterPlayers: TSpTBXSpinEdit;
+    speFilterLength: TSpTBXSpinEdit;
+    speFilterFileSize: TSpTBXSpinEdit;
+    speFilterGrade: TSpTBXSpinEdit;
 
     procedure CreateParams(var Params: TCreateParams); override;
 
@@ -1325,12 +1325,14 @@
       SkinManager.CurrentSkin.PaintBackground(Canvas,BgRect,skncListItem,itemState,True,True);
       Canvas.Brush.Style := Graphics.bsClear;
     end
-    else
+    else if (Node = FocusedNode) and focused then
     begin
       Canvas.Font.Color := clHighlightText;
       Canvas.Brush.Color := clHighlight;
       Canvas.FillRect(CellRect);
-    end;
+    end
+    else
+      Canvas.Font.Color := clWindowText;
 
     R := ContentRect;
     InflateRect(R, -TextMargin, 0);
@@ -2568,7 +2570,7 @@
   if not speFilterMetal.Focused then Exit;
   with Filters.Metal do
   begin
-    value := (Sender as TJvSpinEdit).AsInteger;
+    value := speFilterMetal.SpinOptions.ValueAsInteger;
     if enabled then
       FiltersUpdated;
   end;
@@ -2579,7 +2581,7 @@
   if not speFilterEnergy.Focused then Exit;
   with Filters.Energy do
   begin
-    value := (Sender as TJvSpinEdit).AsInteger;
+    value := speFilterEnergy.SpinOptions.ValueAsInteger;
     if enabled then
       FiltersUpdated;
   end;
@@ -2590,7 +2592,7 @@
   if not speFilterUnits.Focused then Exit;
   with Filters.Units do
   begin
-    value := (Sender as TJvSpinEdit).AsInteger;
+    value := speFilterUnits.SpinOptions.ValueAsInteger;
     if enabled then
       FiltersUpdated;
   end;
@@ -2601,7 +2603,7 @@
   if not speFilterPlayers.Focused then Exit;
   with Filters.Players do
   begin
-    value := (Sender as TJvSpinEdit).AsInteger;
+    value := speFilterPlayers.SpinOptions.ValueAsInteger;
     if enabled then
       FiltersUpdated;
   end;
@@ -2612,7 +2614,7 @@
   if not speFilterLength.Focused then Exit;
   with Filters.Length do
   begin
-    value := (Sender as TJvSpinEdit).AsInteger;
+    value := speFilterLength.SpinOptions.ValueAsInteger;
     if enabled then
       FiltersUpdated;
   end;
@@ -2623,7 +2625,7 @@
   if not speFilterFileSize.Focused then Exit;
   with Filters.FileSize do
   begin
-    value := (Sender as TJvSpinEdit).AsInteger;
+    value := speFilterLength.SpinOptions.ValueAsInteger;
     if enabled then
       FiltersUpdated;
   end;
@@ -2634,7 +2636,7 @@
   if not speFilterGrade.Focused then Exit;
   with Filters.Grade do
   begin
-    value := (Sender as TJvSpinEdit).AsInteger;
+    value := speFilterGrade.SpinOptions.ValueAsInteger;
     if enabled then
       FiltersUpdated;
   end;

Modified: Lobby/TASClient/SpringSettingsProfileFormUnit.dfm
===================================================================
--- Lobby/TASClient/SpringSettingsProfileFormUnit.dfm	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/SpringSettingsProfileFormUnit.dfm	2010-03-29 18:56:44 UTC (rev 7450)
@@ -128,9 +128,9 @@
       TabOrder = 5
       object lstCustom: TSpTBXListBox
         Left = 8
-        Top = 32
+        Top = 40
         Width = 353
-        Height = 121
+        Height = 113
         Font.Charset = DEFAULT_CHARSET
         Font.Color = clWindowText
         Font.Height = -11
@@ -141,10 +141,10 @@
         TabOrder = 0
       end
       object btAdd: TSpTBXButton
-        Left = 192
+        Left = 96
         Top = 16
-        Width = 57
-        Height = 17
+        Width = 89
+        Height = 25
         Caption = 'Add'
         Font.Charset = DEFAULT_CHARSET
         Font.Color = clWindowText
@@ -156,10 +156,10 @@
         OnClick = btAddClick
       end
       object btEdit: TSpTBXButton
-        Left = 248
+        Left = 184
         Top = 16
-        Width = 57
-        Height = 17
+        Width = 89
+        Height = 25
         Caption = 'Edit'
         Font.Charset = DEFAULT_CHARSET
         Font.Color = clWindowText
@@ -171,10 +171,10 @@
         OnClick = btEditClick
       end
       object btDelete: TSpTBXButton
-        Left = 304
+        Left = 272
         Top = 16
-        Width = 57
-        Height = 17
+        Width = 89
+        Height = 25
         Caption = 'Delete'
         Font.Charset = DEFAULT_CHARSET
         Font.Color = clWindowText

Modified: Lobby/TASClient/UploadReplayUnit.dfm
===================================================================
--- Lobby/TASClient/UploadReplayUnit.dfm	2010-03-28 18:51:42 UTC (rev 7449)
+++ Lobby/TASClient/UploadReplayUnit.dfm	2010-03-29 18:56:44 UTC (rev 7450)
@@ -4,7 +4,7 @@
   BorderStyle = bsDialog
   Caption = 'Upload replay'
   ClientHeight = 345
-  ClientWidth = 407
+  ClientWidth = 494
   Color = clBtnFace
   Constraints.MaxHeight = 1150
   Constraints.MaxWidth = 1920
@@ -23,21 +23,21 @@
   object SpTBXTitleBar1: TSpTBXTitleBar
     Left = 0
     Top = 0
-    Width = 407
+    Width = 494
     Height = 345
     Caption = 'Upload replay'
     Options.Maximize = False
     object SpTBXGroupBox1: TSpTBXGroupBox
       Left = 16
       Top = 40
-      Width = 377
+      Width = 449
       Height = 233
       Caption = 'Upload Description'
       TabOrder = 1
       object DescriptionRtBox: TRichEdit
         Left = 8
         Top = 24
-        Width = 361
+        Width = 433
         Height = 201
         Lines.Strings = (
           'DescriptionRtBox')
@@ -47,7 +47,7 @@
     object SpTBXGroupBox2: TSpTBXGroupBox
       Left = 16
       Top = 280
-      Width = 377
+      Width = 449
       Height = 49
       Caption = 'Action'
       Font.Charset = DEFAULT_CHARSET
@@ -58,9 +58,9 @@
       ParentFont = False
       TabOrder = 2
       object UploadButton: TSpTBXButton
-        Left = 40
+        Left = 12
         Top = 16
-        Width = 89
+        Width = 137
         Height = 25
         Caption = 'Upload &amp;&amp; Keep'
         Font.Charset = DEFAULT_CHARSET
@@ -73,9 +73,9 @@
         OnClick = UploadButtonClick
       end
       object CancelButton: TSpTBXButton
-        Left = 144
+        Left = 156
         Top = 16
-        Width = 89
+        Width = 137
         Height = 25
         Caption = 'Keep'
         Font.Charset = DEFAULT_CHARSET
@@ -88,9 +88,9 @@
         OnClick = CancelButtonClick
       end
       object DeleteButton: TSpTBXButton
-        Left = 248
+        Left = 300
         Top = 16
-        Width = 89
+        Width = 137
         Height = 25
         Caption = 'Delete'
         Font.Charset = DEFAULT_CHARSET
@@ -122,7 +122,7 @@
     Request.BasicAuthentication = False
     Request.UserAgent = 'Mozilla/3.0 (compatible; Indy Library)'
     HTTPOptions = [hoForceEncodeParams]
-    Left = 408
+    Left = 480
     Top = 208
   end
   object IdAntiFreeze1: TIdAntiFreeze


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002219.html">[Taspring-linux-commit] r7449 - Lobby/TASClient
</A></li>
	<LI>Next message: <A HREF="002221.html">[Taspring-linux-commit] r7451 - Lobby/TASClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2220">[ date ]</a>
              <a href="thread.html#2220">[ thread ]</a>
              <a href="subject.html#2220">[ subject ]</a>
              <a href="author.html#2220">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
