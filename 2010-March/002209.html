<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r7439 - Lobby/TASClient
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2010-March/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7439%20-%20Lobby/TASClient&In-Reply-To=%3C20100320172742.CB5762B511%40it-l.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002208.html">
   <LINK REL="Next"  HREF="002210.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r7439 - Lobby/TASClient</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7439%20-%20Lobby/TASClient&In-Reply-To=%3C20100320172742.CB5762B511%40it-l.eu%3E"
       TITLE="[Taspring-linux-commit] r7439 - Lobby/TASClient">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Sat Mar 20 18:27:42 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002208.html">[Taspring-linux-commit] r7438 - in Lobby/TASClient: . Graphics	Themes
</A></li>
        <LI>Next message: <A HREF="002210.html">[Taspring-linux-commit] r7440 - Lobby/TASClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2209">[ date ]</a>
              <a href="thread.html#2209">[ thread ]</a>
              <a href="subject.html#2209">[ subject ]</a>
              <a href="author.html#2209">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: satirik
Date: 2010-03-20 18:27:42 +0100 (Sat, 20 Mar 2010)
New Revision: 7439

Modified:
   Lobby/TASClient/BattleFormUnit.dfm
   Lobby/TASClient/BattleFormUnit.pas
   Lobby/TASClient/HostBattleFormUnit.dfm
   Lobby/TASClient/HostBattleFormUnit.pas
   Lobby/TASClient/LobbyScriptUnit.pas
   Lobby/TASClient/MainUnit.dfm
   Lobby/TASClient/MainUnit.pas
   Lobby/TASClient/MenuFormUnit.pas
   Lobby/TASClient/PreferencesFormUnit.pas
   Lobby/TASClient/Utility.pas
Log:
* removing all TBX code part 2

Modified: Lobby/TASClient/BattleFormUnit.dfm
===================================================================
--- Lobby/TASClient/BattleFormUnit.dfm	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/BattleFormUnit.dfm	2010-03-20 17:27:42 UTC (rev 7439)
@@ -13037,86 +13037,83 @@
             OnMouseMove = QuickLookRichEditMouseMove
           end
         end
-        object ModTabSheet: TSpTBXTabSheet
+        object SpTBXTabSheet1: TSpTBXTabSheet
           Left = 0
           Top = 39
           Width = 413
           Height = 230
-          Caption = 'Mod options'
+          Caption = 'Disabled Units (0)'
           ImageIndex = -1
-          Item = ModTab
+          Item = DisabledUnitsTab
           TabControl = SpTBXTabControl1
           DesignSize = (
             413
             230)
-          TabItem = 'ModTab'
-          object ModOptionsScrollBox: TTntScrollBox
+          TabItem = 'DisabledUnitsTab'
+          object UnitsGroupBox: TSpTBXGroupBox
             Left = 8
-            Top = 48
+            Top = 4
             Width = 401
-            Height = 177
-            VertScrollBar.Smooth = True
-            VertScrollBar.Tracking = True
+            Height = 227
+            Caption = 'Disabled units'
             Anchors = [akLeft, akTop, akBottom]
-            BiDiMode = bdLeftToRight
-            BorderStyle = bsNone
-            Color = clBtnFace
-            Ctl3D = False
-            ParentBiDiMode = False
-            ParentBackground = True
+            Color = clNone
             ParentColor = False
-            ParentCtl3D = False
             TabOrder = 0
-          end
-          object panelModOptionsDefault: TSpTBXPanel
-            Left = 8
-            Top = 4
-            Width = 402
-            Height = 41
-            Align = alCustom
-            TabOrder = 1
-            object btLoadDefaultMDO: TSpTBXButton
-              Left = 137
-              Top = 8
-              Width = 128
-              Height = 25
-              Caption = 'Load default'
+            DesignSize = (
+              401
+              227)
+            object VDTDisabledUnits: TVirtualDrawTree
+              Left = 16
+              Top = 32
+              Width = 369
+              Height = 183
+              Anchors = [akLeft, akTop, akRight, akBottom]
+              DefaultNodeHeight = 64
+              Header.AutoSizeIndex = 1
+              Header.DefaultHeight = 17
+              Header.Font.Charset = DEFAULT_CHARSET
+              Header.Font.Color = clWindowText
+              Header.Font.Height = -11
+              Header.Font.Name = 'MS Sans Serif'
+              Header.Font.Style = []
+              Header.Options = [hoAutoResize, hoColumnResize, hoDrag]
               TabOrder = 0
-              OnClick = btLoadDefaultMDOClick
-              LinkFont.Charset = DEFAULT_CHARSET
-              LinkFont.Color = clBlue
-              LinkFont.Height = -11
-              LinkFont.Name = 'MS Sans Serif'
-              LinkFont.Style = [fsUnderline]
+              TreeOptions.PaintOptions = [toHideFocusRect, toShowButtons, toShowDropmark, toThemeAware, toUseBlendedImages]
+              TreeOptions.SelectionOptions = [toFullRowSelect]
+              OnDrawNode = VDTDisabledUnitsDrawNode
+              Columns = &lt;
+                item
+                  Position = 0
+                  Width = 64
+                  WideText = 'Icon'
+                end
+                item
+                  Position = 1
+                  Width = 201
+                  WideText = 'FullName'
+                end
+                item
+                  Position = 2
+                  Width = 100
+                  WideText = 'Code name'
+                end&gt;
             end
-            object btSetAsDefaultMDO: TSpTBXButton
-              Left = 269
-              Top = 8
-              Width = 128
-              Height = 25
-              Caption = 'Set as default'
+            object AddUnitsSpeedButton: TSpTBXButton
+              Left = 232
+              Top = 10
+              Width = 153
+              Height = 22
+              Caption = 'Add more units'
               TabOrder = 1
-              OnClick = btSetAsDefaultMDOClick
+              OnClick = AddUnitsSpeedButtonClick
               LinkFont.Charset = DEFAULT_CHARSET
               LinkFont.Color = clBlue
               LinkFont.Height = -11
               LinkFont.Name = 'MS Sans Serif'
               LinkFont.Style = [fsUnderline]
+              ThemeType = thtTBX
             end
-            object btLoadModsDefaultMDO: TSpTBXButton
-              Left = 5
-              Top = 8
-              Width = 128
-              Height = 25
-              Caption = 'Load mod'#39's default'
-              TabOrder = 2
-              OnClick = btLoadModsDefaultMDOClick
-              LinkFont.Charset = DEFAULT_CHARSET
-              LinkFont.Color = clBlue
-              LinkFont.Height = -11
-              LinkFont.Name = 'MS Sans Serif'
-              LinkFont.Style = [fsUnderline]
-            end
           end
         end
         object MapTabSheet: TSpTBXTabSheet
@@ -13201,83 +13198,86 @@
             end
           end
         end
-        object SpTBXTabSheet1: TSpTBXTabSheet
+        object ModTabSheet: TSpTBXTabSheet
           Left = 0
           Top = 39
           Width = 413
           Height = 230
-          Caption = 'Disabled Units (0)'
+          Caption = 'Mod options'
           ImageIndex = -1
-          Item = DisabledUnitsTab
+          Item = ModTab
           TabControl = SpTBXTabControl1
           DesignSize = (
             413
             230)
-          TabItem = 'DisabledUnitsTab'
-          object UnitsGroupBox: TSpTBXGroupBox
+          TabItem = 'ModTab'
+          object ModOptionsScrollBox: TTntScrollBox
             Left = 8
-            Top = 4
+            Top = 48
             Width = 401
-            Height = 227
-            Caption = 'Disabled units'
+            Height = 177
+            VertScrollBar.Smooth = True
+            VertScrollBar.Tracking = True
             Anchors = [akLeft, akTop, akBottom]
-            Color = clNone
+            BiDiMode = bdLeftToRight
+            BorderStyle = bsNone
+            Color = clBtnFace
+            Ctl3D = False
+            ParentBiDiMode = False
+            ParentBackground = True
             ParentColor = False
+            ParentCtl3D = False
             TabOrder = 0
-            DesignSize = (
-              401
-              227)
-            object VDTDisabledUnits: TVirtualDrawTree
-              Left = 16
-              Top = 32
-              Width = 369
-              Height = 183
-              Anchors = [akLeft, akTop, akRight, akBottom]
-              DefaultNodeHeight = 64
-              Header.AutoSizeIndex = 1
-              Header.DefaultHeight = 17
-              Header.Font.Charset = DEFAULT_CHARSET
-              Header.Font.Color = clWindowText
-              Header.Font.Height = -11
-              Header.Font.Name = 'MS Sans Serif'
-              Header.Font.Style = []
-              Header.Options = [hoAutoResize, hoColumnResize, hoDrag]
+          end
+          object panelModOptionsDefault: TSpTBXPanel
+            Left = 8
+            Top = 4
+            Width = 402
+            Height = 41
+            Align = alCustom
+            TabOrder = 1
+            object btLoadDefaultMDO: TSpTBXButton
+              Left = 137
+              Top = 8
+              Width = 128
+              Height = 25
+              Caption = 'Load default'
               TabOrder = 0
-              TreeOptions.PaintOptions = [toHideFocusRect, toShowButtons, toShowDropmark, toThemeAware, toUseBlendedImages]
-              TreeOptions.SelectionOptions = [toFullRowSelect]
-              OnDrawNode = VDTDisabledUnitsDrawNode
-              Columns = &lt;
-                item
-                  Position = 0
-                  Width = 64
-                  WideText = 'Icon'
-                end
-                item
-                  Position = 1
-                  Width = 201
-                  WideText = 'FullName'
-                end
-                item
-                  Position = 2
-                  Width = 100
-                  WideText = 'Code name'
-                end&gt;
+              OnClick = btLoadDefaultMDOClick
+              LinkFont.Charset = DEFAULT_CHARSET
+              LinkFont.Color = clBlue
+              LinkFont.Height = -11
+              LinkFont.Name = 'MS Sans Serif'
+              LinkFont.Style = [fsUnderline]
             end
-            object AddUnitsSpeedButton: TSpTBXButton
-              Left = 232
-              Top = 10
-              Width = 153
-              Height = 22
-              Caption = 'Add more units'
+            object btSetAsDefaultMDO: TSpTBXButton
+              Left = 269
+              Top = 8
+              Width = 128
+              Height = 25
+              Caption = 'Set as default'
               TabOrder = 1
-              OnClick = AddUnitsSpeedButtonClick
+              OnClick = btSetAsDefaultMDOClick
               LinkFont.Charset = DEFAULT_CHARSET
               LinkFont.Color = clBlue
               LinkFont.Height = -11
               LinkFont.Name = 'MS Sans Serif'
               LinkFont.Style = [fsUnderline]
-              ThemeType = thtTBX
             end
+            object btLoadModsDefaultMDO: TSpTBXButton
+              Left = 5
+              Top = 8
+              Width = 128
+              Height = 25
+              Caption = 'Load mod'#39's default'
+              TabOrder = 2
+              OnClick = btLoadModsDefaultMDOClick
+              LinkFont.Charset = DEFAULT_CHARSET
+              LinkFont.Color = clBlue
+              LinkFont.Height = -11
+              LinkFont.Name = 'MS Sans Serif'
+              LinkFont.Style = [fsUnderline]
+            end
           end
         end
         object SpTBXTabSheet2: TSpTBXTabSheet
@@ -13368,83 +13368,32 @@
               LinkFont.Name = 'MS Sans Serif'
               LinkFont.Style = [fsUnderline]
             end
-            object MetalTracker: TSpTBXjanTracker
-              Left = 10
-              Top = 16
-              Width = 39
-              Height = 171
-              ThemeType = thtWindows
-              Minimum = 0
-              Maximum = 10000
-              Value = 1000
-              Orientation = jtbVertical
-              BackColor = clBtnFace
-              BackBorder = False
-              TrackColor = clGray
-              TrackPositionColor = False
-              TrackBorder = True
-              BorderColor = clBlack
-              ThumbColor = clSilver
-              ThumbBorder = False
-              ThumbWidth = 40
-              ThumbHeight = 16
-              TrackHeight = 6
-              ShowCaption = True
-              CaptionColor = clBlack
-              CaptionBold = False
-              OnMouseUpAfterChange = MetalTrackerMouseUpAfterChange
+            object EnergyTracker: TSpTBXTrackBar
+              Left = 64
+              Top = 24
+              Width = 41
+              Height = 161
+              Orientation = trVertical
+              TabOrder = 3
+              OnChange = EnergyTrackerChange
             end
-            object EnergyTracker: TSpTBXjanTracker
-              Left = 58
-              Top = 16
-              Width = 39
-              Height = 171
-              ThemeType = thtWindows
-              Minimum = 0
-              Maximum = 10000
-              Value = 1000
-              Orientation = jtbVertical
-              BackColor = clBtnFace
-              BackBorder = False
-              TrackColor = clGray
-              TrackPositionColor = False
-              TrackBorder = True
-              BorderColor = clBlack
-              ThumbColor = clSilver
-              ThumbBorder = False
-              ThumbWidth = 40
-              ThumbHeight = 16
-              TrackHeight = 6
-              ShowCaption = True
-              CaptionColor = clBlack
-              CaptionBold = False
-              OnMouseUpAfterChange = EnergyTrackerMouseUpAfterChange
+            object MetalTracker: TSpTBXTrackBar
+              Left = 16
+              Top = 24
+              Width = 33
+              Height = 161
+              Orientation = trVertical
+              TabOrder = 4
+              OnChange = MetalTrackerChange
             end
-            object UnitsTracker: TSpTBXjanTracker
-              Left = 106
-              Top = 16
-              Width = 39
-              Height = 171
-              ThemeType = thtWindows
-              Minimum = 10
-              Maximum = 5000
-              Value = 1000
-              Orientation = jtbVertical
-              BackColor = clBtnFace
-              BackBorder = False
-              TrackColor = clGray
-              TrackPositionColor = False
-              TrackBorder = True
-              BorderColor = clBlack
-              ThumbColor = clSilver
-              ThumbBorder = False
-              ThumbWidth = 40
-              ThumbHeight = 16
-              TrackHeight = 6
-              ShowCaption = True
-              CaptionColor = clBlack
-              CaptionBold = False
-              OnMouseUpAfterChange = UnitsTrackerMouseUpAfterChange
+            object UnitsTracker: TSpTBXTrackBar
+              Left = 112
+              Top = 24
+              Width = 25
+              Height = 161
+              Orientation = trVertical
+              TabOrder = 5
+              OnChange = UnitsTrackerChange
             end
           end
           object GameEndRadioGroup: TSpTBXRadioGroup

Modified: Lobby/TASClient/BattleFormUnit.pas
===================================================================
--- Lobby/TASClient/BattleFormUnit.pas	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/BattleFormUnit.pas	2010-03-20 17:27:42 UTC (rev 7439)
@@ -307,9 +307,6 @@
     lblEnergy: TSpTBXLabel;
     lblMetal: TSpTBXLabel;
     lblUnits: TSpTBXLabel;
-    MetalTracker: TSpTBXjanTracker;
-    EnergyTracker: TSpTBXjanTracker;
-    UnitsTracker: TSpTBXjanTracker;
     GameEndRadioGroup: TSpTBXRadioGroup;
     StartPosRadioGroup: TSpTBXRadioGroup;
     LoadDefaultButton: TSpTBXButton;
@@ -429,6 +426,9 @@
     ForceTeamSpin: TSpTBXEditItem;
     ForceAllySpin: TSpTBXEditItem;
     HandicapSpinEditItem: TSpTBXEditItem;
+    EnergyTracker: TSpTBXTrackBar;
+    MetalTracker: TSpTBXTrackBar;
+    UnitsTracker: TSpTBXTrackBar;
 
     procedure CreateParams(var Params: TCreateParams); override;
 
@@ -503,9 +503,6 @@
       Shift: TShiftState; X, Y: Integer);
     procedure FormClose(Sender: TObject; var Action: TCloseAction);
     procedure DisconnectButtonClick(Sender: TObject); overload;
-    procedure MetalTrackerMouseUpAfterChange(Sender: TObject);
-    procedure EnergyTrackerMouseUpAfterChange(Sender: TObject);
-    procedure UnitsTrackerMouseUpAfterChange(Sender: TObject);
     procedure StartPosRadioGroupClick(Sender: TObject);
     procedure GameTimerTimer(Sender: TObject);
     procedure UploadReplayAndLadderReport;
@@ -722,6 +719,9 @@
     procedure ForceAllySpinChange(Sender: TObject; const Text: WideString);
     procedure HandicapSpinEditItemChange(Sender: TObject;
       const Text: WideString);
+    procedure EnergyTrackerChange(Sender: TObject);
+    procedure MetalTrackerChange(Sender: TObject);
+    procedure UnitsTrackerChange(Sender: TObject);
   private
     History: TWideStringList;
     HistoryIndex: Integer;
@@ -1121,11 +1121,11 @@
   if GameEndRadioGroup.Visible then
     s := s + #9+'GAME/modoptions/GameMode='+IntToStr(GameEndRadioGroup.ItemIndex);
   if MetalTracker.Visible then
-    s := s + #9+'GAME/modoptions/StartMetal='+IntToStr(MetalTracker.Value);
+    s := s + #9+'GAME/modoptions/StartMetal='+IntToStr(MetalTracker.Position);
   if EnergyTracker.Visible then
-    s := s + #9+'GAME/modoptions/StartEnergy='+IntToStr(EnergyTracker.Value);
+    s := s + #9+'GAME/modoptions/StartEnergy='+IntToStr(EnergyTracker.Position);
   if UnitsTracker.Visible then
-    s := s + #9+'GAME/modoptions/MaxUnits='+IntToStr(UnitsTracker.Value);
+    s := s + #9+'GAME/modoptions/MaxUnits='+IntToStr(UnitsTracker.Position);
 
   MainForm.TryToSendCommand('SETSCRIPTTAGS', s);
 end;
@@ -1815,12 +1815,12 @@
   AutoStartRectsOptionsItem.Enabled := False;
   LadderRulesButton.Enabled := BattleState.Battle.IsLadderBattle;
 
-  MetalTracker.Minimum := 0;
-  MetalTracker.Maximum := 10000;
-  EnergyTracker.Minimum := 0;
-  EnergyTracker.Maximum := 10000;
-  UnitsTracker.Minimum := 0;
-  UnitsTracker.Maximum := 5000;
+  MetalTracker.Min := 0;
+  MetalTracker.Max:= 10000;
+  EnergyTracker.Min := 0;
+  EnergyTracker.Max := 10000;
+  UnitsTracker.Min := 0;
+  UnitsTracker.Max := 5000;
 
   if Preferences.DisplayUnitsIconsAndNames then
     VDTDisabledUnits.DefaultNodeHeight := 64
@@ -2420,11 +2420,11 @@
 
     {--&gt;} AllowBattleDetailsUpdate := False;
     if MetalTracker.Visible then
-      MetalTracker.Value := metal;
+      MetalTracker.Position := metal;
     if EnergyTracker.Visible then
-      EnergyTracker.Value := energy;
+      EnergyTracker.Position := energy;
     if UnitsTracker.Visible then
-      UnitsTracker.Value := units;
+      UnitsTracker.Position := units;
     StartPosRadioGroup.ItemIndex := startpos;
     if GameEndRadioGroup.Visible then
       GameEndRadioGroup.ItemIndex := gamemode;
@@ -2506,11 +2506,11 @@
   mapHash := Utility.MapChecksums.Items[Utility.MapList.indexOf(BattleState.Battle.Map)];
   Script.AddOrChangeKeyValue('GAME/Maphash',IntToStr(mapHash));
   if MetalTracker.Visible then
-    Script.AddOrChangeKeyValue('GAME/modoptions/StartMetal',IntToStr(MetalTracker.Value));
+    Script.AddOrChangeKeyValue('GAME/modoptions/StartMetal',IntToStr(MetalTracker.Position));
   if EnergyTracker.Visible then
-    Script.AddOrChangeKeyValue('GAME/modoptions/StartEnergy',IntToStr(EnergyTracker.Value));
+    Script.AddOrChangeKeyValue('GAME/modoptions/StartEnergy',IntToStr(EnergyTracker.Position));
   if UnitsTracker.Visible then
-    Script.AddOrChangeKeyValue('GAME/modoptions/MaxUnits',IntToStr(UnitsTracker.Value));
+    Script.AddOrChangeKeyValue('GAME/modoptions/MaxUnits',IntToStr(UnitsTracker.Position));
   if relayHostScript and (StartPosRadioGroup.ItemIndex &lt; 2) then
   begin
     Script.AddOrChangeKeyValue('GAME/StartPosType','3');
@@ -3840,46 +3840,11 @@
     MainForm.TryToSendCommand('LEAVEBATTLE');
     ResetBattleScreen;
   end;
-  
+
   Utility.ReInitLib;
   BattleState.Status := None;
 end;
 
-procedure TBattleForm.MetalTrackerMouseUpAfterChange(Sender: TObject);
-begin
-  if not (BattleState.Status = Hosting) then Exit; // this should not happen though
-
-  if not AllowBattleDetailsUpdate then Exit;
-
-  if not MetalTracker.Visible then Exit;
-
-  MainForm.TryToSendCommand('SETSCRIPTTAGS', 'GAME/modoptions/StartMetal='+IntToStr(MetalTracker.Value));
-end;
-
-procedure TBattleForm.EnergyTrackerMouseUpAfterChange(Sender: TObject);
-begin
-  if not (BattleState.Status = Hosting) then Exit; // this should not happen though
-
-  if not AllowBattleDetailsUpdate then Exit;
-
-  if not EnergyTracker.Visible then Exit;
-
-  MainForm.TryToSendCommand('SETSCRIPTTAGS', 'GAME/modoptions/StartEnergy='+IntToStr(EnergyTracker.Value));
-end;
-
-procedure TBattleForm.UnitsTrackerMouseUpAfterChange(Sender: TObject);
-begin
-  if not (BattleState.Status = Hosting) then Exit; // this should not happen though
-
-  if not AllowBattleDetailsUpdate then Exit;
-
-  if not UnitsTracker.Visible then Exit;
-
-  if UnitsTracker.Value &lt; 10 then UnitsTracker.Value := 10;
-
-  MainForm.TryToSendCommand('SETSCRIPTTAGS', 'GAME/modoptions/MaxUnits='+IntToStr(UnitsTracker.Value));
-end;
-
 procedure TBattleForm.StartPosRadioGroupClick(Sender: TObject);
 begin
   //if (HostBattleForm.relayHoster &lt;&gt; nil) and (StartPosRadioGroup.ItemIndex &lt; 2) then StartPosRadioGroup.ItemIndex := 2;
@@ -6316,20 +6281,20 @@
 
 procedure TBattleForm.lblMetalClick(Sender: TObject);
 begin
-  MetalTracker.Value := Misc.InputBoxInteger(_('Metal custom value'),_('Enter value :'),MetalTracker.Value,MetalTracker.Minimum,MetalTracker.Maximum);
-  MetalTrackerMouseUpAfterChange(nil);
+  MetalTracker.Position := Misc.InputBoxInteger(_('Metal custom value'),_('Enter value :'),MetalTracker.Position,MetalTracker.Min,MetalTracker.Max);
+  MetalTrackerChange(nil);
 end;
 
 procedure TBattleForm.lblEnergyClick(Sender: TObject);
 begin
-  EnergyTracker.Value := Misc.InputBoxInteger(_('Energy custom value'),_('Enter value :'),EnergyTracker.Value,EnergyTracker.Minimum,EnergyTracker.Maximum);
-  EnergyTrackerMouseUpAfterChange(nil);
+  EnergyTracker.Position := Misc.InputBoxInteger(_('Energy custom value'),_('Enter value :'),EnergyTracker.Position,EnergyTracker.Min,EnergyTracker.Max);
+  EnergyTrackerChange(nil);
 end;
 
 procedure TBattleForm.lblUnitsClick(Sender: TObject);
 begin
-  UnitsTracker.Value := Misc.InputBoxInteger(_('Units custom value'),_('Enter units :'),UnitsTracker.Value,UnitsTracker.Minimum,UnitsTracker.Maximum);
-  UnitsTrackerMouseUpAfterChange(nil);
+  UnitsTracker.Position := Misc.InputBoxInteger(_('Units custom value'),_('Enter units :'),UnitsTracker.Position,UnitsTracker.Min,UnitsTracker.Max);
+  UnitsTrackerChange(nil);
 end;
 
 constructor TLuaOptionList.Create;
@@ -7552,11 +7517,11 @@
   if GameEndRadioGroup.Visible and (GameEndRadioGroup.ItemIndex &gt; -1) then
     AddLine('Game end condition',GameEndRadioGroup.Items[GameEndRadioGroup.ItemIndex],true,GameEndRadioGroup.ItemIndex &lt;&gt; GameEndRadioGroup.Tag,GameEndRadioGroup.Hint);
   if MetalTracker.Visible then
-    AddLine(lblMetal.Caption,IntToStr(MetalTracker.Value),true,MetalTracker.Value &lt;&gt; MetalTracker.Tag,MetalTracker.Hint);
+    AddLine(lblMetal.Caption,IntToStr(MetalTracker.Position),true,MetalTracker.Position &lt;&gt; MetalTracker.Tag,MetalTracker.Hint);
   if EnergyTracker.Visible then
-    AddLine(lblEnergy.Caption,IntToStr(EnergyTracker.Value),true,EnergyTracker.Value &lt;&gt; EnergyTracker.Tag,EnergyTracker.Hint);
+    AddLine(lblEnergy.Caption,IntToStr(EnergyTracker.Position),true,EnergyTracker.Position &lt;&gt; EnergyTracker.Tag,EnergyTracker.Hint);
   if UnitsTracker.Visible then
-    AddLine(lblUnits.Caption,IntToStr(UnitsTracker.Value),true,UnitsTracker.Value &lt;&gt; UnitsTracker.Tag,UnitsTracker.Hint);
+    AddLine(lblUnits.Caption,IntToStr(UnitsTracker.Position),true,UnitsTracker.Position &lt;&gt; UnitsTracker.Tag,UnitsTracker.Hint);
 
   if ModOptionsList.Count &gt; 0 then
   begin
@@ -7641,9 +7606,9 @@
 
   StartPosRadioGroup.Tag := StartPosRadioGroup.ItemIndex;
   GameEndRadioGroup.Tag := GameEndRadioGroup.ItemIndex;
-  MetalTracker.Tag := MetalTracker.Value;
-  EnergyTracker.Tag := EnergyTracker.Value;
-  UnitsTracker.Tag := UnitsTracker.Value;
+  MetalTracker.Tag := MetalTracker.Position;
+  EnergyTracker.Tag := EnergyTracker.Position;
+  UnitsTracker.Tag := UnitsTracker.Position;
 
   RefreshQuickLookText;
 
@@ -8463,5 +8428,40 @@
   HandicapSpinEditItem.Text := IntToStr(Value);
 end;
 
+procedure TBattleForm.EnergyTrackerChange(Sender: TObject);
+begin
+  if not (BattleState.Status = Hosting) then Exit; // this should not happen though
+
+  if not AllowBattleDetailsUpdate then Exit;
+
+  if not EnergyTracker.Visible then Exit;
+
+  MainForm.TryToSendCommand('SETSCRIPTTAGS', 'GAME/modoptions/StartEnergy='+IntToStr(EnergyTracker.Position));
+end;
+
+procedure TBattleForm.MetalTrackerChange(Sender: TObject);
+begin
+  if not (BattleState.Status = Hosting) then Exit; // this should not happen though
+
+  if not AllowBattleDetailsUpdate then Exit;
+
+  if not MetalTracker.Visible then Exit;
+
+  MainForm.TryToSendCommand('SETSCRIPTTAGS', 'GAME/modoptions/StartMetal='+IntToStr(MetalTracker.Position));
+end;
+
+procedure TBattleForm.UnitsTrackerChange(Sender: TObject);
+begin
+  if not (BattleState.Status = Hosting) then Exit; // this should not happen though
+
+  if not AllowBattleDetailsUpdate then Exit;
+
+  if not UnitsTracker.Visible then Exit;
+
+  if UnitsTracker.Position &lt; 10 then UnitsTracker.Position := 10;
+
+  MainForm.TryToSendCommand('SETSCRIPTTAGS', 'GAME/modoptions/MaxUnits='+IntToStr(UnitsTracker.Position));
+end;
+
 end.
 

Modified: Lobby/TASClient/HostBattleFormUnit.dfm
===================================================================
--- Lobby/TASClient/HostBattleFormUnit.dfm	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/HostBattleFormUnit.dfm	2010-03-20 17:27:42 UTC (rev 7439)
@@ -197,26 +197,13 @@
         'Hole punching'
         'Fixed source ports')
     end
-    object HostButton: TTBXButton
-      Left = 77
-      Top = 344
-      Width = 114
-      Height = 25
-      AutoSize = False
-      Caption = 'Host battle'
-      DropDownCombo = True
-      DropDownMenu = HostPopupMenu
-      SmartFocus = False
-      TabOrder = 16
-      OnClick = HostButtonClick
-    end
     object CancelButton: TSpTBXButton
       Left = 246
       Top = 344
       Width = 103
       Height = 25
       Caption = 'Cancel'
-      TabOrder = 17
+      TabOrder = 16
       OnClick = CancelButtonClick
       Cancel = True
       LinkFont.Charset = DEFAULT_CHARSET
@@ -231,7 +218,7 @@
       Width = 248
       Height = 15
       Caption = 'Auto send description in battle when a player join'
-      TabOrder = 18
+      TabOrder = 17
     end
     object LadderComboBox: TSpTBXComboBox
       Left = 16
@@ -240,7 +227,7 @@
       Height = 22
       Style = csOwnerDrawFixed
       ItemHeight = 16
-      TabOrder = 19
+      TabOrder = 18
       Visible = False
       OnChange = LadderComboBoxChange
     end
@@ -263,7 +250,7 @@
       Width = 105
       Height = 25
       Caption = 'Refresh'
-      TabOrder = 21
+      TabOrder = 20
       Visible = False
       OnClick = RefreshButtonClick
       LinkFont.Charset = DEFAULT_CHARSET
@@ -278,7 +265,7 @@
       Width = 113
       Height = 21
       Caption = 'Refresh mod list'
-      TabOrder = 22
+      TabOrder = 21
       OnClick = RefreshModListButtonClick
       LinkFont.Charset = DEFAULT_CHARSET
       LinkFont.Color = clBlue
@@ -292,14 +279,14 @@
       Width = 68
       Height = 15
       Caption = 'Relay host'
-      TabOrder = 23
+      TabOrder = 22
     end
     object PlayersTracker: TSpTBXSpinEdit
       Left = 16
       Top = 56
       Width = 49
       Height = 21
-      TabOrder = 24
+      TabOrder = 23
       SpinButton.Left = 30
       SpinButton.Top = 0
       SpinButton.Width = 15
@@ -312,6 +299,33 @@
       SpinButton.LinkFont.Style = [fsUnderline]
       Value = 4.000000000000000000
     end
+    object HostButton: TSpTBXButton
+      Left = 72
+      Top = 344
+      Width = 105
+      Height = 25
+      Caption = 'Host battle'
+      TabOrder = 24
+      OnClick = HostButtonClick
+      LinkFont.Charset = DEFAULT_CHARSET
+      LinkFont.Color = clBlue
+      LinkFont.Height = -11
+      LinkFont.Name = 'MS Sans Serif'
+      LinkFont.Style = [fsUnderline]
+    end
+    object HostTypeButton: TSpTBXButton
+      Left = 176
+      Top = 344
+      Width = 14
+      Height = 25
+      TabOrder = 25
+      DropDownMenu = HostPopupMenu
+      LinkFont.Charset = DEFAULT_CHARSET
+      LinkFont.Color = clBlue
+      LinkFont.Height = -11
+      LinkFont.Name = 'MS Sans Serif'
+      LinkFont.Style = [fsUnderline]
+    end
   end
   object HostPopupMenu: TPopupMenu
     AutoHotkeys = maManual

Modified: Lobby/TASClient/HostBattleFormUnit.pas
===================================================================
--- Lobby/TASClient/HostBattleFormUnit.pas	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/HostBattleFormUnit.pas	2010-03-20 17:27:42 UTC (rev 7439)
@@ -28,7 +28,6 @@
     ModsComboBox: TSpTBXComboBox;
     RankComboBox: TSpTBXComboBox;
     NATRadioGroup: TSpTBXRadioGroup;
-    HostButton: TTBXButton;
     HostPopupMenu: TPopupMenu;
     Host1: TMenuItem;
     HostReplay1: TMenuItem;
@@ -42,6 +41,8 @@
     RefreshModListButton: TSpTBXButton;
     RelayHostCheckBox: TSpTBXCheckBox;
     PlayersTracker: TSpTBXSpinEdit;
+    HostButton: TSpTBXButton;
+    HostTypeButton: TSpTBXButton;
 
     procedure CreateParams(var Params: TCreateParams); override;
     procedure TryToHostBattle(ladderIndex: integer);
@@ -399,12 +400,12 @@
     if BattleForm.CurrentMapIndex &lt;&gt; i then BattleForm.ChangeMap(i);
   end;
 
-  BattleForm.MetalTracker.Minimum := 0;
-  BattleForm.MetalTracker.Maximum := 10000;
-  BattleForm.EnergyTracker.Minimum := 0;
-  BattleForm.EnergyTracker.Maximum := 10000;
-  BattleForm.UnitsTracker.Minimum := 0;
-  BattleForm.UnitsTracker.Maximum := 5000;
+  BattleForm.MetalTracker.Min := 0;
+  BattleForm.MetalTracker.Max := 10000;
+  BattleForm.EnergyTracker.Min := 0;
+  BattleForm.EnergyTracker.Max := 10000;
+  BattleForm.UnitsTracker.Min := 0;
+  BattleForm.UnitsTracker.Max := 5000;
 
   s := '';
   // type:

Modified: Lobby/TASClient/LobbyScriptUnit.pas
===================================================================
--- Lobby/TASClient/LobbyScriptUnit.pas	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/LobbyScriptUnit.pas	2010-03-20 17:27:42 UTC (rev 7439)
@@ -581,9 +581,9 @@
     PyDict_SetItemString(pyCurrentBattle,'Battle',pyBattleList[MainForm.GetBattleIndex(BattleState.Battle.ID)]);
     PyDict_SetItemStringDecRef(pyCurrentBattle,'GameEndCondition',BattleForm.GameEndRadioGroup.ItemIndex);
     PyDict_SetItemStringDecRef(pyCurrentBattle,'StartPosMode',BattleForm.StartPosRadioGroup.ItemIndex);
-    PyDict_SetItemStringDecRef(pyCurrentBattle,'StartMetal',BattleForm.MetalTracker.Value);
-    PyDict_SetItemStringDecRef(pyCurrentBattle,'StartEnergy',BattleForm.EnergyTracker.Value);
-    PyDict_SetItemStringDecRef(pyCurrentBattle,'MaxUnits',BattleForm.UnitsTracker.Value);
+    PyDict_SetItemStringDecRef(pyCurrentBattle,'StartMetal',BattleForm.MetalTracker.Position);
+    PyDict_SetItemStringDecRef(pyCurrentBattle,'StartEnergy',BattleForm.EnergyTracker.Position);
+    PyDict_SetItemStringDecRef(pyCurrentBattle,'MaxUnits',BattleForm.UnitsTracker.Position);
 
     pyO := StringsToPyList(BattleState.DisabledUnits);
     PyDict_SetItemString(pyCurrentBattle,'DisabledUnits',pyO);

Modified: Lobby/TASClient/MainUnit.dfm
===================================================================
--- Lobby/TASClient/MainUnit.dfm	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/MainUnit.dfm	2010-03-20 17:27:42 UTC (rev 7439)
@@ -1282,7 +1282,7 @@
         LinkFont.Name = 'MS Sans Serif'
         LinkFont.Style = [fsUnderline]
       end
-      object SpTBXButton1: TSpTBXButton
+      object AwayMsgsButton: TSpTBXButton
         Left = 37
         Top = 2
         Width = 14

Modified: Lobby/TASClient/MainUnit.pas
===================================================================
--- Lobby/TASClient/MainUnit.pas	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/MainUnit.pas	2010-03-20 17:27:42 UTC (rev 7439)
@@ -1241,7 +1241,7 @@
     RankValueTextBox: TJvSpinEdit;
     mnuRename: TSpTBXItem;
     ConnectButton: TSpTBXSpeedButton;
-    SpTBXButton1: TSpTBXButton;
+    AwayMsgsButton: TSpTBXButton;
     procedure mnuOpenPrivateChatClick(Sender: TObject);
     procedure mnuSelectBattleClick(Sender: TObject);
     procedure mnuPlayWithClick(Sender: TObject);
@@ -7245,9 +7245,9 @@
       end;
 
       AllowBattleDetailsUpdate := False;
-      BattleForm.MetalTracker.Value := i;
-      BattleForm.EnergyTracker.Value := j;
-      BattleForm.UnitsTracker.Value := k;
+      BattleForm.MetalTracker.Position := i;
+      BattleForm.EnergyTracker.Position := j;
+      BattleForm.UnitsTracker.Position := k;
       BattleForm.StartPosRadioGroup.ItemIndex := l;
       BattleForm.RefreshStartRectsPosAndSize;
       BattleForm.GameEndRadioGroup.ItemIndex := m;
@@ -7302,11 +7302,11 @@
 
         try
           if tmp = LowerCase('GAME/modoptions/StartMetal') then
-            BattleForm.MetalTracker.Value := StrToInt(tmp2)
+            BattleForm.MetalTracker.Position := StrToInt(tmp2)
           else if tmp = LowerCase('GAME/modoptions/StartEnergy') then
-            BattleForm.EnergyTracker.Value := StrToInt(tmp2)
+            BattleForm.EnergyTracker.Position := StrToInt(tmp2)
           else if tmp = LowerCase('GAME/modoptions/MaxUnits') then
-            BattleForm.UnitsTracker.Value := StrToInt(tmp2)
+            BattleForm.UnitsTracker.Position := StrToInt(tmp2)
           else if tmp = LowerCase('GAME/StartPosType') then
           begin
             BattleForm.StartPosRadioGroup.ItemIndex := StrToInt(tmp2);

Modified: Lobby/TASClient/MenuFormUnit.pas
===================================================================
--- Lobby/TASClient/MenuFormUnit.pas	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/MenuFormUnit.pas	2010-03-20 17:27:42 UTC (rev 7439)
@@ -751,8 +751,8 @@
   begin
     // metal
     htmlCode := StringReplace(htmlCode,'[MetalCaption]',BattleForm.lblMetal.Caption,[rfIgnoreCase,rfReplaceAll]);
-    htmlCode := StringReplace(htmlCode,'[MaxMetal]',IntToStr(BattleForm.MetalTracker.Maximum),[rfIgnoreCase,rfReplaceAll]);
-    htmlCode := StringReplace(htmlCode,'[MinMetal]',IntToStr(BattleForm.MetalTracker.Minimum),[rfIgnoreCase,rfReplaceAll]);
+    htmlCode := StringReplace(htmlCode,'[MaxMetal]',IntToStr(BattleForm.MetalTracker.Max),[rfIgnoreCase,rfReplaceAll]);
+    htmlCode := StringReplace(htmlCode,'[MinMetal]',IntToStr(BattleForm.MetalTracker.Min),[rfIgnoreCase,rfReplaceAll]);
     if BattleForm.MetalTracker.Visible then
       htmlCode := StringReplace(htmlCode,'[MetalVisible]','block',[rfIgnoreCase,rfReplaceAll])
     else
@@ -760,8 +760,8 @@
 
     // energy
     htmlCode := StringReplace(htmlCode,'[EnergyCaption]',BattleForm.lblEnergy.Caption,[rfIgnoreCase,rfReplaceAll]);
-    htmlCode := StringReplace(htmlCode,'[MaxEnergy]',IntToStr(BattleForm.EnergyTracker.Maximum),[rfIgnoreCase,rfReplaceAll]);
-    htmlCode := StringReplace(htmlCode,'[MinEnergy]',IntToStr(BattleForm.EnergyTracker.Minimum),[rfIgnoreCase,rfReplaceAll]);
+    htmlCode := StringReplace(htmlCode,'[MaxEnergy]',IntToStr(BattleForm.EnergyTracker.Max),[rfIgnoreCase,rfReplaceAll]);
+    htmlCode := StringReplace(htmlCode,'[MinEnergy]',IntToStr(BattleForm.EnergyTracker.Min),[rfIgnoreCase,rfReplaceAll]);
     if BattleForm.EnergyTracker.Visible then
       htmlCode := StringReplace(htmlCode,'[EnergyVisible]','block',[rfIgnoreCase,rfReplaceAll])
     else
@@ -769,8 +769,8 @@
 
     // maxunits
     htmlCode := StringReplace(htmlCode,'[UnitsCaption]',BattleForm.lblUnits.Caption,[rfIgnoreCase,rfReplaceAll]);
-    htmlCode := StringReplace(htmlCode,'[MaxUnits]',IntToStr(BattleForm.UnitsTracker.Maximum),[rfIgnoreCase,rfReplaceAll]);
-    htmlCode := StringReplace(htmlCode,'[MinUnits]',IntToStr(BattleForm.UnitsTracker.Minimum),[rfIgnoreCase,rfReplaceAll]);
+    htmlCode := StringReplace(htmlCode,'[MaxUnits]',IntToStr(BattleForm.UnitsTracker.Max),[rfIgnoreCase,rfReplaceAll]);
+    htmlCode := StringReplace(htmlCode,'[MinUnits]',IntToStr(BattleForm.UnitsTracker.Min),[rfIgnoreCase,rfReplaceAll]);
     if BattleForm.UnitsTracker.Visible then
       htmlCode := StringReplace(htmlCode,'[UnitsVisible]','block',[rfIgnoreCase,rfReplaceAll])
     else

Modified: Lobby/TASClient/PreferencesFormUnit.pas
===================================================================
--- Lobby/TASClient/PreferencesFormUnit.pas	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/PreferencesFormUnit.pas	2010-03-20 17:27:42 UTC (rev 7439)
@@ -785,9 +785,9 @@
   try
     Misc.SetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartPos', rdInteger, BattleForm.StartPosRadioGroup.ItemIndex);
     Misc.SetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'GameEnd', rdInteger, BattleForm.GameEndRadioGroup.ItemIndex);
-    Misc.SetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartMetal', rdInteger, BattleForm.MetalTracker.Value);
-    Misc.SetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartEnergy', rdInteger, BattleForm.EnergyTracker.Value);
-    Misc.SetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'MaxUnits', rdInteger, BattleForm.UnitsTracker.Value);
+    Misc.SetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartMetal', rdInteger, BattleForm.MetalTracker.Position);
+    Misc.SetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartEnergy', rdInteger, BattleForm.EnergyTracker.Position);
+    Misc.SetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'MaxUnits', rdInteger, BattleForm.UnitsTracker.Position);
   except
     MessageDlg(_('Unable to write preferences to windows registry!'), mtError, [mbOK], 0);
   end;
@@ -797,9 +797,9 @@
 begin
   try BattleForm.StartPosRadioGroup.ItemIndex := Misc.GetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartPos'); except end;
   try BattleForm.GameEndRadioGroup.ItemIndex := Misc.GetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'GameEnd'); except end;
-  try BattleForm.MetalTracker.Value := Min(BattleForm.MetalTracker.Maximum,Max(BattleForm.MetalTracker.Minimum,Misc.GetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartMetal'))); except end;
-  try BattleForm.EnergyTracker.Value := Min(BattleForm.EnergyTracker.Maximum,Max(BattleForm.EnergyTracker.Minimum,Misc.GetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartEnergy'))); except end;
-  try BattleForm.UnitsTracker.Value := Min(BattleForm.UnitsTracker.Maximum,Max(BattleForm.UnitsTracker.Minimum,Misc.GetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'MaxUnits'))); except end;
+  try BattleForm.MetalTracker.Position := Min(BattleForm.MetalTracker.Max,Max(BattleForm.MetalTracker.Min,Misc.GetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartMetal'))); except end;
+  try BattleForm.EnergyTracker.Position := Min(BattleForm.EnergyTracker.Max,Max(BattleForm.EnergyTracker.Min,Misc.GetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'StartEnergy'))); except end;
+  try BattleForm.UnitsTracker.Position := Min(BattleForm.UnitsTracker.Max,Max(BattleForm.UnitsTracker.Min,Misc.GetRegistryData(HKEY_CURRENT_USER, TASCLIENT_REGISTRY_KEY+'\Forms\BattleForm\Default', 'MaxUnits'))); except end;
 end;
 
 { call this method after all forms have been initialized, just before hiding the splash screen!

Modified: Lobby/TASClient/Utility.pas
===================================================================
--- Lobby/TASClient/Utility.pas	2010-03-20 16:42:21 UTC (rev 7438)
+++ Lobby/TASClient/Utility.pas	2010-03-20 17:27:42 UTC (rev 7439)
@@ -833,9 +833,9 @@
             lblMetal.Caption := GetOptionName(i);
             lblMetal.Hint := GetOptionDesc(i);
             MetalTracker.Hint := GetOptionDesc(i);
-            MetalTracker.Minimum := Round(GetOptionNumberMin(i));
-            MetalTracker.Maximum := Round(GetOptionNumberMax(i));
-            MetalTracker.Value := Round(GetOptionNumberDef(i));
+            MetalTracker.Min := Round(GetOptionNumberMin(i));
+            MetalTracker.Max := Round(GetOptionNumberMax(i));
+            MetalTracker.Position := Round(GetOptionNumberDef(i));
             Continue;
           end;
       end
@@ -851,9 +851,9 @@
             lblEnergy.Caption := GetOptionName(i);
             lblEnergy.Hint := GetOptionDesc(i);
             EnergyTracker.Hint := GetOptionDesc(i);
-            EnergyTracker.Minimum := Round(GetOptionNumberMin(i));
-            EnergyTracker.Maximum := Round(GetOptionNumberMax(i));
-            EnergyTracker.Value := Round(GetOptionNumberDef(i));
+            EnergyTracker.Min := Round(GetOptionNumberMin(i));
+            EnergyTracker.Max := Round(GetOptionNumberMax(i));
+            EnergyTracker.Position := Round(GetOptionNumberDef(i));
             Continue;
           end;
       end
@@ -869,9 +869,9 @@
             lblUnits.Caption := GetOptionName(i);
             lblUnits.Hint := GetOptionDesc(i);
             UnitsTracker.Hint := GetOptionDesc(i);
-            UnitsTracker.Minimum := Round(GetOptionNumberMin(i));
-            UnitsTracker.Maximum := Round(GetOptionNumberMax(i));
-            UnitsTracker.Value := Round(GetOptionNumberDef(i));
+            UnitsTracker.Min := Round(GetOptionNumberMin(i));
+            UnitsTracker.Max := Round(GetOptionNumberMax(i));
+            UnitsTracker.Position := Round(GetOptionNumberDef(i));
             Continue;
           end;
       end


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002208.html">[Taspring-linux-commit] r7438 - in Lobby/TASClient: . Graphics	Themes
</A></li>
	<LI>Next message: <A HREF="002210.html">[Taspring-linux-commit] r7440 - Lobby/TASClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2209">[ date ]</a>
              <a href="thread.html#2209">[ thread ]</a>
              <a href="subject.html#2209">[ subject ]</a>
              <a href="author.html#2209">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
