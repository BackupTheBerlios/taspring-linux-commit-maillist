<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r5867 - trunk/Lobby/TASClient
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5867%20-%20trunk/Lobby/TASClient&In-Reply-To=%3C20080511115140.61FD0469E%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000646.html">
   <LINK REL="Next"  HREF="000648.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r5867 - trunk/Lobby/TASClient</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5867%20-%20trunk/Lobby/TASClient&In-Reply-To=%3C20080511115140.61FD0469E%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r5867 - trunk/Lobby/TASClient">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Sun May 11 13:51:40 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000646.html">[Taspring-linux-commit] r5866 - trunk/tools/ArchiveMover
</A></li>
        <LI>Next message: <A HREF="000648.html">[Taspring-linux-commit] r5868 - in trunk/rts: Game Lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#647">[ date ]</a>
              <a href="thread.html#647">[ thread ]</a>
              <a href="subject.html#647">[ subject ]</a>
              <a href="author.html#647">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: satirik
Date: 2008-05-11 13:51:39 +0200 (Sun, 11 May 2008)
New Revision: 5867

Modified:
   trunk/Lobby/TASClient/BattleFormUnit.dfm
   trunk/Lobby/TASClient/MainUnit.dfm
   trunk/Lobby/TASClient/MainUnit.pas
   trunk/Lobby/TASClient/TASClient.dof
   trunk/Lobby/TASClient/TASClient.res
Log:
- beta removed, beta changelog link hidden
- auto completion take the whole player list every where now instead of the channel's client list

Modified: trunk/Lobby/TASClient/BattleFormUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/BattleFormUnit.dfm	2008-05-11 10:04:29 UTC (rev 5866)
+++ trunk/Lobby/TASClient/BattleFormUnit.dfm	2008-05-11 11:51:39 UTC (rev 5867)
@@ -1,6 +1,6 @@
 object BattleForm: TBattleForm
-  Left = 534
-  Top = 112
+  Left = 892
+  Top = 282
   Width = 748
   Height = 586
   Caption = 'Battle window'
@@ -4013,18 +4013,18 @@
           Height = 273
           Align = alClient
           Color = clBtnFace
-          ActiveTabIndex = 2
+          ActiveTabIndex = 0
           OnActiveTabChange = SpTBXTabControl1ActiveTabChange
           HiddenItems = &lt;&gt;
           object GameOptionsTab: TSpTBXTabItem
             Caption = 'Game options'
+            Checked = True
           end
           object DisabledUnitsTab: TSpTBXTabItem
             Caption = 'Disabled Units (0)'
           end
           object MapTab: TSpTBXTabItem
             Caption = 'Map options'
-            Checked = True
           end
           object ModTab: TSpTBXTabItem
             Caption = 'Mod options'
@@ -4159,6 +4159,86 @@
               end
             end
           end
+          object MapTabSheet: TSpTBXTabSheet
+            Left = 0
+            Top = 23
+            Width = 390
+            Height = 250
+            Caption = 'Map options'
+            ImageIndex = -1
+            DesignSize = (
+              390
+              250)
+            TabItem = 'MapTab'
+            object MapOptionsScrollBox: TTntScrollBox
+              Left = 2
+              Top = 48
+              Width = 385
+              Height = 200
+              VertScrollBar.Smooth = True
+              VertScrollBar.Tracking = True
+              Anchors = [akLeft, akTop, akRight, akBottom]
+              BiDiMode = bdLeftToRight
+              BorderStyle = bsNone
+              Color = clBtnFace
+              Ctl3D = False
+              ParentBiDiMode = False
+              ParentBackground = True
+              ParentColor = False
+              ParentCtl3D = False
+              TabOrder = 0
+            end
+            object panelMapOptionsDefault: TSpTBXPanel
+              Left = 5
+              Top = 4
+              Width = 382
+              Height = 41
+              Align = alCustom
+              TabOrder = 1
+              object btLoadDefaultMPO: TSpTBXButton
+                Left = 136
+                Top = 8
+                Width = 113
+                Height = 25
+                Caption = 'Load default'
+                TabOrder = 0
+                OnClick = btLoadDefaultMPOClick
+                LinkFont.Charset = DEFAULT_CHARSET
+                LinkFont.Color = clBlue
+                LinkFont.Height = -11
+                LinkFont.Name = 'MS Sans Serif'
+                LinkFont.Style = [fsUnderline]
+              end
+              object btSetAsDefaultMPO: TSpTBXButton
+                Left = 256
+                Top = 8
+                Width = 113
+                Height = 25
+                Caption = 'Set as default'
+                TabOrder = 1
+                OnClick = btSetAsDefaultMPOClick
+                LinkFont.Charset = DEFAULT_CHARSET
+                LinkFont.Color = clBlue
+                LinkFont.Height = -11
+                LinkFont.Name = 'MS Sans Serif'
+                LinkFont.Style = [fsUnderline]
+              end
+              object btLoadMapsDefaultMPO: TSpTBXButton
+                Left = 16
+                Top = 8
+                Width = 113
+                Height = 25
+                Caption = 'Load map'#39's default'
+                TabOrder = 2
+                OnClick = btLoadMapsDefaultMPOClick
+                LinkFont.Charset = DEFAULT_CHARSET
+                LinkFont.Color = clBlue
+                LinkFont.Height = -11
+                LinkFont.Name = 'MS Sans Serif'
+                LinkFont.Style = [fsUnderline]
+              end
+            end
+          end
           object SpTBXTabSheet2: TSpTBXTabSheet
             Left = 0
             Top = 23
@@ -4429,86 +4509,6 @@
               LinkFont.Style = [fsUnderline]
             end
           end
-          object MapTabSheet: TSpTBXTabSheet
-            Left = 0
-            Top = 23
-            Width = 390
-            Height = 250
-            Caption = 'Map options'
-            ImageIndex = -1
-            DesignSize = (
-              390
-              250)
-            TabItem = 'MapTab'
-            object MapOptionsScrollBox: TTntScrollBox
-              Left = 2
-              Top = 48
-              Width = 385
-              Height = 200
-              VertScrollBar.Smooth = True
-              VertScrollBar.Tracking = True
-              Anchors = [akLeft, akTop, akRight, akBottom]
-              BiDiMode = bdLeftToRight
-              BorderStyle = bsNone
-              Color = clBtnFace
-              Ctl3D = False
-              ParentBiDiMode = False
-              ParentBackground = True
-              ParentColor = False
-              ParentCtl3D = False
-              TabOrder = 0
-            end
-            object panelMapOptionsDefault: TSpTBXPanel
-              Left = 5
-              Top = 4
-              Width = 382
-              Height = 41
-              Align = alCustom
-              TabOrder = 1
-              object btLoadDefaultMPO: TSpTBXButton
-                Left = 136
-                Top = 8
-                Width = 113
-                Height = 25
-                Caption = 'Load default'
-                TabOrder = 0
-                OnClick = btLoadDefaultMPOClick
-                LinkFont.Charset = DEFAULT_CHARSET
-                LinkFont.Color = clBlue
-                LinkFont.Height = -11
-                LinkFont.Name = 'MS Sans Serif'
-                LinkFont.Style = [fsUnderline]
-              end
-              object btSetAsDefaultMPO: TSpTBXButton
-                Left = 256
-                Top = 8
-                Width = 113
-                Height = 25
-                Caption = 'Set as default'
-                TabOrder = 1
-                OnClick = btSetAsDefaultMPOClick
-                LinkFont.Charset = DEFAULT_CHARSET
-                LinkFont.Color = clBlue
-                LinkFont.Height = -11
-                LinkFont.Name = 'MS Sans Serif'
-                LinkFont.Style = [fsUnderline]
-              end
-              object btLoadMapsDefaultMPO: TSpTBXButton
-                Left = 16
-                Top = 8
-                Width = 113
-                Height = 25
-                Caption = 'Load map'#39's default'
-                TabOrder = 2
-                OnClick = btLoadMapsDefaultMPOClick
-                LinkFont.Charset = DEFAULT_CHARSET
-                LinkFont.Color = clBlue
-                LinkFont.Height = -11
-                LinkFont.Name = 'MS Sans Serif'
-                LinkFont.Style = [fsUnderline]
-              end
-            end
-          end
         end
       end
       object Panel6: TPanel

Modified: trunk/Lobby/TASClient/MainUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/MainUnit.dfm	2008-05-11 10:04:29 UTC (rev 5866)
+++ trunk/Lobby/TASClient/MainUnit.dfm	2008-05-11 11:51:39 UTC (rev 5867)
@@ -1,6 +1,6 @@
 object MainForm: TMainForm
-  Left = 627
-  Top = 305
+  Left = 482
+  Top = 182
   Width = 808
   Height = 549
   Caption = '.'
@@ -6514,6 +6514,7 @@
     end
     object SpTBXItem3: TSpTBXItem
       Caption = 'Beta lobby changelog'
+      Visible = False
       OnClick = SpTBXItem3Click
     end
   end

Modified: trunk/Lobby/TASClient/MainUnit.pas
===================================================================
--- trunk/Lobby/TASClient/MainUnit.pas	2008-05-11 10:04:29 UTC (rev 5866)
+++ trunk/Lobby/TASClient/MainUnit.pas	2008-05-11 11:51:39 UTC (rev 5867)
@@ -510,9 +510,9 @@
 
 const
   VERSION_NUMBER = '0.37'; // Must be float value! (with a period as a decimal seperator)
-  BETA_NUMBER = 306;
+  BETA_NUMBER = 307;
   CHECK_BETA_LOBBY_URL = '<A HREF="http://tasclient.no-ip.org/TASClient.txt">http://tasclient.no-ip.org/TASClient.txt</A>';
-  PROGRAM_VERSION = 'TASClient ' + VERSION_NUMBER + ' beta';
+  PROGRAM_VERSION = 'TASClient ' + VERSION_NUMBER;// + ' beta';
   KEEP_ALIVE_INTERVAL = 10000; // in milliseconds. Tells us what should be the maximum &quot;silence&quot; time before we send a ping to the server.
   ASSUME_TIMEOUT_INTERVAL = 30000; // in milliseconds. Must be greater than KEEP_ALIVE_INTERVAL! If server hasn't send any data to us within this interval, then we assume timeout occured. It's us who must make sure we get constant replies from server by pinging it.
   LOCAL_TAB = '$Local'; // caption of main (command) tab window. Must be special so that is different from channel names or user names, that is why there is a &quot;$&quot; in front of it.
@@ -1811,12 +1811,12 @@
   if (Msg.CharCode = 9) and (Screen.ActiveControl.ClassType = TSpTBXEdit) and (Screen.ActiveControl.Name = 'InputEdit') then
   begin
     Handled := True;
-    if (PageControl1.ActivePage.Caption = LOCAL_TAB) or (Screen.ActiveForm.Name = 'BattleForm') then
-      TryToAutoCompleteClientName(TSpTBXEdit(Screen.ActiveControl), AllClients)
-    else if PageControl1.ActivePage.Caption[1] = '#' then // a channel tab
-      TryToAutoCompleteClientName(TSpTBXEdit(Screen.ActiveControl), (PageControl1.ActivePage as TMyTabSheet).Clients)
-    else // a private chat tab
-      TryToAutoCompleteClientName(TSpTBXEdit(Screen.ActiveControl), (PageControl1.ActivePage as TMyTabSheet).Clients);
+    //if (PageControl1.ActivePage.Caption = LOCAL_TAB) or (Screen.ActiveForm.Name = 'BattleForm') then
+      TryToAutoCompleteClientName(TSpTBXEdit(Screen.ActiveControl), AllClients);
+    //else if PageControl1.ActivePage.Caption[1] = '#' then // a channel tab
+      //TryToAutoCompleteClientName(TSpTBXEdit(Screen.ActiveControl), (PageControl1.ActivePage as TMyTabSheet).Clients)
+    //else // a private chat tab
+      //TryToAutoCompleteClientName(TSpTBXEdit(Screen.ActiveControl), (PageControl1.ActivePage as TMyTabSheet).Clients);
 
     Exit;
   end;
@@ -9761,14 +9761,14 @@
       Misc.ParseDelimited(parsedHtml,html,' ','');
       if StrToInt(parsedHtml[0]) &gt; BETA_NUMBER then
       begin
-        //if MessageDlgThread('A new beta version of the lobby is available, do you want to download it ?',mtInformation,[mbYes,mbNo],0) = mrYes then
-        //begin
+        if not confirmation or (MessageDlgThread('A new beta version of the lobby is available, do you want to download it ?',mtInformation,[mbYes,mbNo],0) = mrYes) then
+        begin
           //Misc.OpenURLInDefaultBrowser(parsedHtml[1]);
             DownloadFile.URL := parsedHtml[1];
             DownloadFile.FileName := '_AutoUpdateTempFile.7z';
             DownloadFile.ServerOptions := 4;
             PostMessage(HttpGetForm.Handle, WM_STARTDOWNLOAD, 0, 0);
-        //end;
+        end;
       end
       else
         if confirmation then

Modified: trunk/Lobby/TASClient/TASClient.dof
===================================================================
--- trunk/Lobby/TASClient/TASClient.dof	2008-05-11 10:04:29 UTC (rev 5866)
+++ trunk/Lobby/TASClient/TASClient.dof	2008-05-11 11:51:39 UTC (rev 5867)
@@ -115,7 +115,7 @@
 MajorVer=0
 MinorVer=3
 Release=0
-Build=306
+Build=307
 Debug=0
 PreRelease=0
 Special=0
@@ -126,7 +126,7 @@
 [Version Info Keys]
 CompanyName=
 FileDescription=TA Spring lobby client
-FileVersion=0.3.0.306
+FileVersion=0.3.0.307
 InternalName=
 LegalCopyright=
 LegalTrademarks=

Modified: trunk/Lobby/TASClient/TASClient.res
===================================================================
(Binary files differ)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000646.html">[Taspring-linux-commit] r5866 - trunk/tools/ArchiveMover
</A></li>
	<LI>Next message: <A HREF="000648.html">[Taspring-linux-commit] r5868 - in trunk/rts: Game Lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#647">[ date ]</a>
              <a href="thread.html#647">[ thread ]</a>
              <a href="subject.html#647">[ subject ]</a>
              <a href="author.html#647">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
