<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r7245 - in Lobby/TASClient: . Python	Python/scripts/subf
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7245%20-%20in%20Lobby/TASClient%3A%20.%20Python%0A%09Python/scripts/subf&In-Reply-To=%3C20090218164008.7FEA8487FB%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002013.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r7245 - in Lobby/TASClient: . Python	Python/scripts/subf</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7245%20-%20in%20Lobby/TASClient%3A%20.%20Python%0A%09Python/scripts/subf&In-Reply-To=%3C20090218164008.7FEA8487FB%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r7245 - in Lobby/TASClient: . Python	Python/scripts/subf">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Wed Feb 18 17:40:08 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002013.html">[Taspring-linux-commit] r7244 - Lobby/TASClient
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2014">[ date ]</a>
              <a href="thread.html#2014">[ thread ]</a>
              <a href="subject.html#2014">[ subject ]</a>
              <a href="author.html#2014">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: satirik
Date: 2009-02-18 17:40:01 +0100 (Wed, 18 Feb 2009)
New Revision: 7245

Modified:
   Lobby/TASClient/AddBotUnit.pas
   Lobby/TASClient/AddNotificationFormUnit.pas
   Lobby/TASClient/AgreementUnit.pas
   Lobby/TASClient/AutoStartRectsUnit.pas
   Lobby/TASClient/AutoTeamsUnit.pas
   Lobby/TASClient/AwayMessageFormUnit.pas
   Lobby/TASClient/BattleFormUnit.dfm
   Lobby/TASClient/BattleFormUnit.pas
   Lobby/TASClient/ColorPicker.pas
   Lobby/TASClient/ColorsPreferenceUnit.pas
   Lobby/TASClient/CrashDetailsUnit.dfm
   Lobby/TASClient/CrashDetailsUnit.pas
   Lobby/TASClient/CustomColorUnit.dfm
   Lobby/TASClient/CustomColorUnit.pas
   Lobby/TASClient/CustomizeGUIFormUnit.pas
   Lobby/TASClient/DebugUnit.dfm
   Lobby/TASClient/DebugUnit.pas
   Lobby/TASClient/DisableUnitsFormUnit.pas
   Lobby/TASClient/ExceptionUnit.pas
   Lobby/TASClient/HelpUnit.pas
   Lobby/TASClient/HighlightingUnit.pas
   Lobby/TASClient/HostBattleFormUnit.dfm
   Lobby/TASClient/HostBattleFormUnit.pas
   Lobby/TASClient/HostInfoUnit.dfm
   Lobby/TASClient/HostInfoUnit.pas
   Lobby/TASClient/HttpGetUnit.pas
   Lobby/TASClient/IgnoreListUnit.dfm
   Lobby/TASClient/IgnoreListUnit.pas
   Lobby/TASClient/InitWaitFormUnit.dfm
   Lobby/TASClient/InitWaitFormUnit.pas
   Lobby/TASClient/LobbyScriptUnit.pas
   Lobby/TASClient/LoginProgressFormUnit.dfm
   Lobby/TASClient/LoginProgressFormUnit.pas
   Lobby/TASClient/LogonFormUnit.pas
   Lobby/TASClient/MainUnit.dfm
   Lobby/TASClient/MainUnit.pas
   Lobby/TASClient/ManageGroups.pas
   Lobby/TASClient/MapListFormUnit.pas
   Lobby/TASClient/MapSelectionFormUnit.dfm
   Lobby/TASClient/MapSelectionFormUnit.pas
   Lobby/TASClient/MenuFormUnit.pas
   Lobby/TASClient/MinimapZoomedFormUnit.pas
   Lobby/TASClient/MuteListFormUnit.dfm
   Lobby/TASClient/MuteListFormUnit.pas
   Lobby/TASClient/NewAccountUnit.dfm
   Lobby/TASClient/NewAccountUnit.pas
   Lobby/TASClient/NotificationsUnit.dfm
   Lobby/TASClient/NotificationsUnit.pas
   Lobby/TASClient/OnlineMapsUnit.pas
   Lobby/TASClient/PerformFormUnit.dfm
   Lobby/TASClient/PerformFormUnit.pas
   Lobby/TASClient/PreferencesFormUnit.pas
   Lobby/TASClient/ProgressBarWindow.pas
   Lobby/TASClient/Python/api.txt
   Lobby/TASClient/Python/scripts/subf/testHideAutoHosts.py
   Lobby/TASClient/PythonScriptDebugFormUnit.pas
   Lobby/TASClient/ReplaysUnit.pas
   Lobby/TASClient/SearchFormUnit.dfm
   Lobby/TASClient/SearchFormUnit.pas
   Lobby/TASClient/SearchPlayerFormUnit.dfm
   Lobby/TASClient/SearchPlayerFormUnit.pas
   Lobby/TASClient/SetValuesFormUnit.pas
   Lobby/TASClient/SpringDownloaderFormUnit.pas
   Lobby/TASClient/SpringSettingsProfileFormUnit.pas
   Lobby/TASClient/TASClient.dof
   Lobby/TASClient/TASClient.dpr
   Lobby/TASClient/TASClient.res
   Lobby/TASClient/TemplateEditorFormUnit.pas
   Lobby/TASClient/TipsFormUnit.pas
   Lobby/TASClient/UploadReplayUnit.dfm
   Lobby/TASClient/UploadReplayUnit.pas
   Lobby/TASClient/Utility.pas
   Lobby/TASClient/WaitForAckUnit.dfm
   Lobby/TASClient/WaitForAckUnit.pas
Log:
* PYTHON : getreplays shouldn't stop on corrupted replays anymore
* few buttons enlarged
* LOTZ OF VIRUZ AND TROJAN EVERYWHERE !!! IM BACK AND YOULLL PAYYYYYYYYYYYYYYYYYY FOR IT HAHAHA
* translation added with gettext

Modified: Lobby/TASClient/AddBotUnit.pas
===================================================================
--- Lobby/TASClient/AddBotUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/AddBotUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -49,7 +49,7 @@
 implementation
 
 uses
-  MainUnit, Misc, BattleFormUnit, PreferencesFormUnit, Utility;
+  MainUnit, Misc, BattleFormUnit, PreferencesFormUnit, Utility, gnugettext;
 
 var
   BotColorIndex: Integer;
@@ -99,6 +99,8 @@
 
 procedure TAddBotForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
   ChangeTeamColor(0);
@@ -117,7 +119,7 @@
 begin
   if not Misc.VerifyName(BotNameEdit.Text) then
   begin
-    MessageDlg('Bad name. Please choose another!', mtInformation, [mbOK], 0);
+    MessageDlg(_('Bad name. Please choose another one!'), mtInformation, [mbOK], 0);
     Exit;
   end;
 

Modified: Lobby/TASClient/AddNotificationFormUnit.pas
===================================================================
--- Lobby/TASClient/AddNotificationFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/AddNotificationFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -36,7 +36,7 @@
 
 implementation
 
-uses NotificationsUnit, PreferencesFormUnit;
+uses NotificationsUnit, PreferencesFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -54,6 +54,8 @@
 
 procedure TAddNotificationForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
   NotifsComboBox.ItemIndex := 0;
@@ -126,13 +128,13 @@
     begin
       if (Edit2.Text = '') or (Edit2.Text[1] &lt;&gt; '#') then
       begin
-        MessageDlg('Invalid channel name. Make sure you use # in front of channel''s name!', mtWarning, [mbOK], 0);
+        MessageDlg(_('Invalid channel name. Make sure you use # in front of channel''s name!'), mtWarning, [mbOK], 0);
         Exit;
       end;
 
       if not NotificationsForm.AddNotification(nfJoinedChannel, [AnsiString(Edit1.Text), AnsiString(Edit2.Text)]) then
       begin
-        MessageDlg('Unable to add notification. Equivalent notification probably exists already.', mtWarning, [mbOK], 0);
+        MessageDlg(_('Unable to add notification. Equivalent notification probably exists already.'), mtWarning, [mbOK], 0);
         Exit;
       end;
     end;
@@ -141,7 +143,7 @@
     begin
       if not NotificationsForm.AddNotification(nfJoinedBattle, []) then
       begin
-        MessageDlg('Unable to add notification. Equivalent notification probably exists already.', mtWarning, [mbOK], 0);
+        MessageDlg(_('Unable to add notification. Equivalent notification probably exists already.'), mtWarning, [mbOK], 0);
         Exit;
       end;
     end;
@@ -150,7 +152,7 @@
     begin
       if not NotificationsForm.AddNotification(nfJoinedMyHostedBattle, []) then
       begin
-        MessageDlg('Unable to add notification. Equivalent notification probably exists already.', mtWarning, [mbOK], 0);
+        MessageDlg(_('Unable to add notification. Equivalent notification probably exists already.'), mtWarning, [mbOK], 0);
         Exit;
       end;
     end;
@@ -159,7 +161,7 @@
     begin
       if not NotificationsForm.AddNotification(nfStatusInBattle, [AnsiString(Edit1.Text)]) then
       begin
-        MessageDlg('Unable to add notification. Equivalent notification probably exists already.', mtWarning, [mbOK], 0);
+        MessageDlg(_('Unable to add notification. Equivalent notification probably exists already.'), mtWarning, [mbOK], 0);
         Exit;
       end;
     end;
@@ -168,7 +170,7 @@
     begin
       if not NotificationsForm.AddNotification(nfModHosted, [AnsiString(Edit1.Text)]) then
       begin
-        MessageDlg('Unable to add notification. Equivalent notification probably exists already.', mtWarning, [mbOK], 0);
+        MessageDlg(_('Unable to add notification. Equivalent notification probably exists already.'), mtWarning, [mbOK], 0);
         Exit;
       end;
     end;

Modified: Lobby/TASClient/AgreementUnit.pas
===================================================================
--- Lobby/TASClient/AgreementUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/AgreementUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -33,7 +33,7 @@
 implementation
 
 uses
-  PreferencesFormUnit, MainUnit;
+  PreferencesFormUnit, MainUnit, gnugettext;
 
 var
   UserClickedContinue: Boolean = False;
@@ -67,7 +67,7 @@
   begin
     if (Status.ConnectionState &lt;&gt; Connected) then
     begin
-      MainForm.AddMainLog('Unable to send Agreement confirmation to server... Retry later!', Colors.Info);
+      MainForm.AddMainLog(_('Unable to send Agreement confirmation to server... Retry later!'), Colors.Info);
       Exit;
     end;
 
@@ -76,7 +76,7 @@
   end
   else
   begin
-    MainForm.AddMainLog('User has rejected the Agreement ... Disconnecting', Colors.Info);
+    MainForm.AddMainLog(_('User has rejected the Agreement ... Disconnecting'), Colors.Info);
     MainForm.TryToDisconnect;
     Exit;
   end;
@@ -91,6 +91,8 @@
 
 procedure TAgreementForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;

Modified: Lobby/TASClient/AutoStartRectsUnit.pas
===================================================================
--- Lobby/TASClient/AutoStartRectsUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/AutoStartRectsUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -57,7 +57,7 @@
 
 implementation
 
-uses BattleFormUnit, PreferencesFormUnit, MainUnit, Misc;
+uses BattleFormUnit, PreferencesFormUnit, MainUnit, Misc, gnugettext;
 
 {$R *.dfm}
 
@@ -212,13 +212,13 @@
 
   if BattleState.Status &lt;&gt; Hosting then
   begin
-    BattleForm.AddTextToChat('Unable to add start rectangles - only host is allowed change it!', Colors.Info, 1);
+    BattleForm.AddTextToChat(_('Unable to add start rectangles - only host is allowed change it!'), Colors.Info, 1);
     Exit;
   end;
 
   if LastConfiguration.Count = 0 then // this should not really happen
   begin
-    BattleForm.AddTextToChat('Unable to add start rectangles - no rectangles specified!', Colors.Info, 1);
+    BattleForm.AddTextToChat(_('Unable to add start rectangles - no rectangles specified!'), Colors.Info, 1);
     Exit;
   end;
 
@@ -273,6 +273,8 @@
 
 procedure TAutoStartRectsForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   LastConfiguration := TList.Create;
 end;
 

Modified: Lobby/TASClient/AutoTeamsUnit.pas
===================================================================
--- Lobby/TASClient/AutoTeamsUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/AutoTeamsUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -82,7 +82,7 @@
 
 implementation
 
-uses BattleFormUnit, Math, GpIFF, PreferencesFormUnit;
+uses BattleFormUnit, Math, GpIFF, PreferencesFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -562,13 +562,13 @@
 
   if BattleState.Status &lt;&gt; Hosting then
   begin
-    BattleForm.AddTextToChat('Unable to force ally/team numbers - only host allowed to force it!', Colors.Info, 1);
+    BattleForm.AddTextToChat(_('Unable to force ally/team numbers - only host allowed to force it!'), Colors.Info, 1);
     Exit;
   end;
 
   Groups := LastConfiguration;
 
-  BattleForm.AddTextToChat('Forcing team/ally numbers ...', Colors.Info, 1);
+  BattleForm.AddTextToChat(_('Forcing team/ally numbers ...'), Colors.Info, 1);
 
   try
     TeamCounter := 0;
@@ -591,7 +591,7 @@
       end;
     end;
   except
-    BattleForm.AddTextToChat('Unable to force ally/team numbers (player list changed?) - try recreating the preview', Colors.Error, 1);
+    BattleForm.AddTextToChat(_('Unable to force ally/team numbers (player list changed?) - try recreating the preview'), Colors.Error, 1);
     Exit;
   end;
 
@@ -630,6 +630,8 @@
 
 procedure TAutoTeamsForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   ScrollBox1.DoubleBuffered := True;
   Randomizer := TRandomizer.Create;
 end;

Modified: Lobby/TASClient/AwayMessageFormUnit.pas
===================================================================
--- Lobby/TASClient/AwayMessageFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/AwayMessageFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -32,7 +32,7 @@
 
 implementation
 
-uses MainUnit;
+uses MainUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -46,7 +46,7 @@
   i:integer;
 begin
   if (StrLen(MessageRichEdit.Lines.GetText) &lt; 4) then begin
-    MessageDlg('You must enter a message (4 char min) !',mtWarning,[mbOk],0);
+    MessageDlg(_('You must enter a message (4 char min) !'),mtWarning,[mbOk],0);
     Exit;
   end;
   for i:=0 to AllClients.Count-1 do
@@ -68,7 +68,7 @@
   i: integer;
 begin
   if (TitleEdit.Text = '') or (StrLen(MessageRichEdit.Lines.GetText) &lt; 4) then begin
-    MessageDlg('You must enter a title and a message (4 char min) !',mtWarning,[mbOk],0);
+    MessageDlg(_('You must enter a title and a message (4 char min) !'),mtWarning,[mbOk],0);
     Exit;
   end;
   AwayMessages.Titles.Add(TitleEdit.Text);
@@ -80,6 +80,8 @@
 
 procedure TAwayMessageForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;

Modified: Lobby/TASClient/BattleFormUnit.dfm
===================================================================
--- Lobby/TASClient/BattleFormUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/BattleFormUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -1,7 +1,7 @@
 object BattleForm: TBattleForm
-  Left = 867
-  Top = 383
-  Width = 827
+  Left = 551
+  Top = 302
+  Width = 945
   Height = 589
   Caption = 'Battle window'
   Color = clBtnFace
@@ -24,13 +24,13 @@
   object SpTBXTitleBar1: TSpTBXTitleBar
     Left = 0
     Top = 0
-    Width = 819
+    Width = 937
     Height = 562
     Caption = 'Battle window'
     object Panel3: TSpTBXPanel
       Left = 4
       Top = 517
-      Width = 811
+      Width = 929
       Height = 41
       Align = alBottom
       Color = clNone
@@ -39,12 +39,12 @@
       BorderType = pbrRaised
       TBXStyleBackground = True
       DesignSize = (
-        811
+        929
         41)
       object StartButton: TSpTBXButton
-        Left = 104
+        Left = 120
         Top = 8
-        Width = 75
+        Width = 97
         Height = 25
         Caption = 'Start'
         TabOrder = 0
@@ -56,9 +56,9 @@
         LinkFont.Style = [fsUnderline]
       end
       object HostButton: TSpTBXButton
-        Left = 192
+        Left = 224
         Top = 8
-        Width = 75
+        Width = 97
         Height = 25
         Caption = 'Host battle'
         TabOrder = 1
@@ -72,7 +72,7 @@
       object DisconnectButton: TSpTBXButton
         Left = 16
         Top = 8
-        Width = 75
+        Width = 97
         Height = 25
         Caption = 'Disconnect'
         TabOrder = 2
@@ -84,9 +84,9 @@
         LinkFont.Style = [fsUnderline]
       end
       object AddBotButton: TSpTBXButton
-        Left = 372
+        Left = 432
         Top = 8
-        Width = 75
+        Width = 97
         Height = 25
         Caption = 'Add bot'
         TabOrder = 3
@@ -98,7 +98,7 @@
         LinkFont.Style = [fsUnderline]
       end
       object LockedCheckBox: TSpTBXCheckBox
-        Left = 544
+        Left = 640
         Top = 13
         Width = 73
         Height = 15
@@ -119,9 +119,9 @@
         OnGetImageIndex = LockedCheckBoxGetImageIndex
       end
       object AdminButton: TSpTBXButton
-        Left = 280
+        Left = 328
         Top = 8
-        Width = 81
+        Width = 97
         Height = 25
         Caption = 'Admin'
         TabOrder = 5
@@ -133,9 +133,9 @@
         LinkFont.Style = [fsUnderline]
       end
       object LadderRulesButton: TSpTBXButton
-        Left = 725
+        Left = 827
         Top = 8
-        Width = 75
+        Width = 97
         Height = 25
         Caption = 'Ladder'
         Anchors = [akTop, akRight]
@@ -148,9 +148,9 @@
         LinkFont.Style = [fsUnderline]
       end
       object ReadyButton: TSpTBXButton
-        Left = 456
+        Left = 536
         Top = 8
-        Width = 75
+        Width = 97
         Height = 25
         Caption = 'I'#39'm ready'
         TabOrder = 7
@@ -165,9 +165,9 @@
         ThemeType = thtTBX
       end
       object SSProfileButton: TSpTBXButton
-        Left = 640
+        Left = 723
         Top = 8
-        Width = 75
+        Width = 97
         Height = 25
         Hint = 'Spring Settings Profile. Customize them in the options.'
         Caption = 'Settings'
@@ -186,7 +186,7 @@
     object Panel2: TPanel
       Left = 4
       Top = 426
-      Width = 811
+      Width = 929
       Height = 91
       Align = alClient
       TabOrder = 2
@@ -4065,12 +4065,12 @@
     object Panel1: TPanel
       Left = 4
       Top = 30
-      Width = 811
+      Width = 929
       Height = 275
       Align = alTop
       TabOrder = 3
       object Panel5: TPanel
-        Left = 391
+        Left = 509
         Top = 1
         Width = 419
         Height = 273
@@ -4084,7 +4084,7 @@
           Height = 273
           Align = alClient
           Color = clBtnFace
-          ActiveTabIndex = 3
+          ActiveTabIndex = 1
           ThemeType = tttNone
           OnActiveTabChange = SpTBXTabControl1ActiveTabChange
           HiddenItems = &lt;
@@ -4102,6 +4102,7 @@
           end
           object GameOptionsTab: TSpTBXTabItem
             Caption = 'Game options'
+            Checked = True
             CustomWidth = 80
             CustomHeight = 35
             ThemeType = tttNone
@@ -4115,7 +4116,6 @@
           object MapTab: TSpTBXTabItem
             Caption = 'Map options'
             Wrapping = twWrap
-            Checked = True
             CustomWidth = 94
             ThemeType = tttNone
           end
@@ -4228,6 +4228,86 @@
               OnMouseMove = QuickLookRichEditMouseMove
             end
           end
+          object MapTabSheet: TSpTBXTabSheet
+            Left = 0
+            Top = 39
+            Width = 419
+            Height = 234
+            Caption = 'Map options'
+            ImageIndex = -1
+            DesignSize = (
+              419
+              234)
+            TabItem = 'MapTab'
+            object MapOptionsScrollBox: TTntScrollBox
+              Left = 8
+              Top = 48
+              Width = 402
+              Height = 184
+              VertScrollBar.Smooth = True
+              VertScrollBar.Tracking = True
+              Anchors = [akLeft, akTop, akRight, akBottom]
+              BiDiMode = bdLeftToRight
+              BorderStyle = bsNone
+              Color = clBtnFace
+              Ctl3D = False
+              ParentBiDiMode = False
+              ParentBackground = True
+              ParentColor = False
+              ParentCtl3D = False
+              TabOrder = 0
+            end
+            object panelMapOptionsDefault: TSpTBXPanel
+              Left = 8
+              Top = 4
+              Width = 402
+              Height = 41
+              Align = alCustom
+              TabOrder = 1
+              object btLoadDefaultMPO: TSpTBXButton
+                Left = 149
+                Top = 8
+                Width = 113
+                Height = 25
+                Caption = 'Load default'
+                TabOrder = 0
+                OnClick = btLoadDefaultMPOClick
+                LinkFont.Charset = DEFAULT_CHARSET
+                LinkFont.Color = clBlue
+                LinkFont.Height = -11
+                LinkFont.Name = 'MS Sans Serif'
+                LinkFont.Style = [fsUnderline]
+              end
+              object btSetAsDefaultMPO: TSpTBXButton
+                Left = 269
+                Top = 8
+                Width = 113
+                Height = 25
+                Caption = 'Set as default'
+                TabOrder = 1
+                OnClick = btSetAsDefaultMPOClick
+                LinkFont.Charset = DEFAULT_CHARSET
+                LinkFont.Color = clBlue
+                LinkFont.Height = -11
+                LinkFont.Name = 'MS Sans Serif'
+                LinkFont.Style = [fsUnderline]
+              end
+              object btLoadMapsDefaultMPO: TSpTBXButton
+                Left = 29
+                Top = 8
+                Width = 113
+                Height = 25
+                Caption = 'Load map'#39's default'
+                TabOrder = 2
+                OnClick = btLoadMapsDefaultMPOClick
+                LinkFont.Charset = DEFAULT_CHARSET
+                LinkFont.Color = clBlue
+                LinkFont.Height = -11
+                LinkFont.Name = 'MS Sans Serif'
+                LinkFont.Style = [fsUnderline]
+              end
+            end
+          end
           object SpTBXTabSheet1: TSpTBXTabSheet
             Left = 0
             Top = 39
@@ -4531,92 +4611,12 @@
               LinkFont.Style = [fsUnderline]
             end
           end
-          object MapTabSheet: TSpTBXTabSheet
-            Left = 0
-            Top = 39
-            Width = 419
-            Height = 234
-            Caption = 'Map options'
-            ImageIndex = -1
-            DesignSize = (
-              419
-              234)
-            TabItem = 'MapTab'
-            object MapOptionsScrollBox: TTntScrollBox
-              Left = 8
-              Top = 48
-              Width = 402
-              Height = 184
-              VertScrollBar.Smooth = True
-              VertScrollBar.Tracking = True
-              Anchors = [akLeft, akTop, akRight, akBottom]
-              BiDiMode = bdLeftToRight
-              BorderStyle = bsNone
-              Color = clBtnFace
-              Ctl3D = False
-              ParentBiDiMode = False
-              ParentBackground = True
-              ParentColor = False
-              ParentCtl3D = False
-              TabOrder = 0
-            end
-            object panelMapOptionsDefault: TSpTBXPanel
-              Left = 8
-              Top = 4
-              Width = 402
-              Height = 41
-              Align = alCustom
-              TabOrder = 1
-              object btLoadDefaultMPO: TSpTBXButton
-                Left = 149
-                Top = 8
-                Width = 113
-                Height = 25
-                Caption = 'Load default'
-                TabOrder = 0
-                OnClick = btLoadDefaultMPOClick
-                LinkFont.Charset = DEFAULT_CHARSET
-                LinkFont.Color = clBlue
-                LinkFont.Height = -11
-                LinkFont.Name = 'MS Sans Serif'
-                LinkFont.Style = [fsUnderline]
-              end
-              object btSetAsDefaultMPO: TSpTBXButton
-                Left = 269
-                Top = 8
-                Width = 113
-                Height = 25
-                Caption = 'Set as default'
-                TabOrder = 1
-                OnClick = btSetAsDefaultMPOClick
-                LinkFont.Charset = DEFAULT_CHARSET
-                LinkFont.Color = clBlue
-                LinkFont.Height = -11
-                LinkFont.Name = 'MS Sans Serif'
-                LinkFont.Style = [fsUnderline]
-              end
-              object btLoadMapsDefaultMPO: TSpTBXButton
-                Left = 29
-                Top = 8
-                Width = 113
-                Height = 25
-                Caption = 'Load map'#39's default'
-                TabOrder = 2
-                OnClick = btLoadMapsDefaultMPOClick
-                LinkFont.Charset = DEFAULT_CHARSET
-                LinkFont.Color = clBlue
-                LinkFont.Height = -11
-                LinkFont.Name = 'MS Sans Serif'
-                LinkFont.Style = [fsUnderline]
-              end
-            end
-          end
         end
       end
       object Panel6: TPanel
         Left = 1
         Top = 1
-        Width = 390
+        Width = 508
         Height = 273
         Align = alClient
         BevelOuter = bvNone
@@ -4625,7 +4625,7 @@
         object MapPanel: TSpTBXPanel
           Left = 0
           Top = 0
-          Width = 390
+          Width = 508
           Height = 273
           Align = alClient
           Color = clNone
@@ -4634,21 +4634,21 @@
           OnMouseMove = MapPanelMouseMove
           TBXStyleBackground = True
           object MapOptionsPanel: TSpTBXPanel
-            Left = 262
+            Left = 360
             Top = 2
-            Width = 126
+            Width = 146
             Height = 222
             Caption = 'MapOptionsPanel'
             Align = alRight
             TabOrder = 0
             Borders = False
             DesignSize = (
-              126
+              146
               222)
             object SpTBXPanel1: TSpTBXPanel
-              Left = 5
+              Left = 8
               Top = 4
-              Width = 113
+              Width = 130
               Height = 117
               Caption = 'SpTBXPanel1'
               Anchors = [akTop, akRight]
@@ -4659,14 +4659,14 @@
               object Bevel1: TBevel
                 Left = 8
                 Top = 48
-                Width = 97
+                Width = 113
                 Height = 33
                 Shape = bsTopLine
               end
               object MapsButton: TSpTBXButton
                 Left = 8
                 Top = 8
-                Width = 81
+                Width = 97
                 Height = 17
                 Caption = 'Map list ...'
                 TabOrder = 1
@@ -4678,7 +4678,7 @@
                 LinkFont.Style = [fsUnderline]
               end
               object DropDownMapSelectionButton: TSpTBXButton
-                Left = 88
+                Left = 104
                 Top = 8
                 Width = 17
                 Height = 17
@@ -4694,7 +4694,7 @@
               object ReloadMapListButton: TSpTBXButton
                 Left = 8
                 Top = 24
-                Width = 97
+                Width = 113
                 Height = 17
                 Caption = 'Reload map list'
                 TabOrder = 2
@@ -4708,7 +4708,7 @@
               object DownloadMapButton: TSpTBXButton
                 Left = 8
                 Top = 56
-                Width = 97
+                Width = 113
                 Height = 17
                 Caption = 'Download map ...'
                 TabOrder = 3
@@ -4722,7 +4722,7 @@
               object OnlineMapsButton: TSpTBXButton
                 Left = 8
                 Top = 72
-                Width = 97
+                Width = 113
                 Height = 17
                 Caption = 'Online maps ...'
                 TabOrder = 4
@@ -4736,7 +4736,7 @@
               object OnlineModsButton: TSpTBXButton
                 Left = 8
                 Top = 88
-                Width = 97
+                Width = 113
                 Height = 17
                 Caption = 'Online mods ...'
                 TabOrder = 5
@@ -4749,7 +4749,7 @@
               end
             end
             object MapSizeLabel: TSpTBXLabel
-              Left = 40
+              Left = 44
               Top = 128
               Width = 54
               Height = 13
@@ -4762,7 +4762,7 @@
               LinkFont.Style = [fsUnderline]
             end
             object TidalStrengthLabel: TSpTBXLabel
-              Left = 18
+              Left = 22
               Top = 143
               Width = 76
               Height = 13
@@ -4775,7 +4775,7 @@
               LinkFont.Style = [fsUnderline]
             end
             object GravityLabel: TSpTBXLabel
-              Left = 49
+              Left = 53
               Top = 158
               Width = 45
               Height = 13
@@ -4788,7 +4788,7 @@
               LinkFont.Style = [fsUnderline]
             end
             object MaxMetalLabel: TSpTBXLabel
-              Left = 31
+              Left = 35
               Top = 173
               Width = 63
               Height = 13
@@ -4801,7 +4801,7 @@
               LinkFont.Style = [fsUnderline]
             end
             object ExtRadiusLabel: TSpTBXLabel
-              Left = 9
+              Left = 13
               Top = 188
               Width = 85
               Height = 13
@@ -4814,7 +4814,7 @@
               LinkFont.Style = [fsUnderline]
             end
             object WindLabel: TSpTBXLabel
-              Left = 8
+              Left = 12
               Top = 203
               Width = 86
               Height = 13
@@ -4830,7 +4830,7 @@
           object SpTBXPanel3: TSpTBXPanel
             Left = 2
             Top = 224
-            Width = 386
+            Width = 504
             Height = 47
             Caption = 'MapDescPanel'
             Align = alBottom
@@ -4838,7 +4838,7 @@
             object MapDescLabel: TSpTBXLabel
               Left = 2
               Top = 2
-              Width = 382
+              Width = 500
               Height = 43
               Caption = 'MapDescLabel'
               Align = alClient
@@ -4857,7 +4857,7 @@
           object MapsTabs: TSpTBXTabControl
             Left = 2
             Top = 2
-            Width = 260
+            Width = 358
             Height = 222
             Align = alClient
             Color = clBtnFace
@@ -4883,7 +4883,7 @@
             object SpTBXTabSheet4: TSpTBXTabSheet
               Left = 0
               Top = 23
-              Width = 260
+              Width = 358
               Height = 199
               Caption = 'RessourcesMap'
               ImageIndex = -1
@@ -4891,7 +4891,7 @@
               object MetalMapPanel: TSpTBXPanel
                 Left = 2
                 Top = 0
-                Width = 256
+                Width = 354
                 Height = 197
                 Caption = 'MetalMapPanel'
                 Align = alClient
@@ -8668,7 +8668,7 @@
             object SpTBXTabSheet5: TSpTBXTabSheet
               Left = 0
               Top = 23
-              Width = 260
+              Width = 358
               Height = 199
               Caption = 'HeightMap'
               ImageIndex = -1
@@ -8676,7 +8676,7 @@
               object HeightMapPanel: TSpTBXPanel
                 Left = 2
                 Top = 0
-                Width = 256
+                Width = 354
                 Height = 197
                 Caption = 'HeightMapPanel'
                 Align = alClient
@@ -12453,7 +12453,7 @@
             object SpTBXTabSheet3: TSpTBXTabSheet
               Left = 0
               Top = 23
-              Width = 260
+              Width = 358
               Height = 199
               Caption = 'Minimap'
               ImageIndex = -1
@@ -12461,7 +12461,7 @@
               object MinimapPanel: TSpTBXPanel
                 Left = 2
                 Top = 0
-                Width = 256
+                Width = 354
                 Height = 197
                 Align = alClient
                 TabOrder = 0
@@ -12469,12 +12469,12 @@
                 Borders = False
                 TBXStyleBackground = True
                 DesignSize = (
-                  256
+                  354
                   197)
                 object MapImage: TImageEx
                   Left = 0
                   Top = 0
-                  Width = 124
+                  Width = 222
                   Height = 80
                   Cursor = crHandPoint
                   Hint = 'No map'
@@ -12496,7 +12496,7 @@
     object Panel4: TSpTBXPanel
       Left = 4
       Top = 311
-      Width = 811
+      Width = 929
       Height = 109
       Caption = 'Panel4'
       Align = alTop
@@ -12504,12 +12504,12 @@
       BorderType = pbrRaised
       TBXStyleBackground = True
       DesignSize = (
-        811
+        929
         109)
       object VDTBattleClients: TVirtualDrawTree
         Left = 8
         Top = 8
-        Width = 501
+        Width = 619
         Height = 94
         Anchors = [akLeft, akTop, akRight, akBottom]
         Font.Charset = DEFAULT_CHARSET
@@ -12574,7 +12574,7 @@
           end
           item
             Position = 6
-            Width = 32
+            Width = 150
             WideText = 'Player Bonus'
           end
           item
@@ -12596,7 +12596,7 @@
           end&gt;
       end
       object lblTeamNbr: TSpTBXLabel
-        Left = 514
+        Left = 632
         Top = 8
         Width = 44
         Height = 13
@@ -12613,7 +12613,7 @@
         LinkFont.Style = [fsUnderline]
       end
       object MyOptionsGroupBox: TSpTBXGroupBox
-        Left = 561
+        Left = 679
         Top = 5
         Width = 242
         Height = 92
@@ -12727,7 +12727,7 @@
     object Splitter2: TSpTBXSplitter
       Left = 4
       Top = 305
-      Width = 811
+      Width = 929
       Height = 6
       Cursor = crSizeNS
       Caption = 'Splitter1'
@@ -12736,7 +12736,7 @@
     object SpTBXSplitter2: TSpTBXSplitter
       Left = 4
       Top = 420
-      Width = 811
+      Width = 929
       Height = 6
       Cursor = crSizeNS
       Caption = 'SpTBXSplitter2'

Modified: Lobby/TASClient/BattleFormUnit.pas
===================================================================
--- Lobby/TASClient/BattleFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/BattleFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -26,7 +26,7 @@
   HttpProt,MsMultiPartFormData, JvComponentBase, Spin, Mask,
   JvExMask, JvSpin, TntStdCtrls, TntForms, TntComCtrls,RichEdit,JclUnicode,
   RichEdit2, ExRichEdit, class_TIntegerList, TBXLists, Utility, OleCtrls,
-  SHDocVw;
+  SHDocVw,ActnList, gnugettext;
 
 type
 
@@ -1043,7 +1043,7 @@
   tmp := ModList.Count;
   if not Utility.ReInitLib then
   begin
-    MessageDlg('Error initializing unit syncer!', mtError, [mbOK], 0);
+    MessageDlg(_('Error initializing unit syncer!'), mtError, [mbOK], 0);
     Application.Terminate;
   end;
   // update mod list:
@@ -1110,7 +1110,7 @@
   DisplayLuaOptions(ModOptionsList,ModOptionsScrollBox);
   LoadModOptionsDefault(ModName);
   panelModOptionsDefault.Visible := ModOptionsList.Count &gt; 0;
-  ModTab.Caption := 'Mod options ('+IntToStr(ModOptionsList.Count)+')';
+  ModTab.Caption := _('Mod options (')+IntToStr(ModOptionsList.Count)+')';
 end;
 
 procedure TBattleForm.ChangeMapToNoMap(MapName: string);
@@ -1148,13 +1148,13 @@
     TextOut(MapImage.Picture.Bitmap.Width div 2 - TextWidth(s) div 2, MapImage.Picture.Bitmap.Height - TextHeight('X') - 20, s);
   end;
 
-  MapSizeLabel.Caption := 'Map size: ?';
-  TidalStrengthLabel.Caption := 'Tidal strength: ?';
-  GravityLabel.Caption := 'Gravity: ?';
-  MaxMetalLabel.Caption := 'Max. metal: ?';
-  ExtRadiusLabel.Caption := 'Extractor radius: ?';
-  WindLabel.Caption := 'Wind (min/max): ?';
-  MapDescLabel.Caption := 'Description: Click on the minimap to attempt to locate map in the &quot;Online maps&quot; list!';
+  MapSizeLabel.Caption := _('Map size: ?');
+  TidalStrengthLabel.Caption := _('Tidal strength: ?');
+  GravityLabel.Caption := _('Gravity: ?');
+  MaxMetalLabel.Caption := _('Max. metal: ?');
+  ExtRadiusLabel.Caption := _('Extractor radius: ?');
+  WindLabel.Caption := _('Wind (min/max): ?');
+  MapDescLabel.Caption := _('Description: Click on the minimap to attempt to locate map in the &quot;Online maps&quot; list!');
   MapDescLabel.Hint := MapDescLabel.Caption;
 
   FCurrentMapIndex := -1;
@@ -1166,7 +1166,7 @@
   MapHeightWidth := 0;
   MapHeightHeight := 0;
 
-  MapImage.Hint := 'No map';
+  MapImage.Hint := _('No map');
 
   RefreshQuickLookText;
 
@@ -1194,13 +1194,13 @@
       begin
         mapSynced := False;
         if BattleState.Status &lt;&gt; None then
-          AddTextToChat('Your map differs from the host''s one.',Colors.Error,1);
+          AddTextToChat(_('Your map differs from the host''s one.'),Colors.Error,1);
       end;
       if GetModHash(BattleState.Battle.ModName) &lt;&gt; BattleState.Battle.HashCode then
       begin
         modSynced := False;
         if BattleState.Status &lt;&gt; None then
-          AddTextToChat('Your mod differs from the host''s one.',Colors.Error,1);
+          AddTextToChat(_('Your mod differs from the host''s one.'),Colors.Error,1);
       end;
 
       Status.Synced := mapSynced and modSynced;
@@ -1299,15 +1299,15 @@
 
   MapInfo := GetMapItem(MapIndex).MapInfo;
 
-  MapSizeLabel.Caption := 'Map size: '+IntToStr(GetMapItem(MapIndex).MapInfo.Width div 64) + ' x ' + IntToStr(GetMapItem(MapIndex).MapInfo.Height div 64);
-  TidalStrengthLabel.Caption := 'Tidal strength: ' + IntToStr(MapInfo.TidalStrength);
-  GravityLabel.Caption := 'Gravity: ' + IntToStr(MapInfo.Gravity);
-  MaxMetalLabel.Caption := 'Max. metal: ' + Format('%.5g', [MapInfo.Maxmetal]);
-  ExtRadiusLabel.Caption := 'Extractor radius: ' + IntToStr(MapInfo.ExtractorRadius);
+  MapSizeLabel.Caption := _('Map size: ')+IntToStr(GetMapItem(MapIndex).MapInfo.Width div 64) + ' x ' + IntToStr(GetMapItem(MapIndex).MapInfo.Height div 64);
+  TidalStrengthLabel.Caption := _('Tidal strength: ') + IntToStr(MapInfo.TidalStrength);
+  GravityLabel.Caption := _('Gravity: ') + IntToStr(MapInfo.Gravity);
+  MaxMetalLabel.Caption := _('Max. metal: ') + Format('%.5g', [MapInfo.Maxmetal]);
+  ExtRadiusLabel.Caption := _('Extractor radius: ') + IntToStr(MapInfo.ExtractorRadius);
 //  Label6.Caption := 'Min. wind: ' + Format('%.5g', [MapInfo.MinWind]);
 //  Label7.Caption := 'Max. wind: ' + Format('%.5g', [MapInfo.MaxWind]);
-  WindLabel.Caption := 'Wind (min/max): ' + IntToStr(MapInfo.MinWind) + '-' + IntToStr(MapInfo.MaxWind);;
-  MapDescLabel.Caption := 'Description: ' + MapInfo.Description;
+  WindLabel.Caption := _('Wind (min/max): ') + IntToStr(MapInfo.MinWind) + '-' + IntToStr(MapInfo.MaxWind);;
+  MapDescLabel.Caption := _('Description: ') + MapInfo.Description;
   MapDescLabel.Hint := MapDescLabel.Caption;
 
   Preferences.LastOpenMap := GetMapItem(MapIndex).MapName;
@@ -1322,7 +1322,7 @@
   DisplayLuaOptions(BattleForm.MapOptionsList,BattleForm.MapOptionsScrollBox);
   LoadMapOptionsDefault;
   panelMapOptionsDefault.Visible := MapOptionsList.Count &gt; 0;
-  MapTab.Caption := 'Map options ('+IntToStr(BattleForm.MapOptionsList.Count)+')';
+  MapTab.Caption := _('Map options (')+IntToStr(BattleForm.MapOptionsList.Count)+')';
   RefreshQuickLookText;
 
   MinimapPanelResize(nil);
@@ -1375,7 +1375,7 @@
 
   if IsBattleActive and (BattleState.Battle.BattleType = 1) then
   begin
-    MessageDlg('Cannot change map while hosting battle replay!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Cannot change map while hosting battle replay!'), mtWarning, [mbOK], 0);
     MapSelectionForm.MapListBox.ItemIndex := CurrentMapIndex;
     Exit;
   end;
@@ -1408,7 +1408,7 @@
     if TClient(BattleState.Battle.Clients[i]).IP = '' then MainForm.AddMainLog('Error punching through NAT: player''s IP is unknown!', Colors.Error)
     else Misc.SendUDPStrEx(TClient(BattleState.Battle.Clients[i]).IP, TClient(BattleState.Battle.Clients[i]).PublicPort, NATTraversal.MyPrivateUDPSourcePort, 2, 'HELLO'); // what we send doesn't really matter (we can send an empty packet as well).
   except
-    MainForm.AddMainLog('Error while sending UDP packet to ' + TClient(BattleState.Battle.Clients[i]).Name + ' (IP=' + TClient(BattleState.Battle.Clients[i]).IP + ')', Colors.Error);
+    MainForm.AddMainLog(_('Error while sending UDP packet to ') + TClient(BattleState.Battle.Clients[i]).Name + ' (IP=' + TClient(BattleState.Battle.Clients[i]).IP + ')', Colors.Error);
   end;
 end;
 
@@ -1430,7 +1430,7 @@
     ReloadMapListButtonClick(nil);
     if Utility.MapList.indexOf(BattleState.Battle.Map) = -1 then
     begin
-      MessageDlg('You don''t have the map and cannot join the game.',mtWarning,[mbOk],0);
+      MessageDlg(_('You don''t have the map and cannot join the game.'),mtWarning,[mbOk],0);
       Exit;
     end;
   end;
@@ -1441,10 +1441,10 @@
     1: PunchThroughNAT;
     2: for i := 1 {skip the host} to BattleState.Battle.Clients.Count-1 do
        try
-         if TClient(BattleState.Battle.Clients[i]).IP = '' then MainForm.AddMainLog('Error punching through NAT: player''s IP is unknown!', Colors.Error)
+         if TClient(BattleState.Battle.Clients[i]).IP = '' then MainForm.AddMainLog(_('Error punching through NAT: player''s IP is unknown!'), Colors.Error)
          else Misc.SendUDPStrEx(TClient(BattleState.Battle.Clients[i]).IP, FIRST_UDP_SOURCEPORT + i - 1, BattleState.Battle.Port, 2, 'HELLO'); // what we send doesn't really matter (we could probably send an empty packet as well).
        except
-         MainForm.AddMainLog('Error while sending UDP packet to ' + TClient(BattleState.Battle.Clients[i]).Name + ' (IP=' + TClient(BattleState.Battle.Clients[i]).IP + ')', Colors.Error);
+         MainForm.AddMainLog(_('Error while sending UDP packet to ') + TClient(BattleState.Battle.Clients[i]).Name + ' (IP=' + TClient(BattleState.Battle.Clients[i]).IP + ')', Colors.Error);
        end;
     end;
 
@@ -1519,7 +1519,7 @@
   else
   begin
     CloseHandle(BattleState.Process.proc_info.hProcess);
-    Application.MessageBox('Couldn''t execute the application', 'Error', MB_ICONEXCLAMATION);
+    Application.MessageBox(PChar(_('Couldn''t execute the application')), 'Error', MB_ICONEXCLAMATION);
   end;
 end;
 
@@ -1535,7 +1535,7 @@
 
   if BattleState.Status &lt;&gt; None then
   begin // this should NEVER happen!
-    MessageDlg('Error: cannot participate in multiple battles. Please report this error!', mtError, [mbOK], 0);
+    MessageDlg(_('Error: cannot participate in multiple battles. Please report this error!'), mtError, [mbOK], 0);
     Application.Terminate;
     Exit;
   end;
@@ -1622,8 +1622,8 @@
   BattleState.Status := Joined;
 
   ResetStartRects;
-  BattleForm.Caption := 'Battle window (' + BattleState.Battle.ModName + ')'; // this has no effect since battle form was skinned using TSpTBXTitleBar!
-  SpTBXTitleBar1.Caption := 'Battle window (' + BattleState.Battle.ModName + ')';
+  BattleForm.Caption := _('Battle window (') + BattleState.Battle.ModName + ')'; // this has no effect since battle form was skinned using TSpTBXTitleBar!
+  SpTBXTitleBar1.Caption := _('Battle window (') + BattleState.Battle.ModName + ')';
 
   if Utility.MapList.IndexOf(BattleState.Battle.Map) = -1 then
     SpringDownloaderFormUnit.DownloadMap(BattleState.Battle.MapHash,BattleState.Battle.Map,True);
@@ -1649,7 +1649,7 @@
 
   if BattleState.Status &lt;&gt; None then
   begin // this should NEVER happen!
-    MessageDlg('Error: cannot participate in multiple battles. Please report this error!', mtError, [mbOK], 0);
+    MessageDlg(_('Error: cannot participate in multiple battles. Please report this error!'), mtError, [mbOK], 0);
     Application.Terminate;
     Exit;
   end;
@@ -1712,8 +1712,8 @@
   BattleState.Status := Joined;
 
   ResetStartRects;
-  BattleForm.Caption := 'Battle window (' + BattleState.Battle.ModName + ')'; // this has no effect since battle form was skinned using TSpTBXTitleBar!
-  SpTBXTitleBar1.Caption := 'Battle window (' + BattleState.Battle.ModName + ')';
+  BattleForm.Caption := _('Battle window (') + BattleState.Battle.ModName + ')'; // this has no effect since battle form was skinned using TSpTBXTitleBar!
+  SpTBXTitleBar1.Caption := _('Battle window (') + BattleState.Battle.ModName + ')';
 
   if Utility.MapList.IndexOf(BattleState.Battle.Map) = -1 then
     SpringDownloaderFormUnit.DownloadMap(BattleState.Battle.MapHash,BattleState.Battle.Map);
@@ -1806,8 +1806,8 @@
   BattleState.Status := Hosting;
 
   ResetStartRects;
-  BattleForm.Caption := 'Battle window (' + BattleState.Battle.ModName + ')'; // this has no effect since battle form was skinned using TSpTBXTitleBar!
-  SpTBXTitleBar1.Caption := 'Battle window (' + BattleState.Battle.ModName + ')';
+  BattleForm.Caption := _('Battle window (') + BattleState.Battle.ModName + ')'; // this has no effect since battle form was skinned using TSpTBXTitleBar!
+  SpTBXTitleBar1.Caption := _('Battle window (') + BattleState.Battle.ModName + ')';
 
   Result := True;
 
@@ -1830,11 +1830,11 @@
     LoadMapOptionsDefault;
     panelMapOptionsDefault.Visible := MapOptionsList.Count &gt; 0;
   end;
-  MapTab.Caption := 'Map options ('+IntToStr(BattleForm.MapOptionsList.Count)+')';
+  MapTab.Caption := _('Map options (')+IntToStr(BattleForm.MapOptionsList.Count)+')';
 
   LoadDefaultButtonClick(nil);
 
-  AddTextToChat('Battle opened', Colors.Info, 1);
+  AddTextToChat(_('Battle opened'), Colors.Info, 1);
 
   RefreshQuickLookText;
 
@@ -1902,13 +1902,13 @@
   VDTBattleClients.Header.Columns[8].MinWidth := 0;
   VDTBattleClients.Header.Columns[8].MaxWidth := 0;
 
-  AddTextToChat('Battle replay opened', Colors.Info, 1);
+  AddTextToChat(_('Battle replay opened'), Colors.Info, 1);
 
   BattleState.Status := Hosting;
 
   ResetStartRects;
-  BattleForm.Caption := 'Battle window (' + BattleState.Battle.ModName + ')'; // this has no effect since battle form was skinned using TSpTBXTitleBar!
-  SpTBXTitleBar1.Caption := 'Battle window (' + BattleState.Battle.ModName + ')';
+  BattleForm.Caption := _('Battle window (') + BattleState.Battle.ModName + ')'; // this has no effect since battle form was skinned using TSpTBXTitleBar!
+  SpTBXTitleBar1.Caption := _('Battle window (') + BattleState.Battle.ModName + ')';
 
   // add boxes
   i:=0;
@@ -1926,7 +1926,7 @@
   DisplayLuaOptions(BattleForm.MapOptionsList,BattleForm.MapOptionsScrollBox);
   LoadMapOptionsDefault;
   panelMapOptionsDefault.Visible := MapOptionsList.Count &gt; 0;
-  MapTab.Caption := 'Map options ('+IntToStr(BattleForm.MapOptionsList.Count)+')';
+  MapTab.Caption := _('Map options (')+IntToStr(BattleForm.MapOptionsList.Count)+')';
 
   // disable mod options
   for i := 0 to ModOptionsList.Count-1 do
@@ -1938,7 +1938,7 @@
 
   if not ApplyScriptFile(BattleReplayInfo.Script) then
   begin
-    MessageDlg('Unexpected inconsistency error: Script file is corrupt! Cannot host this replay.', mtError, [mbOK], 0);
+    MessageDlg(_('Unexpected inconsistency error: Script file is corrupt! Cannot host this replay.'), mtError, [mbOK], 0);
     BattleForm.DisconnectButtonClick(nil);
     Exit;
   end;
@@ -1959,7 +1959,7 @@
 begin
   if IsBattleActive then
   begin
-    AddTextToChat('Battle closed', Colors.Info, 1);
+    AddTextToChat(_('Battle closed'), Colors.Info, 1);
     if not Preferences.DisableAllSounds then PlayResSound('battle');
   end;
 
@@ -2002,7 +2002,7 @@
   AddBotButton.Enabled := False;
 
   ResetStartRects;
-  BattleForm.Caption := 'Battle window'; // this has no effect since battle form was skinned using TSpTBXTitleBar!
+  BattleForm.Caption := _('Battle window'); // this has no effect since battle form was skinned using TSpTBXTitleBar!
   SpTBXTitleBar1.Caption := 'Battle window';
 
   // custom options reset
@@ -2012,8 +2012,8 @@
     Utility.UnLoadLuaOptions(MapOptionsList);
   panelModOptionsDefault.Visible := false;
   panelMapOptionsDefault.Visible := false;
-  ModTabSheet.Caption := 'Mod options (0)';
-  MapTabSheet.Caption := 'Map options (0)';
+  ModTabSheet.Caption := _('Mod options (0)');
+  MapTabSheet.Caption := _('Map options (0)');
   if UnknownScriptTagList.CompleteKeyList &lt;&gt; nil then
     UnknownScriptTagList.CompleteKeyList.Clear;
   if UnknownScriptTagList.ValueList &lt;&gt; nil then
@@ -2093,7 +2093,7 @@
 
           Inc(count);
         end;
-        if count = 0 then raise Exception.Create('Corrupt script file!');
+        if count = 0 then raise Exception.Create(_('Corrupt script file!'));
 
         count := 0;
         while True do
@@ -2102,17 +2102,17 @@
           if tmp = '' then break;
           ally := StrToInt(tmp);
           tmp := Script.ReadKeyValue('GAME/TEAM'+IntToStr(count)+'/RGBCOLOR');
-          if tmp = '' then raise Exception.Create('Corrupt script file!');
+          if tmp = '' then raise Exception.Create(_('Corrupt script file!'));
           sl := StringParser.ParseString(tmp, ' ');
           if sl.Count &lt;&gt; 3 then raise Exception.Create('Corrupt script file!');
           color := Misc.PackRGB(StrToFloat(sl[0]), StrToFloat(sl[1]), StrToFloat(sl[2]));
           tmp := Script.ReadKeyValue('GAME/TEAM'+IntToStr(count)+'/SIDE');
-          if tmp = '' then raise Exception.Create('Corrupt script file!');
+          if tmp = '' then raise Exception.Create(_('Corrupt script file!'));
           SideList.CaseSensitive := False;
           side := SideList.IndexOf(tmp);
           if side = -1 then raise Exception.Create('Corrupt script file!');
           tmp := Script.ReadKeyValue('GAME/TEAM'+IntToStr(count)+'/HANDICAP');
-          if tmp = '' then raise Exception.Create('Corrupt script file!');
+          if tmp = '' then raise Exception.Create(_('Corrupt script file!'));
           handicap := StrToInt(tmp);
 
           for c := 0 to BattleReplayInfo.OriginalClients.Count-1 do
@@ -2126,7 +2126,7 @@
 
           Inc(count);
         end;
-        if count = 0 then raise Exception.Create('Corrupt script file!');
+        if count = 0 then raise Exception.Create(_('Corrupt script file!'));
 
         for i := 0 to ModOptionsList.Count-1 do
         begin
@@ -2157,7 +2157,7 @@
         if GameEndRadioGroup.Visible then
           gamemode := Script.ReadGameMode2;
       except
-        raise Exception.Create('Corrupted script file!');
+        raise Exception.Create(_('Corrupted script file!'));
       end;
     finally
       Script.Free;
@@ -2227,7 +2227,7 @@
   i := ModList.IndexOf(BattleState.Battle.ModName);
   if i = -1 then
   begin
-    MessageDlg('Error: mod not found (' + BattleState.Battle.ModName + ')', mtError, [mbOK], 0);
+    MessageDlg(_('Error: mod not found (') + BattleState.Battle.ModName + ')', mtError, [mbOK], 0);
     Application.Terminate;
     Exit;
   end;
@@ -2376,7 +2376,7 @@
         index := MainForm.GetClientIndexEx(TBot(BattleState.Battle.Bots[PurgedClients[j].ClientIndex]).OwnerName, BattleState.Battle.Clients);
         if index = -1 then
         begin
-          MessageDlg('Error: bot owner not found in client list. Generating script file failed!', mtError, [mbOK], 0);
+          MessageDlg(_('Error: bot owner not found in client list. Generating script file failed!'), mtError, [mbOK], 0);
           Exit;
         end;
         Script.AddOrChangeKeyValue('GAME/TEAM'+IntToStr(i)+'/TeamLeader',IntToStr(index));
@@ -2538,6 +2538,8 @@
   i:integer;
   mask: Word;
 begin
+  TranslateComponent(self);
+
   Left := 10;
   Top := 10;
   BattleState.DisabledUnits := TStringList.Create;
@@ -2639,26 +2641,26 @@
   if not isBattleReadyToStart then
   begin
     StartButton.Enabled := False;
-    if not LobbyScriptUnit.ScriptStart then MessageDlg('The battle is not ready to start!', mtInformation, [mbOK], 0);
+    if not LobbyScriptUnit.ScriptStart then MessageDlg(_('The battle is not ready to start!'), mtInformation, [mbOK], 0);
     Exit;
   end;
 
   if not BattleState.Battle.AreAllBotsSet then
   begin
-    if not LobbyScriptUnit.ScriptStart then MessageDlg('Two or more bots share the same team number. Please change that!', mtInformation, [mbOK], 0);
+    if not LobbyScriptUnit.ScriptStart then MessageDlg(_('Two or more bots share the same team number. Please change that!'), mtInformation, [mbOK], 0);
     Exit;
   end;
 
   if BattleState.Battle.Clients.Count &gt; MAX_PLAYERS then
   begin
-    if not LobbyScriptUnit.ScriptStart then MessageDlg('Too many players (spring supports up to ' + IntToStr(MAX_PLAYERS) + ' players)!', mtWarning, [mbOK], 0);
+    if not LobbyScriptUnit.ScriptStart then MessageDlg(_('Too many players (spring supports up to ') + IntToStr(MAX_PLAYERS) + _(' players)!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
   if BattleState.Battle.BattleType = 1 then // we're hosting an online replay
     if BattleReplayInfo.OriginalClients.Count + BattleState.Battle.Clients.Count &gt; MAX_PLAYERS then
     begin
-      if not LobbyScriptUnit.ScriptStart then MessageDlg('Too many players (spring supports up to ' + IntToStr(MAX_PLAYERS) + ' players, original players from the demo included)!', mtWarning, [mbOK], 0);
+      if not LobbyScriptUnit.ScriptStart then MessageDlg(_('Too many players (spring supports up to ') + IntToStr(MAX_PLAYERS) + _(' players, original players from the demo included)!'), mtWarning, [mbOK], 0);
       Exit;
     end;
 
@@ -2670,7 +2672,7 @@
     res := InitWaitForm.ShowModal;
     if res &lt;&gt; mrOK then
     begin
-      if not LobbyScriptUnit.ScriptStart then MessageDlg('Unable to acquire UDP source port from server. Try choosing another NAT traversal technique!', mtWarning, [mbOK], 0);
+      if not LobbyScriptUnit.ScriptStart then MessageDlg(_('Unable to acquire UDP source port from server. Try choosing another NAT traversal technique!'), mtWarning, [mbOK], 0);
       Exit;
     end;
   end;
@@ -2787,7 +2789,7 @@
   MinimapZoomedForm.Image1.Canvas.StretchDraw(Rect(0, 0, MinimapZoomedForm.Image1.Width, MinimapZoomedForm.Image1.Height), TImage(Sender).Picture.Bitmap);
   MinimapZoomedForm.DrawBoxes;
   MinimapZoomedForm.DrawStartPositions(GetMapItem(CurrentMapIndex).MapInfo,MinimapZoomedForm.Image1);
-  MinimapZoomedForm.Caption := 'Minimap (' + Utility.MapList[CurrentMapIndex] + ', ' + IntToStr(GetMapItem(CurrentMapIndex).MapInfo.Width div 64) + ' x ' + IntToStr(GetMapItem(CurrentMapIndex).MapInfo.Height div 64) + ')';
+  MinimapZoomedForm.Caption := _('Minimap (') + Utility.MapList[CurrentMapIndex] + ', ' + IntToStr(GetMapItem(CurrentMapIndex).MapInfo.Width div 64) + ' x ' + IntToStr(GetMapItem(CurrentMapIndex).MapInfo.Height div 64) + ')';
   MinimapZoomedForm.Position := poScreenCenter;
   MinimapZoomedForm.ShowModal;
 end;
@@ -3366,7 +3368,7 @@
   UploadReplayForm.FileName := FileName;
 
   if BattleState.LadderIndex &gt;= 0 then
-    UploadReplayForm.Description := 'Ladder battle : ' + TLadder(LadderList[BattleState.LadderIndex]).Name;
+    UploadReplayForm.Description := _('Ladder battle : ') + TLadder(LadderList[BattleState.LadderIndex]).Name;
 
   UploadReplayForm.UploadedReplayId := '';
   UploadReplayForm.AutoUpload := True;
@@ -3423,7 +3425,7 @@
     end
     else
     begin
-      MessageDlgThread('Error : infolog.txt or script.txt not found !',mtError,[mbOk],0);
+      MessageDlgThread(_('Error : infolog.txt or script.txt not found !'),mtError,[mbOk],0);
       MultiPartFormDataStream.Free;
       ResponseStream.Free;
       Exit;
@@ -3447,7 +3449,7 @@
   Misc.ParseDelimited(ResponseStrList,ResponseStr,' ','');
   if (ResponseStrList.Count &gt; 0) and (ResponseStrList[0] = 'notice') then begin
     ResponseStrList.Delete(0);
-    MainForm.TryToSendCommand('SAYBATTLEEX', 'has successfully reported the game.');
+    MainForm.TryToSendCommand('SAYBATTLEEX', _('has successfully reported the game.'));
     MessageDlgThread(Misc.JoinStringList(ResponseStrList,' '), mtInformation,[mbOk], 0);
   end
   else
@@ -3490,7 +3492,7 @@
     end;
 
     if IsBattleActive then
-      if (msgLines.Count &lt;= 10) or (MessageDlg('You are about to send a '+IntToStr(msgLines.Count)+ ' lines message.'+EOL+EOL+'Do you really want to send it ?',mtConfirmation,[mbYes,mbNo],0) = mrYes) then
+      if (msgLines.Count &lt;= 10) or (MessageDlg(_('You are about to send a ')+IntToStr(msgLines.Count)+ _(' lines message.')+EOL+EOL+_('Do you really want to send it ?'),mtConfirmation,[mbYes,mbNo],0) = mrYes) then
         for i:=0 to msgLines.Count-1 do
           MainForm.TryToSendCommand('SAYBATTLE',msgLines[i]);
   end
@@ -3694,7 +3696,7 @@
 
 procedure TBattleForm.SetDefaultButtonClick(Sender: TObject);
 begin
-  if MessageDlg('Do you wish to save current battle settings as default?', mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
+  if MessageDlg(_('Do you wish to save current battle settings as default?'), mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
   PreferencesForm.SaveDefaultBattlePreferencesToRegistry;
 end;
 
@@ -4586,7 +4588,7 @@
           if TClient(BattleState.Battle.Clients[RealIndex]).CurrentLadderRating = 0 then
           begin
             Canvas.Brush.Color := clRed;
-            Canvas.TextOut(R.Left + Pos, R.Top,'No ladder account.');
+            Canvas.TextOut(R.Left + Pos, R.Top,_('No ladder account.'));
           end
           else if TClient(BattleState.Battle.Clients[RealIndex]).CurrentLadderRating = -2 then
             Canvas.TextOut(R.Left + Pos, R.Top,'n/a')
@@ -4711,7 +4713,7 @@
       if mnuBlockTeams.Checked then
         TClient(BattleState.Battle.Clients[RealIndex]).SetTeamNo(team);
       MainForm.TryToSendCommand('FORCETEAMNO', TClient(BattleState.Battle.Clients[RealIndex]).Name + ' ' + IntToStr(team));
-      AddTextToChat('Forcing ' + TClient(BattleState.Battle.Clients[RealIndex]).Name + '''s team number ...', Colors.Info, 1);
+      AddTextToChat(_('Forcing ') + TClient(BattleState.Battle.Clients[RealIndex]).Name + _('''s team number ...'), Colors.Info, 1);
     end
     else if WhatToDraw = NormalBot then
     begin
@@ -4806,7 +4808,7 @@
       if mnuBlockTeams.Checked then
         TClient(BattleState.Battle.Clients[RealIndex]).SetAllyNo(ally);
       MainForm.TryToSendCommand('FORCEALLYNO', TClient(BattleState.Battle.Clients[RealIndex]).Name + ' ' + IntToStr(ally));
-      AddTextToChat('Forcing ' + TClient(BattleState.Battle.Clients[RealIndex]).Name + '''s ally number ...', Colors.Info, 1);
+      AddTextToChat(_('Forcing ') + TClient(BattleState.Battle.Clients[RealIndex]).Name + _('''s ally number ...'), Colors.Info, 1);
     end
     else if WhatToDraw = NormalBot then
     begin
@@ -4948,7 +4950,7 @@
 procedure TBattleForm.ReadyButtonClick(Sender: TObject);
 begin
   if (BattleState.LadderIndex &gt; -1) and (Preferences.LadderPassword = '') and not SpectateCheckBox.Checked then begin
-    MessageDlg('You must enter your ladder password or register a ladder account in the Options/Account first !',mtWarning,[mbOk],0);
+    MessageDlg(_('You must enter your ladder password or register a ladder account in the Options/Account first !'),mtWarning,[mbOk],0);
     PreferencesForm.SpTBXTabControl1.ActiveTabIndex := 1;
     PreferencesForm.ShowModal;
     if Preferences.LadderPassword = '' then
@@ -4958,7 +4960,7 @@
   // check if user has the correct map before readying up:
   if (not BattleForm.AmIReady) and (Utility.MapList.IndexOf(BattleState.Battle.Map) = -1) then
   begin
-    MessageDlg('Please download the map before readying up. You can do this by clicking on the minimap area or the &quot;more maps&quot; label, which will open integrated map downloader', mtWarning, [mbOK], 0);
+    MessageDlg(_('Please download the map before readying up. You can do this by clicking on the minimap area or the &quot;more maps&quot; label, which will open integrated map downloader'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
@@ -4968,10 +4970,10 @@
 procedure TBattleForm.SpTBXItem4Click(Sender: TObject);
 begin
   if AddBotForm.Visible then
-    Misc.InputColor('Color Picker',clBlack)
+    Misc.InputColor(_('Color Picker'),clBlack)
   else
   begin
-    Misc.InputColor('Color Picker',Status.Me.TeamColor);
+    Misc.InputColor(_('Color Picker'),Status.Me.TeamColor);
     ChangeTeamColor(MyTeamColorIndex, True);
   end;
 end;
@@ -4987,12 +4989,12 @@
     GetNodeClient(VDTBattleClients.FocusedNode.Index,RealIndex,WhatToDraw);
     if WhatToDraw = NormalClient then
     begin
-      color := Misc.InputColor('Color Picker',TClient(BattleState.Battle.Clients[RealIndex]).TeamColor);
+      color := Misc.InputColor(_('Color Picker'),TClient(BattleState.Battle.Clients[RealIndex]).TeamColor);
       MainForm.TryToSendCommand('FORCETEAMCOLOR', TClient(BattleState.Battle.Clients[RealIndex]).Name + ' ' + IntToStr(color));
     end
     else if WhatToDraw = NormalBot then
     begin
-      color := Misc.InputColor('Color Picker',TClient(BattleState.Battle.Bots[RealIndex]).TeamColor);
+      color := Misc.InputColor(_('Color Picker'),TClient(BattleState.Battle.Bots[RealIndex]).TeamColor);
       TBot(BattleState.Battle.Bots[RealIndex]).TeamColor := color;
       MainForm.TryToSendCommand('UPDATEBOT', TBot(BattleState.Battle.Bots[RealIndex]).Name + ' ' + IntToStr(TBot(BattleState.Battle.Bots[RealIndex]).BattleStatus) + ' ' + IntToStr(TBot(BattleState.Battle.Bots[RealIndex]).TeamColor));
     end;
@@ -5013,7 +5015,7 @@
   if (BattleState.Status = Hosting) and (BattleState.Battle.BattleType = 1) then
   begin
     // this should not happen though since we don't allow player to host a replay if he doesn't have the correct map!
-    MessageDlg('Cannot reload map list while hosting online replay!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Cannot reload map list while hosting online replay!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
@@ -5097,7 +5099,7 @@
     if WhatToDraw = NormalClient then
     begin
       MainForm.TryToSendCommand('FORCESPECTATORMODE', TClient(BattleState.Battle.Clients[RealIndex]).Name);
-      AddTextToChat('Forcing spectator mode on ' + TClient(BattleState.Battle.Clients[RealIndex]).Name + ' ...', Colors.Info, 1);
+      AddTextToChat(_('Forcing spectator mode on ') + TClient(BattleState.Battle.Clients[RealIndex]).Name + ' ...', Colors.Info, 1);
     end;
   end;
 end;
@@ -5420,12 +5422,12 @@
     ClientGroup := Client.GetGroup;
 
     if ClientGroup &lt;&gt; nil then begin
-      mnuAddToGroup.Caption := 'Move to group';
+      mnuAddToGroup.Caption := _('Move to group');
       mnuRemoveFromGroup.Enabled := True;
     end
     else
     begin
-      mnuAddToGroup.Caption := 'Add to group';
+      mnuAddToGroup.Caption := _('Add to group');
       mnuRemoveFromGroup.Enabled := False;
     end;
 
@@ -5702,7 +5704,7 @@
       try
         HttpCli3.Get;
       except
-        MainForm.AddMainLog('Error: Ladder server unavailable.', Colors.Error);
+        MainForm.AddMainLog(_('Error: Ladder server unavailable.'), Colors.Error);
         Exit;
       end;
       HttpCli3.RcvdStream.Seek(0,0);
@@ -5775,7 +5777,7 @@
 begin
     MapSelectionForm.MapListBox.Enabled := false;
     MapSelectionForm.MapListBox.Items.Clear;
-    MapSelectionForm.MapListBox.Items.Add('Loading ladder map list ...');
+    MapSelectionForm.MapListBox.Items.Add(_('Loading ladder map list ...'));
     BattleForm.StartButton.Enabled := False;
 end;
 
@@ -5834,7 +5836,7 @@
         //MainForm.AddMainLog('Error: Ladder map list unavailable :'+IntToStr(TLadder(LadderList[BattleState.LadderIndex]).id), Colors.Error);
         UpdateMessageStatus('Error: Ladder server unavailable.');
         Finalize(isBattleReadyToStart);
-        MessageDlgThread('The ladder server is unavailable, if the ladder url has changed you may fix this by updating your lobby.',mtError,[mbOk],0);
+        MessageDlgThread(_('The ladder server is unavailable, if the ladder url has changed you may fix this by updating your lobby.'),mtError,[mbOk],0);
         Synchronize(BattleForm.DisconnectButtonClick);
         Exit;
       end;
@@ -5845,7 +5847,7 @@
 
     if html = '' then
     begin
-      UpdateMessageStatus('Error: Empty map list.');
+      UpdateMessageStatus(_('Error: Empty map list.'));
       Finalize(False);
       Exit;
     end;
@@ -5886,9 +5888,9 @@
           end;
         end;
         if sl.Count = 0 then
-          MessageDlgThread('You can''t play this ladder with that mod because no map from the ladder is valid for this mod.', mtWarning, [mbOK], 0)
+          MessageDlgThread(_('You can''t play this ladder with that mod because no map from the ladder is valid for this mod.'), mtWarning, [mbOK], 0)
         else
-          MessageDlgThread('To host this ladder battle, you need at least one of the following map :'+EOL+Misc.JoinStringList(sl,' ; '), mtWarning, [mbOK], 0);
+          MessageDlgThread(_('To host this ladder battle, you need at least one of the following map :')+EOL+Misc.JoinStringList(sl,' ; '), mtWarning, [mbOK], 0);
         Finalize(false);
         Exit;
       end;
@@ -5987,19 +5989,19 @@
 
 procedure TBattleForm.lblMetalClick(Sender: TObject);
 begin
-  MetalTracker.Value := Misc.InputBoxInteger('Custom value','Enter value :',MetalTracker.Value,MetalTracker.Minimum,MetalTracker.Maximum);
+  MetalTracker.Value := Misc.InputBoxInteger(_('Custom value'),_('Enter value :'),MetalTracker.Value,MetalTracker.Minimum,MetalTracker.Maximum);
   MetalTrackerMouseUpAfterChange(nil);
 end;
 
 procedure TBattleForm.lblEnergyClick(Sender: TObject);
 begin
-  EnergyTracker.Value := Misc.InputBoxInteger('Custom value','Enter value :',EnergyTracker.Value,EnergyTracker.Minimum,EnergyTracker.Maximum);
+  EnergyTracker.Value := Misc.InputBoxInteger(_('Custom value'),_('Enter value :'),EnergyTracker.Value,EnergyTracker.Minimum,EnergyTracker.Maximum);
   EnergyTrackerMouseUpAfterChange(nil);
 end;
 
 procedure TBattleForm.lblUnitsClick(Sender: TObject);
 begin
-  UnitsTracker.Value := Misc.InputBoxInteger('Custom value','Enter units :',UnitsTracker.Value,UnitsTracker.Minimum,UnitsTracker.Maximum);
+  UnitsTracker.Value := Misc.InputBoxInteger(_('Custom value'),_('Enter units :'),UnitsTracker.Value,UnitsTracker.Minimum,UnitsTracker.Maximum);
   UnitsTrackerMouseUpAfterChange(nil);
 end;
 
@@ -6073,7 +6075,7 @@
 begin
   for i:=0 to DescriptionList.Count-1 do
     msg := msg + EOL + '     ' + NameList[i] + ' = ' + DescriptionList[i];
-  MessageBox(BattleForm.Handle,PAnsiChar(Self.Name + ' : ' + Self.Description+EOL+msg),PAnsiChar('Mod option description'),MB_OK);
+  MessageBox(BattleForm.Handle,PAnsiChar(Self.Name + ' : ' + Self.Description+EOL+msg),PAnsiChar(_('Mod option description')),MB_OK);
 end;
 
 function TLuaOption.GetComponent(AOwner: TWinControl;luaOptionList: TList): TWinControl;
@@ -6752,7 +6754,7 @@
 begin
   VDTDisabledUnits.Clear;
   VDTDisabledUnits.RootNodeCount := BattleState.DisabledUnits.Count;
-  DisabledUnitsTab.Caption := 'Disabled Units ('+IntToStr(BattleState.DisabledUnits.Count)+')';
+  DisabledUnitsTab.Caption := _('Disabled Units (')+IntToStr(BattleState.DisabledUnits.Count)+')';
 end;
 
 procedure TBattleForm.VDTDisabledUnitsDrawNode(Sender: TBaseVirtualTree;
@@ -7151,7 +7153,7 @@
     Exit;
   end;
 
-  AddTitle('Game options');
+  AddTitle(_('Game options'));
   AddLine('Start position',StartPosRadioGroup.Items[StartPosRadioGroup.ItemIndex],StartPosRadioGroup.ItemIndex &lt;&gt; StartPosRadioGroup.Tag,StartPosRadioGroup.Hint);
   if GameEndRadioGroup.Visible and (GameEndRadioGroup.ItemIndex &gt; -1) then
     AddLine('Game end condition',GameEndRadioGroup.Items[GameEndRadioGroup.ItemIndex],GameEndRadioGroup.ItemIndex &lt;&gt; GameEndRadioGroup.Tag,GameEndRadioGroup.Hint);
@@ -7164,7 +7166,7 @@
 
   if ModOptionsList.Count &gt; 0 then
   begin
-    AddTitle('Mod options');
+    AddTitle(_('Mod options'));
     for i:=0 to ModOptionsList.Count-1 do
       if TLuaOption(ModOptionsList[i]).ClassType &lt;&gt; TLuaOptionSection then
         if TLuaOption(ModOptionsList[i]).ClassType = TLuaOptionBool then
@@ -7178,7 +7180,7 @@
 
   if MapOptionsList.Count &gt; 0 then
   begin
-    AddTitle('Map options');
+    AddTitle(_('Map options'));
     for i:=0 to MapOptionsList.Count-1 do
       if TLuaOption(MapOptionsList[i]).ClassType &lt;&gt; TLuaOptionSection then
         if TLuaOption(MapOptionsList[i]).ClassType = TLuaOptionBool then
@@ -7192,7 +7194,7 @@
 
   if BattleState.DisabledUnits.Count &gt; 0 then
   begin
-    AddTitle('Disabled units');
+    AddTitle(_('Disabled units'));
     SetNormalAttr;
     QuickLookRichEdit.SelText := BattleState.DisabledUnits.Text;
   end;

Modified: Lobby/TASClient/ColorPicker.pas
===================================================================
--- Lobby/TASClient/ColorPicker.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/ColorPicker.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -5,7 +5,7 @@
 uses
   Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
   Dialogs, ExtCtrls,Misc, SpTBXItem, SpTBXControls, StdCtrls, TBXDkPanels,
-  TB2Item, TBX, TBXToolPals, TB2Dock, TB2Toolbar, SpTBXEditors;
+  TB2Item, TBX, TBXToolPals, TB2Dock, TB2Toolbar, SpTBXEditors, gnugettext;
 
 type
   TColorPickerForm = class(TForm)
@@ -102,6 +102,8 @@
   t:TColor;
   i,j: integer;
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
   isSndGradiantMouseDown := False;
@@ -377,7 +379,7 @@
     try
       Color := Misc.HexToInt(txtColorHex.Text);
     except
-      MessageDlg('You must enter a valid hexadecimal number.', mtError, [mbOK], 0);
+      MessageDlg(_('You must enter a valid hexadecimal number.'), mtError, [mbOK], 0);
       Exit;
     End;
     txtR.Text := IntToStr(Misc.ColorToB(Color));

Modified: Lobby/TASClient/ColorsPreferenceUnit.pas
===================================================================
--- Lobby/TASClient/ColorsPreferenceUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/ColorsPreferenceUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -100,64 +100,66 @@
 
 implementation
 
-uses ColorPicker, BattleFormUnit;
+uses ColorPicker, BattleFormUnit, gnugettext;
 
 {$R *.dfm}
 
 procedure TColorsPreference.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;
 
 procedure TColorsPreference.SpTBXButton0Click(Sender: TObject);
 begin
-  Panel0.Color := InputColor('Choose a color ...',Panel0.Color);
+  Panel0.Color := InputColor(_('Choose a color ...'),Panel0.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton1Click(Sender: TObject);
 begin
-  Panel1.Color := InputColor('Choose a color ...',Panel1.Color);
+  Panel1.Color := InputColor(_('Choose a color ...'),Panel1.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton2Click(Sender: TObject);
 begin
-  Panel2.Color := InputColor('Choose a color ...',Panel2.Color);
+  Panel2.Color := InputColor(_('Choose a color ...'),Panel2.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton3Click(Sender: TObject);
 begin
-  Panel3.Color := InputColor('Choose a color ...',Panel3.Color);
+  Panel3.Color := InputColor(_('Choose a color ...'),Panel3.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton4Click(Sender: TObject);
 begin
-  Panel4.Color := InputColor('Choose a color ...',Panel4.Color);
+  Panel4.Color := InputColor(_('Choose a color ...'),Panel4.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton5Click(Sender: TObject);
 begin
-  Panel5.Color := InputColor('Choose a color ...',Panel5.Color);
+  Panel5.Color := InputColor(_('Choose a color ...'),Panel5.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton7Click(Sender: TObject);
 begin
-  Panel7.Color := InputColor('Choose a color ...',Panel7.Color);
+  Panel7.Color := InputColor(_('Choose a color ...'),Panel7.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton6Click(Sender: TObject);
 begin
-  Panel6.Color := InputColor('Choose a color ...',Panel6.Color);
+  Panel6.Color := InputColor(_('Choose a color ...'),Panel6.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton8Click(Sender: TObject);
 begin
-  Panel8.Color := InputColor('Choose a color ...',Panel8.Color);
+  Panel8.Color := InputColor(_('Choose a color ...'),Panel8.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton9Click(Sender: TObject);
 begin
-  Panel9.Color := InputColor('Choose a color ...',Panel9.Color);
+  Panel9.Color := InputColor(_('Choose a color ...'),Panel9.Color);
 end;
 
 procedure TColorsPreference.btOkClick(Sender: TObject);
@@ -214,22 +216,22 @@
 
 procedure TColorsPreference.SpTBXButton10Click(Sender: TObject);
 begin
-  Panel10.Color := InputColor('Choose a color ...',Panel10.Color);
+  Panel10.Color := InputColor(_('Choose a color ...'),Panel10.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton11Click(Sender: TObject);
 begin
-  Panel11.Color := InputColor('Choose a color ...',Panel11.Color);
+  Panel11.Color := InputColor(_('Choose a color ...'),Panel11.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton12Click(Sender: TObject);
 begin
-  Panel12.Color := InputColor('Choose a color ...',Panel12.Color);
+  Panel12.Color := InputColor(_('Choose a color ...'),Panel12.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton13Click(Sender: TObject);
 begin
-  Panel13.Color := InputColor('Choose a color ...',Panel13.Color);
+  Panel13.Color := InputColor(_('Choose a color ...'),Panel13.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton15Click(Sender: TObject);
@@ -284,12 +286,12 @@
 
 procedure TColorsPreference.SpTBXButton14Click(Sender: TObject);
 begin
-  Panel14.Color := InputColor('Choose a color ...',Panel14.Color);
+  Panel14.Color := InputColor(_('Choose a color ...'),Panel14.Color);
 end;
 
 procedure TColorsPreference.SpTBXButton16Click(Sender: TObject);
 begin
-  Panel15.Color := InputColor('Choose a color ...',Panel15.Color);
+  Panel15.Color := InputColor(_('Choose a color ...'),Panel15.Color);
 end;
 
 end.

Modified: Lobby/TASClient/CrashDetailsUnit.dfm
===================================================================
--- Lobby/TASClient/CrashDetailsUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/CrashDetailsUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -9,6 +9,7 @@
   ParentFont = True
   OldCreateOrder = True
   Position = poScreenCenter
+  OnCreate = FormCreate
   PixelsPerInch = 96
   TextHeight = 13
   object Bevel1: TBevel

Modified: Lobby/TASClient/CrashDetailsUnit.pas
===================================================================
--- Lobby/TASClient/CrashDetailsUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/CrashDetailsUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -3,7 +3,7 @@
 interface
 
 uses Windows, SysUtils, Classes, Graphics, Forms, Controls, StdCtrls, 
-  Buttons, ExtCtrls, ComCtrls;
+  Buttons, ExtCtrls, ComCtrls, gnugettext;
 
 type
   TCrashDetailsDialog = class(TForm)
@@ -12,6 +12,7 @@
     Bevel1: TBevel;
     RichEdit1: TRichEdit;
     Label1: TLabel;
+    procedure FormCreate(Sender: TObject);
   private
     { Private declarations }
   public
@@ -25,4 +26,9 @@
 
 {$R *.dfm}
 
+procedure TCrashDetailsDialog.FormCreate(Sender: TObject);
+begin
+  TranslateComponent(self);
+end;
+
 end.

Modified: Lobby/TASClient/CustomColorUnit.dfm
===================================================================
--- Lobby/TASClient/CustomColorUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/CustomColorUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -7,8 +7,8 @@
   ClientHeight = 290
   ClientWidth = 389
   Color = clBtnFace
-  Constraints.MaxHeight = 910
-  Constraints.MaxWidth = 1280
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11
@@ -39,7 +39,7 @@
       Left = 8
       Top = 40
       Width = 90
-      Height = 36
+      Height = 72
       Caption = 'ColorToolbar'
       TabOrder = 2
       object TBXColorPalette1: TTBXColorPalette

Modified: Lobby/TASClient/CustomColorUnit.pas
===================================================================
--- Lobby/TASClient/CustomColorUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/CustomColorUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -44,7 +44,7 @@
 
 implementation
 
-uses BattleFormUnit, PreferencesFormUnit, MainUnit;
+uses BattleFormUnit, PreferencesFormUnit, MainUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -70,6 +70,8 @@
 
 procedure TCustomColorForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
   FSelectedColorIndex := -1;

Modified: Lobby/TASClient/CustomizeGUIFormUnit.pas
===================================================================
--- Lobby/TASClient/CustomizeGUIFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/CustomizeGUIFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -222,7 +222,7 @@
 
 implementation
 
-uses MainUnit, HelpUnit, Misc, SetValuesFormUnit, TemplateEditorFormUnit;
+uses MainUnit, HelpUnit, Misc, SetValuesFormUnit, TemplateEditorFormUnit, gnugettext;
 
 {$R *.dfm}
 

Modified: Lobby/TASClient/DebugUnit.dfm
===================================================================
--- Lobby/TASClient/DebugUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/DebugUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -14,6 +14,7 @@
   OldCreateOrder = False
   Position = poMainFormCenter
   Scaled = False
+  OnCreate = FormCreate
   OnHide = FormHide
   OnShow = FormShow
   PixelsPerInch = 96

Modified: Lobby/TASClient/DebugUnit.pas
===================================================================
--- Lobby/TASClient/DebugUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/DebugUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -29,6 +29,7 @@
     procedure FormHide(Sender: TObject);
     procedure TrafficTimerTimer(Sender: TObject);
     procedure Button3Click(Sender: TObject);
+    procedure FormCreate(Sender: TObject);
   private
     { Private declarations }
   public
@@ -41,7 +42,7 @@
 implementation
 
 uses
-  MainUnit, PreferencesFormUnit, Misc, PythonScriptDebugFormUnit;
+  MainUnit, PreferencesFormUnit, Misc, PythonScriptDebugFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -86,4 +87,9 @@
   PythonScriptDebugForm.Show;
 end;
 
+procedure TDebugForm.FormCreate(Sender: TObject);
+begin
+  TranslateComponent(self);
+end;
+
 end.

Modified: Lobby/TASClient/DisableUnitsFormUnit.pas
===================================================================
--- Lobby/TASClient/DisableUnitsFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/DisableUnitsFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -61,7 +61,7 @@
 implementation
 
 uses
-  Utility, PreferencesFormUnit, BattleFormUnit, MainUnit;
+  Utility, PreferencesFormUnit, BattleFormUnit, MainUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -197,7 +197,7 @@
     for i := 0 to Selection.Count - 1 do
       if UnitList.IndexOf(Selection[i]) = -1 then
       begin
-        MessageDlg('Error loading selection: this selection contains units which are not on your unit list. Make sure you are using the right mod!', mtError, [mbOK], 0);
+        MessageDlg(_('Error loading selection: this selection contains units which are not on your unit list. Make sure you are using the right mod!'), mtError, [mbOK], 0);
         Selection.Free;
         Exit;
       end;
@@ -216,7 +216,7 @@
     end;
 
   except
-    MessageDlg('Error: unable to access file: ' + FileName, mtError, [mbOK], 0);
+    MessageDlg(_('Error: unable to access file: ') + FileName, mtError, [mbOK], 0);
   end;
 
   Selection.Free;
@@ -243,7 +243,7 @@
     CloseFile(f);
 
   except
-    MessageDlg('Error: unable to access file: ' + FileName, mtError, [mbOK], 0);
+    MessageDlg(_('Error: unable to access file: ') + FileName, mtError, [mbOK], 0);
   end;
 
 end;
@@ -251,6 +251,8 @@
 
 procedure TDisableUnitsForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   FixFormSizeConstraints(BattleForm);
   SaveDialog1.InitialDir := ExtractFilePath(Application.ExeName) + VAR_FOLDER;
   OpenDialog1.InitialDir := ExtractFilePath(Application.ExeName) + VAR_FOLDER;

Modified: Lobby/TASClient/ExceptionUnit.pas
===================================================================
--- Lobby/TASClient/ExceptionUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/ExceptionUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -35,7 +35,7 @@
 
 uses
   Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
-  StdCtrls, ExtCtrls, JclDebug, JclMapi;
+  StdCtrls, ExtCtrls, JclDebug, JclMapi, gnugettext;
 
 const
   UM_CREATEDETAILS = WM_USER + $100;
@@ -536,6 +536,8 @@
 
 procedure TExceptionDialog.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   FSimpleLog := TSimpleExceptionLog.Create;
   FFullHeight := ClientHeight;
   DetailsVisible := False;

Modified: Lobby/TASClient/HelpUnit.pas
===================================================================
--- Lobby/TASClient/HelpUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/HelpUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -142,7 +142,7 @@
 
 implementation
 
-uses MainUnit, Misc;
+uses MainUnit, Misc, gnugettext;
 
 {$R *.dfm}
 
@@ -153,6 +153,8 @@
 
 procedure THelpForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   PageControl1.ActiveTabIndex := 0;
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);

Modified: Lobby/TASClient/HighlightingUnit.pas
===================================================================
--- Lobby/TASClient/HighlightingUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/HighlightingUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -7,7 +7,7 @@
   Dialogs, StdCtrls, CheckLst, JvExCheckLst, JvCheckListBox, Buttons,
   ExtCtrls, ComCtrls, StrUtils, JvExStdCtrls, JvCombobox, JvColorCombo,
   TntCheckLst, SpTBXEditors, SpTBXControls, TBXDkPanels, SpTBXItem,TntComCtrls,
-  RichEdit2, ExRichEdit;
+  RichEdit2, ExRichEdit, gnugettext;
 
 type
   THighlightingForm = class(TForm)
@@ -243,11 +243,10 @@
 
 end;
 
-
-
-
 procedure THighlightingForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;

Modified: Lobby/TASClient/HostBattleFormUnit.dfm
===================================================================
--- Lobby/TASClient/HostBattleFormUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/HostBattleFormUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -6,8 +6,8 @@
   ClientHeight = 355
   ClientWidth = 331
   Color = clBtnFace
-  Constraints.MaxHeight = 750
-  Constraints.MaxWidth = 1280
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11

Modified: Lobby/TASClient/HostBattleFormUnit.pas
===================================================================
--- Lobby/TASClient/HostBattleFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/HostBattleFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -95,7 +95,7 @@
 
 uses WaitForAckUnit, BattleFormUnit, Utility, InitWaitFormUnit,
   DisableUnitsFormUnit, HostInfoUnit, Misc, PreferencesFormUnit,
-  ReplaysUnit, Math, TntWideStrings;
+  ReplaysUnit, Math, TntWideStrings, gnugettext;
 
 {$R *.dfm}
 
@@ -140,21 +140,21 @@
   if (i &lt; 1024) or (i &gt; 65535) then raise Exception.Create('Number out of range');
   except
     if not LobbyScriptUnit.ScriptHostingRunning and not LobbyScriptUnit.ScriptHostingReplayRunning then
-      MessageDlg('Port number must be a whole number within a proper range (1024..65535)', mtError, [mbOK], 0);
+      MessageDlg(_('Port number must be a whole number within a proper range (1024..65535)'), mtError, [mbOK], 0);
     Exit;
   end;
 
   if not (PasswordEdit.Text = '') then if not ValidatePassword(PasswordEdit.Text) then
   begin
     if not LobbyScriptUnit.ScriptHostingRunning and not LobbyScriptUnit.ScriptHostingReplayRunning then
-      MessageDlg('Invalid password! Must contain letters and numbers only!', mtError, [mbOK], 0);
+      MessageDlg(_('Invalid password! Must contain letters and numbers only!'), mtError, [mbOK], 0);
     Exit;
   end;
 
   if BattleForm.CurrentMapIndex = -1 then // this should not happen!
   begin
     if not LobbyScriptUnit.ScriptHostingRunning and not LobbyScriptUnit.ScriptHostingReplayRunning then
-      MessageDlg('Cannot proceed: no map is selected!', mtWarning, [mbOK], 0);
+      MessageDlg(_('Cannot proceed: no map is selected!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
@@ -169,7 +169,7 @@
     if i = Utility.ModValidMaps.Count then
     begin
       if not LobbyScriptUnit.ScriptHostingRunning and not LobbyScriptUnit.ScriptHostingReplayRunning then
-        MessageDlg('Cannot proceed: this mod requires one of the following map :'+EOL+Misc.JoinStringList(Utility.ModValidMaps,' ; '), mtWarning, [mbOK], 0);
+        MessageDlg(_('Cannot proceed: this mod requires one of the following map :')+EOL+Misc.JoinStringList(Utility.ModValidMaps,' ; '), mtWarning, [mbOK], 0);
       Exit;
     end;
   end;
@@ -183,7 +183,7 @@
 
   if (Status.MyRank &lt; RankComboBox.ItemIndex) then
     if not LobbyScriptUnit.ScriptHostingRunning and not LobbyScriptUnit.ScriptHostingReplayRunning then
-      if MessageDlg('Your rank (' + Ranks[Status.MyRank] + ') is lower than the battle rank limit (' + Ranks[RankComboBox.ItemIndex] + '). Do you wish to continue anyway?', mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
+      if MessageDlg(Format(_('Your rank (%s) is lower than the battle rank limit (%s). Do you wish to continue anyway?'),[Ranks[Status.MyRank], Ranks[RankComboBox.ItemIndex]]), mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
 
   // loading default battle preferences
   PreferencesForm.LoadDefaultBattlePreferencesFromRegistry;
@@ -325,13 +325,13 @@
     i := StrToInt(Trim(PortEdit.Text));
     if (i &lt; 1024) or (i &gt; 65535) then raise Exception.Create('Number out of range');
   except
-    MessageDlg('Port number must be a whole number within a proper range (1024..65535)', mtError, [mbOK], 0);
+    MessageDlg(_('Port number must be a whole number within a proper range (1024..65535)'), mtError, [mbOK], 0);
     Exit;
   end;
 
   if not (PasswordEdit.Text = '') then if not ValidatePassword(PasswordEdit.Text) then
   begin
-    MessageDlg('Invalid password! Must contain letters and numbers only!', mtError, [mbOK], 0);
+    MessageDlg(_('Invalid password! Must contain letters and numbers only!'), mtError, [mbOK], 0);
     Exit;
   end;
 
@@ -343,7 +343,7 @@
 }
 
   if (Status.MyRank &lt; RankComboBox.ItemIndex) then
-    if MessageDlg('Your rank (' + Ranks[Status.MyRank] + ') is lower than the battle rank limit (' + Ranks[RankComboBox.ItemIndex] + '). Do you wish to continue anyway?', mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
+    if MessageDlg(Format(_('Your rank (%s) is lower than the battle rank limit (%s). Do you wish to continue anyway?'),[Ranks[Status.MyRank], Ranks[RankComboBox.ItemIndex]]), mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
 
 
   // we have to change mod and update unit list:
@@ -361,7 +361,7 @@
 
   if Utility.MapList.IndexOf(replay.Script.ReadKeyValue('GAME/mapname')) = -1 then // this can not really happen since we already checked if we have this map
   begin
-    MessageDlg('You don''t have the map: ' + replay.Script.ReadKeyValue('GAME/mapname'), mtWarning, [mbOK], 0);
+    MessageDlg(_('You don''t have the map: ') + replay.Script.ReadKeyValue('GAME/mapname'), mtWarning, [mbOK], 0);
     Exit;
   end
   else
@@ -443,6 +443,9 @@
 var
   i: Integer;
 begin
+  TranslateComponent(self);
+
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
   ModsComboBox.Items.Assign(Utility.ModList);
@@ -559,7 +562,7 @@
 
   if Utility.MapList.IndexOf(replay.Script.ReadKeyValue('GAME/mapname')) = -1 then
   begin
-    MessageDlg('You don''t have the map: ' + replay.Script.ReadKeyValue('GAME/mapname'), mtWarning, [mbOK], 0);
+    MessageDlg(_('You don''t have the map: ') + replay.Script.ReadKeyValue('GAME/mapname'), mtWarning, [mbOK], 0);
     ReplaysForm.WatchButton.Visible := True;
     ReplaysForm.HostReplayButton.Visible := False;
     Exit;
@@ -567,7 +570,7 @@
 
   if (ModArchiveList.IndexOf(replay.Script.ReadKeyValue('GAME/gametype')) = -1) and (ModList.IndexOf(replay.Script.ReadKeyValue('GAME/gametype')) = -1) then
   begin
-    MessageDlg('You don''t have the mod: ' + replay.Script.ReadKeyValue('GAME/gametype'), mtWarning, [mbOK], 0);
+    MessageDlg(_('You don''t have the mod: ') + replay.Script.ReadKeyValue('GAME/gametype'), mtWarning, [mbOK], 0);
     ReplaysForm.WatchButton.Visible := True;
     ReplaysForm.HostReplayButton.Visible := False;
     Exit;
@@ -591,7 +594,7 @@
   BattleReplayInfo.Script.Assign(ReplaysForm.ScriptRichEdit.Lines);
   BattleReplayInfo.ReplayFilename := ReplaysForm.GetReplayFromNode(ReplaysForm.VDTReplays.FocusedNode).FileName;
   (Sender as TMenuItem).Checked := True;
-  HostButton.Caption := 'Host Replay';
+  HostButton.Caption := _('Host Replay');
 end;
 
 procedure THostBattleForm.NATRadioGroupClick(Sender: TObject);
@@ -626,13 +629,13 @@
     when already starting the game). }
   if ModsComboBox.ItemIndex = -1 then
   begin
-      MessageDlg('You must select a mod fist !', mtWarning, [mbOK], 0);
+      MessageDlg(_('You must select a mod fist !'), mtWarning, [mbOK], 0);
       Exit;
   end;
 
   if BattleForm.IsBattleActive then
   begin
-    if MessageDlg('You are already in a battle, do you want to leave it ?',mtInformation,[mbYes, mbNo],0) = mrYes then
+    if MessageDlg(_('You are already in a battle, do you want to leave it ?'),mtInformation,[mbYes, mbNo],0) = mrYes then
       BattleForm.DisconnectButtonClick(nil)
     else
       Exit;
@@ -646,7 +649,7 @@
     res := InitWaitForm.ShowModal;
     if res &lt;&gt; mrOK then
     begin
-      MessageDlg('Unable to acquire UDP source port from server. Try choosing another NAT traversal technique!', mtWarning, [mbOK], 0);
+      MessageDlg(_('Unable to acquire UDP source port from server. Try choosing another NAT traversal technique!'), mtWarning, [mbOK], 0);
       Exit;
     end;
   end;
@@ -655,10 +658,10 @@
     TryToHostBattle(-1)
   else if HostLadder1.Checked then
     if LadderList.Count = 0 then
-      MessageDlg('You must select a ladder first !',mtWarning,[mbOk],0)
+      MessageDlg(_('You must select a ladder first !'),mtWarning,[mbOk],0)
     else
       if Preferences.LadderPassword = '' then
-        MessageDlg('You must enter your ladder password in the Options/Account first !',mtWarning,[mbOk],0)
+        MessageDlg(_('You must enter your ladder password in the Options/Account first !'),mtWarning,[mbOk],0)
       else
         TryToHostBattle(LadderComboBox.ItemIndex)
   else
@@ -692,7 +695,7 @@
   PasswordEdit.Visible := False;
 
   (Sender as TMenuItem).Checked := True;
-  HostButton.Caption := 'Host Ladder';
+  HostButton.Caption := _('Host Ladder');
 
   if LadderComboBox.Items.Count =0 then
     ThreadLL := TLadderListThread.Create(False,-1,true)
@@ -748,7 +751,7 @@
 procedure TLadderListThread.Initialize;
 begin
   HostBattleForm.LadderComboBox.Clear;
-  HostBattleForm.LadderComboBox.Items.Add('Loading ladder list ...');
+  HostBattleForm.LadderComboBox.Items.Add(_('Loading ladder list ...'));
   HostBattleForm.LadderComboBox.ItemIndex := 0;
   HostBattleForm.HostButton.Enabled := False;
   HostBattleForm.RefreshButton.Enabled := False;
@@ -804,8 +807,8 @@
     try
       HttpCli1.Get;
     except
-      MainForm.AddMainLog('Error: Ladder server unavailable.', Colors.Error);
-      UpdateMessageStatus('Error: Ladder server unavailable.');
+      MainForm.AddMainLog(_('Error: Ladder server unavailable.'), Colors.Error);
+      UpdateMessageStatus(_('Error: Ladder server unavailable.'));
       Synchronize(Finalize);
       LadderList.Clear;
       Exit;
@@ -839,8 +842,8 @@
             ladder^ := TLadder.Create(StrToInt(ladderid),laddername);
             LadderList.Add(ladder^);
             if not DownloadLadderDetails(LadderList.indexof(ladder^)) then begin
-              MainForm.AddMainLog('Error: Ladder details download failed : '+IntToStr(ladder^.id)+'.', Colors.Error);
-              UpdateMessageStatus('Error: Ladder details download failed : '+IntToStr(ladder^.id)+'.');
+              MainForm.AddMainLog(_('Error: Ladder details download failed : ')+IntToStr(ladder^.id)+'.', Colors.Error);
+              UpdateMessageStatus(_('Error: Ladder details download failed : ')+IntToStr(ladder^.id)+'.');
               Synchronize(Finalize);
               Exit;
             end;
@@ -862,7 +865,7 @@
   paramName,paramValue: string;
 begin
   Result := True;
-  TLadder(LadderList[ladderIndex]).Rules := 'Downloading ladder details ...';
+  TLadder(LadderList[ladderIndex]).Rules := _('Downloading ladder details ...');
   parse1 := TStringList.Create;
   parse2 := TStringList.Create;
   with HostBattleForm do begin
@@ -879,7 +882,7 @@
     try
       HttpCli1.Get;
     except
-      MainForm.AddMainLog('Error: Ladder details not available : '+IntToStr(TLadder(LadderList[ladderIndex]).id), Colors.Error);
+      MainForm.AddMainLog(_('Error: Ladder details not available : ')+IntToStr(TLadder(LadderList[ladderIndex]).id), Colors.Error);
       Exit;
     end;
     HttpCli1.RcvdStream.Seek(0,0);
@@ -958,7 +961,7 @@
               if paramValue &lt;&gt; 'none' then
                 Misc.ParseDelimited(Restricted,paramValue,',','')
         Except
-          MessageDlgThread('An error occured while parsing the ladder details !',mtError,[mbOk],0);
+          MessageDlgThread(_('An error occured while parsing the ladder details !'),mtError,[mbOk],0);
           Result := False;
           Exit;
         end;
@@ -966,7 +969,7 @@
         end;
     end;
     if TLadder(LadderList[ladderIndex]).Rules = '' then
-      TLadder(LadderList[ladderIndex]).Rules := 'No rules set for this ladder.';
+      TLadder(LadderList[ladderIndex]).Rules := _('No rules set for this ladder.');
   end;
 end;
 
@@ -1000,8 +1003,8 @@
     try
       HttpCli1.Get;
     except
-      MainForm.AddMainLog('Error: Ladder server unavailable.', Colors.Error);
-      UpdateMessageStatus('Error: Ladder server unavailable.');
+      MainForm.AddMainLog(_('Error: Ladder server unavailable.'), Colors.Error);
+      UpdateMessageStatus(_('Error: Ladder server unavailable.'));
       Synchronize(Finalize);
       LadderList.Clear;
       Exit;
@@ -1088,16 +1091,16 @@
                 for j:=i+1 to i+nbRulesLines-1 do
                   ladder^.Rules := ladder^.Rules + parse1[j];
                 if ladder^.Rules = '' then
-                  ladder^.Rules := 'No rules set for this ladder.';
+                  ladder^.Rules := _('No rules set for this ladder.');
                 LadderList.Add(ladder^);
               end
             else if paramName = 'restricted' then
                 if paramValue &lt;&gt; 'none' then
                   Misc.ParseDelimited(ladder^.Restricted,paramValue,',','')
           Except
-            MessageDlgThread('An error occured while parsing the ladder details !',mtError,[mbOk],0);
+            MessageDlgThread(_('An error occured while parsing the ladder details !'),mtError,[mbOk],0);
             Result := False;
-            UpdateMessageStatus('Error: Ladders details download failed.');
+            UpdateMessageStatus(_('Error: Ladders details download failed.'));
             Synchronize(Finalize);
             LadderList.Clear;
             Exit;

Modified: Lobby/TASClient/HostInfoUnit.dfm
===================================================================
--- Lobby/TASClient/HostInfoUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/HostInfoUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -6,8 +6,8 @@
   ClientHeight = 324
   ClientWidth = 370
   Color = clBtnFace
-  Constraints.MaxHeight = 910
-  Constraints.MaxWidth = 1280
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11

Modified: Lobby/TASClient/HostInfoUnit.pas
===================================================================
--- Lobby/TASClient/HostInfoUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/HostInfoUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -35,7 +35,7 @@
 implementation
 
 uses
-  MainUnit, PreferencesFormUnit, BattleFormUnit, Misc;
+  MainUnit, PreferencesFormUnit, BattleFormUnit, Misc, gnugettext;
 
 {$R *.dfm}
 
@@ -53,7 +53,7 @@
 
 procedure THostInfoForm.Label3Click(Sender: TObject);
 begin
-  Misc.OpenURLInDefaultBrowser('<A HREF="http://www.portforward.com/routers.htm">http://www.portforward.com/routers.htm</A>');
+  Misc.OpenURLInDefaultBrowser(_('<A HREF="http://www.portforward.com/routers.htm">http://www.portforward.com/routers.htm</A>'));
 end;
 
 procedure THostInfoForm.Button1Click(Sender: TObject);
@@ -63,11 +63,13 @@
 
 procedure THostInfoForm.Label5Click(Sender: TObject);
 begin
-  Misc.OpenURLInDefaultBrowser('<A HREF="http://taspring.clan-sy.com/wiki/FAQ">http://taspring.clan-sy.com/wiki/FAQ</A>');
+  Misc.OpenURLInDefaultBrowser(_('<A HREF="http://taspring.clan-sy.com/wiki/FAQ">http://taspring.clan-sy.com/wiki/FAQ</A>'));
 end;
 
 procedure THostInfoForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;

Modified: Lobby/TASClient/HttpGetUnit.pas
===================================================================
--- Lobby/TASClient/HttpGetUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/HttpGetUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -69,7 +69,7 @@
 implementation
 
 uses
-  PreferencesFormUnit, BattleFormUnit, SpringDownloaderFormUnit;
+  PreferencesFormUnit, BattleFormUnit, SpringDownloaderFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -100,11 +100,11 @@
   ReceivedLabel.Visible := True;
 
   if (DownloadFile.ServerOptions and 4) = 4 then
-    HttpGetForm.Caption := 'Auto-updating lobby ...'
+    HttpGetForm.Caption := _('Auto-updating lobby ...')
   else if (DownloadFile.ServerOptions and 8) = 8 then
-    HttpGetForm.Caption := 'Downloading map ...'
+    HttpGetForm.Caption := _('Downloading map ...')
   else
-    HttpGetForm.Caption := 'File download';
+    HttpGetForm.Caption := _('File download');
 
 
   if DownloadStatus.Downloading then Exit;
@@ -124,18 +124,18 @@
   else HttpCli1.Proxy := '';
   CancelButton.Enabled := True;
   CloseButton.Enabled := False;
-  StatusLabel.Caption := 'Loading ';
+  StatusLabel.Caption := _('Loading ');
 
   try
 
     try
       HttpCli1.Get;
-      StatusLabel.Caption := 'Done.';
+      StatusLabel.Caption := _('Done.');
       DownloadStatus.Success := True;
     except
       on E: EHttpException do
       begin
-        StatusLabel.Caption := 'Failed : ' + IntToStr(HttpCli1.StatusCode) + ' ' + HttpCli1.ReasonPhrase;
+        StatusLabel.Caption := _('Failed : ') + IntToStr(HttpCli1.StatusCode) + ' ' + HttpCli1.ReasonPhrase;
       end
       else
         raise;
@@ -157,7 +157,7 @@
     // try to open the file:
     if (DownloadFile.ServerOptions and $1) = 1 then
     begin
-      if MessageDlg('Server says you should now open this file. Would you like to do that now?', mtInformation, [mbYes, mbNo], 0) = mrYes then
+      if MessageDlg(_('Server says you should now open this file. Would you like to do that now?'), mtInformation, [mbYes, mbNo], 0) = mrYes then
       begin
         ShellExecute(MainForm.Handle, 'open', PChar(AnsiString(DownloadFile.FileName)), nil, PChar(ExtractFilePath(Application.ExeName)), SW_SHOWNORMAL);
         if (DownloadFile.ServerOptions and $2) = 2 then MainForm.Close;
@@ -165,7 +165,7 @@
     end
     else if (DownloadFile.ServerOptions and $4) = 4 then
     begin
-        StatusLabel.Caption := 'Download complete, extracting new files ...';
+        StatusLabel.Caption := _('Download complete, extracting new files ...');
         ReceivedLabel.Visible := False;
         appExePath := Application.ExeName;
 
@@ -213,9 +213,9 @@
         else
         begin
           if (SevenZip1.LastError &gt;= 0) and (SevenZip1.LastError &lt;= 11) then
-            MessageDlg('Error '+IntToStr(e) + ','+IntToStr(SevenZip1.LastError)+' : '+c7zipResMsg[SevenZip1.LastError], mtError, [mbOK], 0)
+            MessageDlg(_('Error ')+IntToStr(e) + ','+IntToStr(SevenZip1.LastError)+' : '+c7zipResMsg[SevenZip1.LastError], mtError, [mbOK], 0)
           else
-            MessageDlg('Error '+IntToStr(e) + ','+IntToStr(SevenZip1.LastError), mtError, [mbOK], 0);
+            MessageDlg(_('Error ')+IntToStr(e) + ','+IntToStr(SevenZip1.LastError), mtError, [mbOK], 0);
         end;
     end
     else if (DownloadFile.ServerOptions and 8) = 8 then
@@ -224,7 +224,7 @@
       HttpGetForm.Close;
     end
     else
-      MessageDlg('Download complete!', mtInformation, [mbOK], 0);
+      MessageDlg(_('Download complete!'), mtInformation, [mbOK], 0);
   end;
 
   Result := True;
@@ -241,18 +241,20 @@
 begin
   if not DownloadStatus.Downloading then
   begin
-    ReceivedLabel.Caption := 'Received 0 KB';
+    ReceivedLabel.Caption := _('Received 0 KB');
     ProgressBar.Position := 0;
     Exit;
   end;
 
-  ReceivedLabel.Caption := 'Received ' + Misc.FormatFileSize(HttpCli1.RcvdStream.Size) + ' KB (' + IntToStr(Round(HttpCli1.RcvdStream.Size / HttpCli1.ContentLength * 100)) + '%)';
+  ReceivedLabel.Caption := Format(_('Received %s KB (%i%%)'),[Misc.FormatFileSize(HttpCli1.RcvdStream.Size),Round(HttpCli1.RcvdStream.Size / HttpCli1.ContentLength * 100)]);
   if HttpCli1.ContentLength = 0 then ProgressBar.Position := 0 else
     ProgressBar.Position := Round(HttpCli1.RcvdStream.Size / HttpCli1.ContentLength * 100);
 end;
 
 procedure THttpGetForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
   HttpCli1.SocksLevel := '5';
@@ -298,7 +300,7 @@
 
 procedure THttpGetForm.HttpCli1DocBegin(Sender: TObject);
 begin
-  StatusLabel.Caption := 'Transfering ...';
+  StatusLabel.Caption := _('Transfering ...');
 
   try
     if not DownloadFile.HeaderReceived then
@@ -314,7 +316,7 @@
     HttpCli1.RcvdStream := FileStream;
   except
     HttpCli1.Abort;
-    MessageDlg('Unable to create file: ' + DownloadFile.FileName + '. Download cancelled!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Unable to create file: ') + DownloadFile.FileName + _('. Download cancelled!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
@@ -330,7 +332,7 @@
 begin
   if DownloadStatus.Downloading then
   begin
-    if MessageDlg('If you close this window your download will be cancelled. Are you sure you wish to do that?', mtConfirmation, [mbYes, mbNo], 0) = mrNo then
+    if MessageDlg(_('If you close this window your download will be cancelled. Are you sure you wish to do that?'), mtConfirmation, [mbYes, mbNo], 0) = mrNo then
     begin
       Action := caNone;
       Exit;

Modified: Lobby/TASClient/IgnoreListUnit.dfm
===================================================================
--- Lobby/TASClient/IgnoreListUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/IgnoreListUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -7,8 +7,8 @@
   ClientHeight = 383
   ClientWidth = 298
   Color = clBtnFace
-  Constraints.MaxHeight = 910
-  Constraints.MaxWidth = 1280
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11

Modified: Lobby/TASClient/IgnoreListUnit.pas
===================================================================
--- Lobby/TASClient/IgnoreListUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/IgnoreListUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -42,7 +42,7 @@
 
 implementation
 
-uses PreferencesFormUnit;
+uses PreferencesFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -156,6 +156,8 @@
 
 procedure TIgnoreListForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;

Modified: Lobby/TASClient/InitWaitFormUnit.dfm
===================================================================
--- Lobby/TASClient/InitWaitFormUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/InitWaitFormUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -6,8 +6,8 @@
   ClientHeight = 88
   ClientWidth = 246
   Color = clBtnFace
-  Constraints.MaxHeight = 908
-  Constraints.MaxWidth = 1280
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11

Modified: Lobby/TASClient/InitWaitFormUnit.pas
===================================================================
--- Lobby/TASClient/InitWaitFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/InitWaitFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -50,7 +50,7 @@
 implementation
 
 uses BattleFormUnit, Utility, HostBattleFormUnit, PreferencesFormUnit,
-  ReplaysUnit, MapListFormUnit;
+  ReplaysUnit, MapListFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -161,6 +161,8 @@
 
 procedure TInitWaitForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
   InitWaitForm.Font.Assign(InfoLabel.Font); // we need this because we call Canvas.GetTextWidth!

Modified: Lobby/TASClient/LobbyScriptUnit.pas
===================================================================
--- Lobby/TASClient/LobbyScriptUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/LobbyScriptUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -662,44 +662,47 @@
 begin
   with GetPythonEngine do
   begin
-    with Replay do
+    if not Replay.Script.isCorrupted then
     begin
-      Result := PyDict_New();
-
-      PyDict_SetItemStringDecRef( Result, 'FileName', FileName );
-      PyDict_SetItemStringDecRef( Result, 'Grade', Grade );
-      PyDict_SetItemStringDecRef( Result, 'Version', Version );
-      PyDict_SetItemStringDecRef( Result, 'SpringVersion', SpringVersion );
-      PyDict_SetItemStringDecRef( Result, 'FullFileName', FullFileName );
-      PyDict_SetItemStringDecRef( Result, 'Date', Date );
-      if Version &gt; 0 then
+      with Replay do
       begin
-        PyDict_SetItemStringDecRef( Result, 'GameLength', demoHeader.gameTime );
-        PyDict_SetItemStringDecRef( Result, 'WallclockLength', demoHeader.wallclockTime );
-        PyDict_SetItemStringDecRef( Result, 'UnixTime', demoHeader.unixTime );
-        PyDict_SetItemStringDecRef( Result, 'MaxPlayers', demoHeader.maxPlayerNum );
-        PyDict_SetItemStringDecRef( Result, 'WinningTeam', demoHeader.winningAllyTeam );
-      end;
-      PyDict_SetItemStringDecRef( Result, 'MapName', Script.ReadMapName );
-      PyDict_SetItemStringDecRef( Result, 'ModName', Script.ReadModName );
-      PyDict_SetItemStringDecRef( Result, 'StartMetal', Script.ReadStartMetal );
-      PyDict_SetItemStringDecRef( Result, 'StartEnergy', Script.ReadStartEnergy );
-      PyDict_SetItemStringDecRef( Result, 'MaxUnits', Script.ReadMaxUnits );
-      PyDict_SetItemStringDecRef( Result, 'StartPosType', Script.ReadStartPosType );
-      PyDict_SetItemStringDecRef( Result, 'GameMode', Script.ReadGameMode );
-      PyDict_SetItemStringDecRef( Result, 'LimitDGun', Script.ReadLimitDGun );
-      PyDict_SetItemStringDecRef( Result, 'DiminishingMMs', Script.ReadDiminishingMMs );
-      PyDict_SetItemStringDecRef( Result, 'GhostedBuildings', Script.ReadGhostedBuildings );
+        Result := PyDict_New();
 
-      scriptPlayer := PyDict_New();
-      for i:=0 to PlayerList.Count-1 do
-      begin
-        pyO := GetPyReplayPlayer(TReplayPlayer(PlayerList[i]^));
-        PyDict_SetItemString(scriptPlayer, PChar(TReplayPlayer(PlayerList[i]^).UserName), pyO);
-        Py_XDECREF(pyO);
+        PyDict_SetItemStringDecRef( Result, 'FileName', FileName );
+        PyDict_SetItemStringDecRef( Result, 'Grade', Grade );
+        PyDict_SetItemStringDecRef( Result, 'Version', Version );
+        PyDict_SetItemStringDecRef( Result, 'SpringVersion', SpringVersion );
+        PyDict_SetItemStringDecRef( Result, 'FullFileName', FullFileName );
+        PyDict_SetItemStringDecRef( Result, 'Date', Date );
+        if Version &gt; 0 then
+        begin
+          PyDict_SetItemStringDecRef( Result, 'GameLength', demoHeader.gameTime );
+          PyDict_SetItemStringDecRef( Result, 'WallclockLength', demoHeader.wallclockTime );
+          PyDict_SetItemStringDecRef( Result, 'UnixTime', demoHeader.unixTime );
+          PyDict_SetItemStringDecRef( Result, 'MaxPlayers', demoHeader.maxPlayerNum );
+          PyDict_SetItemStringDecRef( Result, 'WinningTeam', demoHeader.winningAllyTeam );
+        end;
+        PyDict_SetItemStringDecRef( Result, 'MapName', Script.ReadMapName );
+        PyDict_SetItemStringDecRef( Result, 'ModName', Script.ReadModName );
+        PyDict_SetItemStringDecRef( Result, 'StartMetal', Script.ReadStartMetal );
+        PyDict_SetItemStringDecRef( Result, 'StartEnergy', Script.ReadStartEnergy );
+        PyDict_SetItemStringDecRef( Result, 'MaxUnits', Script.ReadMaxUnits );
+        PyDict_SetItemStringDecRef( Result, 'StartPosType', Script.ReadStartPosType );
+        PyDict_SetItemStringDecRef( Result, 'GameMode', Script.ReadGameMode );
+        PyDict_SetItemStringDecRef( Result, 'LimitDGun', Script.ReadLimitDGun );
+        PyDict_SetItemStringDecRef( Result, 'DiminishingMMs', Script.ReadDiminishingMMs );
+        PyDict_SetItemStringDecRef( Result, 'GhostedBuildings', Script.ReadGhostedBuildings );
+
+        scriptPlayer := PyDict_New();
+        for i:=0 to PlayerList.Count-1 do
+        begin
+          pyO := GetPyReplayPlayer(TReplayPlayer(PlayerList[i]^));
+          PyDict_SetItemString(scriptPlayer, PChar(TReplayPlayer(PlayerList[i]^).UserName), pyO);
+          Py_XDECREF(pyO);
+        end;
+        PyDict_SetItemString( Result, 'Users',  scriptPlayer);
+        Py_XDECREF(scriptPlayer);
       end;
-      PyDict_SetItemString( Result, 'Users',  scriptPlayer);
-      Py_XDECREF(scriptPlayer);
     end;
   end;
 end;
@@ -770,9 +773,12 @@
     pyReplays := PyDict_New();
     for i:=0 to ReplayList.Count-1 do
     begin
-      pyO := GetPyReplay(TReplay(ReplayList[i]));
-      PyDict_SetItem(pyReplays,PyInt_FromLong(i),pyO);
-      Py_XDECREF(pyO);
+      try
+        pyO := GetPyReplay(TReplay(ReplayList[i]));
+        PyDict_SetItem(pyReplays,PyInt_FromLong(i),pyO);
+        Py_XDECREF(pyO);
+      except
+      end;
     end;
     Result := PyObjectAsVariant(pyReplays);
   end;

Modified: Lobby/TASClient/LoginProgressFormUnit.dfm
===================================================================
--- Lobby/TASClient/LoginProgressFormUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/LoginProgressFormUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -6,8 +6,8 @@
   ClientHeight = 93
   ClientWidth = 298
   Color = clBtnFace
-  Constraints.MaxHeight = 910
-  Constraints.MaxWidth = 1280
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11

Modified: Lobby/TASClient/LoginProgressFormUnit.pas
===================================================================
--- Lobby/TASClient/LoginProgressFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/LoginProgressFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -24,7 +24,7 @@
 
 implementation
 
-uses MainUnit, PreferencesFormUnit;
+uses MainUnit, PreferencesFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -49,6 +49,8 @@
 
 procedure TLoginProgressForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;

Modified: Lobby/TASClient/LogonFormUnit.pas
===================================================================
--- Lobby/TASClient/LogonFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/LogonFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -48,12 +48,14 @@
 
 implementation
 
-uses PreferencesFormUnit,MainUnit, Misc, NewAccountUnit;
+uses PreferencesFormUnit,MainUnit, Misc, NewAccountUnit, gnugettext;
 
 {$R *.dfm}
 
 procedure TLogonForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;
@@ -64,13 +66,13 @@
 
   if (txtLogin.Text = '') or (txtPassword.Text = '') then
   begin
-    MessageDlg('&quot;Username&quot; and &quot;Password&quot; fields should not be left empty!', mtWarning, [mbOK], 0);
+    MessageDlg(_('&quot;Username&quot; and &quot;Password&quot; fields should not be left empty!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
   if (not VerifyName(txtLogin.Text)) or (not VerifyName(txtPassword.Text) and PasswordChanged) then
   begin
-    MessageDlg('Your username and/or password consists of illegal characters!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Your username and/or password consists of illegal characters!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
@@ -122,7 +124,7 @@
 begin
   if Status.ConnectionState = Connected then
   begin
-    MessageDlg('You are not allowed to register new account while being logged-in!', mtError, [mbOK], 0);
+    MessageDlg(_('You are not allowed to register new account while being logged-in!'), mtError, [mbOK], 0);
     Exit;
   end;
 

Modified: Lobby/TASClient/MainUnit.dfm
===================================================================
--- Lobby/TASClient/MainUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/MainUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -1,7 +1,7 @@
 object MainForm: TMainForm
-  Left = 826
-  Top = 144
-  Width = 776
+  Left = 474
+  Top = 389
+  Width = 854
   Height = 549
   Caption = '.'
   Color = clBtnFace
@@ -24,7 +24,7 @@
   object MainTitleBar: TSpTBXTitleBar
     Left = 0
     Top = 0
-    Width = 768
+    Width = 846
     Height = 522
     Caption = 'TASClient'
     TBXStyleBackground = True
@@ -206,7 +206,7 @@
     object Panel1: TSpTBXPanel
       Left = 4
       Top = 112
-      Width = 760
+      Width = 838
       Height = 406
       Caption = 'Panel1'
       Align = alClient
@@ -216,7 +216,7 @@
       object Panel3: TPanel
         Left = 2
         Top = 134
-        Width = 756
+        Width = 834
         Height = 270
         Align = alBottom
         BevelOuter = bvNone
@@ -224,7 +224,7 @@
         object BattlesPanel: TSpTBXPanel
           Left = 0
           Top = 0
-          Width = 756
+          Width = 834
           Height = 270
           Align = alClient
           TabOrder = 0
@@ -233,7 +233,7 @@
           object QuickJoinPanel: TSpTBXPanel
             Left = 2
             Top = 2
-            Width = 752
+            Width = 830
             Height = 25
             Hint = 'Quick join panel'
             Caption = 'QuickJoinPanel'
@@ -241,7 +241,7 @@
             TabOrder = 1
             Borders = False
             DesignSize = (
-              752
+              830
               25)
             object SpTBXLabel1: TSpTBXLabel
               Left = 0
@@ -265,9 +265,9 @@
               LinkFont.Style = [fsUnderline]
             end
             object btSpecatateNow: TSpTBXButton
-              Left = 653
+              Left = 696
               Top = 0
-              Width = 97
+              Width = 132
               Height = 22
               Hint = 
                 'Will join the first full battle or with the best ratio players/m' +
@@ -291,9 +291,9 @@
               LinkFont.Style = [fsUnderline]
             end
             object btPlayNow: TSpTBXButton
-              Left = 547
+              Left = 560
               Top = 0
-              Width = 97
+              Width = 132
               Height = 22
               Hint = 
                 'Will try to join the battle with the best players/maxplayers rat' +
@@ -332,7 +332,7 @@
           object VDTBattles: TVirtualDrawTree
             Left = 2
             Top = 27
-            Width = 752
+            Width = 830
             Height = 56
             Align = alClient
             BevelInner = bvNone
@@ -445,7 +445,7 @@
           object FilterGroup: TSpTBXPanel
             Left = 2
             Top = 95
-            Width = 752
+            Width = 830
             Height = 173
             Caption = 'FilterGroup'
             Align = alBottom
@@ -453,45 +453,146 @@
             OnResize = FilterGroupResize
             Borders = False
             DesignSize = (
-              752
+              830
               173)
             object FiltersTabs: TSpTBXTabControl
               Left = 2
               Top = 2
-              Width = 748
+              Width = 826
               Height = 169
               Align = alClient
               Color = clBtnFace
-              ActiveTabIndex = 1
+              ActiveTabIndex = 0
               TabPosition = ttpBottom
               ThemeType = tttNone
               HiddenItems = &lt;&gt;
               object SpTBXTabItem1: TSpTBXTabItem
                 Caption = 'Filters'
+                Checked = True
                 TabPosition = ttpBottom
                 ThemeType = tttNone
               end
               object SpTBXTabItem2: TSpTBXTabItem
                 Caption = 'Presets'
-                Checked = True
                 TabPosition = ttpBottom
                 ThemeType = tttNone
               end
+              object SpTBXTabSheet2: TSpTBXTabSheet
+                Left = 0
+                Top = 0
+                Width = 826
+                Height = 146
+                Caption = 'Presets'
+                ImageIndex = -1
+                DesignSize = (
+                  826
+                  146)
+                TabItem = 'SpTBXTabItem2'
+                object PresetListbox: TSpTBXListBox
+                  Left = 152
+                  Top = 26
+                  Width = 661
+                  Height = 113
+                  Anchors = [akLeft, akTop, akRight]
+                  ItemHeight = 16
+                  Items.Strings = (
+                    'default')
+                  TabOrder = 0
+                  OnClick = PresetListboxClick
+                end
+                object SpTBXLabel3: TSpTBXLabel
+                  Left = 152
+                  Top = 8
+                  Width = 64
+                  Height = 16
+                  Caption = 'Preset list :'
+                  Font.Charset = DEFAULT_CHARSET
+                  Font.Color = clWindowText
+                  Font.Height = -13
+                  Font.Name = 'MS Sans Serif'
+                  Font.Style = []
+                  ParentFont = False
+                  LinkFont.Charset = DEFAULT_CHARSET
+                  LinkFont.Color = clBlue
+                  LinkFont.Height = -11
+                  LinkFont.Name = 'MS Sans Serif'
+                  LinkFont.Style = [fsUnderline]
+                end
+                object SpTBXGroupBox1: TSpTBXGroupBox
+                  Left = 8
+                  Top = 8
+                  Width = 137
+                  Height = 129
+                  Caption = 'Options'
+                  TabOrder = 2
+                  TBXStyleBackground = True
+                  object btDeletePreset: TSpTBXButton
+                    Left = 8
+                    Top = 72
+                    Width = 121
+                    Height = 25
+                    Caption = 'Delete'
+                    TabOrder = 1
+                    OnClick = btDeletePresetClick
+                    LinkFont.Charset = DEFAULT_CHARSET
+                    LinkFont.Color = clBlue
+                    LinkFont.Height = -11
+                    LinkFont.Name = 'MS Sans Serif'
+                    LinkFont.Style = [fsUnderline]
+                  end
+                  object btSavePreset: TSpTBXButton
+                    Left = 8
+                    Top = 40
+                    Width = 121
+                    Height = 25
+                    Caption = 'Save'
+                    TabOrder = 2
+                    OnClick = btSavePresetClick
+                    LinkFont.Charset = DEFAULT_CHARSET
+                    LinkFont.Color = clBlue
+                    LinkFont.Height = -11
+                    LinkFont.Name = 'MS Sans Serif'
+                    LinkFont.Style = [fsUnderline]
+                  end
+                  object PresetNameTextbox: TSpTBXEdit
+                    Left = 8
+                    Top = 18
+                    Width = 121
+                    Height = 21
+                    TabOrder = 3
+                    Text = 'Preset name'
+                  end
+                  object btClearPreset: TSpTBXButton
+                    Left = 8
+                    Top = 96
+                    Width = 121
+                    Height = 25
+                    Caption = 'Clear'
+                    TabOrder = 0
+                    OnClick = btClearPresetClick
+                    LinkFont.Charset = DEFAULT_CHARSET
+                    LinkFont.Color = clBlue
+                    LinkFont.Height = -11
+                    LinkFont.Name = 'MS Sans Serif'
+                    LinkFont.Style = [fsUnderline]
+                  end
+                end
+              end
               object SpTBXTabSheet1: TSpTBXTabSheet
                 Left = 0
                 Top = 0
-                Width = 748
+                Width = 826
                 Height = 146
                 Caption = 'Filters'
                 ImageIndex = -1
                 DesignSize = (
-                  748
+                  826
                   146)
                 TabItem = 'SpTBXTabItem1'
                 object FilterList: TVirtualStringTree
-                  Left = 424
+                  Left = 448
                   Top = 8
-                  Width = 311
+                  Width = 365
                   Height = 129
                   Anchors = [akLeft, akTop, akRight]
                   CheckImageKind = ckSystem
@@ -540,12 +641,12 @@
                     end
                     item
                       Position = 3
-                      Width = 144
+                      Width = 198
                       WideText = 'Value'
                     end&gt;
                 end
                 object ClearFilterListButton: TSpTBXButton
-                  Left = 384
+                  Left = 408
                   Top = 72
                   Width = 33
                   Height = 25
@@ -559,7 +660,7 @@
                   LinkFont.Style = [fsUnderline]
                 end
                 object RemoveFromFilterListButton: TSpTBXButton
-                  Left = 384
+                  Left = 408
                   Top = 40
                   Width = 33
                   Height = 25
@@ -573,7 +674,7 @@
                   LinkFont.Style = [fsUnderline]
                 end
                 object AddToFilterListButton: TSpTBXButton
-                  Left = 384
+                  Left = 408
                   Top = 8
                   Width = 33
                   Height = 25
@@ -589,7 +690,7 @@
                 object FilterValueTextBox: TSpTBXEdit
                   Left = 216
                   Top = 8
-                  Width = 161
+                  Width = 185
                   Height = 21
                   TabOrder = 4
                 end
@@ -630,7 +731,7 @@
                 object SpTBXPanel2: TSpTBXPanel
                   Left = 8
                   Top = 40
-                  Width = 369
+                  Width = 393
                   Height = 97
                   Caption = 'SpTBXPanel1'
                   ThemeType = thtWindows
@@ -683,7 +784,7 @@
                     OnClick = PasswordedFilterClick
                   end
                   object RankLimitFilter: TSpTBXCheckBox
-                    Left = 88
+                    Left = 104
                     Top = 72
                     Width = 114
                     Height = 15
@@ -692,7 +793,7 @@
                     OnClick = RankLimitFilterClick
                   end
                   object ReplaysFilter: TSpTBXCheckBox
-                    Left = 88
+                    Left = 104
                     Top = 56
                     Width = 51
                     Height = 15
@@ -701,7 +802,7 @@
                     OnClick = ReplaysFilterClick
                   end
                   object ModsNotAvailableFilter: TSpTBXCheckBox
-                    Left = 88
+                    Left = 104
                     Top = 40
                     Width = 102
                     Height = 15
@@ -710,7 +811,7 @@
                     OnClick = ModsNotAvailableFilterClick
                   end
                   object MapsNotAvailableFilter: TSpTBXCheckBox
-                    Left = 88
+                    Left = 104
                     Top = 24
                     Width = 102
                     Height = 15
@@ -719,7 +820,7 @@
                     OnClick = MapsNotAvailableFilterClick
                   end
                   object NatTraversalFilter: TSpTBXCheckBox
-                    Left = 88
+                    Left = 104
                     Top = 8
                     Width = 78
                     Height = 15
@@ -728,7 +829,7 @@
                     OnClick = NatTraversalFilterClick
                   end
                   object PlayersSignButton: TSpTBXButton
-                    Left = 296
+                    Left = 320
                     Top = 8
                     Width = 25
                     Height = 20
@@ -742,7 +843,7 @@
                     LinkFont.Style = [fsUnderline]
                   end
                   object PlayersValueTextBox: TJvSpinEdit
-                    Left = 320
+                    Left = 344
                     Top = 8
                     Width = 41
                     Height = 20
@@ -753,7 +854,7 @@
                     OnChange = PlayersValueTextBoxChange
                   end
                   object MaxPlayersSignButton: TSpTBXButton
-                    Left = 296
+                    Left = 320
                     Top = 39
                     Width = 25
                     Height = 20
@@ -767,7 +868,7 @@
                     LinkFont.Style = [fsUnderline]
                   end
                   object MaxPlayersValueTextBox: TJvSpinEdit
-                    Left = 320
+                    Left = 344
                     Top = 39
                     Width = 41
                     Height = 20
@@ -779,7 +880,7 @@
                     OnChange = MaxPlayersValueTextBoxChange
                   end
                   object MaxPlayersFilter: TSpTBXCheckBox
-                    Left = 216
+                    Left = 232
                     Top = 40
                     Width = 78
                     Height = 15
@@ -788,7 +889,7 @@
                     OnClick = MaxPlayersFilterClick
                   end
                   object PlayersFilter: TSpTBXCheckBox
-                    Left = 216
+                    Left = 232
                     Top = 10
                     Width = 55
                     Height = 15
@@ -798,110 +899,9 @@
                   end
                 end
               end
-              object SpTBXTabSheet2: TSpTBXTabSheet
-                Left = 0
-                Top = 0
-                Width = 748
-                Height = 146
-                Caption = 'Presets'
-                ImageIndex = -1
-                DesignSize = (
-                  748
-                  146)
-                TabItem = 'SpTBXTabItem2'
-                object PresetListbox: TSpTBXListBox
-                  Left = 152
-                  Top = 26
-                  Width = 583
-                  Height = 113
-                  Anchors = [akLeft, akTop, akRight]
-                  ItemHeight = 16
-                  Items.Strings = (
-                    'default')
-                  TabOrder = 0
-                  OnClick = PresetListboxClick
-                end
-                object SpTBXLabel3: TSpTBXLabel
-                  Left = 152
-                  Top = 8
-                  Width = 64
-                  Height = 16
-                  Caption = 'Preset list :'
-                  Font.Charset = DEFAULT_CHARSET
-                  Font.Color = clWindowText
-                  Font.Height = -13
-                  Font.Name = 'MS Sans Serif'
-                  Font.Style = []
-                  ParentFont = False
-                  LinkFont.Charset = DEFAULT_CHARSET
-                  LinkFont.Color = clBlue
-                  LinkFont.Height = -11
-                  LinkFont.Name = 'MS Sans Serif'
-                  LinkFont.Style = [fsUnderline]
-                end
-                object SpTBXGroupBox1: TSpTBXGroupBox
-                  Left = 8
-                  Top = 8
-                  Width = 137
-                  Height = 129
-                  Caption = 'Options'
-                  TabOrder = 2
-                  TBXStyleBackground = True
-                  object btDeletePreset: TSpTBXButton
-                    Left = 8
-                    Top = 72
-                    Width = 121
-                    Height = 25
-                    Caption = 'Delete'
-                    TabOrder = 1
-                    OnClick = btDeletePresetClick
-                    LinkFont.Charset = DEFAULT_CHARSET
-                    LinkFont.Color = clBlue
-                    LinkFont.Height = -11
-                    LinkFont.Name = 'MS Sans Serif'
-                    LinkFont.Style = [fsUnderline]
-                  end
-                  object btSavePreset: TSpTBXButton
-                    Left = 8
-                    Top = 40
-                    Width = 121
-                    Height = 25
-                    Caption = 'Save'
-                    TabOrder = 2
-                    OnClick = btSavePresetClick
-                    LinkFont.Charset = DEFAULT_CHARSET
-                    LinkFont.Color = clBlue
-                    LinkFont.Height = -11
-                    LinkFont.Name = 'MS Sans Serif'
-                    LinkFont.Style = [fsUnderline]
-                  end
-                  object PresetNameTextbox: TSpTBXEdit
-                    Left = 8
-                    Top = 18
-                    Width = 121
-                    Height = 21
-                    TabOrder = 3
-                    Text = 'Preset name'
-                  end
-                  object btClearPreset: TSpTBXButton
-                    Left = 8
-                    Top = 96
-                    Width = 121
-                    Height = 25
-                    Caption = 'Clear'
-                    TabOrder = 0
-                    OnClick = btClearPresetClick
-                    LinkFont.Charset = DEFAULT_CHARSET
-                    LinkFont.Color = clBlue
-                    LinkFont.Height = -11
-                    LinkFont.Name = 'MS Sans Serif'
-                    LinkFont.Style = [fsUnderline]
-                  end
-                end
-              end
             end
             object EnableFilters: TSpTBXCheckBox
-              Left = 638
+              Left = 716
               Top = 154
               Width = 110
               Height = 18
@@ -920,7 +920,7 @@
           object FiltersButton: TSpTBXButton
             Left = 2
             Top = 83
-            Width = 752
+            Width = 830
             Height = 12
             Align = alBottom
             TabOrder = 3
@@ -938,7 +938,7 @@
       object Splitter2: TSpTBXSplitter
         Left = 2
         Top = 128
-        Width = 756
+        Width = 834
         Height = 6
         Cursor = crSizeNS
         Caption = 'Splitter2'
@@ -951,7 +951,7 @@
       object MainPanel: TSpTBXPanel
         Left = 2
         Top = 2
-        Width = 756
+        Width = 834
         Height = 126
         Align = alClient
         TabOrder = 2
@@ -959,7 +959,7 @@
         object PageControl1: TPageControl
           Left = 2
           Top = 2
-          Width = 589
+          Width = 667
           Height = 122
           Align = alClient
           Constraints.MinHeight = 1
@@ -972,7 +972,7 @@
           OnResize = PageControl1Resize
         end
         object Panel2: TSpTBXPanel
-          Left = 601
+          Left = 679
           Top = 2
           Width = 153
           Height = 122
@@ -1102,7 +1102,7 @@
           end
         end
         object Splitter1: TSpTBXSplitter
-          Left = 591
+          Left = 669
           Top = 2
           Width = 10
           Height = 122
@@ -1116,7 +1116,7 @@
     object Panel4: TSpTBXPanel
       Left = 4
       Top = 30
-      Width = 760
+      Width = 838
       Height = 41
       Align = alTop
       Color = clNone
@@ -1125,9 +1125,9 @@
       BorderType = pbrRaised
       TBXStyleBackground = True
       object OptionsSpeedButton: TSpTBXSpeedButton
-        Left = 328
+        Left = 448
         Top = 8
-        Width = 81
+        Width = 121
         Height = 25
         Caption = 'Options'
         OnClick = OptionsSpeedButtonClick
@@ -1140,7 +1140,7 @@
       object BattleScreenSpeedButton: TSpTBXSpeedButton
         Left = 64
         Top = 8
-        Width = 81
+        Width = 121
         Height = 25
         Caption = 'Host battle'
         DropDownMenu = HostBattlePopupMenu
@@ -1152,11 +1152,17 @@
         ThemeType = thtTBX
       end
       object HelpButton: TSpTBXSpeedButton
-        Left = 416
+        Left = 576
         Top = 8
-        Width = 81
+        Width = 121
         Height = 25
         Caption = 'Help / Links'
+        Font.Charset = DEFAULT_CHARSET
+        Font.Color = clWindowText
+        Font.Height = -11
+        Font.Name = 'MS Sans Serif'
+        Font.Style = []
+        ParentFont = False
         DropDownMenu = HelpPopupMenu
         LinkFont.Charset = DEFAULT_CHARSET
         LinkFont.Color = clBlue
@@ -1165,9 +1171,9 @@
         LinkFont.Style = [fsUnderline]
       end
       object ReplaysButton: TSpTBXSpeedButton
-        Left = 240
+        Left = 320
         Top = 8
-        Width = 81
+        Width = 121
         Height = 25
         Hint = 
           'Every game you play or spectate are saved so you can re watch th' +
@@ -1183,9 +1189,9 @@
         LinkFont.Style = [fsUnderline]
       end
       object SearchButton: TSpTBXSpeedButton
-        Left = 504
+        Left = 704
         Top = 8
-        Width = 81
+        Width = 121
         Height = 25
         Hint = 'Search for maps, mods and scripts'
         Caption = 'Search files'
@@ -1215,9 +1221,9 @@
         OnClick = ConnectButtonClick
       end
       object SinglePlayerButton: TSpTBXButton
-        Left = 152
+        Left = 192
         Top = 8
-        Width = 81
+        Width = 121
         Height = 25
         Caption = 'Single Player'
         TabOrder = 6
@@ -1232,7 +1238,7 @@
     object NewsMainPanel: TSpTBXPanel
       Left = 4
       Top = 71
-      Width = 760
+      Width = 838
       Height = 41
       Caption = 'NewsMainPanel'
       Align = alTop
@@ -1242,7 +1248,7 @@
       object ExpandNewsButton: TSpTBXButton
         Left = 2
         Top = 27
-        Width = 756
+        Width = 834
         Height = 12
         Align = alBottom
         TabOrder = 0
@@ -1258,7 +1264,7 @@
       object ScrollingNewsPanel: TSpTBXPanel
         Left = 2
         Top = -2
-        Width = 756
+        Width = 834
         Height = 29
         Align = alClient
         TabOrder = 1
@@ -4708,8 +4714,8 @@
       000000000000}
   end
   object SortPopupMenu: TPopupMenu
-    Left = 688
-    Top = 40
+    Left = 776
+    Top = 120
     object Nosorting1: TMenuItem
       Caption = 'Don'#39't sort'
     end
@@ -6598,8 +6604,8 @@
   end
   object SearchFormPopupMenu: TSpTBXFormPopupMenu
     PopupFocus = True
-    Left = 540
-    Top = 78
+    Left = 756
+    Top = 70
   end
   object BattleListPopupMenu: TSpTBXPopupMenu
     OnInitPopup = BattleListPopupMenuInitPopup
@@ -6664,8 +6670,8 @@
     end
   end
   object HelpPopupMenu: TSpTBXPopupMenu
-    Left = 456
-    Top = 78
+    Left = 624
+    Top = 62
     object mnuHelp: TSpTBXItem
       Caption = 'Help'
       FontSettings.Bold = tsTrue
@@ -7192,8 +7198,8 @@
   end
   object SearchPlayerFormPopupMenu: TSpTBXFormPopupMenu
     OnPopup = SearchPlayerFormPopupMenuPopup
-    Left = 652
-    Top = 62
+    Left = 660
+    Top = 126
   end
   object HttpCli3: THttpCli
     LocalAddr = '0.0.0.0'

Modified: Lobby/TASClient/MainUnit.pas
===================================================================
--- Lobby/TASClient/MainUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/MainUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -210,7 +210,7 @@
   RegExpr,TntGraphics,SpTBXDkPanels, TB2Dock, UWebBrowserWrapper,TypInfo,TntForms,
   Clipbrd,SyncObjs, JvExStdCtrls, JvBehaviorLabel, OleCtrls, SHDocVw,
   JvWinampLabel, JvExControls, JvLinkLabel, xmldom, XMLIntf, msxmldom,
-  XMLDoc;
+  XMLDoc, ActnList;
 
 const
   CountryNames: array[0..240] of string = (
@@ -1761,7 +1761,7 @@
   PythonScriptDebugFormUnit,LobbyScriptUnit, SpringDownloaderFormUnit,
   LogonFormUnit, MapSelectionFormUnit, TipsFormUnit,
   ColorsPreferenceUnit, CustomizeGUIFormUnit, SetValuesFormUnit,
-  TntWideStrings, SpringSettingsProfileFormUnit;
+  TntWideStrings, SpringSettingsProfileFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -1817,22 +1817,22 @@
 end;
 procedure TMainForm.mnuFAQClick(Sender: TObject);
 begin
-  Misc.OpenURLInDefaultBrowser('<A HREF="http://spring.clan-sy.com/wiki/FAQ">http://spring.clan-sy.com/wiki/FAQ</A>');
+  Misc.OpenURLInDefaultBrowser(_('<A HREF="http://spring.clan-sy.com/wiki/FAQ">http://spring.clan-sy.com/wiki/FAQ</A>'));
 end;
 
 procedure TMainForm.mnuPlayingSpringClick(Sender: TObject);
 begin
-  Misc.OpenURLInDefaultBrowser('<A HREF="http://spring.clan-sy.com/wiki/Using_Spring">http://spring.clan-sy.com/wiki/Using_Spring</A>');
+  Misc.OpenURLInDefaultBrowser(_('<A HREF="http://spring.clan-sy.com/wiki/Using_Spring">http://spring.clan-sy.com/wiki/Using_Spring</A>'));
 end;
 
 procedure TMainForm.mnuGlossaryClick(Sender: TObject);
 begin
-  Misc.OpenURLInDefaultBrowser('<A HREF="http://spring.clan-sy.com/wiki/Glossary">http://spring.clan-sy.com/wiki/Glossary</A>');
+  Misc.OpenURLInDefaultBrowser(_('<A HREF="http://spring.clan-sy.com/wiki/Glossary">http://spring.clan-sy.com/wiki/Glossary</A>'));
 end;
 
 procedure TMainForm.mnuStrategyAndTacticsClick(Sender: TObject);
 begin
-  Misc.OpenURLInDefaultBrowser('<A HREF="http://spring.clan-sy.com/wiki/Strategy_and_Tactics">http://spring.clan-sy.com/wiki/Strategy_and_Tactics</A>');
+  Misc.OpenURLInDefaultBrowser(_('<A HREF="http://spring.clan-sy.com/wiki/Strategy_and_Tactics">http://spring.clan-sy.com/wiki/Strategy_and_Tactics</A>'));
 end;
 
 procedure TMainForm.OnDataHasArrivedMessage(var Msg: TMessage); // responds to WM_DATAHASARRIVED message
@@ -1869,7 +1869,7 @@
 begin
   index := 0;
   for i := 0 to PreferencesForm.SpTBXTabControl1.Items.Count-1 do
-    if PreferencesForm.SpTBXTabControl1.Items[i].Caption = 'Account' then
+    if PreferencesForm.SpTBXTabControl1.Items[i].Caption = _('Account') then
     begin
       index := i;
       Break;
@@ -1936,7 +1936,7 @@
   begin
     Handled := True;
     if MessageDlg('Reload button image list dynamically?', mtConfirmation, [mbYes, mbNo], 0) &lt;&gt; mrYes then Exit;
-    if not LoadImagesDynamically then MessageDlg('Failed to images! Make sure you have all the images in \Graphics folder!', mtError, [mbOK], 0);
+    if not LoadImagesDynamically then MessageDlg(_('Failed to images! Make sure you have all the images in \Graphics folder!'), mtError, [mbOK], 0);
 
     UpdateClientsListBox;
     VDTBattles.Invalidate;
@@ -2180,7 +2180,7 @@
         (PageControl1.Pages[i] as TMyTabSheet).LogFileName := FileName;
         if (PageControl1.Pages[i] as TMyTabSheet).LogFile = nil then raise Exception.Create('');
       except
-        AddMainLog('Error: unable to access file: ' + FileName, Colors.Error);
+        AddMainLog(_('Error: unable to access file: ') + FileName, Colors.Error);
       end;
     end;
 
@@ -2192,7 +2192,7 @@
       BattleForm.LogFile := OpenLog(FileName);
       if BattleForm.LogFile = nil then raise Exception.Create('');
     except
-      AddMainLog('Error: unable to access file: ' + FileName, Colors.Error);
+      AddMainLog(_('Error: unable to access file: ') + FileName, Colors.Error);
     end;
   end;
 
@@ -3129,7 +3129,7 @@
   if Result = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3139,7 +3139,7 @@
   if Result = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3149,7 +3149,7 @@
   if Result = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3161,13 +3161,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToInt(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3179,13 +3179,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToInt(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3197,13 +3197,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToInt(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3215,13 +3215,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToInt(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3233,7 +3233,7 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToInt(tmp);
@@ -3251,13 +3251,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToInt(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3269,13 +3269,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToInt(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3287,13 +3287,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToInt(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3305,13 +3305,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToInt(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3323,13 +3323,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToBool(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3341,13 +3341,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
   try
     Result := StrToBool(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3359,13 +3359,13 @@
   if tmp = '' then
   begin
     self.Corrupted := true;
-    raise Exception.Create('Corrupt script file!');
+    raise Exception.Create(_('Corrupt script file!'));
   end;
   try
     Result := StrToBool(tmp);
   except
     self.Corrupted := true;
-    raise Exception.Create('Corrupted script file!');
+    raise Exception.Create(_('Corrupted script file!'));
   end;
 end;
 
@@ -3390,7 +3390,7 @@
   i: Integer;
 begin
   i := CompleteKeyList.IndexOf(LowerCase('GAME/HOSTIP'));
-  if i = -1 then raise Exception.Create('Corrupted script file!');
+  if i = -1 then raise Exception.Create(_('Corrupted script file!'));
   KeyValueList[i] := NewIP;
 end;
 
@@ -3399,7 +3399,7 @@
   i: Integer;
 begin
   i := CompleteKeyList.IndexOf(LowerCase('GAME/HOSTPORT'));
-  if i = -1 then raise Exception.Create('Corrupted script file!');
+  if i = -1 then raise Exception.Create(_('Corrupted script file!'));
   KeyValueList[i] := NewPort;
 end;
 
@@ -3408,7 +3408,7 @@
   i: Integer;
 begin
   i := CompleteKeyList.IndexOf(LowerCase('GAME/MYPLAYERNUM'));
-  if i = -1 then raise Exception.Create('Corrupted script file!');
+  if i = -1 then raise Exception.Create(_('Corrupted script file!'));
   KeyValueList[i] := IntToStr(NewNum);
 end;
 
@@ -3417,7 +3417,7 @@
   i: Integer;
 begin
   i := CompleteKeyList.IndexOf(LowerCase('GAME/NUMPLAYERS'));
-  if i = -1 then raise Exception.Create('Corrupted script file!');
+  if i = -1 then raise Exception.Create(_('Corrupted script file!'));
   KeyValueList[i] := IntToStr(NewNum);
 end;
 
@@ -3495,7 +3495,7 @@
       else if LeftStr(trimedLine,1) = '}' then
       begin
         if currentCompleteKey.Count = 0 then
-          raise Exception.Create('Corrupted script on line '+IntToStr(i));
+          raise Exception.Create(_('Corrupted script on line ')+IntToStr(i));
         currentCompleteKey.Delete(currentCompleteKey.Count-1);
       end
       else if (Length(trimedLine) &gt; 4) and (currentCompleteKey.Count&gt;0) then // key=value
@@ -3639,6 +3639,13 @@
   i: Integer;
   s: string;
 begin
+  TP_GlobalIgnoreClassProperty(TAction,'Category');
+  TP_GlobalIgnoreClassProperty(TControl,'HelpKeyword');
+  TP_GlobalIgnoreClassProperty(TNotebook,'Pages');
+  TP_GlobalIgnoreClass (TWebBrowser);
+  TP_GlobalIgnoreClass (TWebBrowserWrapper);
+  TranslateComponent(self);
+
   Left := 10;
   Top := 10;
 
@@ -3686,14 +3693,14 @@
 
   TKeepAliveThread.Create(False);
 
-  SplashScreenForm.UpdateText('initializing unitsync.dll ...');
+  SplashScreenForm.UpdateText(_('initializing unitsync.dll ...'));
   if not Utility.InitLib then
   begin
-    MessageDlg('Error initializing unitsync.dll!', mtError, [mbOK], 0);
+    MessageDlg(_('Error initializing unitsync.dll!'), mtError, [mbOK], 0);
     Application.Terminate;
   end;
 
-  SplashScreenForm.UpdateText('initializing TASClient ...');
+  SplashScreenForm.UpdateText(_('initializing TASClient ...'));
 
   for i := 1 to ParamCount do
   begin
@@ -3762,7 +3769,7 @@
   SpringDownloaderFormUnit.DownloadList := TStringList.Create;
 
   // we have to set the splash screen title bar back to what it was before (since we changed it in OnFormCreate event):
-  SplashScreenForm.UpdateText('creating forms ...'); // main form will change the update text, that is why we change it back again
+  SplashScreenForm.UpdateText(_('creating forms ...')); // main form will change the update text, that is why we change it back again
 
   // finally move to post-initialization (will happen once all other forms have been created too):
   PostMessage(Handle, WM_AFTERCREATE, 0, 0);
@@ -3851,7 +3858,7 @@
       //MessageDlg('Program has detected that &quot;' + LOBBY_FOLDER + '&quot; folder does not exist. It will be now created.', mtInformation, [mbOK], 0);
       if not CreateDir(ExtractFilePath(Application.ExeName) + LOBBY_FOLDER) then
       begin
-        MessageDlg('Unable to create directory. Program will now exit ...', mtError, [mbOK], 0);
+        MessageDlg(_('Unable to create directory. Program will now exit ...'), mtError, [mbOK], 0);
         Application.Terminate;                                     
         Exit;
       end;
@@ -3862,7 +3869,7 @@
       //MessageDlg('Program has detected that &quot;' + CACHE_FOLDER + '&quot; folder does not exist. It will be now created.', mtInformation, [mbOK], 0);
       if not CreateDir(ExtractFilePath(Application.ExeName) + CACHE_FOLDER) then
       begin
-        MessageDlg('Unable to create directory. Program will now exit ...', mtError, [mbOK], 0);
+        MessageDlg(_('Unable to create directory. Program will now exit ...'), mtError, [mbOK], 0);
         Application.Terminate;
         Exit;
       end;
@@ -3873,7 +3880,7 @@
       //MessageDlg('Program has detected that &quot;' + ONLINE_CACHE_FOLDER + '&quot; folder does not exist. It will be now created.', mtInformation, [mbOK], 0);
       if not CreateDir(ExtractFilePath(Application.ExeName) + ONLINE_CACHE_FOLDER) then
       begin
-        MessageDlg('Unable to create directory. Program will now exit ...', mtError, [mbOK], 0);
+        MessageDlg(_('Unable to create directory. Program will now exit ...'), mtError, [mbOK], 0);
         Application.Terminate;
         Exit;
       end;
@@ -3884,7 +3891,7 @@
       //MessageDlg('Program has detected that &quot;' + MAPS_CACHE_FOLDER + '&quot; folder does not exist. It will be now created.', mtInformation, [mbOK], 0);
       if not CreateDir(ExtractFilePath(Application.ExeName) + MAPS_CACHE_FOLDER) then
       begin
-        MessageDlg('Unable to create directory. Program will now exit ...', mtError, [mbOK], 0);
+        MessageDlg(_('Unable to create directory. Program will now exit ...'), mtError, [mbOK], 0);
         Application.Terminate;
         Exit;
       end;
@@ -3895,7 +3902,7 @@
       //MessageDlg('Program has detected that &quot;' + MODS_CACHE_FOLDER + '&quot; folder does not exist. It will be now created.', mtInformation, [mbOK], 0);
       if not CreateDir(ExtractFilePath(Application.ExeName) + MODS_CACHE_FOLDER) then
       begin
-        MessageDlg('Unable to create directory. Program will now exit ...', mtError, [mbOK], 0);
+        MessageDlg(_('Unable to create directory. Program will now exit ...'), mtError, [mbOK], 0);
         Application.Terminate;
         Exit;
       end;
@@ -3906,7 +3913,7 @@
       //MessageDlg('Program has detected that &quot;' + LOG_FOLDER + '&quot; folder does not exist. It will be now created.', mtInformation, [mbOK], 0);
       if not CreateDir(ExtractFilePath(Application.ExeName) + LOG_FOLDER) then
       begin
-        MessageDlg('Unable to create directory. Program will now exit ...', mtError, [mbOK], 0);
+        MessageDlg(_('Unable to create directory. Program will now exit ...'), mtError, [mbOK], 0);
         Application.Terminate;
         Exit;
       end;
@@ -3917,7 +3924,7 @@
       //MessageDlg('Program has detected that &quot;' + VAR_FOLDER + '&quot; folder does not exist. It will be now created.', mtInformation, [mbOK], 0);
       if not CreateDir(ExtractFilePath(Application.ExeName) + VAR_FOLDER) then
       begin
-        MessageDlg('Unable to create directory. Program will now exit ...', mtError, [mbOK], 0);
+        MessageDlg(_('Unable to create directory. Program will now exit ...'), mtError, [mbOK], 0);
         Application.Terminate;
         Exit;
       end;
@@ -3928,7 +3935,7 @@
       //MessageDlg('Program has detected that &quot;' + FILTERS_FOLDER + '&quot; folder does not exist. It will be now created.', mtInformation, [mbOK], 0);
       if not CreateDir(ExtractFilePath(Application.ExeName) + FILTERS_FOLDER) then
       begin
-        MessageDlg('Unable to create directory. Program will now exit ...', mtError, [mbOK], 0);
+        MessageDlg(_('Unable to create directory. Program will now exit ...'), mtError, [mbOK], 0);
         Application.Terminate;
         Exit;
       end;
@@ -3939,7 +3946,7 @@
       //MessageDlg('Program has detected that &quot;' + REPLAY_FILTERS_FOLDER + '&quot; folder does not exist. It will be now created.', mtInformation, [mbOK], 0);
       if not CreateDir(ExtractFilePath(Application.ExeName) + REPLAY_FILTERS_FOLDER) then
       begin
-        MessageDlg('Unable to create directory. Program will now exit ...', mtError, [mbOK], 0);
+        MessageDlg(_('Unable to create directory. Program will now exit ...'), mtError, [mbOK], 0);
         Application.Terminate;
         Exit;
       end;
@@ -3947,11 +3954,11 @@
 
     if Preferences.SaveLogs then OpenAllLogs; // do this before all else, so that we don't miss any message
 
-    SplashScreenForm.UpdateText('loading maps ...');
+    SplashScreenForm.UpdateText(_('loading maps ...'));
 
     // lod map list in battle form and select some map (WARNING: this must be done AFTER you check if cache folder exists!):
     Utility.ReloadMapList(True);
-    SplashScreenForm.UpdateText('finalizing ...');
+    SplashScreenForm.UpdateText(_('finalizing ...'));
     if Utility.MapList.IndexOf(Preferences.LastOpenMap) = -1 then
     begin
       if Utility.MapList.Count = 0 then
@@ -3967,7 +3974,7 @@
 
     if not RunningUnderWine then
     begin
-      SplashScreenForm.UpdateText('loading menu ...');
+      SplashScreenForm.UpdateText(_('loading menu ...'));
       MenuForm.LoadSkin(Preferences.SPSkin);
     end;
 
@@ -3979,7 +3986,7 @@
         FlashWindow(SplashScreenForm.Handle,True);
       if SplashScreenForm.MsgBox('Program has detected that one or more maps in your &quot;maps&quot; folder don''t have minimaps cached yet. Would you like to cache them now? (note: this process may take several minutes depending on the number of non-cached maps)', mtConfirmation, [mbYes, mbNo], 0) = mrYes then
       begin
-        SplashScreenForm.UpdateText('loading missing minimaps ...');
+        SplashScreenForm.UpdateText(_('loading missing minimaps ...'));
         MapListForm.LoadAllMissingMinimaps;
       end;
     end;
@@ -4205,7 +4212,7 @@
     tmpts.LogFile := OpenLog(FileName);
     tmpts.LogFileName := FileName;
     if tmpts.LogFile = nil then
-      AddMainLog('Error: unable to access file: ' + FileName, Colors.Error)
+      AddMainLog(_('Error: unable to access file: ') + FileName, Colors.Error)
     else
     begin
       logsLastLines := ReadLastLogFileLines(tmpts.LogFile,30);
@@ -4343,9 +4350,9 @@
   ClientsListBox.Items.BeginUpdate;
 
   if c = 0 then
-    PlayersLabel.Caption := 'Players:'
+    PlayersLabel.Caption := _('Players:')
   else
-    PlayersLabel.Caption := 'Players (' + IntToStr(c) + '):';
+    PlayersLabel.Caption := _('Players (') + IntToStr(c) + '):';
   ClientsListBox.Items.SetTextW(PWideChar(WideString(CreateStrings(c))));
 
 
@@ -4409,13 +4416,13 @@
     begin
       if (Status.ConnectionState &lt;&gt; Connected) or (not Status.LoggedIn) then
       begin
-        AddMainLog('Must be connected and logged on a server to join channel!', Colors.Error);
+        AddMainLog(_('Must be connected and logged on a server to join channel!'), Colors.Error);
         Exit;
       end;
 
       if (sl.Count &lt; 2) or (sl[1][1] &lt;&gt; '#') then
       begin
-        AddMainLog('Cannot join - bad or no argument (don''t forget to put &quot;#&quot; in front of a channel''s name!)', Colors.Error);
+        AddMainLog(_('Cannot join - bad or no argument (don''t forget to put &quot;#&quot; in front of a channel''s name!)'), Colors.Error);
         Exit;
       end;
 
@@ -4426,7 +4433,7 @@
     begin
       if (sl.Count &lt;&gt; 1) then
       begin
-        MessageDlg('Invalid command - ''PART'' requires no arguments', mtInformation, [mbOK], 0);
+        MessageDlg(_('Invalid command - ''PART'' requires no arguments'), mtInformation, [mbOK], 0);
         Exit;
       end;
 
@@ -4436,11 +4443,11 @@
     begin
       if (Status.ConnectionState &lt;&gt; Connected) or (not Status.LoggedIn) then
       begin
-        AddMainLog('Must be connected and logged on a server to send command!', Colors.Error);
+        AddMainLog(_('Must be connected and logged on a server to send command!'), Colors.Error);
         Exit;
       end;
 
-      AddMainLog('Requesting channel list from server ...', Colors.Info);
+      AddMainLog(_('Requesting channel list from server ...'), Colors.Info);
       TryToSendCommand('CHANNELS');
     end
     else if (sl[0] = 'ME') then
@@ -4453,18 +4460,18 @@
     begin
       if sl.Count &lt;&gt; 2 then
       begin
-        AddMainLog('RING command requires exactly 1 parameter!', Colors.Error);
+        AddMainLog(_('RING command requires exactly 1 parameter!'), Colors.Error);
         Exit;
       end;
 
       if MainForm.GetClient(sl[1]) = nil then
       begin
-        MessageDlg('Invalid RING command. User does not exist! (Note: all names are case-sensitive)', mtWarning, [mbOK], 0);
+        MessageDlg(_('Invalid RING command. User does not exist! (Note: all names are case-sensitive)'), mtWarning, [mbOK], 0);
         Exit;
       end;
 
       TryToSendCommand('RING', sl[1]);
-      AddMainLog('Ringing ' + sl[1] + ' ...', Colors.Info);
+      AddMainLog(_('Ringing ') + sl[1] + ' ...', Colors.Info);
     end
     else if (sl[0] = 'HELP') then
     begin
@@ -4474,7 +4481,7 @@
     begin
       if not (Status.ConnectionState = Connected)  then
       begin
-        AddMainLog('You must be connected and logged on the server for this command to take effect!', Colors.Error);
+        AddMainLog(_('You must be connected and logged on the server for this command to take effect!'), Colors.Error);
         Exit;
       end;
 
@@ -4485,25 +4492,25 @@
 
       if not BattleForm.IsBattleActive then
       begin
-        AddMainLog('Denied: Battle is not active!', Colors.Error);
+        AddMainLog(_('Denied: Battle is not active!'), Colors.Error);
         Exit;
       end;
 
       if not (sl.Count = 2) then
       begin
-        AddMainLog('Denied: This command requires exactly 1 argument!', Colors.Error);
+        AddMainLog(_('Denied: This command requires exactly 1 argument!'), Colors.Error);
         Exit;
       end;
 
       if not (BattleState.Status = Hosting) then
       begin
-        AddMainLog('Denied: Only host can kick players from battle!', Colors.Error);
+        AddMainLog(_('Denied: Only host can kick players from battle!'), Colors.Error);
         Exit;
       end;
 
       if BattleState.Battle.GetClient(sl[1]) = nil then
       begin
-        AddMainLog('Denied: Player ' + sl[1] + ' not found in this battle. (Note: all names are case-sensitive)', Colors.Error);
+        AddMainLog(_('Denied: Player ') + sl[1] + _(' not found in this battle. (Note: all names are case-sensitive)'), Colors.Error);
         Exit;
       end;
 
@@ -4513,7 +4520,7 @@
     begin
       if (sl.Count &lt; 2) then
       begin
-        AddMainLog('Denied: This command requires exactly 1 argument!', Colors.Error);
+        AddMainLog(_('Denied: This command requires exactly 1 argument!'), Colors.Error);
         Exit;
       end;
 
@@ -4522,7 +4529,7 @@
 
       if MainForm.GetClient(sl[1]) = nil then
       begin
-        MessageDlg('Invalid KICK command. User does not exist! (Note: all names are case-sensitive)', mtWarning, [mbOK], 0);
+        MessageDlg(_('Invalid KICK command. User does not exist! (Note: all names are case-sensitive)'), mtWarning, [mbOK], 0);
         Exit;
       end;
 
@@ -4532,41 +4539,41 @@
     begin
       if not (sl.Count = 2) then
       begin
-        AddMainLog('Denied: This command requires exactly 1 argument!', Colors.Error);
+        AddMainLog(_('Denied: This command requires exactly 1 argument!'), Colors.Error);
         Exit;
       end;
 
-      AddMainLog('Requesting account rename from the server ...', Colors.Info);
+      AddMainLog(_('Requesting account rename from the server ...'), Colors.Info);
       MainForm.TryToSendCommand('RENAMEACCOUNT', sl[1]);
     end
     else if (sl[0] = 'PASSWORD') then
     begin
       if not (sl.Count = 3) then
       begin
-        AddMainLog('Denied: This command requires exactly 2 arguments (old and new passwords)!', Colors.Error);
+        AddMainLog(_('Denied: This command requires exactly 2 arguments (old and new passwords)!'), Colors.Error);
         Exit;
       end;
 
       if (not VerifyName(sl[2])) then
       begin
-        AddMainLog('Invalid password! Make sure your password consists only of legal characters.', Colors.Error);
+        AddMainLog(_('Invalid password! Make sure your password consists only of legal characters.'), Colors.Error);
         Exit;
       end;
 
-      AddMainLog('Trying to change password ...', Colors.Info);
+      AddMainLog(_('Trying to change password ...'), Colors.Info);
       MainForm.TryToSendCommand('CHANGEPASSWORD', Misc.GetMD5Hash(sl[1]) + ' ' + Misc.GetMD5Hash(sl[2]));
     end
     else if (sl[0] = 'TOPIC') and (not CameFromBattleScreen) then
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Not enough arguments specified!', Colors.Error);
+        AddMainLog(_('Error: Not enough arguments specified!'), Colors.Error);
         Exit;
       end;
 
       if Copy(sl[1], 1, 1) &lt;&gt; '#' then
       begin
-        AddMainLog('Error: Bad syntax!', Colors.Error);
+        AddMainLog(_('Error: Bad syntax!'), Colors.Error);
         Exit;
       end;
 
@@ -4576,13 +4583,13 @@
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Not enough arguments specified!', Colors.Error);
+        AddMainLog(_('Error: Not enough arguments specified!'), Colors.Error);
         Exit;
       end;
 
       if Copy(sl[1], 1, 1) &lt;&gt; '#' then
       begin
-        AddMainLog('Error: Bad syntax!', Colors.Error);
+        AddMainLog(_('Error: Bad syntax!'), Colors.Error);
         Exit;
       end;
 
@@ -4598,13 +4605,13 @@
     begin
       if (sl.Count &lt; 2) then
       begin
-        AddMainLog('Denied: Missing arguments!', Colors.Error);
+        AddMainLog(_('Denied: Missing arguments!'), Colors.Error);
         Exit;
       end;
 
       if MainForm.GetClient(sl[1]) = nil then
       begin
-        MessageDlg('Invalid IP command. User is not online! (Note: all names are case-sensitive)', mtWarning, [mbOK], 0);
+        MessageDlg(_('Invalid IP command. User is not online! (Note: all names are case-sensitive)'), mtWarning, [mbOK], 0);
         Exit;
       end;
 
@@ -4614,7 +4621,7 @@
     begin
       if (sl.Count &lt; 2) then
       begin
-        AddMainLog('Denied: Missing arguments!', Colors.Error);
+        AddMainLog(_('Denied: Missing arguments!'), Colors.Error);
         Exit;
       end;
 
@@ -4624,7 +4631,7 @@
     begin
       if (sl.Count &lt;&gt; 2) then
       begin
-        AddMainLog('Denied: This command requires exactly 1 argument!', Colors.Error);
+        AddMainLog(_('Denied: This command requires exactly 1 argument!'), Colors.Error);
         Exit;
       end;
 
@@ -4634,7 +4641,7 @@
     begin
       if (sl.Count &lt;&gt; 2) then
       begin
-        AddMainLog('Denied: This command requires exactly 1 argument!', Colors.Error);
+        AddMainLog(_('Denied: This command requires exactly 1 argument!'), Colors.Error);
         Exit;
       end;
 
@@ -4644,7 +4651,7 @@
     begin
       if (sl.Count &lt; 3) then
       begin
-        AddMainLog('Denied: Missing arguments!', Colors.Error);
+        AddMainLog(_('Denied: Missing arguments!'), Colors.Error);
         Exit;
       end;
 
@@ -4652,14 +4659,14 @@
         try
           duration := StrToInt(sl[3]);
         except
-          AddMainLog('Error in MUTE command: Duration must be an integer!', Colors.Error);
+          AddMainLog(_('Error in MUTE command: Duration must be an integer!'), Colors.Error);
           Exit;
         end
       else duration := 0;
 
       if Copy(sl[1], 1, 1) &lt;&gt; '#' then
       begin
-        AddMainLog('Error: Bad syntax!', Colors.Error);
+        AddMainLog(_('Error: Bad syntax!'), Colors.Error);
         Exit;
       end;
 
@@ -4671,13 +4678,13 @@
     begin
       if (sl.Count &lt;&gt; 3) then
       begin
-        AddMainLog('Denied: Missing arguments!', Colors.Error);
+        AddMainLog(_('Denied: Missing arguments!'), Colors.Error);
         Exit;
       end;
 
       if Copy(sl[1], 1, 1) &lt;&gt; '#' then
       begin
-        AddMainLog('Error: Bad syntax!', Colors.Error);
+        AddMainLog(_('Error: Bad syntax!'), Colors.Error);
         Exit;
       end;
 
@@ -4687,13 +4694,13 @@
     begin
       if (sl.Count &lt;&gt; 2) then
       begin
-        AddMainLog('Denied: Missing arguments!', Colors.Error);
+        AddMainLog(_('Denied: Missing arguments!'), Colors.Error);
         Exit;
       end;
 
       if Copy(sl[1], 1, 1) &lt;&gt; '#' then
       begin
-        AddMainLog('Error: Bad syntax!', Colors.Error);
+        AddMainLog(_('Error: Bad syntax!'), Colors.Error);
         Exit;
       end;
 
@@ -4701,7 +4708,7 @@
     end
     else if (sl[0] = 'TESTNOTIFY') then
     begin
-      AddNotification('Test', 'This is only a test.', 2000);
+      AddNotification(_('Test'), _('This is only a test.'), 2000);
     end
     else if (sl[0] = 'FORCEUPDATE') then
     begin
@@ -4721,7 +4728,7 @@
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Not enough arguments specified!', Colors.Error);
+        AddMainLog(_('Error: Not enough arguments specified!'), Colors.Error);
         Exit;
       end;
 
@@ -4748,13 +4755,13 @@
     end
     else if (sl[0] = 'LOCALIP') then
     begin
-      AddMainLog('Local IP address: ' + Misc.GetLocalIP, Colors.Error);
+      AddMainLog(_('Local IP address: ') + Misc.GetLocalIP, Colors.Error);
     end
     else if (sl[0] = 'PING') then
     begin
       if sl.Count &gt; 1 then
       begin
-        AddMainLog('Error: Too many arguments!', Colors.Error);
+        AddMainLog(_('Error: Too many arguments!'), Colors.Error);
         Exit;
       end;
       New(pinginfo);
@@ -4762,19 +4769,19 @@
       pinginfo.TimeSent := GetTickCount;
       Pings.Add(pinginfo);
 
-      AddMainLog('Pinging server ...', Colors.Info);
+      AddMainLog(_('Pinging server ...'), Colors.Info);
     end
     else if (sl[0] = 'MSG') then
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Too few arguments!', Colors.Error);
+        AddMainLog(_('Error: Too few arguments!'), Colors.Error);
         Exit;
       end;
 
       if MainForm.GetClient(sl[1]) = nil then
       begin
-        AddMainLog('User &lt;' + sl[1] + '&gt; not found!', Colors.Error);
+        AddMainLog(_('User &lt;') + sl[1] + _('&gt; not found!'), Colors.Error);
         Exit;
       end;
 
@@ -4784,7 +4791,7 @@
     begin
       if sl.Count &gt; 2 then
       begin
-        AddMainLog('Error: Too many arguments!', Colors.Error);
+        AddMainLog(_('Error: Too many arguments!'), Colors.Error);
         Exit;
       end;
       if(sl.Count = 2) then
@@ -4804,7 +4811,7 @@
 
         if MainForm.GetClient(tmp) = nil then
         begin
-          if MessageDlg('User &lt;' + tmp + '&gt; is not online, do you wish to add him to ignore list anyway?', mtConfirmation, [mbYes, mbNo], 0) = mrYes then
+          if MessageDlg(_('User &lt;') + tmp + _('&gt; is not online, do you wish to add him to ignore list anyway?'), mtConfirmation, [mbYes, mbNo], 0) = mrYes then
           begin
             IgnoreListForm.AddToIgnoreList(tmp);
             IgnoreListForm.ShowModal;
@@ -4817,7 +4824,7 @@
         end;
       end;
     end
-    else AddMainLog('Unknown command!', Colors.Error);
+    else AddMainLog(_('Unknown command!'), Colors.Error);
 
   finally
     if sl &lt;&gt; nil then sl.Free;
@@ -4894,9 +4901,9 @@
       if (sl.Count &lt;&gt; 5) or (not Debug.IgnoreVersionIncompatibility and not CheckServerVersion(sl[1])) then
       begin
         if Debug.IgnoreVersionIncompatibility then
-          AddMainLog('Parsing TASSERVER command failed !', Colors.Error);
-        AddMainLog('Server version (' + IFF(sl.Count &gt; 1, sl[1], '[unknown]') + ') is not supported with this client!', Colors.Info);
-        AddMainLog('Requesting update from server ...', Colors.Info);
+          AddMainLog(_('Parsing TASSERVER command failed !'), Colors.Error);
+        AddMainLog(_('Server version (') + IFF(sl.Count &gt; 1, sl[1], _('[unknown]')) + _(') is not supported with this client!'), Colors.Info);
+        AddMainLog(_('Requesting update from server ...'), Colors.Info);
         //TryToSendCommand('REQUESTUPDATEFILE', 'TASClient ' + VERSION_NUMBER); // we ask server if he has an update for us
         //if autoUpdateDone then
         TLobbyUpdateThread.Create(False,False,True,5000);
@@ -4905,8 +4912,8 @@
 
       if (sl[2] &lt;&gt; '*') and (sl[2] &lt;&gt; Status.MySpringVersion) and (not Debug.IgnoreVersionIncompatibility) then
       begin
-        AddMainLog('Server says our Spring version (' + Status.MySpringVersion + ') is outdated (server only supports ' + sl[2] + ')', Colors.Info);
-        AddMainLog('Requesting update from server ...', Colors.Info);
+        AddMainLog(_('Server says our Spring version (') + Status.MySpringVersion + _(') is outdated (server only supports ') + sl[2] + ')', Colors.Info);
+        AddMainLog(_('Requesting update from server ...'), Colors.Info);
         TryToSendCommand('REQUESTUPDATEFILE', 'Spring ' + Status.MySpringVersion); // we ask server if he has an update for us
         Exit;
       end;
@@ -4916,8 +4923,8 @@
         Status.ServerMode := 0;
         Status.ServerMode := StrToInt(sl[4]);
       except
-        AddMainLog('This server version is not supported with this client!', Colors.Info);
-        AddMainLog('Requesting update from server ...', Colors.Info);
+        AddMainLog(_('This server version is not supported with this client!'), Colors.Info);
+        AddMainLog(_('Requesting update from server ...'), Colors.Info);
         //TryToSendCommand('REQUESTUPDATEFILE', 'TASClient ' + VERSION_NUMBER); // we ask server if he has an update for us
         //if autoUpdateDone then
         TLobbyUpdateThread.Create(False,False,True,5000);
@@ -4936,7 +4943,7 @@
       end;
       if not Debug.IgnoreRedirects then
       begin
-        AddMainLog('Server is redirecting us to: ' + sl[1], Colors.Info);
+        AddMainLog(_('Server is redirecting us to: ') + sl[1], Colors.Info);
         Preferences.RedirectIP := sl[1];
         PostMessage(MainForm.Handle, WM_FORCERECONNECT, 0, 0); // we must post a message, reconnecting from here won't work
       end;
@@ -4961,16 +4968,16 @@
     end
     else if sl[0] = 'DENIED' then
     begin
-      if sl.Count = 1 then tmp := 'Unknown reason' else tmp := MakeSentenceWS(sl, 1);
-      MessageDlg('Error logging to server: ' + tmp, mtWarning, [mbOK], 0);
-      AddMainLog('Login failed: ' + tmp, Colors.Error);
+      if sl.Count = 1 then tmp := _('Unknown reason') else tmp := MakeSentenceWS(sl, 1);
+      MessageDlg(_('Error logging to server: ') + tmp, mtWarning, [mbOK], 0);
+      AddMainLog(_('Login failed: ') + tmp, Colors.Error);
       TryToDisconnect;
     end
     else if sl[0] = 'ACCEPTED' then
     begin
       ConnectButton.ImageIndex := 2;
       LogonForm.btLogin.ImageIndex := ConnectButton.ImageIndex;
-      AddMainLog('Login successful!', Colors.Info);
+      AddMainLog(_('Login successful!'), Colors.Info);
       MainForm.MainTitleBar.Caption := PROGRAM_VERSION+' - '+sl[1];
       MainForm.Caption := PROGRAM_VERSION+' - '+sl[1];
       Status.LoggedIn := True;
@@ -4987,7 +4994,7 @@
     end
     else if sl[0] = 'LOGININFOEND' then
     begin
-      LoginProgressForm.UpdateCaption('Joining channels ...');
+      LoginProgressForm.UpdateCaption(_('Joining channels ...'));
       Status.ReceivingLoginInfo := False;
 
       // we must do some graphical updating now since we ignored it while receiving login info (to speed the login process):
@@ -5029,7 +5036,7 @@
     end
     else if sl[0] = 'REGISTRATIONACCEPTED' then
     begin
-      AddMainLog('Registration successful!', Colors.Info);
+      AddMainLog(_('Registration successful!'), Colors.Info);
       Status.Registering := False;
       TryToLogin(Preferences.Username, Preferences.Password);
     end
@@ -5037,13 +5044,13 @@
     begin
       if sl.Count &gt; 1 then
       begin
-        AddMainLog('Registration failed: ' + MakeSentenceWS(sl, 1), Colors.Error);
-        MessageDlg('Registration failed: ' + MakeSentenceWS(sl, 1), mtWarning, [mbOK], 0);
+        AddMainLog(_('Registration failed: ') + MakeSentenceWS(sl, 1), Colors.Error);
+        MessageDlg(_('Registration failed: ') + MakeSentenceWS(sl, 1), mtWarning, [mbOK], 0);
       end
       else
       begin
-        AddMainLog('Registration failed: Unknown reason', Colors.Error);
-        MessageDlg('Registration failed for unknown reason! Try using different username/password, if it still fails then please contact ' + LobbyMailAddress, mtWarning, [mbOK], 0);
+        AddMainLog(_('Registration failed: Unknown reason'), Colors.Error);
+        MessageDlg(_('Registration failed for unknown reason! Try using different username/password, if it still fails then please contact ') + LobbyMailAddress, mtWarning, [mbOK], 0);
       end;
 
       Status.Registering := False;
@@ -5062,32 +5069,32 @@
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('*Error: Server sent ambiguous command!', Colors.Error, 1);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 1);
       end
       else
       begin
-        AddMainLog('Unable to join channel #' + sl[1] + ' (' + MakeSentenceWS(sl, 2) + ')', Colors.Info);
+        AddMainLog(_('Unable to join channel #') + sl[1] + ' (' + MakeSentenceWS(sl, 2) + ')', Colors.Info);
       end;
     end
     else if sl[0] = 'OFFERFILE' then
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 2);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 2);
         Exit;
       end;
 
       sl2 := ParseString(MakeSentenceWS(sl, 2), #9);
       if sl2.Count &lt;&gt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 2);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 2);
         Exit;
       end;
 
       try
         tmpint := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 2);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 2);
         Exit;
       end;
 
@@ -5105,14 +5112,14 @@
     begin
       if sl.Count &lt;&gt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 3);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 3);
         Exit;
       end;
 
       try
         i := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 3);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 3);
         Exit;
       end;
 
@@ -5125,14 +5132,14 @@
     begin
       if sl.Count &lt;&gt; 4 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 4);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 4);
         Exit;
       end;
 
       Client := GetClient(sl[1]);
       if Client = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 5);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 5);
         Exit;
       end;
 
@@ -5142,7 +5149,7 @@
         if (Client.PublicPort = 0) and (BattleForm.IsBattleActive) then
           BattleForm.AddTextToChat('Warning : '+Client.Name+' doesn''t support NAT Traversal.',Colors.Error,1);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 4);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 4);
         Exit;
       end;
     end
@@ -5150,20 +5157,20 @@
     begin
       if sl.Count &lt;&gt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 6);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 6);
         Exit;
       end;
 
       if BattleFormUnit.BattleState.Status = None then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 7);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 7);
         Exit;
       end;
 
       try
         BattleState.Battle.Port := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 6);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 6);
         Exit;
       end;
     end
@@ -5171,14 +5178,14 @@
     begin
       if sl.Count &lt;&gt; 4 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 8);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 8);
         Exit;
       end;
 
       try
         tmpint := StrToInt(sl[3]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 8);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 8);
         Exit;
       end;
 
@@ -5188,7 +5195,7 @@
       if (PageControl1.ActivePage.Caption = LOCAL_TAB) and (not Status.ReceivingLoginInfo) then UpdateClientsListBox;
 
       if not Status.ReceivingLoginInfo and (TClient(GetClient(sl[1])).GetGroup &lt;&gt; nil) and TClient(GetClient(sl[1])).GetGroup.NotifyOnConnect then
-        AddNotification('Player connection', '&lt;' + sl[1] + '&gt; has joined the server.', 2000);
+        AddNotification(_('Player connection'), '&lt;' + sl[1] + _('&gt; has joined the server.'), 2000);
 
       i := GetTabWindowPageIndex(sl[1]);
       if i &lt;&gt; -1 then
@@ -5197,13 +5204,13 @@
         if (PageControl1.ActivePage.Caption = sl[1]) and (not Status.ReceivingLoginInfo) then UpdateClientsListBox;
       end;
 
-      if (Status.ReceivingLoginInfo) and (Status.LastCommandReceived = 'MOTD') then LoginProgressForm.UpdateCaption('Receiving user list ...');
+      if (Status.ReceivingLoginInfo) and (Status.LastCommandReceived = 'MOTD') then LoginProgressForm.UpdateCaption(_('Receiving user list ...'));
     end
     else if sl[0] = 'REMOVEUSER' then
     begin
       if sl.Count &lt;&gt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 9);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 9);
         Exit;
       end;
       { We don't need to manually remove client from channels or battle, since
@@ -5214,12 +5221,12 @@
       if i &lt;&gt; -1 then
       begin
         RemoveClientFromTab(PageControl1.Pages[i] as TMyTabSheet, sl[1]);
-        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet,sl[1]+' has left the server.',Colors.ChanLeft);
+        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet,sl[1]+_(' has left the server.'),Colors.ChanLeft);
       end;
 
       if not RemoveClientFromAllClientsList(sl[1]) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 9);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 9);
       end;
 
       if sl[1] = Status.Username then Status.Me := nil;
@@ -5230,7 +5237,7 @@
     begin
       if sl.Count &lt; 7 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 10);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 10);
         Exit;
       end;
 
@@ -5239,28 +5246,28 @@
         tmpint2 := StrToInt(sl[4]);
         teamcolor := StrToInt(sl[5]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 10);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 10);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 11);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 11);
         Exit;
       end;
 
       Battle := BattleState.Battle;
       if Battle.ID &lt;&gt; tmpint then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 12);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 12);
         Exit;
       end;
 
       if Battle.GetBot(sl[2]) &lt;&gt; nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error, 10);
-        AddMainLog('Disconnecting from battle due to inconsistent data error', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error, 10);
+        AddMainLog(_('Disconnecting from battle due to inconsistent data error'), Colors.Error);
         TryToSendCommand('LEAVEBATTLE');
         Exit;
       end;
@@ -5286,35 +5293,35 @@
 
       if sl.Count &lt;&gt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         tmpint := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Battle := BattleState.Battle;
       if Battle.ID &lt;&gt; tmpint then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Bot := GetBot(sl[2], Battle);
       if Bot = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5335,7 +5342,7 @@
     begin
       if sl.Count &lt;&gt; 5 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5344,14 +5351,14 @@
         tmpint := StrToInt(sl[3]);
         teamcolor := StrToInt(sl[4]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5361,8 +5368,8 @@
 
       if Battle.ID &lt;&gt; tmpint2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
-        AddMainLog('Disconnecting from battle due to inconsistent data error', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
+        AddMainLog(_('Disconnecting from battle due to inconsistent data error'), Colors.Error);
         TryToSendCommand('LEAVEBATTLE');
         Exit;
       end;
@@ -5370,7 +5377,7 @@
       Bot := GetBot(sl[2], Battle);
       if Bot = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5384,7 +5391,7 @@
     begin
       if sl.Count &lt;&gt; 6 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5395,21 +5402,21 @@
         Rect.Right := Round(StrToInt(sl[4])/2);
         Rect.Bottom := Round(StrToInt(sl[5])/2);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if BattleState.Status = Hosting then
       begin
         // this could happen due to lag (we could get this command from our previous battle, where we didn't host)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5417,14 +5424,14 @@
 
       if (index &lt; 0) or (index &gt; High(BattleState.StartRects)) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if BattleState.StartRects[index].Enabled then
       begin
         // this is a pretty serious error. It should not happen though. Client will have different start rects than other clients.
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5434,28 +5441,28 @@
     begin
       if sl.Count &lt;&gt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         index := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if BattleState.Status = Hosting then
       begin
         // this could happen due to lag (we could get this command from our previous battle, where we didn't host)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5463,14 +5470,14 @@
 
       if (index &lt; 0) or (index &gt; High(BattleState.StartRects)) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleState.StartRects[index].Enabled then
       begin
         // this is a pretty serious error. It should not happen though. Client will have different start rects than other clients.
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5480,7 +5487,7 @@
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
       end
       else
       begin
@@ -5488,28 +5495,28 @@
         if i = -1 then i := AddTabWindow('#' + sl[1], True)
         else ChangeActivePageAndUpdate(PageControl1, i);
 
-        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* Now talking in ' + PageControl1.ActivePage.Caption, Colors.ChanJoin);
+        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, _('* Now talking in ') + PageControl1.ActivePage.Caption, Colors.ChanJoin);
       end;
     end
     else if sl[0] = 'CLIENTS' then
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       i := GetTabWindowPageIndex('#' + sl[1]);
       if i = -1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       for j := 2 to sl.Count-1 do
         if not AddClientToTab((PageControl1.Pages[i] as TMyTabSheet).Clients, sl[j]) then
         begin
-          AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+          AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
           Exit;
         end;
 
@@ -5519,7 +5526,7 @@
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5530,33 +5537,33 @@
     end
     else if sl[0] = 'ENDOFCHANNELS' then
     begin
-      AddMainLog('-- END OF CHANNEL LIST --', Colors.Normal);
+      AddMainLog(_('-- END OF CHANNEL LIST --'), Colors.Normal);
     end
     else if sl[0] = 'JOINED' then
     begin
       if sl.Count &lt;&gt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       i := GetTabWindowPageIndex('#' + sl[1]);
       if i = -1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not AddClientToTab((PageControl1.Pages[i] as TMyTabSheet).Clients, sl[2]) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not Preferences.FilterJoinLeftMessages then
-        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* ' + sl[2] + ' has joined ' + PageControl1.Pages[i].Caption, Colors.ChanJoin,true);
+        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* ' + sl[2] + _(' has joined ') + PageControl1.Pages[i].Caption, Colors.ChanJoin,true);
 
-      if NotificationsForm.FindNotification(nfJoinedChannel, [sl[2], '#' + sl[1]]) then AddNotification('Player joined', '&lt;' + sl[2] + '&gt; has joined ' + PageControl1.Pages[i].Caption, 2000);
+      if NotificationsForm.FindNotification(nfJoinedChannel, [sl[2], '#' + sl[1]]) then AddNotification(_('Player joined'), '&lt;' + sl[2] + _('&gt; has joined ') + PageControl1.Pages[i].Caption, 2000);
 
       UpdateClientsListBox;
     end
@@ -5564,20 +5571,20 @@
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       i := GetTabWindowPageIndex('#' + sl[1]);
       if i = -1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not RemoveClientFromTab(PageControl1.Pages[i] as TMyTabSheet, sl[2]) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5585,7 +5592,7 @@
       begin
         tmp := '';
         if sl.Count &gt; 3 then tmp := ' (' + MakeSentenceWS(sl, 3) + ')';
-        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* ' + sl[2] + ' has left ' + PageControl1.Pages[i].Caption + tmp, Colors.ChanLeft, true);
+        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* ' + sl[2] + _(' has left ') + PageControl1.Pages[i].Caption + tmp, Colors.ChanLeft, true);
       end;
 
       UpdateClientsListBox;
@@ -5594,19 +5601,19 @@
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       i := GetTabWindowPageIndex('#' + sl[1]);
       if i = -1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if sl.Count = 3 then tmp := '' else tmp := ' (' + MakeSentenceWS(sl, 3) + ')';
-      AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* You have been kicked from #' + sl[1] + ' by &lt;' + sl[2] + '&gt;' + tmp, Colors.Info);
+      AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, _('* You have been kicked from #') + sl[1] + _(' by &lt;') + sl[2] + '&gt;' + tmp, Colors.Info);
       (PageControl1.Pages[i] as TMyTabSheet).Clients.Clear;
 
       UpdateClientsListBox;
@@ -5615,22 +5622,22 @@
     begin
       if sl.Count &lt; 5 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         tmpi64 := StrToInt64(sl[3]);
-        tmp := FormatDateTime('mmm d &quot;at&quot; hh:mm AM/PM', UTCTimeToLocalTime(UnixToDateTime(tmpi64 div 1000)));
+        tmp := FormatDateTime('mmm d &quot;'+_('at')+'&quot; hh:mm AM/PM', UTCTimeToLocalTime(UnixToDateTime(tmpi64 div 1000)));
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       i := GetTabWindowPageIndex('#' + sl[1]);
       if i = -1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
       tmp2 := MakeSentenceWS(sl, 4);
@@ -5639,23 +5646,23 @@
       Misc.ParseDelimited(sl2,tmp2,'\n','');
 
       if sl2.Count = 1 then
-        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* Topic is ''' + tmp2 + '''', Colors.Topic)
+        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, _('* Topic is ''') + tmp2 + '''', Colors.Topic)
       else
       begin
-        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* Topic is ''' + sl2[0], Colors.Topic);
+        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, _('* Topic is ''') + sl2[0], Colors.Topic);
         for j:=1 to sl2.Count-1 do
           if j=sl2.Count-1 then
             AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, sl2[j] + '''', Colors.Topic)
           else
             AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, sl2[j], Colors.Topic);
       end;
-      AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* Set by ' + sl[2] + ' on ' + tmp, Colors.Topic);
+      AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, _('* Set by ') + sl[2] + _(' on ') + tmp, Colors.Topic);
     end
     else if sl[0] = 'SAID' then
     begin
       if sl.Count &lt; 4 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5671,7 +5678,7 @@
       i := GetTabWindowPageIndex('#' + sl[1]);
       if i = -1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5683,24 +5690,24 @@
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       i := GetTabWindowPageIndex('#' + sl[1]);
       if i = -1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
-      AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* Channel message: ' + MakeSentenceWS(sl, 2), Colors.Info);
+      AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, _('* Channel message: ') + MakeSentenceWS(sl, 2), Colors.Info);
     end
     else if sl[0] = 'SAIDEX' then
     begin
       if sl.Count &lt; 4 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5716,7 +5723,7 @@
       i := GetTabWindowPageIndex('#' + sl[1]);
       if i = -1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5726,7 +5733,7 @@
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5746,7 +5753,7 @@
         i := AddTabWindow(sl[1], Preferences.AutoFocusOnPM);
         if not AddClientToTab((PageControl1.Pages[i] as TMyTabSheet).Clients, sl[1]) then
         begin
-          AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+          AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
           Exit;
         end;
         UpdateClientsListBox;
@@ -5764,13 +5771,13 @@
       if not MainForm.Active then FlashWindow(MainForm.Handle, true);
 
       // add notification if private message and if application isn't focused:
-      if (not Application.Active) and (NotificationsForm.CheckBox1.Checked) then AddNotification('Private message', '&lt;' + sl[1] + '&gt; ' + MakeSentenceWS(sl, 2), 2500);
+      if (not Application.Active) and (NotificationsForm.CheckBox1.Checked) then AddNotification(_('Private message'), '&lt;' + sl[1] + '&gt; ' + MakeSentenceWS(sl, 2), 2500);
     end
     else if sl[0] = 'SAYPRIVATE' then
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5780,7 +5787,7 @@
         i := AddTabWindow(sl[1], Preferences.AutoFocusOnPM);
         if not AddClientToTab((PageControl1.Pages[i] as TMyTabSheet).Clients, sl[1]) then
         begin
-          AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+          AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
           Exit;
         end;
         UpdateClientsListBox;
@@ -5793,7 +5800,7 @@
       if MsgID &lt;&gt; -1 then
         for i := 0 to Pings.Count-1 do if PPingInfo(Pings[i]).Key = MsgID then
         begin
-          AddMainLog('Ping reply took ' + IntToStr(GetTickCount - PPingInfo(Pings[i]).TimeSent) + ' ms.', Colors.Info);
+          AddMainLog(_('Ping reply took ') + IntToStr(GetTickCount - PPingInfo(Pings[i]).TimeSent) + _(' ms.'), Colors.Info);
           Pings.Delete(i);
           Break;
         end;
@@ -5802,7 +5809,7 @@
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5814,7 +5821,7 @@
     begin
       if sl.Count &lt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
       tmp := MakeSentenceWS(sl, 2);
@@ -5830,7 +5837,7 @@
     begin
       if sl.Count &lt;&gt; 1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5861,13 +5868,13 @@
     begin
       if sl.Count &lt;&gt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if BattleForm.IsBattleActive then // we are already in battle! (this can't really happen)
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         MainForm.TryToSendCommand('LEAVEBATTLE');
         BattleForm.ResetBattleScreen;
         Exit;
@@ -5878,14 +5885,14 @@
         t := StrToInt(sl[2]);
 
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Battle := GetBattle(i);
       if Battle = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5930,7 +5937,7 @@
         begin
           CheckPasswordThread := TLadderCheckAccountThread.Create(False,Preferences.LadderPassword,true);
           if Battle.GetLadderId = -1 then
-            AddMainLog('Error: Battle ladder id not found.', Colors.Error)
+            AddMainLog(_('Error: Battle ladder id not found.'), Colors.Error)
           else
           begin
             for i:=0 to LadderList.Count -1 do
@@ -5955,19 +5962,19 @@
         BattleForm.SortBotList(Preferences.BattleClientSortStyle,Preferences.BattleClientSortDirection,True);
         BattleForm.SortClientList(Preferences.BattleClientSortStyle,Preferences.BattleClientSortDirection,True);
       end
-      else MainForm.AddMainLog('Error: unable to join battle.', Colors.Error);
+      else MainForm.AddMainLog(_('Error: unable to join battle.'), Colors.Error);
 
     end
     else if sl[0] = 'JOINBATTLEFAILED' then
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
       if BattleState.TryingToJoinLadderBattle then
-        MessageDlg('You are trying to join a battle with another ladder version, updating your lobby should fix that problem.',mtWarning,[mbOk],0);
-      AddMainLog('Failed to join the battle (Reason: ' + MakeSentenceWS(sl, 1) + ')', Colors.Error);
+        MessageDlg(_('You are trying to join a battle with another ladder version, updating your lobby should fix that problem.'),mtWarning,[mbOk],0);
+      AddMainLog(_('Failed to join the battle (Reason: ') + MakeSentenceWS(sl, 1) + ')', Colors.Error);
     end
     else if sl[0] = 'OPENBATTLEFAILED' then
     begin
@@ -5979,7 +5986,7 @@
     begin
       if sl.Count &lt; 12 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -5987,36 +5994,36 @@
 
       if sl2.Count &lt;&gt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         i := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         battletype := StrToInt(sl[2]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         nattype := StrToInt(sl[3]);
-        if (nattype &lt; 0) or (nattype &gt; 2) then raise Exception.CreateFmt('Invalid NAT traversal method index', []);
+        if (nattype &lt; 0) or (nattype &gt; 2) then raise Exception.CreateFmt(_('Invalid NAT traversal method index'), []);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Client := GetClient(sl[4]);
       if Client = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6029,7 +6036,7 @@
         l := StrToInt(sl[9]);
         maphash := StrToInt(sl[10]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
       AddBattle(i, battletype, nattype, Client, tmp, j, k, tmpBool, l, maphash, sl2[0], sl2[1], sl2[2]);
@@ -6042,36 +6049,36 @@
       if (not Application.Active) or (not BattleForm.Active) then if NotificationsForm.FindNotification(nfStatusInBattle, [Client.Name]) then AddNotification('Player opened new battle', '&lt;' + Client.Name + '&gt; is hosting new game.', 2000);
 
       if (Status.ReceivingLoginInfo = False) and (Client.Name &lt;&gt; Status.Username) then if
-        NotificationsForm.FindNotification(nfModHosted, [Battle.ModName]) then AddNotification('Mod hosted', 'Mod &lt;' + Battle.ModName + '&gt; has been hosted by ' + TClient(Battle.Clients[0]).Name + '.', 2000);
+        NotificationsForm.FindNotification(nfModHosted, [Battle.ModName]) then AddNotification(_('Mod hosted'), _('Mod &lt;') + Battle.ModName + _('&gt; has been hosted by ') + TClient(Battle.Clients[0]).Name +'.', 2000);
 
       if not Status.ReceivingLoginInfo then UpdateClientsListBox;
 
       if not Status.ReceivingLoginInfo and (Client.GetGroup &lt;&gt; nil) and Client.GetGroup.NotifyOnHost then
       begin
-        AddNotification('Player host', '&lt;' + Client.Name + '&gt; is hosting a new battle.', 5000,true,Battle.ID);
+        AddNotification(_('Player host'), '&lt;' + Client.Name + _('&gt; is hosting a new battle.'), 5000,true,Battle.ID);
       end;
 
-      if (Status.ReceivingLoginInfo) and (Status.LastCommandReceived = 'ADDUSER') then LoginProgressForm.UpdateCaption('Receiving battle list ...');
+      if (Status.ReceivingLoginInfo) and (Status.LastCommandReceived = 'ADDUSER') then LoginProgressForm.UpdateCaption(_('Receiving battle list ...'));
     end
     else if sl[0] = 'BATTLECLOSED' then
     begin
       if sl.Count &lt;&gt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         BattleIndex := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Battle := GetBattle(BattleIndex);
       if Battle = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6090,28 +6097,28 @@
     begin
       if (not WaitForAckForm.Visible) or (not WaitForAckForm.Waiting) then // we are not hosting a battle! This is an error. We must tell the server to cancel this battle. (Note: this should not happen normally. Perhaps only if server lags really badly)
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         TryToSendCommand('LEAVEBATTLE');
         Exit;
       end;
 
       if sl.Count &lt;&gt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         i := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Battle := GetBattle(i);
       if Battle = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6138,28 +6145,28 @@
     begin
       if sl.Count &lt;&gt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         i := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Battle := GetBattle(i);
       if Battle = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Client := GetClient(sl[2]);
       if Client = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6182,7 +6189,7 @@
       if ((not Application.Active) or (not BattleForm.Active)) and not Status.ReceivingLoginInfo then
         if (not ((BattleForm.IsBattleActive) and (Battle.ID = BattleState.Battle.ID))) then
           if NotificationsForm.FindNotification(nfStatusInBattle, [Client.Name]) or ((Client.GetGroup &lt;&gt; nil) and Client.GetGroup.NotifyOnHost and (Battle.ID &lt;&gt; Status.Me.GetBattleId)) then
-            AddNotification('Player joined battle', '&lt;' + Client.Name + '&gt; has joined ' + TClient(Battle.Clients[0]).Name + '''s battle.' , 5000,true,Battle.ID);
+            AddNotification(_('Player joined battle'), '&lt;' + Client.Name + _('&gt; has joined ') + TClient(Battle.Clients[0]).Name + _('''s battle.') , 5000,true,Battle.ID);
 
       RefreshBattleList;
 
@@ -6192,7 +6199,7 @@
         if Battle.ID = BattleFormUnit.BattleState.Battle.ID then
         begin
           if not Preferences.FilterBattleJoinLeftMessages then
-            BattleForm.AddTextToChat('* ' + Client.Name + ' has joined battle', Colors.ChanJoin, 1);
+            BattleForm.AddTextToChat('* ' + Client.Name + _(' has joined battle'), Colors.ChanJoin, 1);
           BattleForm.SortClientList(Preferences.BattleClientSortStyle,Preferences.BattleClientSortDirection,False);
           BattleForm.UpdateClientsListBox;
           if BattleState.Status = Hosting then
@@ -6232,7 +6239,7 @@
           end;
           if not BattleForm.Active then
             if NotificationsForm.FindNotification(nfJoinedBattle, []) or ((BattleState.Status = Hosting) and NotificationsForm.FindNotification(nfJoinedMyHostedBattle, [])) then
-              AddNotification('Player joined battle', '&lt;' + Client.Name + '&gt; has joined battle.', 2000);
+              AddNotification(_('Player joined battle'), '&lt;'+ Client.Name + _('&gt; has joined battle.'), 2000);
           Client.CurrentLadderRank := -1;
           Client.CurrentLadderRating := -1;
           BattleForm.RefreshLadderRanks;
@@ -6242,28 +6249,28 @@
     begin
       if sl.Count &lt;&gt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         i := StrToInt(sl[1]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Battle := GetBattle(i);
       if Battle = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Client := GetClient(sl[2]);
       if Client = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6283,7 +6290,7 @@
         if Battle.ID = BattleFormUnit.BattleState.Battle.ID then
         begin
           if not Preferences.FilterBattleJoinLeftMessages then
-            BattleForm.AddTextToChat('* ' + Client.Name + ' has left battle', Colors.ChanLeft, 1);
+            BattleForm.AddTextToChat('* ' + Client.Name + _(' has left battle'), Colors.ChanLeft, 1);
           BattleForm.SortClientList(Preferences.BattleClientSortStyle,Preferences.BattleClientSortDirection,True);
           BattleForm.UpdateClientsListBox;
           BattleForm.RefreshTeamNbr;
@@ -6310,21 +6317,21 @@
     begin
       if sl.Count &lt;&gt; 3 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Client := GetClient(sl[1]);
       if Client = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         tmpInt := StrToInt(sl[2]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6359,20 +6366,20 @@
       end;
 
       if changed and not Client.GetInGameStatus and (Client.GetBattleId &lt;&gt; Status.Me.GetBattleId) and (Client.GetGroup &lt;&gt; nil) and Client.GetGroup.NotifyOnBattleEnd then
-        AddNotification('Player battle end', '&lt;' + Client.Name + '&gt; has end his battle.', 2000);
+        AddNotification(_('Player battle end'), '&lt;' + Client.Name + _('&gt; has end his battle.'), 2000);
 
 
       if Client.Name = Status.Username then Status.MyRank := Client.GetRank;
 
       if not Status.ReceivingLoginInfo then UpdateClientsListBox;
 
-      if (Status.ReceivingLoginInfo) and ((Status.LastCommandReceived = 'UPDATEBATTLEINFO') or (Status.LastCommandReceived = 'JOINEDBATTLE')) then LoginProgressForm.UpdateCaption('Updating clients status list ...');
+      if (Status.ReceivingLoginInfo) and ((Status.LastCommandReceived = 'UPDATEBATTLEINFO') or (Status.LastCommandReceived = 'JOINEDBATTLE')) then LoginProgressForm.UpdateCaption(_('Updating clients status list ...'));
     end
     else if sl[0] = 'UPDATEBATTLEINFO' then
     begin
       if sl.Count &lt; 5 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6382,14 +6389,14 @@
         tmpBool := IntToBool(StrToInt(sl[3]));
         maphash := StrToInt(sl[4]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
       while RefreshingBattleList do;
       Battle := GetBattle(tmpInt);
       if Battle = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6420,7 +6427,7 @@
         begin
           if BattleState.Status = Hosting then
           begin // this should NEVER happen!
-            MessageDlg('Error: Map changed to unknown map! Please report this error!', mtError, [mbOK], 0);
+            MessageDlg(_('Error: Map changed to unknown map! Please report this error!'), mtError, [mbOK], 0);
             Application.Terminate;
             Exit;
           end
@@ -6453,13 +6460,13 @@
     begin
       if sl.Count &lt;&gt; 9 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if BattleFormUnit.BattleState.Status = None then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6473,19 +6480,19 @@
         p := StrToInt(sl[7]);
         r := StrToInt(sl[8]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if (l &lt; 0) or (l &gt; 2) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if (m &lt; 0) or (m &gt; 2) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6505,7 +6512,7 @@
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
       for i:=1 to sl.Count-1 do
@@ -6515,7 +6522,7 @@
           j := CompleteKeyList.IndexOf(LowerCase(sl[i]));
           if j = -1 then
           begin
-            AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+            AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
             Exit;
           end;
           CompleteKeyList.Delete(j);
@@ -6529,7 +6536,7 @@
 
       if sl2.Count = 0 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
       sl3 := TStringList.Create;
@@ -6594,7 +6601,7 @@
           on E: Exception do
           begin
             MessageDlg(E.Message,mtError,[mbOk], E.HelpContext);
-            AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+            AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
             BattleForm.DisconnectButtonClick(nil);
           end;
         end;
@@ -6605,35 +6612,35 @@
     begin
       if sl.Count &lt;&gt; 4 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       Client := GetClient(sl[1]);
       if Client = nil then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         tmpInt := StrToInt(sl[2]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       try
         teamcolor := StrToInt(sl[3]);
       except
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6712,14 +6719,14 @@
     begin
       if sl.Count &lt;&gt; 1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6730,14 +6737,14 @@
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6751,14 +6758,14 @@
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6775,14 +6782,14 @@
     begin
       if sl.Count &lt;&gt; 1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6794,7 +6801,7 @@
     begin
       if sl.Count &lt;&gt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6806,26 +6813,26 @@
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
-      AddMainLog('* Broadcast from server: ' + MakeSentenceWS(sl, 1), Colors.Info);
+      AddMainLog(_('* Broadcast from server: ') + MakeSentenceWS(sl, 1), Colors.Info);
 
       For i:=1 to PageControl1.PageCount -1 do
-        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* Broadcast from server: ' + MakeSentenceWS(sl, 1), Colors.Info);
+        AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, _('* Broadcast from server: ') + MakeSentenceWS(sl, 1), Colors.Info);
     end
     else if sl[0] = 'SERVERMSG' then
     begin
       sl2 := TWideStringList.Create;
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
       tmp := MakeSentenceWS(sl, 1);
-      AddMainLog('* Message from server: ' + tmp, Colors.Info);
-      if (Pos('Your account has been renamed',tmp) &gt; 0) and (Preferences.LadderPassword &lt;&gt; '') then // handleRename
+      AddMainLog(_('* Message from server: ') + tmp, Colors.Info);
+      if (Pos(_('Your account has been renamed'),tmp) &gt; 0) and (Preferences.LadderPassword &lt;&gt; '') then // handleRename
       begin
         tmp := MidStr(tmp,Pos('&lt;',tmp)+1,500000);
         tmp := LeftStr(tmp,Pos('&gt;',tmp)-1);
@@ -6848,7 +6855,7 @@
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6858,10 +6865,10 @@
       else url := '';
 
       if url = '' then
-        MessageDlg('Message from server: ' +#13+#13+ sl2[0], mtInformation, [mbOK], 0)
+        MessageDlg(_('Message from server: ') +#13+#13+ sl2[0], mtInformation, [mbOK], 0)
       else
       begin
-        if MessageDlg('Message from server: ' +#13+#13+ sl2[0] +#13+#13+'Do you want to open ' + url + ' in the default browser now?', mtInformation, [mbYes, mbNo], 0) = mrYes then
+        if MessageDlg(_('Message from server: ') +#13+#13+ sl2[0] +#13+#13+_('Do you want to open ') + url + _(' in the default browser now?'), mtInformation, [mbYes, mbNo], 0) = mrYes then
           Misc.OpenURLInDefaultBrowser(url);
       end;
     end
@@ -6869,20 +6876,20 @@
     begin
       if sl.Count &lt;&gt; 1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not (BattleState.Battle.BattleType = 1) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6893,13 +6900,13 @@
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not (BattleState.Battle.BattleType = 1) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6910,20 +6917,20 @@
     begin
       if sl.Count &lt;&gt; 1 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not BattleForm.IsBattleActive then
       begin
         // not a big problem. This can happen because of lag (we could get this command just after we left the battle)
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
       if not (BattleState.Battle.BattleType = 1) then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6934,7 +6941,7 @@
     begin
       if sl.Count &lt;&gt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6962,7 +6969,7 @@
     begin
       if sl.Count &lt; 2 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -6990,7 +6997,7 @@
     begin
       if (sl.Count-1) mod 3 &lt;&gt; 0 then
       begin
-        AddMainLog('Error: Server sent ambiguous command!', Colors.Error);
+        AddMainLog(_('Error: Server sent ambiguous command!'), Colors.Error);
         Exit;
       end;
 
@@ -7007,7 +7014,7 @@
       end;
 
       if Preferences.MapSortStyle = 4 then MapListForm.SortMapList(Preferences.MapSortStyle);
-      MapListForm.StatusLabel.Caption := 'synchronization completed.';
+      MapListForm.StatusLabel.Caption := _('synchronization completed.');
       SyncSentAt := 0;
     end
     else if sl[0] = 'MAPGRADESFAILED' then
@@ -7015,7 +7022,7 @@
       tmp := 'Unspecified error';
       if sl.Count &gt; 1 then tmp := MakeSentenceWS(sl, 1);
       MessageDlg('Unable to synchronize map grades (reason: ' + tmp + ')', mtWarning, [mbOK], 0);
-      MapListForm.StatusLabel.Caption := 'synchronization failed.';
+      MapListForm.StatusLabel.Caption := _('synchronization failed.');
       SyncSentAt := 0;
     end
     else if sl[0] = 'ACQUIREUSERID' then
@@ -7027,7 +7034,7 @@
     begin
       // unknown/invalid command!
 
-      AddMainLog('Error: Server sent unknown or invalid command!', Colors.Error);
+      AddMainLog(_('Error: Server sent unknown or invalid command!'), Colors.Error);
     end;
   finally
     ProcessingRemoteCommand := False;
@@ -7253,7 +7260,7 @@
     end
     else
     begin
-      if (msgLines.Count &lt;= 10) or (MessageDlg('You are about to send a '+IntToStr(msgLines.Count)+ ' lines message.'+EOL+EOL+'Do you really want to send it ?',mtConfirmation,[mbYes,mbNo],0) = mrYes) then
+      if (msgLines.Count &lt;= 10) or (MessageDlg(_('You are about to send a ')+IntToStr(msgLines.Count)+ _(' lines message.')+EOL+EOL+_('Do you really want to send it ?'),mtConfirmation,[mbYes,mbNo],0) = mrYes) then
         for i:=0 to msgLines.Count-1 do
           if (Length(msgLines[i]) = 0) or ((msgLines[i][1] &lt;&gt; '.') and (msgLines[i][1] &lt;&gt; '/')) then
             if ((Sender as TTntMemo).Parent as TMyTabSheet).Caption[1] = '#' then
@@ -7427,7 +7434,7 @@
     MainForm.MainTitleBar.Caption := PROGRAM_VERSION;
     MainForm.Caption := PROGRAM_VERSION;
   except
-    AddMainLog('Error while trying to disconnect!', Colors.Error);
+    AddMainLog(_('Error while trying to disconnect!'), Colors.Error);
   end;
 end;
 
@@ -7469,7 +7476,7 @@
 
   procedure Reconnect(Address: string; Port: string);
   begin
-    AddMainLog('Trying next host in the list ...', Colors.Info);
+    AddMainLog(_('Trying next host in the list ...'), Colors.Info);
     TryToConnect(Address, Port);
   end;
 
@@ -7526,7 +7533,7 @@
 begin;
   if Status.ConnectionState &lt;&gt; Connected then
   begin
-    AddMainLog('Error: Must be connected to send data!', Colors.Error);
+    AddMainLog(_('Error: Must be connected to send data!'), Colors.Error);
     Exit;
   end;
 
@@ -7538,7 +7545,7 @@
         AddMainLog('Client: &quot;' + s + '&quot;', Colors.Data);
     Status.TimeOfLastDataSent := GetTickCount;
   except
-    AddMainLog('Error: cannot send data: &quot;' + s + '&quot;', Colors.Error);
+    AddMainLog(_('Error: cannot send data: &quot;') + s + _('&quot;'), Colors.Error);
   end;
 end;
 
@@ -7564,7 +7571,7 @@
 
   if Status.ConnectionState &lt;&gt; Connected then
   begin
-    AddMainLog('Error: Must be connected to send data!', Colors.Error);
+    AddMainLog(_('Error: Must be connected to send data!'), Colors.Error);
     Exit;
   end;
 
@@ -7597,7 +7604,7 @@
         AddMainLog('Client: &quot;' + s + '&quot;', Colors.Data);
     Status.TimeOfLastDataSent := GetTickCount;
   except
-    AddMainLog('Error: cannot send data: &quot;' + s + '&quot;', Colors.Error);
+    AddMainLog(_('Error: cannot send data: &quot;') + s + _('&quot;'), Colors.Error);
   end;
 end;
 
@@ -7786,7 +7793,7 @@
       ConnectButton.ImageIndex := 1;
       LogonForm.btLogin.ImageIndex := ConnectButton.ImageIndex;
       Status.ConnectionState := Connecting;
-      AddMainLog('Connecting to ' + Socket.Addr + ' ...', Colors.Info);
+      AddMainLog(_('Connecting to ') + Socket.Addr + ' ...', Colors.Info);
     end;
 
     wsConnected:
@@ -7802,14 +7809,14 @@
       LogonForm.btLogin.ImageIndex := ConnectButton.ImageIndex;
       if Status.ConnectionState = Connecting then
       begin
-        AddMainLog('Cannot connect to server!', Colors.Info);
+        AddMainLog(_('Cannot connect to server!'), Colors.Info);
         if Preferences.ReconnectToBackup then PostMessage(MainForm.Handle, WM_CONNECT_TO_NEXT_HOST, 0, 0);
       end
-      else AddMainLog('Connection to server closed!', Colors.Info);
+      else AddMainLog(_('Connection to server closed!'), Colors.Info);
       if Status.LoggedIn then
         for i := PageControl1.PageCount-1 downto 1 do if (PageControl1.Pages[i] as TMyTabSheet).Caption[1] = '#' then // a channel
           if (PageControl1.Pages[i] as TMyTabSheet).Clients.Count &lt;&gt; 0 then // if 0 clients, then we are not in this channel anymore
-            AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, '* Disconnected', Colors.Info,true);
+            AddTextToChatWindow(PageControl1.Pages[i] as TMyTabSheet, _('* Disconnected'), Colors.Info,true);
       ClearClientsLists;
       Status.ConnectionState := Disconnected;
       Status.Registering := False;
@@ -7840,7 +7847,7 @@
   try if not Preferences.ScriptsDisabled then handlers.onConnected(); except end;
   ReleaseMainThread;
 
-  AddMainLog('Connection established to ' + Socket.Addr, Colors.Info);
+  AddMainLog(_('Connection established to ') + Socket.Addr, Colors.Info);
 end;
 
 procedure TMainForm.FormDestroy(Sender: TObject);
@@ -7866,7 +7873,7 @@
   begin
     if GetTickCount - PPingInfo(Pings[i]).TimeSent &gt; 15000 then
     begin
-      AddMainLog('Ping dropped locally (timeout)', Colors.Error);
+      AddMainLog(_('Ping dropped locally (timeout)'), Colors.Error);
       Pings.Delete(i);
     end
     else Inc(i);
@@ -7880,7 +7887,7 @@
 
   if (GetTickCount - Status.TimeOfLastDataReceived &gt; ASSUME_TIMEOUT_INTERVAL) then
   begin
-    AddMainLog('Timeout assumed. Disconnecting ...', Colors.Error);
+    AddMainLog(_('Timeout assumed. Disconnecting ...'), Colors.Error);
     TryToDisconnect; // we assume timeout occured
   end;
 
@@ -7988,7 +7995,7 @@
 begin
   if ClientName = Status.Username then
   begin
-    MessageDlg('Feel like talking to yourself? No way!', mtInformation, [mbOK], 0);
+    MessageDlg(_('Feel like talking to yourself? No way!'), mtInformation, [mbOK], 0);
     Exit; // can't talk to yourself! (although possible! :-)
   end;
 
@@ -8235,7 +8242,7 @@
   begin
     //MessageDlg('You must first disconnect from current battle!', mtInformation, [mbOK], 0);
     if LobbyScriptUnit.ScriptJoining then Exit;
-    if MessageDlg('Do you want to disconnect from the current battle to join this one ?',mtConfirmation, [mbYes,mbNo], 0) = mrYes then
+    if MessageDlg(_('Do you want to disconnect from the current battle to join this one ?'),mtConfirmation, [mbYes,mbNo], 0) = mrYes then
       BattleForm.DisconnectButtonClick(nil)
     else
       Exit;
@@ -8250,7 +8257,7 @@
     if ModList.IndexOf(Battle.ModName) = -1 then
     begin
       if not LobbyScriptUnit.ScriptJoining then
-        if Preferences.EnableSpringDownloader or (MessageDlg('To join this battle, you need to download its mod, do you want to open a browser to a download page ?',mtConfirmation,[mbYes,mbNo],0) = mrYes) then
+        if Preferences.EnableSpringDownloader or (MessageDlg(_('To join this battle, you need to download its mod, do you want to open a browser to a download page ?'),mtConfirmation,[mbYes,mbNo],0) = mrYes) then
           SpringDownloaderFormUnit.DownloadMod(0,Battle.ModName,Battle.ID);
       Exit;
     end;
@@ -8260,7 +8267,7 @@
   if Battle.Locked then
   begin
     if not LobbyScriptUnit.ScriptJoining then
-      MessageDlg('Can''t join: battle is locked!', mtInformation, [mbOK], 0);
+      MessageDlg(_('Can''t join: battle is locked!'), mtInformation, [mbOK], 0);
     Exit;
   end;
 
@@ -8268,16 +8275,16 @@
   if (Battle.BattleType = 1) and (Battle.IsBattleFull) then
   begin
     if not LobbyScriptUnit.ScriptJoining then
-      MessageDlg('Can''t join: battle is full!', mtInformation, [mbOK], 0);
+      MessageDlg(_('Can''t join: battle is full!'), mtInformation, [mbOK], 0);
     Exit;
   end;
 
   // is our rank to low to join this battle?
   if not LobbyScriptUnit.ScriptJoining then
     if Battle.RankLimit &gt; Status.MyRank then
-      if MessageDlg('This battle requires a rank of &lt;' + Ranks[Battle.RankLimit] + '&gt;.' +#13+
-                    'It is impolite to join a battle which requires a rank which you don''t have.' +#13+#13+
-                    'Do you wish to attempt to join this battle anyway?', mtWarning, [mbNo, mbYes], 0) = mrNo then Exit;
+      if MessageDlg(_('This battle requires a rank of &lt;') + Ranks[Battle.RankLimit] + _('&gt;.') +#13+
+                    _('It is impolite to join a battle which requires a rank which you don''t have.') +#13+#13+
+                    _('Do you wish to attempt to join this battle anyway?'), mtWarning, [mbNo, mbYes], 0) = mrNo then Exit;
 
   if Battle.Password and (Password = '') then
   begin
@@ -8286,7 +8293,7 @@
     else
       if LobbyScriptUnit.ScriptJoining then
         Exit
-      else if not InputQuery('Password', 'Password:', Password) then
+      else if not InputQuery(_('Password'), _('Password:'), Password) then
         Exit;
   end;
 
@@ -8302,7 +8309,7 @@
     if res &lt;&gt; mrOK then
     begin
       if not LobbyScriptUnit.ScriptJoining then
-        MessageDlg('Unable to acquire UDP source port from server. Try choosing another NAT traversal technique!', mtWarning, [mbOK], 0);
+        MessageDlg(_('Unable to acquire UDP source port from server. Try choosing another NAT traversal technique!'), mtWarning, [mbOK], 0);
       Exit;
     end;
   end;
@@ -8678,7 +8685,7 @@
         else if filterType = Description then
           tmpStr := Battle.Description
         else
-          raise Exception.Create('Filter type not handled.');
+          raise Exception.Create(_('Filter type not handled.'));
 
         j := Pos(LowerCase(value),LowerCase(tmpStr));
         if (contains and (j = 0)) or ((not contains) and (j &gt; 0)) then
@@ -8892,21 +8899,21 @@
     else if Header.Columns[Column].Text = 'State' then
     begin
       if Battle.NATType &gt; 0 then
-        tmpStr := ' NAT Traversal enabled, you may not be able to join this battle.';
+        tmpStr := _(' NAT Traversal enabled, you may not be able to join this battle.');
       if Battle.IsBattleInProgress then
-        R := Rect(0, 0, Canvas.TextWidth('Battle in progress, you can''t join it.') + 20, 18)
+        R := Rect(0, 0, Canvas.TextWidth(_('Battle in progress, you can join it but you will have to wait until it ends.')) + 20, 18)
       else if Battle.Locked then
-        R := Rect(0, 0, Canvas.TextWidth('Battle locked, you can''t join it.') + 20, 18)
+        R := Rect(0, 0, Canvas.TextWidth(_('Battle locked, you can''t join it.')) + 20, 18)
       else if Battle.Password and not Battle.IsLadderBattle then
-        R := Rect(0, 0, Canvas.TextWidth('You need the password to join that battle.') + 20, 18)
+        R := Rect(0, 0, Canvas.TextWidth(_('You need the password to join that battle.')) + 20, 18)
       else if Battle.IsBattleFull then
-        R := Rect(0, 0, Canvas.TextWidth('The battle is full, you can join but you will be spectator.'+tmpStr) + 20, 18)
+        R := Rect(0, 0, Canvas.TextWidth(_('The battle is full, you can join but you will be spectator.')+tmpStr) + 20, 18)
       else if Battle.RankLimit &gt; Status.Me.GetRank then
-        R := Rect(0, 0, Canvas.TextWidth('You don''t have the rank required to join that battle. However you can still try to join it if you think you are good enough.'+tmpStr) + 20, 18)
+        R := Rect(0, 0, Canvas.TextWidth(_('You don''t have the rank required to join that battle. However you can still try to join it if you think you are good enough.')+tmpStr) + 20, 18)
       else if Battle.IsLadderBattle then
-        R := Rect(0, 0, Canvas.TextWidth('This is a ladder battle, you can join it. Read the help(F1) for further information.'+tmpStr) + 20, 18)
+        R := Rect(0, 0, Canvas.TextWidth(_('This is a ladder battle, you can join it. Read the help(F1) for further information.')+tmpStr) + 20, 18)
       else
-        R := Rect(0, 0, Canvas.TextWidth('Battle opened.'+tmpStr) + 20, 18);
+        R := Rect(0, 0, Canvas.TextWidth(_('Battle opened.')+tmpStr) + 20, 18);
     end
     else if Header.Columns[Column].Text = 'Map' then
     begin
@@ -8947,19 +8954,19 @@
     else if Header.Columns[Column].Text = 'State' then
     begin
       if Battle.NATType &gt; 0 then
-        tmpStr := ' NAT Traversal enabled, you may not be able to join this battle.';
+        tmpStr := _(' NAT Traversal enabled, you may not be able to join this battle.');
       if Battle.IsBattleInProgress then
-        TextOut(5, 2, 'Battle in progress, you can''t join it.')
+        TextOut(5, 2, _('Battle in progress, you can join it but you will have to wait until it ends.'))
       else if Battle.Locked then
-        TextOut(5, 2, 'Battle locked, you can''t join it.')
+        TextOut(5, 2, _('Battle locked, you can''t join it.'))
       else if Battle.Password and not Battle.IsLadderBattle then
-        TextOut(5, 2, 'You need the password to join that battle.')
+        TextOut(5, 2, _('You need the password to join that battle.'))
       else if Battle.IsBattleFull then
-        TextOut(5, 2, 'The battle is full, you can join but you will be spectator.'+tmpStr)
+        TextOut(5, 2, _('The battle is full, you can join but you will be spectator.')+tmpStr)
       else if Battle.RankLimit &gt; Status.Me.GetRank then
-        TextOut(5, 2, 'You don''t have the rank required to join that battle. However you can still try to join it if you think you are good enough.'+tmpStr)
+        TextOut(5, 2, _('You don''t have the rank required to join that battle. However you can still try to join it if you think you are good enough.')+tmpStr)
       else if Battle.IsLadderBattle then
-        TextOut(5, 2, 'This is a ladder battle, you can join it. Read the help(F1) for further information.'+tmpStr)
+        TextOut(5, 2, _('This is a ladder battle, you can join it. Read the help(F1) for further information.')+tmpStr)
       else
         TextOut(5, 2, 'Battle opened.'+tmpStr);
     end
@@ -8973,9 +8980,9 @@
           Font.Style := [fsBold];
           TextOut(120, 10, MapName);
           Font.Style := [];
-          TextOut(120, 10+TextHeight(MapName), 'Map size: '+IntToStr(MapInfo.Width div 64)+'x'+IntToStr(MapInfo.Height div 64));
-          TextOut(120, 10+TextHeight(MapName)*2, 'Max. metal: '+FloatToStr(RoundTo(MapInfo.MaxMetal,-3)));
-          TextOut(120, 10+TextHeight(MapName)*3, 'Wind (min/max): '+IntToStr(MapInfo.MinWind)+'-'+IntToStr(MapInfo.MaxWind));
+          TextOut(120, 10+TextHeight(MapName), _('Map size: ')+IntToStr(MapInfo.Width div 64)+'x'+IntToStr(MapInfo.Height div 64));
+          TextOut(120, 10+TextHeight(MapName)*2, _('Max. metal: ')+FloatToStr(RoundTo(MapInfo.MaxMetal,-3)));
+          TextOut(120, 10+TextHeight(MapName)*3, _('Wind (min/max): ')+IntToStr(MapInfo.MinWind)+'-'+IntToStr(MapInfo.MaxWind));
           DrawMultilineText(MapInfo.Description,HintCanvas,Rect(120,10+10+TextHeight(MapName)*4,R.Right-10,R.Bottom-5),alHLeft,alVTop,JustLeft,true);
         end;
       end
@@ -9219,7 +9226,7 @@
 
   if Preferences.Username = '' then
   begin
-    MessageDlg('To log into the server, you need an account. Use the &quot;Create new account&quot; button to register a new account.',mtInformation,[mbOk],0);
+    MessageDlg(_('To log into the server, you need an account. Use the &quot;Create new account&quot; button to register a new account.'),mtInformation,[mbOk],0);
     PostMessage(MainForm.Handle, WM_OPENOPTIONS, 0, 0);
     Exit;
   end;
@@ -9406,9 +9413,9 @@
   if Client.GetGroup &lt;&gt; nil then
     Client.GetGroup.RemoveClient(Client.Name);
 
-  InputString:= 'New group '+IntToStr(ClientGroups.Count+1);
-  if InputQuery('New group ...', 'Enter the group name :', InputString) then begin
-    group := TClientGroup.Create(InputString,InputColor('Choose a group highlight color ...',clWhite));
+  InputString:= _('New group ')+IntToStr(ClientGroups.Count+1);
+  if InputQuery(_('New group ...'), _('Enter the group name :'), InputString) then begin
+    group := TClientGroup.Create(InputString,InputColor(_('Choose a group highlight color ...'),clWhite));
     group.AddClient(SelectedUserName);
     ClientGroups.Add(group);
     SortClientInLists(Client);
@@ -9580,8 +9587,8 @@
   Ini := TIniFile.Create(FileName);
   i := 0;
   while Ini.SectionExists(IntToStr(i)) do begin
-    AwayMessages.Titles.Add(Ini.ReadString(IntToStr(i), 'Title', 'Empty'));
-    AwayMessages.Messages.Add(Ini.ReadString(IntToStr(i), 'Message', 'Empty'));
+    AwayMessages.Titles.Add(Ini.ReadString(IntToStr(i), 'Title', _('Empty')));
+    AwayMessages.Messages.Add(Ini.ReadString(IntToStr(i), 'Message', _('Empty')));
     i := i+1;
   end;
   Ini.Free;
@@ -10005,18 +10012,18 @@
   case Column of
     1:
       if filter.filterType = HostName then
-        CellText := 'Host'
+        CellText := _('Host')
       else if filter.filterType = MapName then
-        CellText := 'Map'
+        CellText := _('Map')
       else if filter.filterType = ModName then
-        CellText := 'Mod'
+        CellText := _('Mod')
       else if filter.filterType = Description then
-        CellText := 'Description';
+        CellText := _('Description');
     2:
       if filter.contains then
-        CellText := 'with'
+        CellText := _('with')
       else
-        CellText := 'without';
+        CellText := _('without');
     3:CellText := filter.value;
   end;
 end;
@@ -10079,18 +10086,18 @@
   case Column of
     1:
       if filter.filterType = HostName then
-        text1 := 'Host'
+        text1 := _('Host')
       else if filter.filterType = MapName then
-        text1 := 'Map'
+        text1 := _('Map')
       else if filter.filterType = ModName then
-        text1 := 'Mod'
+        text1 := _('Mod')
       else if filter.filterType = Description then
-        text1 := 'Description';
+        text1 := _('Description');
     2:
       if filter.contains then
-        text1 := 'with'
+        text1 := _('with')
       else
-        text1 := 'without';
+        text1 := _('without');
     3:text1 := filter.value;
   end;
 
@@ -10099,18 +10106,18 @@
   case Column of
     1:
       if filter2.filterType = HostName then
-        text2 := 'Host'
+        text2 := _('Host')
       else if filter2.filterType = MapName then
-        text2 := 'Map'
+        text2 := _('Map')
       else if filter2.filterType = ModName then
-        text2 := 'Mod'
+        text2 := _('Mod')
       else if filter2.filterType = Description then
-        text2 := 'Description';
+        text2 := _('Description');
     2:
       if filter2.contains then
-        text2 := 'with'
+        text2 := _('with')
       else
-        text2 := 'without';
+        text2 := _('without');
     3:text2 := filter2.value;
   end;
 
@@ -10382,7 +10389,7 @@
 var
   reason: string;
 begin
-  reason := InputBox('Kicking reason','Reason :','');
+  reason := InputBox(_('Kicking reason'),_('Reason :'),'');
   if reason &lt;&gt; '' then
     TryToSendCommand('KICKUSER', SelectedUserName+' '+reason);
 end;
@@ -10504,8 +10511,8 @@
   try
     HttpCli2.Get;
   except
-    if Pos('Warning: Ladder server unavailable.',((PageControl1.Pages[0] as TMyTabSheet).Controls[1] as TExRichEdit).Lines.Text) = 0 then
-      MainForm.AddMainLog('Warning: Ladder server unavailable.', Colors.Normal);
+    if Pos(_('Warning: Ladder server unavailable.'),((PageControl1.Pages[0] as TMyTabSheet).Controls[1] as TExRichEdit).Lines.Text) = 0 then
+      MainForm.AddMainLog(_('Warning: Ladder server unavailable.'), Colors.Normal);
     Exit;
   end;
   HttpCli2.RcvdStream.Seek(0,0);
@@ -10528,8 +10535,8 @@
     try
       Misc.ParseDelimited(parse2,MidStr(parse1[i],Pos(' ',parse1[i]),MaxInt),#9,'');
     except
-      if Pos('Warning: Error while parsing top players ladder page.',((PageControl1.Pages[0] as TMyTabSheet).Controls[1] as TExRichEdit).Lines.Text) = 0 then
-        MainForm.AddMainLog('Warning: Error while parsing top players ladder page.', Colors.Normal);
+      if Pos(_('Warning: Error while parsing top players ladder page.'),((PageControl1.Pages[0] as TMyTabSheet).Controls[1] as TExRichEdit).Lines.Text) = 0 then
+        MainForm.AddMainLog(_('Warning: Error while parsing top players ladder page.'), Colors.Normal);
       parse1.Free;
       parse2.Free;
       parse3.Free;
@@ -10537,8 +10544,8 @@
     end;
     if parse2.Count &lt;&gt; 2 then
     begin
-      if Pos('Warning: Error while parsing top players ladder page.',((PageControl1.Pages[0] as TMyTabSheet).Controls[1] as TExRichEdit).Lines.Text) = 0 then
-        MainForm.AddMainLog('Warning: Error while parsing top players ladder page.', Colors.Normal);
+      if Pos(_('Warning: Error while parsing top players ladder page.'),((PageControl1.Pages[0] as TMyTabSheet).Controls[1] as TExRichEdit).Lines.Text) = 0 then
+        MainForm.AddMainLog(_('Warning: Error while parsing top players ladder page.'), Colors.Normal);
       parse1.Free;
       parse2.Free;
       parse3.Free;
@@ -10547,8 +10554,8 @@
     Misc.ParseDelimited(parse3,TrimRight(TrimLeft(parse2[1])),' ','');
     if parse3.Count &lt;&gt; 3 then
     begin
-      if Pos('Warning: Error while parsing top players ladder page.',((PageControl1.Pages[0] as TMyTabSheet).Controls[1] as TExRichEdit).Lines.Text) = 0 then
-        MainForm.AddMainLog('Warning: Error while parsing top players ladder page.', Colors.Normal);
+      if Pos(_('Warning: Error while parsing top players ladder page.'),((PageControl1.Pages[0] as TMyTabSheet).Controls[1] as TExRichEdit).Lines.Text) = 0 then
+        MainForm.AddMainLog(_('Warning: Error while parsing top players ladder page.'), Colors.Normal);
       parse1.Free;
       parse2.Free;
       parse3.Free;
@@ -10706,9 +10713,9 @@
   mnuBattleHost.Visible := VDTBattles.FocusedNode &lt;&gt; nil;
   mnuBattleAddToFilters.Visible := VDTBattles.FocusedNode &lt;&gt; nil;
   if QuickJoinPanel.Visible then
-    mnuQuickJoinPanel.Caption := 'Hide Quick join panel'
+    mnuQuickJoinPanel.Caption := _('Hide Quick join panel')
   else
-    mnuQuickJoinPanel.Caption := 'Show Quick join panel';
+    mnuQuickJoinPanel.Caption := _('Show Quick join panel');
 
   VDTBattles.Repaint;
 end;
@@ -10751,12 +10758,12 @@
   ClientGroup := Client.GetGroup;
 
   if ClientGroup &lt;&gt; nil then begin
-    mnuAddToGroup.Caption := 'Move to group';
+    mnuAddToGroup.Caption := _('Move to group');
     mnuRemoveFromGroup.Enabled := True;
   end
   else
   begin
-    mnuAddToGroup.Caption := 'Add to group';
+    mnuAddToGroup.Caption := _('Add to group');
     mnuRemoveFromGroup.Enabled := False;
   end;
 
@@ -10939,7 +10946,7 @@
     try
       HttpCli1.Get;
     except
-      MainForm.AddMainLog('Warning: Lobby update server unavailable.', Colors.Normal);
+      MainForm.AddMainLog(_('Warning: Lobby update server unavailable.'), Colors.Normal);
       autoUpdateDone := True;
       Exit;
     end;
@@ -10971,10 +10978,10 @@
       end
       else
         if not autoUpdt then
-          MessageDlgThread('Your lobby version is up to date.',mtInformation,[mbOk],0);
+          MessageDlgThread(_('Your lobby version is up to date.'),mtInformation,[mbOk],0);
       autoUpdateDone := True;
     except
-      MainForm.AddMainLog('Warning: Auto-update file broken.', Colors.Normal);
+      MainForm.AddMainLog(_('Warning: Auto-update file broken.'), Colors.Normal);
       autoUpdateDone := True;
       Exit;
     end;
@@ -11146,7 +11153,7 @@
   if selected &gt; -1 then
     JoinBattle(TBattle(Battles[selected]), true)
   else
-    MessageDlg('Sorry, there is no battle available.',mtInformation,[mbOk],0);
+    MessageDlg(_('Sorry, there is no battle available.'),mtInformation,[mbOk],0);
 end;
 
 procedure TMainForm.btPlayNowClick(Sender: TObject);
@@ -11176,7 +11183,7 @@
   if selected &gt; -1 then
     JoinBattle(TBattle(Battles[selected]))
   else
-    MessageDlg('Sorry, there is no battle available.',mtInformation,[mbOk],0);
+    MessageDlg(_('Sorry, there is no battle available.'),mtInformation,[mbOk],0);
 end;
 
 procedure TMainForm.Splitter2Moving(Sender: TObject; var NewSize: Integer;
@@ -11210,7 +11217,7 @@
 begin
   if PresetListbox.Items.IndexOf(PresetNameTextbox.Text) &gt;= 0 then
   begin
-    MessageDlg('That preset name already exists. Please choose another name.',mtWarning,[mbOk],0);
+    MessageDlg(_('That preset name already exists. Please choose another one.'),mtWarning,[mbOk],0);
     Exit;
   end;
   SaveFiltersToFile(FILTERS_FOLDER + '\'+PresetNameTextbox.Text+'.ini');
@@ -11261,7 +11268,7 @@
 procedure TMainForm.initLobbyScript;
 begin
   RegisterClasses([TTntScrollBox ,TWebBrowserWrapper ,TSpTBXDock, TSpTBXMultiDock, TSpTBXToolbar, TSpTBXDockablePanel, TSpTBXTabSet, TSpTBXTabControl, TSpTBXStatusBar, TSpTBXLabel, TSpTBXCheckBox, TSpTBXRadioButton, TSpTBXProgressBar, TSpTBXTrackBar, TSpTBXSplitter, TSpTBXPanel, TSpTBXGroupBox, TSpTBXRadioGroup, TSpTBXEdit,TSpTBXSpinEdit, TSpTBXComboBox,TSpTBXListBox, TSpTBXCheckListBox, TExRichEdit, TImage32, TSpTBXButton]);
-  if not Preferences.ScriptWarningMsgShown then MessageDlg('Experimental lobby scripts are now enabled. You can disable them in the options if they create issues. Lobby scripts allow you to extend TASClient with new functionality. You can add or remove them in the Spring\lobby\Python\scripts directory.',mtInformation, [mbOK], 0);
+  if not Preferences.ScriptWarningMsgShown then MessageDlg(_('Experimental lobby scripts are now enabled. You can disable them in the options if they create issues. Lobby scripts allow you to extend TASClient with new functionality. You can add or remove them in the Spring\lobby\Python\scripts directory.'),mtInformation, [mbOK], 0);
   Preferences.ScriptWarningMsgShown := True;
   if Preferences.ScriptsDisabled then Exit;
   PyEngine.LoadDll;
@@ -11293,7 +11300,7 @@
       PyEval_ReleaseThread(LobbyScriptUnit.MainThreadState);
     except
       Preferences.ScriptsDisabled := True;
-      AddMainLog('An error occured when initializing the scripts.',Colors.Error);
+      AddMainLog(_('An error occured when initializing the scripts.'),Colors.Error);
     end;
   end;
 end;
@@ -11425,7 +11432,7 @@
     ScrollingNewsRSS.Active:=True;
     ScrollingNewsRSS.Resync;
   except
-    MainForm.AddMainLog('Scrolling news RSS Feed''s server unavailable.',Colors.Error);
+    MainForm.AddMainLog(_('Scrolling news RSS Feed''s server unavailable.'),Colors.Error);
     Exit;
   end;
 
@@ -11482,7 +11489,6 @@
     NewsBrowser.Visible := True;
     ExpandNewsButton.ImageIndex := 0;
     NewsBrowser.Repaint;
-    LockWindowUpdate(NewsBrowser.Handle);
     NewsBrowser.Refresh2;
     NewsBrowser.SetFocus;
   end;
@@ -11497,7 +11503,7 @@
 procedure TMainForm.OnNewsBrowserDocumentComplete(Sender: TObject;
   const pDisp: IDispatch; var URL: OleVariant);
 begin
-  LockWindowUpdate(0);
+  // nothing
 end;
 
 procedure TMainForm.OnNewsBrowserBeforeNavigate2(Sender: TObject;

Modified: Lobby/TASClient/ManageGroups.pas
===================================================================
--- Lobby/TASClient/ManageGroups.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/ManageGroups.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -85,7 +85,7 @@
 
 implementation
 
-uses ColorPicker, LobbyScriptUnit;
+uses ColorPicker, LobbyScriptUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -160,7 +160,7 @@
   index : Integer;
 begin
   InputString:= cmbGroups.Items[cmbGroups.ItemIndex];
-  if InputQuery('Renaming group ...', 'Enter the group name :', InputString) then begin
+  if InputQuery(_('Renaming group ...'), _('Enter the group name :'), InputString) then begin
     TClientGroup(ClientGroups[cmbGroups.ItemIndex]).Name := InputString;
     index := cmbGroups.ItemIndex;
     cmbGroups.Items[cmbGroups.ItemIndex] := InputString;
@@ -172,14 +172,14 @@
 
 procedure TManageGroupsForm.btChooseColorClick(Sender: TObject);
 begin
-  ColorPanel.Color := InputColor('Choose a group color ...',ColorPanel.Color);
+  ColorPanel.Color := InputColor(_('Choose a group color ...'),ColorPanel.Color);
   TClientGroup(ClientGroups[cmbGroups.ItemIndex]).Color := ColorPanel.Color;
   MainForm.UpdateClientsListBox;
 end;
 
 procedure TManageGroupsForm.btRemoveGroupClick(Sender: TObject);
 begin
-  if MessageDlg('Remove the group '+TClientGroup(ClientGroups[cmbGroups.ItemIndex]).Name, mtInformation, [mbYes, mbNo], 0) = mrNo then
+  if MessageDlg(_('Remove the group ')+TClientGroup(ClientGroups[cmbGroups.ItemIndex]).Name, mtInformation, [mbYes, mbNo], 0) = mrNo then
     Exit;
   TClientGroup(ClientGroups[cmbGroups.ItemIndex]).Destroy;
   ClientGroups.Delete(cmbGroups.ItemIndex);
@@ -245,6 +245,8 @@
 var
   i: integer;
 begin
+  TranslateComponent(self);
+  
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 
@@ -263,7 +265,7 @@
   client: TClient;
 begin
   InputString := '';
-  if InputQuery('New group ...', 'Enter the group name :', InputString) and (InputString &lt;&gt; '') then
+  if InputQuery(_('New group ...'), _('Enter the group name :'), InputString) and (InputString &lt;&gt; '') then
   begin
     TClientGroup(ClientGroups[cmbGroups.ItemIndex]).AddClient(InputString);
     lstClients.Items.Add(InputString);
@@ -290,7 +292,7 @@
 
 procedure TManageGroupsForm.btChooseChatColorClick(Sender: TObject);
 begin
-  ChatColorPanel.Color := InputColor('Choose a group color ...',ChatColorPanel.Color);
+  ChatColorPanel.Color := InputColor(_('Choose a group color ...'),ChatColorPanel.Color);
   TClientGroup(ClientGroups[cmbGroups.ItemIndex]).ChatColor := ChatColorPanel.Color;
 end;
 

Modified: Lobby/TASClient/MapListFormUnit.pas
===================================================================
--- Lobby/TASClient/MapListFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/MapListFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -176,7 +176,7 @@
 implementation
 
 uses BattleFormUnit, PreferencesFormUnit, InitWaitFormUnit,
-  SpTBXLists, TntWideStrings, MapSelectionFormUnit;
+  SpTBXLists, TntWideStrings, MapSelectionFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -238,7 +238,7 @@
 procedure TMapListForm.AddMap;
 begin
   Maps.Add(TMapItem.Create(ScrollBox1, 10, Maps.Count * MAP_ITEM_HEIGHT - ScrollBox1.VertScrollBar.Position, Maps.Count));
-  TotalMapsLabel.Caption := 'Total maps: ' + IntToStr(Maps.Count);
+  TotalMapsLabel.Caption := _('Total maps: ') + IntToStr(Maps.Count);
 end;
 
 constructor TMapItem.Create(AOwner: TWinControl; X, Y: Integer; Index: Integer);
@@ -300,7 +300,7 @@
   GradeButton.Top := 20;
   GradeButton.Width := 77;
   GradeButton.Height := 20;
-  GradeButton.Caption := 'my grade:';
+  GradeButton.Caption := _('my grade:');
   GradeButton.Images := MainForm.GradesImageList;
   GradeButton.ImageIndex := 0;
   GradeButton.Layout := blGlyphRight;
@@ -309,7 +309,7 @@
   GradeButton.Parent := MainPanel;
 
   PublicGradeInfoLabel := TLabel.Create(MainPanel);
-  PublicGradeInfoLabel.Caption := 'Global grade:';
+  PublicGradeInfoLabel.Caption := _('Global grade:');
   PublicGradeInfoLabel.Left := 120;
   PublicGradeInfoLabel.Top := 50;
   PublicGradeInfoLabel.OnMouseDown := LabelMouseDown;
@@ -318,7 +318,7 @@
   PublicGradeInfoLabel.ParentColor := true;
 
   PublicGradeLabel := TLabel.Create(MainPanel);
-  PublicGradeLabel.Caption := '? (? votes)';
+  PublicGradeLabel.Caption := _('? (? votes)');
   PublicGradeLabel.Left := 120;
   PublicGradeLabel.Top := 65;
   PublicGradeLabel.OnMouseDown := LabelMouseDown;
@@ -341,21 +341,21 @@
   end; // of case
 
   temp := TSpTBXTabItem.Create(MainPanel);
-  temp.Caption := 'Details';
+  temp.Caption := _('Details');
   TabControl.Items.Add(temp);
 
   temp := TSpTBXTabItem.Create(MainPanel);
-  temp.Caption := 'Description';
+  temp.Caption := _('Description');
   TabControl.Items.Add(temp);
 
   temp := TSpTBXTabItem.Create(MainPanel);
-  temp.Caption := 'Comments';
+  temp.Caption := _('Comments');
   TabControl.Items.Add(temp);
 
   TidalStrengthLabel := TLabel.Create(TabControl.Pages[0]);
   with TidalStrengthLabel do
   begin
-    Caption := 'Tidal strength: ?';
+    Caption := _('Tidal strength: ?');
     Left := 5;
     Top := 2;
     OnMouseDown := LabelPanelMouseDown;
@@ -367,7 +367,7 @@
   GravityLabel := TLabel.Create(TabControl.Pages[0]);
   with GravityLabel do
   begin
-    Caption := 'Gravity: ?';
+    Caption := _('Gravity: ?');
     Left := 5;
     Top := 17;
     OnMouseDown := LabelPanelMouseDown;
@@ -379,7 +379,7 @@
   MaxMetalLabel := TLabel.Create(TabControl.Pages[0]);
   with MaxMetalLabel do
   begin
-    Caption := 'Max. metal: ?';
+    Caption := _('Max. metal: ?');
     Left := 5;
     Top := 32;
     OnMouseDown := LabelPanelMouseDown;
@@ -391,7 +391,7 @@
   ExtRadiusLabel := TLabel.Create(TabControl.Pages[0]);
   with ExtRadiusLabel do
   begin
-    Caption := 'Extractor radius: ?';
+    Caption := _('Extractor radius: ?');
     Left := 100;
     Top := 2;
     OnMouseDown := LabelPanelMouseDown;
@@ -403,7 +403,7 @@
   MinWindLabel := TLabel.Create(TabControl.Pages[0]);
   with MinWindLabel do
   begin
-    Caption := 'Min. wind: ?';
+    Caption := _('Min. wind: ?');
     Left := 100;
     Top := 17;
     OnMouseDown := LabelPanelMouseDown;
@@ -415,7 +415,7 @@
   MaxWindLabel := TLabel.Create(TabControl.Pages[0]);
   with MaxWindLabel do
   begin
-    Caption := 'Max. wind: ?';
+    Caption := _('Max. wind: ?');
     Left := 100;
     Top := 32;
     OnMouseDown := LabelPanelMouseDown;
@@ -553,7 +553,7 @@
     Stream.WriteBuffer(s[1], Length(s));
     Stream.Free;
   except
-    MainForm.AddMainLog('Error writing to cache: ' + Filename, Colors.Error);
+    MainForm.AddMainLog(_('Error writing to cache: ') + Filename, Colors.Error);
     Exit;
   end;
 
@@ -578,7 +578,7 @@
     MapImage.Picture.Bitmap.LoadFromStream(Stream);
     Stream.Free;
   except
-    MainForm.AddMainLog('Error reading from cache: ' + Filename, Colors.Error);
+    MainForm.AddMainLog(_('Error reading from cache: ') + Filename, Colors.Error);
     Exit;
   end;
 
@@ -600,7 +600,7 @@
     MapImage.Picture.Bitmap.SaveToStream(Stream);
     Stream.Free;
   except
-    MainForm.AddMainLog('Error writing to cache: ' + Filename, Colors.Error);
+    MainForm.AddMainLog(_('Error writing to cache: ') + Filename, Colors.Error);
     Exit;
   end;
 
@@ -667,12 +667,12 @@
 begin
   Self.MapInfo := MapInfo;
 
-  TidalStrengthLabel.Caption := 'Tidal strength: ' + IntToStr(MapInfo.TidalStrength);
-  GravityLabel.Caption := 'Gravity: ' + IntToStr(MapInfo.Gravity);
-  MaxMetalLabel.Caption := 'Max. metal: ' + Format('%.5g', [MapInfo.Maxmetal]);
-  ExtRadiusLabel.Caption := 'Extractor radius: ' + IntToStr(MapInfo.ExtractorRadius);
-  MinWindLabel.Caption := 'Min. wind: ' + IntToStr(MapInfo.MinWind);
-  MaxWindLabel.Caption := 'Max. wind: ' + IntToStr(MapInfo.MaxWind);
+  TidalStrengthLabel.Caption := _('Tidal strength: ') + IntToStr(MapInfo.TidalStrength);
+  GravityLabel.Caption := _('Gravity: ') + IntToStr(MapInfo.Gravity);
+  MaxMetalLabel.Caption := _('Max. metal: ') + Format('%.5g', [MapInfo.Maxmetal]);
+  ExtRadiusLabel.Caption := _('Extractor radius: ') + IntToStr(MapInfo.ExtractorRadius);
+  MinWindLabel.Caption := _('Min. wind: ') + IntToStr(MapInfo.MinWind);
+  MaxWindLabel.Caption := _('Max. wind: ') + IntToStr(MapInfo.MaxWind);
   AuthorCommentsRichEdit.Text := MapInfo.Description;
 end;
 
@@ -718,7 +718,7 @@
 
   if BattleForm.IsBattleActive and (BattleState.Battle.BattleType = 1) then
   begin
-    MessageDlg('Cannot change map while hosting battle replay!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Cannot change map while hosting battle replay!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
@@ -814,6 +814,8 @@
 
 procedure TMapListForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   Left := 10;
   Top := 10;
 
@@ -904,7 +906,7 @@
 
 procedure TMapListForm.SpTBXSpeedButton1Click(Sender: TObject);
 begin
-  MessageDlg('Syncing grades with the server means sending your local grades of all your maps to the server and at the same time retrieving global grades. Grades are accepted only from players with a rank above &quot;beginner&quot;.', mtInformation, [mbOK], 0);
+  MessageDlg(_('Syncing grades with the server means sending your local grades of all your maps to the server and at the same time retrieving global grades. Grades are accepted only from players with a rank above &quot;beginner&quot;.'), mtInformation, [mbOK], 0);
 end;
 
 procedure TMapListForm.FormClose(Sender: TObject;
@@ -931,13 +933,13 @@
 begin
   if not MainForm.AreWeLoggedIn then
   begin
-    MessageDlg('You must first log on to the server!', mtWarning, [mbOK], 0);
+    MessageDlg(_('You must first log on to the server!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
   if SyncSentAt &lt;&gt; 0 then
   begin
-    MessageDlg('Synchronizing already in progress!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Synchronizing already in progress!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
@@ -948,7 +950,7 @@
   Delete(params, 1, 1); // remove the first space character 
   MainForm.TryToSendCommand('MAPGRADES', params);
 
-  StatusLabel.Caption := 'Waiting for response from server ...';
+  StatusLabel.Caption := _('Waiting for response from server ...');
   SyncSentAt := GetTickCount;
   SyncTimeoutTimer.Enabled := True;
 end;
@@ -963,7 +965,7 @@
 
   if GetTickCount - SyncSentAt &gt; 10000 then
   begin
-    StatusLabel.Caption := 'No response from the server (timeout).';
+    StatusLabel.Caption := _('No response from the server (timeout).');
     SyncSentAt := 0;
     (Sender as TTimer).Enabled := False;
     Exit;
@@ -1146,7 +1148,7 @@
 
 procedure TMapListForm.LoadAllMissingMinimaps;
 begin
-  InitWaitForm.ChangeCaption('Loading minimaps ...');
+  InitWaitForm.ChangeCaption(_('Loading minimaps ...'));
   InitWaitForm.TakeAction := 6; // load minimaps
   InitWaitForm.ShowModal;
 end;

Modified: Lobby/TASClient/MapSelectionFormUnit.dfm
===================================================================
--- Lobby/TASClient/MapSelectionFormUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/MapSelectionFormUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -11,6 +11,7 @@
   Font.Name = 'MS Sans Serif'
   Font.Style = []
   OldCreateOrder = False
+  OnCreate = FormCreate
   DesignSize = (
     249
     328)

Modified: Lobby/TASClient/MapSelectionFormUnit.pas
===================================================================
--- Lobby/TASClient/MapSelectionFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/MapSelectionFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -15,6 +15,7 @@
     Panel1: TPanel;
     procedure FilterTextBoxChange(Sender: TObject);
     procedure MapListBoxDblClick(Sender: TObject);
+    procedure FormCreate(Sender: TObject);
   end;
 
 var
@@ -22,7 +23,7 @@
 
 implementation
 
-uses BattleFormUnit;
+uses BattleFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -37,4 +38,9 @@
   Close;
 end;
 
+procedure TMapSelectionForm.FormCreate(Sender: TObject);
+begin
+  TranslateComponent(self);
+end;
+
 end.

Modified: Lobby/TASClient/MenuFormUnit.pas
===================================================================
--- Lobby/TASClient/MenuFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/MenuFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -179,7 +179,7 @@
 implementation
 
 uses PreferencesFormUnit,Utility,Misc,MapListFormUnit,Registry,
-  BattleFormUnit, MinimapZoomedFormUnit, AddBotUnit, Math;
+  BattleFormUnit, MinimapZoomedFormUnit, AddBotUnit, Math,gnugettext;
 
 {$R *.dfm}
 
@@ -227,10 +227,10 @@
   lpOpenSource(PChar(FLuaFile),'r');
 
   if Utility.lpExecute = 0 then
-    Raise Exception.Create('Invalid lua file : '+luaFileName);
+    Raise Exception.Create(_('Invalid lua file : ')+luaFileName);
 
   if Utility.lpGetKeyExistsStr('name') = 0 then
-    Raise Exception.Create('Campaign doesn''''t have a name : '+luaFileName);
+    Raise Exception.Create(_('Campaign doesn''''t have a name : ')+luaFileName);
 
   FName := Utility.lpGetStrKeyStrVal('name','');
   FShortDesc := Utility.lpGetStrKeyStrVal('shortdesc','');
@@ -281,10 +281,10 @@
     for i:=1 to Utility.lpGetIntKeyListCount do
     begin
       if not IntToBool(Utility.lpGetKeyExistsInt(i)) then
-        Raise Exception.Create('Invalid progress.lua file (keys) : '+progressPath);
+        Raise Exception.Create(_('Invalid progress.lua file (keys) : ')+progressPath);
       tmpStr := Utility.lpGetIntKeyStrVal(i,'');
       if tmpStr = '' then
-        Raise Exception.Create('Invalid progress.lua file (values) : '+progressPath);
+        Raise Exception.Create(_('Invalid progress.lua file (values) : ')+progressPath);
       missionsAccomplishedList.Add(tmpStr);
     end;
   end;
@@ -304,7 +304,7 @@
 begin
   fileHnd := Utility.OpenFileVFS(PChar(FCurrentReturnLua));
   if fileHnd = 0 then
-    Raise Exception.Create('Lua file not found : '+FCurrentReturnLua);
+    Raise Exception.Create(_('Lua file not found : ')+FCurrentReturnLua);
   size := Utility.FileSizeVFS(fileHnd);
   SetLength(content,size);
   Utility.ReadFileVFS(fileHnd,PChar(content),size);
@@ -313,33 +313,33 @@
   lpOpenSource(PChar(content),'r');
 
   if Utility.lpExecute = 0 then
-    Raise Exception.Create('Invalid lua file : '+FCurrentReturnLua);
+    Raise Exception.Create(_('Invalid lua file : ')+FCurrentReturnLua);
 
   if Utility.lpGetKeyExistsStr('nextmissionlist') = 0 then
-    Raise Exception.Create('Campaign doesn''''t have a nextmissionlist : '+FCurrentReturnLua);
+    Raise Exception.Create(_('Campaign doesn''''t have a nextmissionlist : ')+FCurrentReturnLua);
 
   Utility.lpSubTableStr('nextmissionlist');
 
   if Utility.lpGetKeyExistsStr('warmap') = 0 then
-    Raise Exception.Create('Campaign doesn''''t have a warmap : '+FCurrentReturnLua);
+    Raise Exception.Create(_('Campaign doesn''''t have a warmap : ')+FCurrentReturnLua);
 
   FWarmapPath := Utility.lpGetStrKeyStrVal('warmap','');
 
   if FWarmapPath = '' then
-    Raise Exception.Create('Campaign doesn''''t have a valid warmap : '+FCurrentReturnLua);
+    Raise Exception.Create(_('Campaign doesn''''t have a valid warmap : ')+FCurrentReturnLua);
 
   for i:=1 to Utility.lpGetIntKeyListCount do
   begin
     if not IntToBool(Utility.lpGetKeyExistsInt(i)) then
-      Raise Exception.Create('Invalid next missions (keys) : '+FCurrentReturnLua);
+      Raise Exception.Create(_('Invalid next missions (keys) : ')+FCurrentReturnLua);
     Utility.lpSubTableInt(i);
     tmpStr := Utility.lpGetStrKeyStrVal('name','');
     if tmpStr = '' then
-      Raise Exception.Create('Mission name empty : '+FCurrentReturnLua);
+      Raise Exception.Create(_('Mission name empty : ')+FCurrentReturnLua);
     FNextMissionsName.Add(tmpStr);
     tmpStr := Utility.lpGetStrKeyStrVal('script','');
     if tmpStr = '' then
-      Raise Exception.Create('Mission script empty : '+FCurrentReturnLua);
+      Raise Exception.Create(_('Mission script empty : ')+FCurrentReturnLua);
     FNextMissionsScriptPath.Add(tmpStr);
     Utility.lpPopTable;
   end;
@@ -391,7 +391,7 @@
   begin
     missionId := FNextMissionsName.IndexOf(missionName);
     if missionId = -1 then
-      Raise Exception.Create('Mission name incorrect.');
+      Raise Exception.Create(_('Mission name incorrect.'));
   end;
 
   s := TScript.Create(ReadVFSFile(FNextMissionsScriptPath[missionId]));
@@ -399,7 +399,7 @@
   // check the map and maphash
   if Utility.MapList.IndexOf(s.ReadMapName) = -1 then
   begin
-    MessageDlg('You need the map &quot;'+s.ReadMapName+'&quot; to play this mission.',mtWarning,[mbOk],0);
+    MessageDlg(Format(_('You need the map &quot;%s&quot; to play this mission.'),[s.ReadMapName]),mtWarning,[mbOk],0);
     s.Destroy;
     Exit;
   end;
@@ -459,10 +459,10 @@
     else
     begin
       CloseHandle(MenuForm.Process.proc_info.hProcess);
-      Application.MessageBox('Couldn''t execute the application', 'Error', MB_ICONEXCLAMATION);
+      Application.MessageBox(PChar(_('Couldn''t execute the application')), PChar(_('Error')), MB_ICONEXCLAMATION);
     end;
   except
-    Application.MessageBox('An error occured while starting the mission.', 'Error', MB_ICONEXCLAMATION);
+    Application.MessageBox(PChar(_('An error occured while starting the mission.')), PChar(_('Error')), MB_ICONEXCLAMATION);
   end;
 end;
 
@@ -1047,7 +1047,7 @@
 
       if pos3 = -1 then
       begin
-        MessageDlg('(1) En error occured while parsing ''' + fileName + ''' at char ' + IntToStr(pos1)+EOL+'Usage : ['+htmlTag+':paramName:index:default(Optional)]',mtError,[mbOk],0);
+        MessageDlg(Format(_('(1) En error occured while parsing ''%s'' at char %d%sUsage : [%s:paramName:index:default(Optional)]'),[fileName,pos1,EOL,htmlTag]),mtError,[mbOk],0);
         Break;
       end;
 
@@ -1068,7 +1068,7 @@
           arrayId := StrToInt(MidStr(tmpStr,pos3+1,999999));
         end;
       except
-        MessageDlg('(2) En error occured while parsing ''' + fileName + ''' at char ' + IntToStr(pos1)+EOL+'Usage : [Lobby:LoadParam:paramName:index:default(Optional)]',mtError,[mbOk],0);
+        MessageDlg(Format(_('(2) En error occured while parsing ''%s'' at char %d%sUsage : [Lobby:LoadParam:paramName:index:default(Optional)]'),[fileName,pos1,EOL]),mtError,[mbOk],0);
         Break;
       end;
 
@@ -1150,7 +1150,7 @@
 begin
   if not MenuLoaded and not RunningWithMainMenuDev then
   begin
-    MessageDlg('An error occured during the Single Player skin loading. Program will now exit ...',mtError,[mbOk],0);
+    MessageDlg(_('An error occured during the Single Player skin loading. Program will now exit ...'),mtError,[mbOk],0);
     Application.Terminate;
     Exit;
   end;
@@ -1183,7 +1183,7 @@
 begin
   if BattleForm.CurrentMapIndex &lt; 0 then
   begin
-    MessageDlg('You need to select a map first.',mtInformation,[mbOk],0);
+    MessageDlg(_('You need to select a map first.'),mtInformation,[mbOk],0);
     Exit;
   end;
 
@@ -1207,7 +1207,7 @@
   else
   begin
     CloseHandle(Process.proc_info.hProcess);
-    Application.MessageBox('Couldn''t execute the application', 'Error', MB_ICONEXCLAMATION);
+    Application.MessageBox(PChar(_('Couldn''t execute the application')), 'Error', MB_ICONEXCLAMATION);
   end;
 end;
 
@@ -1230,7 +1230,7 @@
   script.AddOrChangeKeyValue('GAME/Mapname',Utility.MapList[BattleForm.CurrentMapIndex]);
   if BattleForm.CurrentModName = '' then
   begin
-    MessageDlg('You must select a mod first.',mtWarning,[mbOk],0);
+    MessageDlg(_('You must select a mod first.'),mtWarning,[mbOk],0);
     Script.Free;
     il.Free;
     Exit;
@@ -1265,7 +1265,7 @@
 
   if il.Count &lt; AIPlayerList.Count then
   begin
-    MessageDlg('Two or more bots share the same id, please change that.',mtWarning,[mbOk],0);
+    MessageDlg(_('Two or more bots share the same id, please change that.'),mtWarning,[mbOk],0);
     Script.Free;
     il.Free;
     Exit;
@@ -1617,7 +1617,7 @@
       end
       else
       begin
-        MessageDlg('Invalid sortmapsby usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid sortmapsby usage : ')+command,mtError,[mbOk],0);
         Exit
       end;
       browsePage := BrowseHistory.Peek;
@@ -1629,7 +1629,7 @@
       browsePage := BrowseHistory.Peek;
       if MidStr(command,11,99999) = '' then Exit;
       tmp := StrToInt(MidStr(command,11,99999));
-      LoadingMessage := 'Loading mod '''+Utility.ModList[tmp]+''', please wait ...';
+      LoadingMessage := Format(_('Loading mod ''%s'', please wait ...'),[Utility.ModList[tmp]]);
 
       LoadMenu('loading.html',Loading);
       BrowseHistory.Pop;
@@ -1656,7 +1656,7 @@
       Misc.ParseDelimited(sl,tmpStr,':','');
       if sl.Count &lt;&gt; 3 then
       begin
-        MessageDlg('Invalid saveparambyindex usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid saveparambyindex usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1684,7 +1684,7 @@
       Misc.ParseDelimited(sl,tmpStr,':','');
       if sl.Count &lt; 2 then
       begin
-        MessageDlg('Invalid saveparam usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid saveparam usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1705,7 +1705,7 @@
       Misc.ParseDelimited(sl,tmpStr,':','');
       if sl.Count &lt; 2 then
       begin
-        MessageDlg('Invalid savesettings usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid savesettings usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1790,7 +1790,7 @@
 
       if (sl.Count &lt;&gt; 2) then
       begin
-        MessageDlg('Invalid changeluaoption usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changeluaoption usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1806,7 +1806,7 @@
           TLuaOption(BattleForm.MapOptionsList[tmp-BattleForm.ModOptionsList.Count]).SetValue(sl[1]);
         end;
       except
-        MessageDlg('Invalid changeluaoption usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changeluaoption usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1856,7 +1856,7 @@
 
       if (sl.Count &lt;&gt; 2) then
       begin
-        MessageDlg('Invalid changeside usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changeside usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1872,7 +1872,7 @@
           TAIItem(AIPlayerList[tmp-2]^).Side := StrToInt(sl[1]);
         end;
       except
-        MessageDlg('Invalid changeside usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changeside usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1888,7 +1888,7 @@
 
       if (sl.Count &lt;&gt; 2) then
       begin
-        MessageDlg('Invalid changeid usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changeid usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1904,7 +1904,7 @@
           TAIItem(AIPlayerList[tmp-2]^).Id := StrToInt(sl[1]);
         end;
       except
-        MessageDlg('Invalid changeid usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changeid usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1920,7 +1920,7 @@
 
       if (sl.Count &lt;&gt; 2) then
       begin
-        MessageDlg('Invalid changeally usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changeally usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1936,7 +1936,7 @@
           TAIItem(AIPlayerList[tmp-2]^).Team := StrToInt(sl[1]);
         end;
       except
-        MessageDlg('Invalid changeally usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changeally usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1952,7 +1952,7 @@
 
       if (sl.Count &lt;&gt; 2) then
       begin
-        MessageDlg('Invalid changehandicap usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changehandicap usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1968,7 +1968,7 @@
           TAIItem(AIPlayerList[tmp-2]^).Handicap := StrToInt(sl[1]);
         end;
       except
-        MessageDlg('Invalid changehandicap usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changehandicap usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -1984,7 +1984,7 @@
 
       if (sl.Count &lt;&gt; 3) then
       begin
-        MessageDlg('Invalid changestartpos usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changestartpos usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -2002,7 +2002,7 @@
           TAIItem(AIPlayerList[tmp-2]^).StartPosY := StrToFloat(sl[2]);
         end;
       except
-        MessageDlg('Invalid changestartpos usage : '+command,mtError,[mbOk],0);
+        MessageDlg(_('Invalid changestartpos usage : ')+command,mtError,[mbOk],0);
         sl.Free;
         Exit;
       end;
@@ -2026,7 +2026,7 @@
       Exit;
     end;
 
-    MessageDlg('Unknown lobby command : ''' + command + '''',mtError,[mbOk],0);
+    MessageDlg(_('Unknown lobby command : ''') + command + '''',mtError,[mbOk],0);
     Exit;
   end;
 
@@ -2204,7 +2204,7 @@
 
   if not FileExists(SPSKIN_FOLDER + '\' + skinFile) then
   begin
-    MessageDlg('Single Player skin file '''+SPSKIN_FOLDER + '\' + skinFile+''' not found.',mtWarning,[mbOK],0);
+    MessageDlg(Format(_('Single Player skin file ''%s\%s'' not found.'),[SPSKIN_FOLDER,skinFile]),mtWarning,[mbOK],0);
     MenuLoaded := False;
     Exit;
   end;

Modified: Lobby/TASClient/MinimapZoomedFormUnit.pas
===================================================================
--- Lobby/TASClient/MinimapZoomedFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/MinimapZoomedFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -32,7 +32,7 @@
 
 implementation
 
-uses BattleFormUnit, PreferencesFormUnit;
+uses BattleFormUnit, PreferencesFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -129,6 +129,8 @@
 
 procedure TMinimapZoomedForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   Image1.Picture.Bitmap.Width := Image1.Width;
   Image1.Picture.Bitmap.Height := Image1.Height;
 end;

Modified: Lobby/TASClient/MuteListFormUnit.dfm
===================================================================
--- Lobby/TASClient/MuteListFormUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/MuteListFormUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -15,6 +15,7 @@
   Position = poScreenCenter
   Scaled = False
   OnClose = FormClose
+  OnCreate = FormCreate
   OnDestroy = FormDestroy
   PixelsPerInch = 96
   TextHeight = 13

Modified: Lobby/TASClient/MuteListFormUnit.pas
===================================================================
--- Lobby/TASClient/MuteListFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/MuteListFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -18,6 +18,7 @@
     procedure FormClose(Sender: TObject; var Action: TCloseAction);
     procedure FormDestroy(Sender: TObject);
     procedure CloseButtonClick(Sender: TObject);
+    procedure FormCreate(Sender: TObject);
   private
   public
     ChanName: string;
@@ -28,7 +29,7 @@
 
 implementation
 
-uses PreferencesFormUnit, MainUnit;
+uses PreferencesFormUnit, MainUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -58,7 +59,7 @@
 procedure TMuteListForm.Reset;
 begin
   MuteListBox.Clear;
-  StatusBar.SimpleText := 'Receiving mute list ...';
+  StatusBar.SimpleText := _('Receiving mute list ...');
 end;
 
 procedure TMuteListForm.FormClose(Sender: TObject;
@@ -77,4 +78,9 @@
   Close;
 end;
 
+procedure TMuteListForm.FormCreate(Sender: TObject);
+begin
+  TranslateComponent(self);
+end;
+
 end.

Modified: Lobby/TASClient/NewAccountUnit.dfm
===================================================================
--- Lobby/TASClient/NewAccountUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/NewAccountUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -6,6 +6,8 @@
   ClientHeight = 199
   ClientWidth = 268
   Color = clBtnFace
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11
@@ -14,6 +16,7 @@
   OldCreateOrder = False
   Position = poOwnerFormCenter
   Scaled = False
+  OnCreate = FormCreate
   PixelsPerInch = 96
   TextHeight = 13
   object SpTBXTitleBar1: TSpTBXTitleBar

Modified: Lobby/TASClient/NewAccountUnit.pas
===================================================================
--- Lobby/TASClient/NewAccountUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/NewAccountUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -21,6 +21,7 @@
     procedure CreateParams(var Params: TCreateParams); override;
 
     procedure RegisterButtonClick(Sender: TObject);
+    procedure FormCreate(Sender: TObject);
   private
     { Private declarations }
   public
@@ -32,7 +33,7 @@
 
 implementation
 
-uses PreferencesFormUnit, Misc;
+uses PreferencesFormUnit, Misc, gnugettext;
 
 {$R *.dfm}
 
@@ -53,19 +54,19 @@
 
   if (UsernameEdit.Text = '') or (PasswordEdit.Text = '') then
   begin
-    MessageDlg('Username/password should not be blank!', mtError, [mbOK], 0);
+    MessageDlg(_('Username/password should not be blank!'), mtError, [mbOK], 0);
     Exit;
   end;
 
   if (not VerifyName(UsernameEdit.Text)) or (not VerifyName(PasswordEdit.Text)) then
   begin
-    MessageDlg('Your username and/or password consists of illegal characters!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Your username and/or password consists of illegal characters!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
   if PasswordEdit.Text &lt;&gt; ConfirmPasswordEdit.Text then
   begin
-    MessageDlg('Passwords differ! Please retype your password.', mtWarning, [mbOK], 0);
+    MessageDlg(_('Passwords differ! Please retype your password.'), mtWarning, [mbOK], 0);
     PasswordEdit.Text := '';
     ConfirmPasswordEdit.Text := '';
     Exit;
@@ -75,4 +76,9 @@
 
 end;
 
+procedure TNewAccountForm.FormCreate(Sender: TObject);
+begin
+  TranslateComponent(self);
+end;
+
 end.

Modified: Lobby/TASClient/NotificationsUnit.dfm
===================================================================
--- Lobby/TASClient/NotificationsUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/NotificationsUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -6,8 +6,8 @@
   ClientHeight = 276
   ClientWidth = 322
   Color = clBtnFace
-  Constraints.MaxHeight = 910
-  Constraints.MaxWidth = 1280
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11

Modified: Lobby/TASClient/NotificationsUnit.pas
===================================================================
--- Lobby/TASClient/NotificationsUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/NotificationsUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -66,7 +66,7 @@
 
 implementation
 
-uses MainUnit, PreferencesFormUnit, StringParser, AddNotificationFormUnit;
+uses MainUnit, PreferencesFormUnit, StringParser, AddNotificationFormUnit, gnugettext;
 
 var
   Notifications: array[TNotificationType] of TStringList; // for each notification type, store one list of notifications
@@ -262,7 +262,7 @@
         nfModHosted: NotificationListBox.Items.Add(Format(NotificationInfo[TNotificationType(i)], [sl[0]]));
       end; // of case sentence
     except
-      MessageDlg('Error: invalid notification syntax. Please report this error!', mtError, [mbOK], 0);
+      MessageDlg(_('Error: invalid notification syntax. Please report this error!'), mtError, [mbOK], 0);
       Exit;
     end;
   finally
@@ -318,7 +318,7 @@
 
       if index &gt; Length(Notifications)-1 then
       begin
-        MessageDlg('Error: notification list file seems to be currupt. Try deleting it!', mtError, [mbOK], 0);
+        MessageDlg(_('Error: notification list file seems to be currupt. Try deleting it!'), mtError, [mbOK], 0);
         Exit;
       end;
 
@@ -342,6 +342,8 @@
 var
   i: Integer;
 begin
+  TranslateComponent(self);
+  
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
   for i := 0 to Length(Notifications)-1 do Notifications[TNotificationType(i)] := TStringList.Create;

Modified: Lobby/TASClient/OnlineMapsUnit.pas
===================================================================
--- Lobby/TASClient/OnlineMapsUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/OnlineMapsUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -5,7 +5,7 @@
 uses
   Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
   Dialogs, StdCtrls, ExtCtrls, HttpProt, Buttons, GraphicEx, SpTBXItem,
-  SpTBXControls, TBXDkPanels;
+  SpTBXControls, TBXDkPanels, gnugettext;
 
 const
   MAPLIST_TEMP_FILENAME = 'maplist_temp.dat';
@@ -512,6 +512,8 @@
 
 procedure TOnlineMapsForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   Left := 10;
   Top := 10;
 

Modified: Lobby/TASClient/PerformFormUnit.dfm
===================================================================
--- Lobby/TASClient/PerformFormUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/PerformFormUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -6,8 +6,8 @@
   ClientHeight = 358
   ClientWidth = 397
   Color = clBtnFace
-  Constraints.MaxHeight = 910
-  Constraints.MaxWidth = 1280
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11

Modified: Lobby/TASClient/PerformFormUnit.pas
===================================================================
--- Lobby/TASClient/PerformFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/PerformFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -44,7 +44,7 @@
 
 implementation
 
-uses MainUnit,Math;
+uses MainUnit,Math, gnugettext;
 
 {$R *.dfm}
 
@@ -70,7 +70,7 @@
 
   if (CmdEdit.Text[1] &lt;&gt; '/') and (CmdEdit.Text[1] &lt;&gt; '.') then
   begin
-    MessageDlg('Invalid command! (each command should start with &quot;/&quot; character', mtError, [mbOK], 0);
+    MessageDlg(_('Invalid command! (each command should start with &quot;/&quot; character'), mtError, [mbOK], 0);
     Exit;
   end;
 
@@ -175,6 +175,8 @@
 
 procedure TPerformForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;

Modified: Lobby/TASClient/PreferencesFormUnit.pas
===================================================================
--- Lobby/TASClient/PreferencesFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/PreferencesFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -327,7 +327,7 @@
   NewAccountUnit, IgnoreListUnit, MapListFormUnit, ColorsPreferenceUnit,
   ManageGroups, ReplaysUnit, PythonScriptDebugFormUnit, LobbyScriptUnit,
   SpringDownloaderFormUnit, LogonFormUnit, TipsFormUnit,
-  TemplateEditorFormUnit, SpringSettingsProfileFormUnit;
+  TemplateEditorFormUnit, SpringSettingsProfileFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -730,7 +730,7 @@
     Misc.SetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Forms\BattleForm\Default', 'StartEnergy', rdInteger, BattleForm.EnergyTracker.Value);
     Misc.SetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Forms\BattleForm\Default', 'MaxUnits', rdInteger, BattleForm.UnitsTracker.Value);
   except
-    MessageDlg('Unable to write preferences to windows registry!', mtError, [mbOK], 0);
+    MessageDlg(_('Unable to write preferences to windows registry!'), mtError, [mbOK], 0);
   end;
 end;
 
@@ -799,13 +799,13 @@
 begin
   if UsernameEdit.Text = '' then
   begin
-    MessageDlg('&quot;Username&quot; field should not be left empty!', mtWarning, [mbOK], 0);
+    MessageDlg(_('&quot;Username&quot; field should not be left empty!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
   if (not VerifyName(UsernameEdit.Text)) or (not VerifyName(PasswordEdit.Text) and PasswordChanged) then
   begin
-    MessageDlg('Your username and/or password consists of illegal characters!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Your username and/or password consists of illegal characters!'), mtWarning, [mbOK], 0);
     Exit;
   end;
 
@@ -1006,6 +1006,8 @@
 
 procedure TPreferencesForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 
@@ -1013,19 +1015,19 @@
 
   SetLength(ServerList,4);
 
-  ServerList[0].Name := 'Official host (taspringmaster.clan-sy.com)';
+  ServerList[0].Name := _('Official host (taspringmaster.clan-sy.com)');
   ServerList[0].Address := 'taspringmaster.clan-sy.com';
   ServerList[0].Port := '8200';
 
-  ServerList[1].Name := 'Backup server #1 (springbackup1.servegame.com )';
+  ServerList[1].Name := _('Backup server #1 (springbackup1.servegame.com )');
   ServerList[1].Address := 'springbackup1.servegame.com ';
   ServerList[1].Port := '8200';
 
-  ServerList[2].Name := 'Backup server #2 (springbackup2.servegame.org)';
+  ServerList[2].Name := _('Backup server #2 (springbackup2.servegame.org)');
   ServerList[2].Address := 'springbackup2.servegame.org';
   ServerList[2].Port := '8200';
 
-  ServerList[3].Name := 'Local server (localhost)';
+  ServerList[3].Name := _('Local server (localhost)');
   ServerList[3].Address := 'localhost';
   ServerList[3].Port := '8200';
 
@@ -1097,7 +1099,7 @@
 begin
   if Status.ConnectionState = Connected then
   begin
-    MessageDlg('You are not allowed to register new account while being logged-in!', mtError, [mbOK], 0);
+    MessageDlg(_('You are not allowed to register new account while being logged-in!'), mtError, [mbOK], 0);
     Exit;
   end;
 
@@ -1138,13 +1140,13 @@
   else
   begin
     tmp := ShellExecute(MainForm.Handle, 'open', PChar(ExtractFilePath(Application.ExeName) + 'settings.exe'), '', PChar(ExtractFilePath(Application.ExeName)), SW_SHOWNORMAL);
-    if (tmp &gt; 0) and (tmp &lt; 32) then MessageDlg('Couldn''t find settings.exe!', mtWarning, [mbOK], 0);
+    if (tmp &gt; 0) and (tmp &lt; 32) then MessageDlg(_('Couldn''t find settings.exe!'), mtWarning, [mbOK], 0);
   end;
 end;
 
 procedure TPreferencesForm.ResetRegistryButtonClick(Sender: TObject);
 begin
-  if MessageDlg('This will remove all TASClient data from registry. Do you wish to continue?', mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
+  if MessageDlg(_('This will remove all TASClient data from registry. Do you wish to continue?'), mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
   RemoveRegistryKey(HKEY_CURRENT_USER, '\Software\TASClient');
   SaveToRegOnExit := False;
 end;
@@ -1235,7 +1237,7 @@
   tmp: Integer;
 begin
   tmp := ShellExecute(MainForm.Handle, 'open', PChar(ExtractFilePath(Application.ExeName) + 'SelectionEditor.exe'), '', PChar(ExtractFilePath(Application.ExeName)), SW_SHOWNORMAL);
-  if (tmp &gt; 0) and (tmp &lt; 32) then MessageDlg('Couldn''t find SelectionEditor.exe!', mtWarning, [mbOK], 0);
+  if (tmp &gt; 0) and (tmp &lt; 32) then MessageDlg(_('Couldn''t find SelectionEditor.exe!'), mtWarning, [mbOK], 0);
 end;
 
 constructor TLadderCheckAccountThread.Create(Suspended: Boolean;passToCheck: string;onTheFlyCheck : boolean);
@@ -1262,7 +1264,7 @@
     Exit;
     
   if not VerifyName(password) then begin
-    MessageDlgThread('Your password consists of illegal characters!',mtWarning,[mbOk],0);
+    MessageDlgThread(_('Your password consists of illegal characters!'),mtWarning,[mbOk],0);
     Exit;
   end;
   parse1 := TStringList.Create;
@@ -1272,7 +1274,7 @@
     begin
       LadderPasswordEdit.PasswordChar := #0;
       LogonForm.beLadderPassword.PasswordChar := LadderPasswordEdit.PasswordChar;
-      LadderPasswordEdit.Text := 'Checking password ...';
+      LadderPasswordEdit.Text := _('Checking password ...');
       LogonForm.beLadderPassword.Text := LadderPasswordEdit.Text;
       ApplyAndCloseButton.Enabled := False;
       LogonForm.btLogin.Enabled := False;
@@ -1295,8 +1297,8 @@
     try
       HttpCli1.Get;
     except
-      MainForm.AddMainLog('Error: Ladder server unavailable.', Colors.Error);
-      MessageDlgThread('Error: Ladder server unavailable.',mtError,[mbOK],0);
+      MainForm.AddMainLog(_('Error: Ladder server unavailable.'), Colors.Error);
+      MessageDlgThread(_('Error: Ladder server unavailable.'),mtError,[mbOK],0);
       LadderPasswordEdit.Text := '';
       ApplyAndCloseButton.Enabled := True;
       LogonForm.btLogin.Enabled := True;
@@ -1371,13 +1373,13 @@
   parse1 : TStrings;
   password : string;
 begin
-  password := InputBoxThread('Ladder password','Enter your ladder password :','');
+  password := InputBoxThread(_('Ladder password'),_('Enter your ladder password :'),'');
 
   if password = '' then
     Exit;
 
   if not VerifyName(password) then begin
-    MessageDlgThread('Your password consists of illegal characters!',mtWarning,[mbOk],0);
+    MessageDlgThread(_('Your password consists of illegal characters!'),mtWarning,[mbOk],0);
     Exit;
   end;
 
@@ -1386,7 +1388,7 @@
   with PreferencesForm do begin
     LadderPasswordEdit.PasswordChar := #0;
     LogonForm.beLadderPassword.PasswordChar := LadderPasswordEdit.PasswordChar;
-    LadderPasswordEdit.Text := 'Registering acount ...';
+    LadderPasswordEdit.Text := _('Registering acount ...');
     LogonForm.beLadderPassword.Text := LadderPasswordEdit.Text;
     ApplyAndCloseButton.Enabled := False;
     LogonForm.btLogin.Enabled := False;
@@ -1408,8 +1410,8 @@
     try
       HttpCli1.Get;
     except
-      MainForm.AddMainLog('Error: Ladder server unavailable.', Colors.Error);
-      MessageDlgThread('Error: Ladder server unavailable.',mtError,[mbOK],0);
+      MainForm.AddMainLog(_('Error: Ladder server unavailable.'), Colors.Error);
+      MessageDlgThread(_('Error: Ladder server unavailable.'),mtError,[mbOK],0);
       LadderPasswordEdit.Text := '';
       ApplyAndCloseButton.Enabled := True;
       LogonForm.btLogin.Enabled := True;
@@ -1474,7 +1476,7 @@
   parse1 : TStrings;
   password : string;
 begin
-  if MessageDlgThread('Do you want to rename your ladder account too ?',mtConfirmation,[mbYes,mbNo],0) = mrNo then
+  if MessageDlgThread(_('Do you want to rename your ladder account too ?'),mtConfirmation,[mbYes,mbNo],0) = mrNo then
     Exit;
 
   parse1 := TStringList.Create;
@@ -1493,8 +1495,8 @@
     try
       HttpCli1.Get;
     except
-      MainForm.AddMainLog('Error: Ladder server unavailable.', Colors.Error);
-      MessageDlgThread('Error: Ladder server unavailable.',mtError,[mbOK],0);
+      MainForm.AddMainLog(_('Error: Ladder server unavailable.'), Colors.Error);
+      MessageDlgThread(_('Error: Ladder server unavailable.'),mtError,[mbOK],0);
       LadderPasswordEdit.Text := '';
       Exit;
     end;
@@ -1534,7 +1536,7 @@
   CheckPasswordThread : TLadderCheckAccountThread;
   password : string;
 begin
-  password := InputBox('Ladder password','Enter your ladder password :','');
+  password := InputBox(_('Ladder password'),_('Enter your ladder password :'),'');
   CheckPasswordThread := TLadderCheckAccountThread.Create(False,password,false);
 end;
 
@@ -1561,7 +1563,7 @@
 begin
   if ClientGroups.Count = 0 then
   begin
-    MessageDlg('There is no player group to manage. To make a new group use the player context menu.',mtInformation,[mbOk],0);
+    MessageDlg(_('There is no player group to manage. To make a new group use the player context menu.'),mtInformation,[mbOk],0);
     Exit;
   end;
   ManageGroupsForm.Showmodal;
@@ -1569,7 +1571,7 @@
 
 procedure TPreferencesForm.ChatLogsLimitTrackerChange(Sender: TObject);
 begin
-  ChatLogsLimitCheckBox.Caption := 'Limit chat logs to ' + IntToStr(ChatLogsLimitTracker.Position) + ' lines';
+  ChatLogsLimitCheckBox.Caption := Format(_('Limit chat logs to %d lines'),[ChatLogsLimitTracker.Position]);
 end;
 
 procedure TPreferencesForm.PasswordEditChange(Sender: TObject);

Modified: Lobby/TASClient/ProgressBarWindow.pas
===================================================================
--- Lobby/TASClient/ProgressBarWindow.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/ProgressBarWindow.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -27,7 +27,7 @@
 
 implementation
 
-uses Misc;
+uses Misc, gnugettext;
 
 {$R *.dfm}
 
@@ -38,11 +38,11 @@
   ProgressBarForm.Refresh;
   CancelButton.Enabled := True;
   if TakeAction = 1 then begin
-    ProgressBarForm.SpTBXTitleBar1.Caption := 'Uploading your replay ...';
+    ProgressBarForm.SpTBXTitleBar1.Caption := _('Uploading your replay ...');
     ThreadUp := TUploadThread.Create(False);
   end
   else if TakeAction = 2 then begin
-    ProgressBarForm.SpTBXTitleBar1.Caption := 'Uploading ladder report ...';
+    ProgressBarForm.SpTBXTitleBar1.Caption := _('Uploading ladder report ...');
     ThreadLadderUp := TUploadLadderDataThread.Create(False);
     CancelButton.Enabled := False;
   end;
@@ -55,6 +55,8 @@
 
 procedure TProgressBarForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;

Modified: Lobby/TASClient/Python/api.txt
===================================================================
--- Lobby/TASClient/Python/api.txt	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/Python/api.txt	2009-02-18 16:40:01 UTC (rev 7245)
@@ -11,7 +11,6 @@
 	see the protocol documentation for more information
 - onLoggedIn
 - onDisconnect
-- HandleOut(s) return dontLetLobbyHandleIt : boolean
 - onLogin
 - onConnected
 - onClose
@@ -40,27 +39,26 @@
 - GetMods
 - GetMyUser
 - GetUsers
+- GetReplays
+- GetCurrentBattle
+- GetServers
+- SetServers(dict)
 - HandleProtocol(data)
+- SendProtocol(data)
 - LoadScripts
 - PerformConnected
 - PerformDisconnected
 - ReloadScript(scriptname)
 - ReloadScripts
-- SendProtocol(data)
 - ShowDebugWindow
 - SocketConnect(ip,port)
 - HostBattle(nbPlayers, RankLimit, ModName, Description, Password, UDPHostPort, NatTraversal) return true if success
 - JoinBattle(BattleId)
-- GetReplays
 - HostReplay(replayFile, nbPlayers, RankLimit, Description, Password, UDPHostPort, NatTraversal) return true if success
 - LeaveBattle
 - StartBattle
-- GetCurrentBattle
-- GetServers
-- SetServers(dict)
 - ChangeMap(mapName)
 
-
 GUI Class
 ---------
 

Modified: Lobby/TASClient/Python/scripts/subf/testHideAutoHosts.py
===================================================================
--- Lobby/TASClient/Python/scripts/subf/testHideAutoHosts.py	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/Python/scripts/subf/testHideAutoHosts.py	2009-02-18 16:40:01 UTC (rev 7245)
@@ -7,15 +7,15 @@
 
 autoHostKeyWords = ['host','dedicated','spads','springie']
 
-def isUserBot(user):
-	return ((int(user['Status']) &amp; 0x40) &gt;&gt; 6) or isNameAutoHost(user['Name'])	
-
 def isNameAutoHost(name):
 	global autoHostKeyWords
 	for keyWord in autoHostKeyWords:
 		if name.lower().find(keyWord) &gt;= 0:
 			return True
 	return False
+	
+def isUserBot(userDict):
+	return ((int(userDict['Status']) &amp; 0x40) &gt;&gt; 6) == 1 or isNameAutoHost(userDict['Name'])	
 
 def refreshBattles():
 	global sEnabled
@@ -28,13 +28,13 @@
 	global sEnabled
 	sEnabled = True
 	refreshBattles()
-	return False
+	return True
 	
 def cmd_showautohosts(data):
 	global sEnabled
 	sEnabled = False
 	refreshBattles()
-	return False
+	return True
 
 def in_UPDATEBATTLEINFO(idStr, rest):
 	global sEnabled

Modified: Lobby/TASClient/PythonScriptDebugFormUnit.pas
===================================================================
--- Lobby/TASClient/PythonScriptDebugFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/PythonScriptDebugFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -32,7 +32,7 @@
 
 implementation
 
-uses LobbyScriptUnit, PreferencesFormUnit;
+uses LobbyScriptUnit, PreferencesFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -70,6 +70,8 @@
 var
   s: string;
 begin
+  TranslateComponent(self);
+  
   printList := TStringList.Create;
   try
     debugOutput := TFileStream.Create(ExtractFilePath(Application.ExeName)+'TASClient_script_log.txt',fmCreate or fmOpenReadWrite or fmShareDenyNone);

Modified: Lobby/TASClient/ReplaysUnit.pas
===================================================================
--- Lobby/TASClient/ReplaysUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/ReplaysUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -305,7 +305,7 @@
 
 uses  StrUtils, ShellAPI, BattleFormUnit, Misc, PreferencesFormUnit,
   InitWaitFormUnit,MsMultiPartFormData, ProgressBarWindow,
-  UploadReplayUnit, LobbyScriptUnit, TipsFormUnit;
+  UploadReplayUnit, LobbyScriptUnit, TipsFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -434,7 +434,7 @@
 
   for i := 0 to Comments.Count-1 do if Pos(';', Comments[i]) &lt;&gt; 0 then
   begin
-    MessageDlg('Invalid character found in comments: &quot;;&quot;. Please remove any &quot;;&quot; from the comments before saving them!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Invalid character found in comments: &quot;;&quot;. Please remove any &quot;;&quot; from the comments before saving them!'), mtWarning, [mbOK], 0);
     Exit
   end;
 
@@ -765,7 +765,7 @@
       Seek(f,replay.demoHeader.headerSize + replay.demoHeader.scriptSize + replay.demoHeader.demoStreamSize);
     except
       CloseFile(f);
-      MainForm.AddMainLog('Error : couldn''t open the replay file '+replay.FileName,Colors.Error);
+      MainForm.AddMainLog(_('Error : couldn''t open the replay file :')+replay.FileName,Colors.Error);
       sl.Free;
       Exit;
     end;
@@ -917,6 +917,8 @@
 
 procedure TReplaysForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   PageControl1.ActiveTabIndex := 0;
   LoadingPanel.Height := ReplaysForm.ClientHeight-PanelTop.Top-PanelTop.Left;
   LoadingPanel.Width := ReplaysForm.ClientWidth-PanelTop.Left*2;
@@ -954,7 +956,7 @@
   ScriptRichEdit.Lines.Clear;
   CommentsRichEdit.Lines.Clear;
   VDTPlayers.Clear;
-  PlayersTab.Caption := 'Players';
+  PlayersTab.Caption := _('Players');
   if Replay = nil then Exit;
 
   VDTPlayers.TreeOptions.AutoOptions := [toAutoDropExpand,toAutoScrollOnExpand,toAutoTristateTracking,toAutoDeleteMovedNodes];
@@ -966,7 +968,7 @@
   VDTPlayers.TreeOptions.AutoOptions := [toAutoDropExpand,toAutoScrollOnExpand,toAutoSort,toAutoTristateTracking,toAutoDeleteMovedNodes];
   VDTPlayers.SortTree(VDTPlayers.Header.SortColumn,VDTPlayers.Header.SortDirection);
 
-  PlayersTab.Caption := 'Players (' + IntToStr(Replay.PlayerList.Count) + ')';
+  PlayersTab.Caption := _('Players (') + IntToStr(Replay.PlayerList.Count) + ')';
 
   Result := True;
   LoadingReplay := False;
@@ -983,17 +985,17 @@
   try
 
     if Replay.Script.ReadStartPosType = 3 then
-      lblStartPos.Caption := 'Start pos : Choose in lobby'
+      lblStartPos.Caption := _('Start pos : Choose in lobby')
     else
-      lblStartPos.Caption := 'Start pos : '+BattleForm.StartPosRadioGroup.Items[Replay.Script.ReadStartPosType];
+      lblStartPos.Caption := _('Start pos : ')+BattleForm.StartPosRadioGroup.Items[Replay.Script.ReadStartPosType];
   except
-    on E: Exception do MessageDlg('An error occured while loading the replay '''+Replay.FileName+''' :'+EOL+EOL + E.Message,mtError,[mbOk],E.HelpContext);
+    on E: Exception do MessageDlg(_('An error occured while loading the replay ''')+Replay.FileName+''' :'+EOL+EOL + E.Message,mtError,[mbOk],E.HelpContext);
   end;
 
-  try lblGameEnd.Caption := 'Game end condition: '+IntToStr(Replay.Script.ReadGameMode); except end;
-  try lblMetal.Caption := 'Start metal : '+IntToStr(Replay.Script.ReadStartMetal); except end;
-  try lblEnergy.Caption := 'Start energy : '+IntToStr(Replay.Script.ReadStartEnergy); except end;
-  try lblMaxUnits.Caption := 'Max units : '+IntToStr(Replay.Script.ReadMaxUnits); except end;
+  try lblGameEnd.Caption := _('Game end condition: ')+IntToStr(Replay.Script.ReadGameMode); except end;
+  try lblMetal.Caption := _('Start metal : ')+IntToStr(Replay.Script.ReadStartMetal); except end;
+  try lblEnergy.Caption := _('Start energy : ')+IntToStr(Replay.Script.ReadStartEnergy); except end;
+  try lblMaxUnits.Caption := _('Max units : ')+IntToStr(Replay.Script.ReadMaxUnits); except end;
 
 
   try
@@ -1054,7 +1056,7 @@
   else
   begin
     if BattleForm.IsBattleActive and Status.Me.GetReadyStatus then
-      if MessageDlg('You cannot be ready in a battle and watch replays at the same time. Do you wish to unready now?', mtWarning, [mbYes, mbNo], 0) &lt;&gt; mrYes then Exit
+      if MessageDlg(_('You cannot be ready in a battle and watch replays at the same time. Do you wish to unready now?'), mtWarning, [mbYes, mbNo], 0) &lt;&gt; mrYes then Exit
       else BattleForm.ReadyButton.OnClick(BattleForm.ReadyButton);
 
     FileName := Replay.FullFileName;
@@ -1068,7 +1070,7 @@
       ParseDelimited(version2,Replay.SpringVersion,'.','');
 
       if (springExeVersion &lt;&gt; Replay.SpringVersion) and (((version1.Count &lt; 3) and (version2.Count &lt; 3)) or not((version1[0] = version2[0]) and (version1[1] = version2[1]) and (version1[2] = version2[2]))) then
-        if MessageDlg(springDir + 'spring.exe not found.'+EOL+EOL+'Watching a replay with the wrong spring version may not work.'+EOL+EOL+'Watch with the default spring.exe ('+springExeVersion+') ?',mtWarning,[mbYes,mbNo],0) = mrNo then
+        if MessageDlg(springDir + _('spring.exe not found.')+EOL+EOL+_('Watching a replay with the wrong spring version may not work.')+EOL+EOL+_('Watch with the default spring.exe (')+springExeVersion+') ?',mtWarning,[mbYes,mbNo],0) = mrNo then
           Exit;
       springDir := ExtractFilePath(Application.ExeName);
     end
@@ -1088,7 +1090,7 @@
 
 procedure TReplaysForm.DeleteButtonClick(Sender: TObject);
 begin
-  if MessageDlg('Are you sure you want to delete ' + GetReplayFromNode(VDTReplays.FocusedNode).FileName + '?', mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
+  if MessageDlg(_('Are you sure you want to delete ') + GetReplayFromNode(VDTReplays.FocusedNode).FileName + '?', mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
   DeleteFile(GetReplayFromNode(VDTReplays.FocusedNode).FullFileName);
   ReloadButton.OnClick(nil);
 end;
@@ -1115,7 +1117,7 @@
 
   if ((Replay.Version = 0) and (not ChangeScriptInDemo(Replay.FullFileName, Replay.Script.Script))) or ((Replay.Version = 1) and (not ChangeScriptInDemo2(Replay.FullFileName, Replay.Script.Script))) then
   begin
-    MessageDlg('Error: unable to write file!', mtError, [mbOK], 0);
+    MessageDlg(_('Error: unable to write file!'), mtError, [mbOK], 0);
   end
   else
   begin
@@ -1162,11 +1164,11 @@
   Replay := GetReplayFromNode(VDTReplays.FocusedNode);
   OldName := Replay.FullFileName;
   s := Replay.FileName;
-  if not InputQuery('Rename file', 'New name:', s) then Exit;
+  if not InputQuery(_('Rename file'), _('New name:'), s) then Exit;
   if Copy(s, Length(s) - 3, 4) &lt;&gt; '.sdf' then s := s + '.sdf';
   if not RenameFile(OldName, ExtractFilePath(Application.ExeName) + 'demos\' + s) then
   begin
-    MessageDlg('Rename file failed!', mtWarning, [mbOK], 0);
+    MessageDlg(_('Rename file failed!'), mtWarning, [mbOK], 0);
     Exit;
   end;
   ReloadButton.OnClick(nil);
@@ -1433,8 +1435,8 @@
   if not LoadReplay(GetReplayFromNode(VDTReplays.FocusedNode)) then
   begin
     WasLastLoadSuccessful := False;
-    ScriptRichEdit.Lines.Add('Outdated/corrupt demo file format!');
-    CommentsRichEdit.Lines.Add('Outdated/corrupt demo file format!');
+    ScriptRichEdit.Lines.Add(_('Outdated/corrupt demo file format!'));
+    CommentsRichEdit.Lines.Add(_('Outdated/corrupt demo file format!'));
     SaveButton.Enabled := False;
   end
   else
@@ -1664,7 +1666,7 @@
           for k:=0 to Replay.PlayerList.Count-1 do
             tmpStr := tmpStr + TReplayPlayer(Replay.PlayerList[k]^).UserName + ' '
         else
-          raise Exception.Create('Filter type not handled.');
+          raise Exception.Create(_('Filter type not handled.'));
 
         j := Pos(LowerCase(value),LowerCase(tmpStr));
         if (contains and (j = 0)) or ((not contains) and (j &gt; 0)) then
@@ -2651,18 +2653,18 @@
   case Column of
     1:
       if filter.filterType = HostName then
-        text1 := 'Host'
+        text1 := _('Host')
       else if filter.filterType = MapName then
-        text1 := 'Map'
+        text1 := _('Map')
       else if filter.filterType = ModName then
-        text1 := 'Mod'
+        text1 := _('Mod')
       else if filter.filterType = Description then
-        text1 := 'Description';
+        text1 := _('Description');
     2:
       if filter.contains then
-        text1 := 'with'
+        text1 := _('with')
       else
-        text1 := 'without';
+        text1 := _('without');
     3:text1 := filter.value;
   end;
 
@@ -2682,18 +2684,18 @@
     end;
     1:
       if filter2.filterType = HostName then
-        text2 := 'Host'
+        text2 := _('Host')
       else if filter2.filterType = MapName then
-        text2 := 'Map'
+        text2 := _('Map')
       else if filter2.filterType = ModName then
-        text2 := 'Mod'
+        text2 := _('Mod')
       else if filter2.filterType = Description then
-        text2 := 'Description';
+        text2 := _('Description');
     2:
       if filter2.contains then
-        text2 := 'with'
+        text2 := _('with')
       else
-        text2 := 'without';
+        text2 := _('without');
     3:text2 := filter2.value;
   end;
 
@@ -2857,7 +2859,7 @@
 var
   i : integer;
 begin
-  if MessageDlg('Are you sure you want to delete all visible replays ?', mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
+  if MessageDlg(_('Are you sure you want to delete all visible replays ?'), mtConfirmation, [mbYes, mbNo], 0) = mrNo then Exit;
   for i:=0 to ReplayList.Count-1 do
     if TReplay(ReplayList[i]).Node &lt;&gt; nil then
       DeleteFile(TReplay(ReplayList[i]).FullFileName);
@@ -2869,7 +2871,7 @@
 begin
   if PresetListbox.Items.IndexOf(PresetNameTextbox.Text) &gt;= 0 then
   begin
-    MessageDlg('That preset name already exists. Please choose another name.',mtWarning,[mbOk],0);
+    MessageDlg(_('That preset name already exists. Please choose another name.'),mtWarning,[mbOk],0);
     Exit;
   end;
   SaveReplayFiltersToFile(REPLAY_FILTERS_FOLDER + '\'+PresetNameTextbox.Text+'.ini');

Modified: Lobby/TASClient/SearchFormUnit.dfm
===================================================================
--- Lobby/TASClient/SearchFormUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/SearchFormUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -12,6 +12,7 @@
   Font.Style = []
   OldCreateOrder = False
   Scaled = False
+  OnCreate = FormCreate
   PixelsPerInch = 96
   TextHeight = 13
   object SpTBXButton1: TSpTBXButton

Modified: Lobby/TASClient/SearchFormUnit.pas
===================================================================
--- Lobby/TASClient/SearchFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/SearchFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -18,6 +18,7 @@
     CategorySearchBox: TSpTBXComboBox;
     procedure SpTBXButton2Click(Sender: TObject);
     procedure SpTBXButton1Click(Sender: TObject);
+    procedure FormCreate(Sender: TObject);
   private
     { Private declarations }
   public
@@ -29,7 +30,7 @@
 
 implementation
 
-uses Misc;
+uses Misc, gnugettext;
 
 {$R *.dfm}
 
@@ -53,4 +54,9 @@
   Misc.OpenURLInDefaultBrowser(url);
 end;
 
+procedure TSearchForm.FormCreate(Sender: TObject);
+begin
+  TranslateComponent(self);
+end;
+
 end.

Modified: Lobby/TASClient/SearchPlayerFormUnit.dfm
===================================================================
--- Lobby/TASClient/SearchPlayerFormUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/SearchPlayerFormUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -11,6 +11,7 @@
   Font.Name = 'MS Sans Serif'
   Font.Style = []
   OldCreateOrder = False
+  OnCreate = FormCreate
   OnShow = FormShow
   PixelsPerInch = 96
   TextHeight = 13

Modified: Lobby/TASClient/SearchPlayerFormUnit.pas
===================================================================
--- Lobby/TASClient/SearchPlayerFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/SearchPlayerFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -18,6 +18,7 @@
     procedure btGOClick(Sender: TObject);
     procedure KeywordEditKeyUp(Sender: TObject; var Key: Word;
       Shift: TShiftState);
+    procedure FormCreate(Sender: TObject);
   private
     { Private declarations }
   public
@@ -29,7 +30,7 @@
 
 implementation
 
-uses MainUnit;
+uses MainUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -72,4 +73,9 @@
     btGOClick(nil);
 end;
 
+procedure TSearchPlayerForm.FormCreate(Sender: TObject);
+begin
+  TranslateComponent(self);
+end;
+
 end.

Modified: Lobby/TASClient/SetValuesFormUnit.pas
===================================================================
--- Lobby/TASClient/SetValuesFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/SetValuesFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -4,7 +4,7 @@
 
 uses
   Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
-  Dialogs, TBXDkPanels, SpTBXControls, Grids, ValEdit, CustomizeGUIFormUnit;
+  Dialogs, TBXDkPanels, SpTBXControls, Grids, ValEdit, CustomizeGUIFormUnit, gnugettext;
 
 type
   TSetValuesForm = class(TForm)

Modified: Lobby/TASClient/SpringDownloaderFormUnit.pas
===================================================================
--- Lobby/TASClient/SpringDownloaderFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/SpringDownloaderFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -56,7 +56,7 @@
 
 implementation
 
-uses BattleFormUnit,PreferencesFormUnit, MainUnit, StrUtils, Misc, ComObj;
+uses BattleFormUnit,PreferencesFormUnit, MainUnit, StrUtils, Misc, ComObj, gnugettext;
 
 {$R *.dfm}
 
@@ -96,7 +96,7 @@
   sl.Add(IntToStr(dlHash));
   sl.Add(dlName);
 
-  lblInfo.Caption := 'Downloading '+LowerCase(dlType)+' '+dlName;
+  lblInfo.Caption := Format(_('Downloading %s %s'),[LowerCase(dlType),dlName]);
   SpTBXTitleBar1.Caption := lblInfo.Caption;
   Self.Caption := lblInfo.Caption;
 
@@ -161,9 +161,9 @@
     RegReadMultiSz(HKCU,'\Software\SpringDownloader\'+path+'\transfer',downloadName,sl);
     downloading := true;
     ProgressBar.Position := Round(StrToFloat(StringReplace(sl[3],',','.',[rfReplaceAll])));
-    lblInfo.Caption := 'Downloading '+sl[2]+' ...';
-    lblRemainingTime.Caption := 'Remaining time : '+sl[4];
-    lblProgress.Caption := 'Progress : '+sl[5];
+    lblInfo.Caption := Format(_('Downloading %s ...'),[sl[2]]);
+    lblRemainingTime.Caption := _('Remaining time : ')+sl[4];
+    lblProgress.Caption := _('Progress : ')+sl[5];
   except
     if downloading then // if download complete
     begin
@@ -191,7 +191,7 @@
     timeOutCounter := timeOutCounter+1;
     if timeOutCounter &gt;= 8 then
     begin
-      lblInfo.Caption := 'Download failed ('+downloadName+')';
+      lblInfo.Caption := _('Download failed (')+downloadName+')';
       lblInfo.Font.Color := clRed;
       tmrProgress.Enabled := False;
       CancelButton.Caption := 'Exit';
@@ -204,7 +204,7 @@
   sl: TStringList;
   path : string;
 begin
-  if CancelButton.Caption = 'Cancel' then
+  if CancelButton.Caption = _('Cancel') then
   begin
     sl := TStringList.Create;
     sl.Add('stop');
@@ -222,6 +222,7 @@
 
 procedure TSpringDownloaderForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;
@@ -255,9 +256,9 @@
 begin
   if not RegKeyExists(HKLM,'Software\Microsoft\NET Framework Setup\NDP\v2.0.50727') or not RegReadBool(HKLM,'Software\Microsoft\NET Framework Setup\NDP\v2.0.50727','Install') then
   begin
-    if MessageDlg('You need the .NET Framework 2.0 to use SpringDownloader, do you want to download it now ?',mtConfirmation,[mbYes,mbNo],0) = mrYes then
+    if MessageDlg(_('You need the .NET Framework 2.0 to use SpringDownloader, do you want to download it now ?'),mtConfirmation,[mbYes,mbNo],0) = mrYes then
     begin
-      MessageDlg('Restart the lobby when the .NET Framework is installed.',mtInformation,[mbOk],0);
+      MessageDlg(_('Restart the lobby when the .NET Framework is installed.'),mtInformation,[mbOk],0);
       OpenURLInDefaultBrowser('<A HREF="http://www.microsoft.com/downloads/details.aspx?FamilyID=0856eacb-4362-4b0d-8edd-aab15c5e04f5">http://www.microsoft.com/downloads/details.aspx?FamilyID=0856eacb-4362-4b0d-8edd-aab15c5e04f5</A>');
     end;
     Exit;
@@ -270,7 +271,7 @@
 
   tmp := ShellExecute(0,'open',PChar(ExtractFilePath(Application.ExeName) + 'SpringDownloader.exe'),PChar('-silentstart'),PChar(ExtractFilePath(Application.ExeName)),SW_SHOWNORMAL);
 
-  if (tmp &gt; 0) and (tmp &lt; 32) then MessageDlg('Couldn''t execute SpringDownloader', mtWarning, [mbOK], 0);
+  if (tmp &gt; 0) and (tmp &lt; 32) then MessageDlg(_('Couldn''t execute SpringDownloader'), mtWarning, [mbOK], 0);
 end;
 procedure CloseSpringDownloader;
 var

Modified: Lobby/TASClient/SpringSettingsProfileFormUnit.pas
===================================================================
--- Lobby/TASClient/SpringSettingsProfileFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/SpringSettingsProfileFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -46,12 +46,14 @@
 
 implementation
 
-uses Misc, BattleFormUnit;
+uses Misc, BattleFormUnit, gnugettext;
 
 {$R *.dfm}
 
 procedure TSpringSettingsProfileForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 
@@ -77,7 +79,7 @@
 var
   profileName: string;
 begin
-  profileName := InputBox('Adding profile','Profile name :','');
+  profileName := InputBox(_('Adding profile'),_('Profile name :'),'');
   if LowerCase(profileName) = 'default' then
   begin
     MessageDlg('Reserved profile name.',mtInformation,[mbOk],0);
@@ -108,7 +110,7 @@
   profileName: string;
 begin
   if lstCustom.ItemIndex = -1 then Exit;
-  profileName := InputBox('Editing profile','Profile name :',cpNames[lstCustom.ItemIndex]);
+  profileName := InputBox(_('Editing profile'),_('Profile name :'),cpNames[lstCustom.ItemIndex]);
   OpenDialog1.FileName := cpFiles[lstCustom.ItemIndex];
   if (profileName &lt;&gt; '') and OpenDialog1.Execute then
   begin
@@ -129,7 +131,7 @@
       Result := bePlaying.Text
   else
     if cpNames.IndexOf(customProfileName) = -1 then
-      raise Exception.Create('Unknown spring settings profile name.')
+      raise Exception.Create(_('Unknown spring settings profile name.'))
     else
       Result := cpFiles[cpNames.IndexOf(customProfileName)];
 end;

Modified: Lobby/TASClient/TASClient.dof
===================================================================
--- Lobby/TASClient/TASClient.dof	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/TASClient.dof	2009-02-18 16:40:01 UTC (rev 7245)
@@ -115,7 +115,7 @@
 MajorVer=0
 MinorVer=3
 Release=0
-Build=585
+Build=586
 Debug=0
 PreRelease=0
 Special=0
@@ -126,7 +126,7 @@
 [Version Info Keys]
 CompanyName=
 FileDescription=TA Spring lobby client
-FileVersion=0.3.0.585
+FileVersion=0.3.0.586
 InternalName=
 LegalCopyright=
 LegalTrademarks=

Modified: Lobby/TASClient/TASClient.dpr
===================================================================
--- Lobby/TASClient/TASClient.dpr	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/TASClient.dpr	2009-02-18 16:40:01 UTC (rev 7245)
@@ -118,7 +118,8 @@
   CustomizeGUIFormUnit in 'CustomizeGUIFormUnit.pas' {CustomizeGUIForm},
   SetValuesFormUnit in 'SetValuesFormUnit.pas' {SetValuesForm},
   TemplateEditorFormUnit in 'TemplateEditorFormUnit.pas' {TemplateEditorForm},
-  SpringSettingsProfileFormUnit in 'SpringSettingsProfileFormUnit.pas' {SpringSettingsProfileForm};
+  SpringSettingsProfileFormUnit in 'SpringSettingsProfileFormUnit.pas' {SpringSettingsProfileForm},
+  gnugettext in 'C:\Program Files\dxgettext\gnugettext.pas';
 
 var
   i: Integer;
@@ -142,14 +143,14 @@
 
     if UpperCase(ParamStr(i)) = '-SERVER' then
       if (ParamCount = i) or (Pos(':',ParamStr(i+1)) = 0) then
-        MessageDlg('Wrong -server usage : -server myserver.com:8200',mtWarning,[mbOk],0)
+        MessageDlg(_('Wrong -server usage : -server myserver.com:8200'),mtWarning,[mbOk],0)
       else
       begin
         try
           CommandLineServer := LeftStr(ParamStr(i+1),Pos(':',ParamStr(i+1))-1);
           CommandLinePort := IntToStr(StrToInt(MidStr(ParamStr(i+1),Pos(':',ParamStr(i+1))+1,99999)));
         except
-          MessageDlg('Wrong -server usage : -server myserver.com:8200',mtWarning,[mbOk],0);
+          MessageDlg(_('Wrong -server usage : -server myserver.com:8200'),mtWarning,[mbOk],0);
         end;
       end;
   end;
@@ -175,7 +176,7 @@
   // retrieve Spring version:
   Status.MySpringVersion := Utility.AcquireSpringVersion;
 
-  SplashScreenForm.UpdateText('creating forms ...');
+  SplashScreenForm.UpdateText(_('creating forms ...'));
 
   MainUnit.displayingNotificationList := TList.Create;
   MainUnit.displayedNewsList := TStringList.Create;
@@ -185,7 +186,7 @@
   begin
     SpTBXItem.ActivateTitleBarsOnStartUp := False;
     if MainUnit.RunningUnderWine then
-      MainForm.AddNotification('Wine detected!', 'All title bars have been disabled since they are not supported under Wine', 5000);
+      MainForm.AddNotification(_('Wine detected!'), _('All title bars have been disabled since they are not supported under Wine'), 5000);
   end;
 
   Application.Title := 'TASClient';
@@ -237,7 +238,7 @@
   //Application.CreateForm(TSpringDownloaderForm, SpringDownloaderForm);
   if not MainUnit.RunningUnderWine then
     Application.CreateForm(TMenuForm, MenuForm);
-  SplashScreenForm.UpdateText('Initializing ...');
+  SplashScreenForm.UpdateText(_('Initializing ...'));
 
   Application.Run;
 end.

Modified: Lobby/TASClient/TASClient.res
===================================================================
(Binary files differ)

Modified: Lobby/TASClient/TemplateEditorFormUnit.pas
===================================================================
--- Lobby/TASClient/TemplateEditorFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/TemplateEditorFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -4,7 +4,7 @@
 
 uses
   Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
-  Dialogs, StdCtrls;
+  Dialogs, StdCtrls, gnugettext;
 
 type
   TTemplateEditorForm = class(TForm)

Modified: Lobby/TASClient/TipsFormUnit.pas
===================================================================
--- Lobby/TASClient/TipsFormUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/TipsFormUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -43,7 +43,7 @@
 
 implementation
 
-uses Misc,MainUnit, StrUtils, BattleFormUnit, ReplaysUnit, PreferencesFormUnit;
+uses Misc,MainUnit, StrUtils, BattleFormUnit, ReplaysUnit, PreferencesFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -59,7 +59,7 @@
   try
     rawTips := ReadFile2(TIPS_FILE);
   except
-    MessageDlg(VAR_FOLDER+'\tips.txt not found.',mtError,[mbOK],0);
+    MessageDlg(VAR_FOLDER+_('\tips.txt not found.'),mtError,[mbOK],0);
     Exit;
   end;
 
@@ -105,6 +105,8 @@
 
 procedure TTipsForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   TipList := TList.Create;
   CurrentFormTipList := TList.Create;
 

Modified: Lobby/TASClient/UploadReplayUnit.dfm
===================================================================
--- Lobby/TASClient/UploadReplayUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/UploadReplayUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -6,8 +6,8 @@
   ClientHeight = 345
   ClientWidth = 407
   Color = clBtnFace
-  Constraints.MaxHeight = 750
-  Constraints.MaxWidth = 1280
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11

Modified: Lobby/TASClient/UploadReplayUnit.pas
===================================================================
--- Lobby/TASClient/UploadReplayUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/UploadReplayUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -52,7 +52,7 @@
 
 implementation
 
-uses ProgressBarWindow, ReplaysUnit, PreferencesFormUnit;
+uses ProgressBarWindow, ReplaysUnit, PreferencesFormUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -60,7 +60,7 @@
 begin
   if not (Status.LoggedIn and (MainForm.Socket.Addr = 'taspringmaster.clan-sy.com')) then
   begin
-    MessageDlg('You need to be logged into the official server to be able to upload replays using the lobby.',mtWarning,[mbOk],0);
+    MessageDlg(_('You need to be logged into the official server to be able to upload replays using the lobby.'),mtWarning,[mbOk],0);
     Exit;
   end;
   ProgressBarForm.TakeAction := 1;
@@ -99,8 +99,8 @@
     MultiPartFormDataStream.Free;
     ResponseStream.Free;
     PostMessage(ProgressBarForm.Handle, WM_CLOSE, 0, 0); // close form
-    MainForm.AddMainLog('Replays server unavailable or upload cancelled !',Colors.Error);
-    MessageDlgThread('Replays server unavailable or upload cancelled !',mtError,[mbOK],0);
+    MainForm.AddMainLog(_('Replays server unavailable or upload cancelled !'),Colors.Error);
+    MessageDlgThread(_('Replays server unavailable or upload cancelled !'),mtError,[mbOK],0);
     PostMessage(Handle, WM_CLOSE, 0, 0); // close form
   end;
   MultiPartFormDataStream.Free;
@@ -108,7 +108,7 @@
   PostMessage(ProgressBarForm.Handle, WM_CLOSE, 0, 0); // close form
   Misc.ParseDelimited(ResponseStrList,ResponseStr,' ','');
   if (ResponseStrList.Count &gt; 0) and (ResponseStrList[0] = 'SUCCESS') then begin
-    MessageDlgThread('Your replay has been successfully uploaded. Its link has been added to your clipboard.', mtInformation,[mbOk], 0);
+    MessageDlgThread(_('Your replay has been successfully uploaded. Its link has been added to your clipboard.'), mtInformation,[mbOk], 0);
     Clipboard.Open;
     Clipboard.SetTextBuf(PChar(ResponseStrList[1]));
     Clipboard.Close;
@@ -116,17 +116,17 @@
   end
   else if ResponseStrList[0] = 'FAILURE' then
     if ResponseStrList[1] = '1' then
-      MessageDlgThread('The upload failed : check the replay filetype. Contact TradeMark in the lobby to get help.', mtError,[mbOk], 0)
+      MessageDlgThread(_('The upload failed : check the replay filetype. Contact TradeMark in the lobby to get help.'), mtError,[mbOk], 0)
     else if ResponseStrList[1] = '2' then
-      MessageDlgThread('The upload failed : error while uploading the file. Contact TradeMark in the lobby to get help.', mtError,[mbOk], 0)
+      MessageDlgThread(_('The upload failed : error while uploading the file. Contact TradeMark in the lobby to get help.'), mtError,[mbOk], 0)
     else if ResponseStrList[1] = '3' then
-      MessageDlgThread('The upload failed : this replay has already been uploaded. Contact TradeMark in the lobby to get help.', mtError,[mbOk], 0)
+      MessageDlgThread(_('The upload failed : this replay has already been uploaded. Contact TradeMark in the lobby to get help.'), mtError,[mbOk], 0)
     else if ResponseStrList[1] = '4' then
-      MessageDlgThread('The upload failed : wrong file format. Contact TradeMark in the lobby to get help.', mtError,[mbOk], 0)
+      MessageDlgThread(_('The upload failed : wrong file format. Contact TradeMark in the lobby to get help.'), mtError,[mbOk], 0)
     else
-      MessageDlgThread('The upload failed : &quot;'+ResponseStr+'&quot;'+EOL+'Contact TradeMark in the lobby to get help.', mtError,[mbOk], 0)
+      MessageDlgThread(Format(_('The upload failed : &quot;%s&quot;%sContact TradeMark in the lobby to get help.'),[ResponseStr,EOL]), mtError,[mbOk], 0)
   else
-      MessageDlgThread('The upload failed : &quot;'+ResponseStr+'&quot;'+EOL+'Contact TradeMark in the lobby to get help.', mtError,[mbOk], 0);
+      MessageDlgThread(Format(_('The upload failed : &quot;%s&quot;%sContact TradeMark in the lobby to get help.'),[ResponseStr,EOL]), mtError,[mbOk], 0);
   PostMessage(Handle, WM_CLOSE, 0, 0); // close form
   end;
 end;
@@ -168,6 +168,8 @@
 
 procedure TUploadReplayForm.FormCreate(Sender: TObject);
 begin
+  TranslateComponent(self);
+  
   if not SpTBXTitleBar1.Active then
     RemoveSpTBXTitleBarMarges(self);
 end;

Modified: Lobby/TASClient/Utility.pas
===================================================================
--- Lobby/TASClient/Utility.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/Utility.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -8,7 +8,7 @@
 interface
 
 uses
-  Windows, Graphics, Classes, SyncObjs, Controls,Math,MainUnit,OpenIL;
+  Windows, Graphics, Classes, SyncObjs, Controls,Math,MainUnit,OpenIL,gnugettext;
 
 type
 
@@ -299,7 +299,7 @@
   InitWaitForm.ShowModal;
   if not LastInitSuccess then
   begin
-    MessageDlg('Error initializing unit syncer!', mtError, [mbOK], 0);
+    MessageDlg(_('Error initializing unitsync!'), mtError, [mbOK], 0);
     Application.Terminate;
   end;
 end;
@@ -363,17 +363,17 @@
      // check if map is &quot;valid&quot;:
      if CheckSum = 0 then
      begin
-       MainForm.AddMainLog('Skipping map file: ' + MapName + ' (bad checksum)', Colors.Error);
+       MainForm.AddMainLog(Format(_('Skipping map file: %s (bad checksum)'),[MapName]), Colors.Error);
        Continue;
      end;
      if MapCheckSums.IndexOf(IntToHex(CheckSum, 8)) &lt;&gt; -1 then
      begin
-       MainForm.AddMainLog('Skipping map file: &quot;' + MapName + '&quot;, duplicate checksum of file &quot;'+ExtractFileName(MapMainArchive[MapCheckSums.IndexOf(IntToHex(CheckSum, 8))])+'&quot;', Colors.Error);
+       MainForm.AddMainLog(Format(_('Skipping map file: &quot;%s&quot;, duplicate checksum of file &quot;%s&quot;'),[MapName, ExtractFileName(MapMainArchive[MapCheckSums.IndexOf(IntToHex(CheckSum, 8))])]), Colors.Error);
        Continue;
      end;
 
      // add map to the map list:
-     if UpdateSplashScreen then SplashScreenForm.UpdateText('loading map (' + MapName + ')');
+     if UpdateSplashScreen then SplashScreenForm.UpdateText(_('loading map (') + MapName + ')');
      MapList.Add(MapName);
      MapCheckSums.Add(IntToHex(CheckSum, 8));
      MapMainArchive.Add(GetMapArchiveName(0));
@@ -412,7 +412,7 @@
   minimap := GetMinimap(PChar(MapName), 0);
   if minimap = nil then
   begin
-    MessageDlg('Loading '+MapName+' minimap failed !',mtError,[mbOk],0);
+    MessageDlg(Format(_('Loading %s minimap failed !'),[MapName]),mtError,[mbOk],0);
     Exit;
   end;
 
@@ -494,7 +494,7 @@
   Result := 0;
   index := ModList.IndexOf(ModName);
   if index = -1 then Exit;
-  if Debug.Enabled then MainForm.AddMainLog('Hashing file: ' + ModList[index], Colors.MinorInfo);
+  if Debug.Enabled then MainForm.AddMainLog(_('Hashing file: ') + ModList[index], Colors.MinorInfo);
   Result := GetPrimaryModChecksum(index)
 end;
 
@@ -505,7 +505,7 @@
   Result := 0;
   index := ModArchiveList.IndexOf(ModArchive);
   if index = -1 then Exit;
-  if Debug.Enabled then MainForm.AddMainLog('Hashing file: ' + ModList[index], Colors.MinorInfo);
+  if Debug.Enabled then MainForm.AddMainLog(_('Hashing file: ') + ModList[index], Colors.MinorInfo);
   Result := GetPrimaryModChecksum(index);
 end;
 
@@ -648,7 +648,7 @@
 
   if count = 0 then // this should not happen - mod author forgot to define sides! 
   begin
-    MessageDlg('This mod doesn''t have any sides defined. Using default sides (Arm/Core) ...', mtWarning, [mbOK], 0);
+    MessageDlg(_('This mod doesn''t have any sides defined. Using default sides (Arm/Core) ...'), mtWarning, [mbOK], 0);
     SideList.Add('Arm');
     SideList.Add('Core');
   end;
@@ -662,7 +662,7 @@
   res := FindFilesVFS(res, PChar(s), 255);
   if res = 0 then
   begin
-    if Debug.Enabled then MainForm.AddMainLog('No side pictures found! Skipping ...', Colors.Error);
+    if Debug.Enabled then MainForm.AddMainLog(_('No side pictures found! Skipping ...'), Colors.Error);
   end
   else
   begin
@@ -766,7 +766,7 @@
     New(o);
     o^ := TLuaOptionSection.Create;
     o^.Key := '__defaultSection__';
-    o^.Name := 'Main Options';
+    o^.Name := _('Main Options');
     o^.Description := '';
     o^.Section := '';
     o^.hasChanged := False;

Modified: Lobby/TASClient/WaitForAckUnit.dfm
===================================================================
--- Lobby/TASClient/WaitForAckUnit.dfm	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/WaitForAckUnit.dfm	2009-02-18 16:40:01 UTC (rev 7245)
@@ -7,6 +7,8 @@
   ClientHeight = 114
   ClientWidth = 270
   Color = clBtnFace
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
   Font.Charset = DEFAULT_CHARSET
   Font.Color = clWindowText
   Font.Height = -11
@@ -16,6 +18,7 @@
   Position = poScreenCenter
   Scaled = False
   OnClose = FormClose
+  OnCreate = FormCreate
   OnShow = FormShow
   PixelsPerInch = 96
   TextHeight = 13

Modified: Lobby/TASClient/WaitForAckUnit.pas
===================================================================
--- Lobby/TASClient/WaitForAckUnit.pas	2009-02-14 16:15:03 UTC (rev 7244)
+++ Lobby/TASClient/WaitForAckUnit.pas	2009-02-18 16:40:01 UTC (rev 7245)
@@ -21,6 +21,7 @@
     procedure FormShow(Sender: TObject);
     procedure Timer1Timer(Sender: TObject);
     procedure CloseButtonClick(Sender: TObject);
+    procedure FormCreate(Sender: TObject);
   private
   public
     Waiting: Boolean; // True if we are currently waiting for acknowledgement from server
@@ -29,15 +30,16 @@
 const
   ACKTIMEOUT = 10; // in seconds
 
+var
+  WaitForAckForm: TWaitForAckForm;
+
+resourcestring
   STATUS_TEXT_WAITING = 'Status: Waiting for acknowledgement from server ...';
   STATUS_TEXT_FAILED = 'Status: Failed. Reason: ';
 
-var
-  WaitForAckForm: TWaitForAckForm;
-
 implementation
 
-uses BattleFormUnit, PreferencesFormUnit, LobbyScriptUnit;
+uses BattleFormUnit, PreferencesFormUnit, LobbyScriptUnit, gnugettext;
 
 {$R *.dfm}
 
@@ -60,7 +62,7 @@
   StatusLabel.Caption := STATUS_TEXT_FAILED + Reason;
   Waiting := False;
   Timer1.Enabled := False;
-  CloseButton.Caption := 'Close';
+  CloseButton.Caption := _('Close');
 
   if LobbyScriptUnit.ScriptHostingRunning  then ModalResult := mrCancel;
 end;
@@ -74,7 +76,7 @@
 procedure TWaitForAckForm.FormShow(Sender: TObject);
 begin
   Waiting := True;
-  CloseButton.Caption := 'Cancel';
+  CloseButton.Caption := _('Cancel');
   Timer1.Interval := ACKTIMEOUT * 1000; // must be in milliseconds
   Timer1.Enabled := True;
   StatusLabel.Caption := STATUS_TEXT_WAITING;
@@ -84,9 +86,9 @@
 begin
   (Sender as TTimer).Enabled := False;
   if not Waiting then Exit;
-  StatusLabel.Caption := STATUS_TEXT_FAILED + 'Timed out.';
+  StatusLabel.Caption := STATUS_TEXT_FAILED + _('Timed out.');
   Waiting := False;
-  CloseButton.Caption := 'Close';
+  CloseButton.Caption := _('Close');
 end;
 
 procedure TWaitForAckForm.CloseButtonClick(Sender: TObject);
@@ -94,4 +96,9 @@
   ModalResult := mrCancel;
 end;
 
+procedure TWaitForAckForm.FormCreate(Sender: TObject);
+begin
+  TranslateComponent(self);
+end;
+
 end.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002013.html">[Taspring-linux-commit] r7244 - Lobby/TASClient
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2014">[ date ]</a>
              <a href="thread.html#2014">[ thread ]</a>
              <a href="subject.html#2014">[ subject ]</a>
              <a href="author.html#2014">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
