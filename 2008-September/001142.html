<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r6372 - in trunk/Lobby/TASClient: . Lobby	Lobby/Var Python
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6372%20-%20in%20trunk/Lobby/TASClient%3A%20.%20Lobby%0A%09Lobby/Var%20Python&In-Reply-To=%3C20080905162921.C91A749AF%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001141.html">
   <LINK REL="Next"  HREF="001143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r6372 - in trunk/Lobby/TASClient: . Lobby	Lobby/Var Python</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6372%20-%20in%20trunk/Lobby/TASClient%3A%20.%20Lobby%0A%09Lobby/Var%20Python&In-Reply-To=%3C20080905162921.C91A749AF%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r6372 - in trunk/Lobby/TASClient: . Lobby	Lobby/Var Python">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Fri Sep  5 18:29:21 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001141.html">[Taspring-linux-commit] r6371 - trunk/rts/build/scons
</A></li>
        <LI>Next message: <A HREF="001143.html">[Taspring-linux-commit] r6373 - trunk/rts/System/Sync
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1142">[ date ]</a>
              <a href="thread.html#1142">[ thread ]</a>
              <a href="subject.html#1142">[ subject ]</a>
              <a href="author.html#1142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: satirik
Date: 2008-09-05 18:29:19 +0200 (Fri, 05 Sep 2008)
New Revision: 6372

Added:
   trunk/Lobby/TASClient/Lobby/
   trunk/Lobby/TASClient/Lobby/Var/
   trunk/Lobby/TASClient/Lobby/Var/tips.txt
   trunk/Lobby/TASClient/TipsFormUnit.ddp
   trunk/Lobby/TASClient/TipsFormUnit.dfm
   trunk/Lobby/TASClient/TipsFormUnit.pas
Modified:
   trunk/Lobby/TASClient/BattleFormUnit.dfm
   trunk/Lobby/TASClient/BattleFormUnit.pas
   trunk/Lobby/TASClient/MainUnit.dfm
   trunk/Lobby/TASClient/MainUnit.pas
   trunk/Lobby/TASClient/Misc.pas
   trunk/Lobby/TASClient/PreferencesFormUnit.dfm
   trunk/Lobby/TASClient/PreferencesFormUnit.pas
   trunk/Lobby/TASClient/Python/api.txt
   trunk/Lobby/TASClient/ReplaysUnit.dfm
   trunk/Lobby/TASClient/ReplaysUnit.pas
   trunk/Lobby/TASClient/SplashScreenUnit.dfm
   trunk/Lobby/TASClient/TASClient.dof
   trunk/Lobby/TASClient/TASClient.dpr
   trunk/Lobby/TASClient/TASClient.res
Log:
* startup tips added
* splashscreen is not scaled anymore


Modified: trunk/Lobby/TASClient/BattleFormUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/BattleFormUnit.dfm	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/BattleFormUnit.dfm	2008-09-05 16:29:19 UTC (rev 6372)
@@ -1,6 +1,6 @@
 object BattleForm: TBattleForm
-  Left = 684
-  Top = 169
+  Left = 699
+  Top = 143
   Width = 783
   Height = 586
   Caption = 'Battle window'
@@ -4083,13 +4083,14 @@
           Height = 273
           Align = alClient
           Color = clBtnFace
-          ActiveTabIndex = 2
+          ActiveTabIndex = 0
           TabAutofit = True
           ThemeType = tttNone
           OnActiveTabChange = SpTBXTabControl1ActiveTabChange
           HiddenItems = &lt;&gt;
           object GameOptionsTab: TSpTBXTabItem
             Caption = 'Game options'
+            Checked = True
             CustomWidth = 103
             CustomHeight = 30
             ThemeType = tttNone
@@ -4103,7 +4104,6 @@
           object MapTab: TSpTBXTabItem
             Caption = 'Map options'
             Wrapping = twWrap
-            Checked = True
             CustomWidth = 103
             ThemeType = tttNone
           end
@@ -4262,6 +4262,86 @@
               end
             end
           end
+          object MapTabSheet: TSpTBXTabSheet
+            Left = 0
+            Top = 34
+            Width = 419
+            Height = 239
+            Caption = 'Map options'
+            ImageIndex = -1
+            DesignSize = (
+              419
+              239)
+            TabItem = 'MapTab'
+            object MapOptionsScrollBox: TTntScrollBox
+              Left = 8
+              Top = 48
+              Width = 402
+              Height = 189
+              VertScrollBar.Smooth = True
+              VertScrollBar.Tracking = True
+              Anchors = [akLeft, akTop, akRight, akBottom]
+              BiDiMode = bdLeftToRight
+              BorderStyle = bsNone
+              Color = clBtnFace
+              Ctl3D = False
+              ParentBiDiMode = False
+              ParentBackground = True
+              ParentColor = False
+              ParentCtl3D = False
+              TabOrder = 0
+            end
+            object panelMapOptionsDefault: TSpTBXPanel
+              Left = 8
+              Top = 4
+              Width = 402
+              Height = 41
+              Align = alCustom
+              TabOrder = 1
+              object btLoadDefaultMPO: TSpTBXButton
+                Left = 149
+                Top = 8
+                Width = 113
+                Height = 25
+                Caption = 'Load default'
+                TabOrder = 0
+                OnClick = btLoadDefaultMPOClick
+                LinkFont.Charset = DEFAULT_CHARSET
+                LinkFont.Color = clBlue
+                LinkFont.Height = -11
+                LinkFont.Name = 'MS Sans Serif'
+                LinkFont.Style = [fsUnderline]
+              end
+              object btSetAsDefaultMPO: TSpTBXButton
+                Left = 269
+                Top = 8
+                Width = 113
+                Height = 25
+                Caption = 'Set as default'
+                TabOrder = 1
+                OnClick = btSetAsDefaultMPOClick
+                LinkFont.Charset = DEFAULT_CHARSET
+                LinkFont.Color = clBlue
+                LinkFont.Height = -11
+                LinkFont.Name = 'MS Sans Serif'
+                LinkFont.Style = [fsUnderline]
+              end
+              object btLoadMapsDefaultMPO: TSpTBXButton
+                Left = 29
+                Top = 8
+                Width = 113
+                Height = 25
+                Caption = 'Load map'#39's default'
+                TabOrder = 2
+                OnClick = btLoadMapsDefaultMPOClick
+                LinkFont.Charset = DEFAULT_CHARSET
+                LinkFont.Color = clBlue
+                LinkFont.Height = -11
+                LinkFont.Name = 'MS Sans Serif'
+                LinkFont.Style = [fsUnderline]
+              end
+            end
+          end
           object SpTBXTabSheet2: TSpTBXTabSheet
             Left = 0
             Top = 34
@@ -4476,9 +4556,15 @@
               Top = 80
               Width = 225
               Height = 65
+              Hint = 
+                'Lineage mode = Every units or building you made will explode if ' +
+                'your commander dies (You can'#39't share your units just before your' +
+                ' commander dies)'
               Caption = 'Game end condition'
               Color = clNone
               ParentColor = False
+              ParentShowHint = False
+              ShowHint = True
               TabOrder = 6
               OnClick = GameEndRadioGroupClick
               ItemIndex = 0
@@ -4532,86 +4618,6 @@
               LinkFont.Style = [fsUnderline]
             end
           end
-          object MapTabSheet: TSpTBXTabSheet
-            Left = 0
-            Top = 34
-            Width = 419
-            Height = 239
-            Caption = 'Map options'
-            ImageIndex = -1
-            DesignSize = (
-              419
-              239)
-            TabItem = 'MapTab'
-            object MapOptionsScrollBox: TTntScrollBox
-              Left = 8
-              Top = 48
-              Width = 402
-              Height = 189
-              VertScrollBar.Smooth = True
-              VertScrollBar.Tracking = True
-              Anchors = [akLeft, akTop, akRight, akBottom]
-              BiDiMode = bdLeftToRight
-              BorderStyle = bsNone
-              Color = clBtnFace
-              Ctl3D = False
-              ParentBiDiMode = False
-              ParentBackground = True
-              ParentColor = False
-              ParentCtl3D = False
-              TabOrder = 0
-            end
-            object panelMapOptionsDefault: TSpTBXPanel
-              Left = 8
-              Top = 4
-              Width = 402
-              Height = 41
-              Align = alCustom
-              TabOrder = 1
-              object btLoadDefaultMPO: TSpTBXButton
-                Left = 149
-                Top = 8
-                Width = 113
-                Height = 25
-                Caption = 'Load default'
-                TabOrder = 0
-                OnClick = btLoadDefaultMPOClick
-                LinkFont.Charset = DEFAULT_CHARSET
-                LinkFont.Color = clBlue
-                LinkFont.Height = -11
-                LinkFont.Name = 'MS Sans Serif'
-                LinkFont.Style = [fsUnderline]
-              end
-              object btSetAsDefaultMPO: TSpTBXButton
-                Left = 269
-                Top = 8
-                Width = 113
-                Height = 25
-                Caption = 'Set as default'
-                TabOrder = 1
-                OnClick = btSetAsDefaultMPOClick
-                LinkFont.Charset = DEFAULT_CHARSET
-                LinkFont.Color = clBlue
-                LinkFont.Height = -11
-                LinkFont.Name = 'MS Sans Serif'
-                LinkFont.Style = [fsUnderline]
-              end
-              object btLoadMapsDefaultMPO: TSpTBXButton
-                Left = 29
-                Top = 8
-                Width = 113
-                Height = 25
-                Caption = 'Load map'#39's default'
-                TabOrder = 2
-                OnClick = btLoadMapsDefaultMPOClick
-                LinkFont.Charset = DEFAULT_CHARSET
-                LinkFont.Color = clBlue
-                LinkFont.Height = -11
-                LinkFont.Name = 'MS Sans Serif'
-                LinkFont.Style = [fsUnderline]
-              end
-            end
-          end
         end
       end
       object Panel6: TPanel

Modified: trunk/Lobby/TASClient/BattleFormUnit.pas
===================================================================
--- trunk/Lobby/TASClient/BattleFormUnit.pas	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/BattleFormUnit.pas	2008-09-05 16:29:19 UTC (rev 6372)
@@ -672,7 +672,7 @@
   CustomColorUnit, StringParser, MapListFormUnit, AutoTeamsUnit,
   AutoStartRectsUnit, ColorPicker, UploadReplayUnit, ProgressBarWindow,
   TntWideStrings, LobbyScriptUnit, SpringDownloaderFormUnit,
-  MapSelectionFormUnit;
+  MapSelectionFormUnit, TipsFormUnit;
 
 {$R *.dfm}
 
@@ -1470,6 +1470,8 @@
 
   if not Preferences.DisableAllSounds then PlayResSound('battle');
 
+  TipsForm.ShowTips;
+
 //*** anything else?
 end;
 
@@ -1562,6 +1564,8 @@
 
   if not Preferences.DisableAllSounds then PlayResSound('battle');
 
+  TipsForm.ShowTips;
+
 //*** anything else?
 end;
 
@@ -1674,6 +1678,8 @@
 
   AddTextToChat('Battle opened', Colors.Info, 1);
 
+  TipsForm.ShowTips;
+
 //*** anything else?
 end;
 
@@ -5480,8 +5486,11 @@
 
   j:=0;
   for i:=0 to BattleState.Battle.Clients.Count -1 do
-    if TClient(BattleState.Battle.Clients[i]).GetMode &lt;&gt; 0 then begin
+    if TClient(BattleState.Battle.Clients[i]).GetMode &lt;&gt; 0 then
+    begin
       MainForm.TryToSendCommand('FORCETEAMNO', TClient(BattleState.Battle.Clients[i]).Name + ' ' + IntToStr(j));
+      if mnuBlockTeams.Checked then
+        TClient(BattleState.Battle.Clients[i]).SetTeamNo(j);
       j := j+1;
     end;
 end;

Added: trunk/Lobby/TASClient/Lobby/Var/tips.txt
===================================================================
--- trunk/Lobby/TASClient/Lobby/Var/tips.txt	                        (rev 0)
+++ trunk/Lobby/TASClient/Lobby/Var/tips.txt	2008-09-05 16:29:19 UTC (rev 6372)
@@ -0,0 +1,30 @@
+
+##1#To make new boxes when you are hosting, you can use the Auto-boxing options (right click on the minimap), or draw them yourself. To draw a box, simply hold SHIFT and then draw it on the minimap. You can also move it with CTRL + Drag.
+##2#The 'Lineage' Game end condition is an improved 'Game ends if commander dies'. If your commander dies, every units you've made will explode. So you can't share units just before your commander dies.
+##1#To kick, change the color, change the team or change every players parameters when you are hosting a battle, use the Players context menu : right click on someone in the Battle Window players list.
+##1#To make your hosting experience easier, you can use the Admin menu. You can save the boxes for the current map, they will be reloaded each time you will load the map. You can fix the colors to have different colors for every players. You can balance the teams ...
+##2#Pick a team, an id, a color and a side, or check the Spectator option, then click on 'Im ready'.
+##1#To delete a box, move your mouse cursor over a box and then hit the &quot;Delete&quot; key. You can also change the number of a box by moving your mouse cursor over a box and hit one of the number key : 1 2 ...
+##1#You can pick your map using the 'More maps' button next to the minimap or using the down arrow button next to 'More maps'. The map list window display more informations like the minimap or the size.
+##0#If you want to see the whole server player list, switch to the $local tab.
+##0#If you want to join a new channel type : /j #channel_name
+##0#If you want to rename your account, type : /rename new_name
+##0#If you want to play competitive games, you can join or host Ladder battles. Each game you win increase your rating points,and each game you loose decrease it. The three best players of each ladder (with at least 15 players and 45 battles) have a cup before their name in the lobby. You can have more than one cup.
+##0#You can make groups of players. Players in a group are highlighted in the player list with the group's color. You can sort the players by group. Few options are available per groups (highlight battles, auto-kick, notify when hosting ...) . To add someone to a group, right click on his nick and use the 'Add to group' menu. You can manage the groups (enable or disable an option, delete a group etc) with the Manage Group Window (right click on any player nick then 'Manage group'). The manage goup window is also available in the Options -&gt; Programs -&gt; Manage groups.
+##0#You can right click on a player name in the chat to display the Player context menu. You can also double-click on it to open a private chat tab.
+##0#In a ladder battle, you can use the bottom right button of the Battle Window to read the ladder rules, refresh the ranks and cups or refresh the available maps.
+##0#You can filter the battles to only see the battles you like. To display the filter panel, use bottom up arrow in the Main Window. You can save your filters in a preset and switch from one preset to another by selecting it in the preset list.
+##0#You can change the font name and colors in the Options -&gt; Programs -&gt; Colors and Font.
+##0#You can mark the unknown map and mods with a special colors in the battle list : Options -&gt; Interface -&gt; Mark unknown maps/mods
+##0#You can hide the 'Quick join panel' between the chat and the battle list: Options -&gt; Interface -&gt; Display Quickjoin panel
+##0#You can disable SpringDownloader in Options -&gt; Program -&gt; Enable Spring Downloader
+##0#You can add notifications (Options -&gt; Program -&gt; Notifications) when a player join a channel, a player join the battle you are participating in, a player join a battle you are hosting, a player changes his status to in-battle, a player host a battle with a specified mod.
+##0#You can switch between the Main Window and the Battle Window with the F2 key.
+##2#You can see units names and icons in the disable tab of the Battle Window (but loading will be a bit slower) : Options -&gt; Interface -&gt; Load units icons and names when joining
+##0#You can auto complete name with the TAB key, by default it will auto complete the name using the complete list of players, but you can check the Program -&gt; Interface -&gt; Auto-completion from current channel's players list option.
+##0#You can add commands te be executed when logging in : Options -&gt; Server -&gt; Performs
+##0#Every battle you play is recorded in Spring\Demos\ . Open the Replays Window to list them.
+##4#You can filter the displayed replays with the top down arrow. You can rate the replay, add comments or delete it.
+##0#You can move the column of the Main Window's Battle list or the Battle Window's Player list by dragging them to left or right.
+##0#You can rate your maps and add comments to it in the Map List Window : 'More maps' in the Battle Window next to the minimap.
+##0#You can disable all notifications in the state menu : Down arrow next to the top left login button of the Main Window.
\ No newline at end of file

Modified: trunk/Lobby/TASClient/MainUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/MainUnit.dfm	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/MainUnit.dfm	2008-09-05 16:29:19 UTC (rev 6372)
@@ -1,6 +1,6 @@
 object MainForm: TMainForm
-  Left = 256
-  Top = 253
+  Left = 433
+  Top = 384
   Width = 729
   Height = 543
   Caption = '.'

Modified: trunk/Lobby/TASClient/MainUnit.pas
===================================================================
--- trunk/Lobby/TASClient/MainUnit.pas	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/MainUnit.pas	2008-09-05 16:29:19 UTC (rev 6372)
@@ -522,7 +522,7 @@
 const
   VERSION_NUMBER = '0.38'; // Must be float value! (with a period as a decimal seperator)
   CHECK_BETA_LOBBY_URL = '<A HREF="http://tasclient.no-ip.org/TASClient_update_v2.txt">http://tasclient.no-ip.org/TASClient_update_v2.txt</A>';
-  PROGRAM_VERSION = 'TASClient ' + VERSION_NUMBER + ' RC14';
+  PROGRAM_VERSION = 'TASClient ' + VERSION_NUMBER + ' RC15';
   KEEP_ALIVE_INTERVAL = 10000; // in milliseconds. Tells us what should be the maximum &quot;silence&quot; time before we send a ping to the server.
   ASSUME_TIMEOUT_INTERVAL = 30000; // in milliseconds. Must be greater than KEEP_ALIVE_INTERVAL! If server hasn't send any data to us within this interval, then we assume timeout occured. It's us who must make sure we get constant replies from server by pinging it.
   LOCAL_TAB = '$Local'; // caption of main (command) tab window. Must be special so that is different from channel names or user names, that is why there is a &quot;$&quot; in front of it.
@@ -1664,7 +1664,7 @@
   LoginProgressFormUnit, GpIFF, SearchFormUnit, ManageGroups, ColorPicker,
   AwayMessageFormUnit,JclStrings, SearchPlayerFormUnit, MenuFormUnit, Utility,
   PythonScriptDebugFormUnit,LobbyScriptUnit, SpringDownloaderFormUnit,
-  SyncObjs, LogonFormUnit, MapSelectionFormUnit;
+  SyncObjs, LogonFormUnit, MapSelectionFormUnit, TipsFormUnit;
 
 {$R *.dfm}
 
@@ -7517,6 +7517,8 @@
 
   if not Status.LoggedIn and Preferences.UseLogonForm then
     LogonForm.Show;
+
+  TipsForm.ShowTips;
 end;
 
 { opens a private chat with ClientName if it doesn't already exist.

Modified: trunk/Lobby/TASClient/Misc.pas
===================================================================
--- trunk/Lobby/TASClient/Misc.pas	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/Misc.pas	2008-09-05 16:29:19 UTC (rev 6372)
@@ -557,7 +557,7 @@
   if IOResult &lt;&gt; 0 then Result := -1;
 end;
 
-function ReadFile2(FileName: string): string;
+function ReadFile2(FileName: string): String;
 var
   FileStream: TFileStream;
 begin

Modified: trunk/Lobby/TASClient/PreferencesFormUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/PreferencesFormUnit.dfm	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/PreferencesFormUnit.dfm	2008-09-05 16:29:19 UTC (rev 6372)
@@ -3,7 +3,7 @@
   Top = 225
   BorderStyle = bsDialog
   Caption = 'Preferences'
-  ClientHeight = 392
+  ClientHeight = 413
   ClientWidth = 415
   Color = clBtnFace
   Constraints.MaxHeight = 1000
@@ -25,7 +25,7 @@
     Left = 0
     Top = 0
     Width = 415
-    Height = 392
+    Height = 413
     Caption = 'Preferences'
     FixedSize = True
     Options.Minimize = False
@@ -35,7 +35,7 @@
       Left = 8
       Top = 32
       Width = 401
-      Height = 305
+      Height = 329
       Color = clBtnFace
       ActiveTabIndex = 2
       TabAutofit = True
@@ -73,7 +73,7 @@
         Left = 0
         Top = 23
         Width = 401
-        Height = 282
+        Height = 306
         Caption = 'HTTP'
         ImageIndex = -1
         TabItem = 'SpTBXTabItem2'
@@ -81,7 +81,7 @@
           Left = 16
           Top = 8
           Width = 369
-          Height = 257
+          Height = 281
           Caption = 'Proxy settings'
           Color = clNone
           ParentColor = False
@@ -189,11 +189,252 @@
           end
         end
       end
+      object SpTBXTabSheet5: TSpTBXTabSheet
+        Left = 0
+        Top = 23
+        Width = 401
+        Height = 306
+        Caption = 'Account'
+        ImageIndex = -1
+        TabItem = 'SpTBXTabItem5'
+        object GroupBox2: TSpTBXGroupBox
+          Left = 16
+          Top = 8
+          Width = 369
+          Height = 281
+          Caption = 'Account details'
+          Color = clNone
+          ParentColor = False
+          TabOrder = 0
+          object RegisterAccountButton: TSpTBXSpeedButton
+            Left = 56
+            Top = 160
+            Width = 185
+            Height = 25
+            Caption = 'Create new account'
+            OnClick = RegisterAccountButtonClick
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
+          object Label4: TSpTBXLabel
+            Left = 24
+            Top = 40
+            Width = 51
+            Height = 13
+            Caption = 'Username:'
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
+          object Label5: TSpTBXLabel
+            Left = 24
+            Top = 72
+            Width = 49
+            Height = 13
+            Caption = 'Password:'
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
+          object UsernameEdit: TSpTBXEdit
+            Left = 120
+            Top = 40
+            Width = 121
+            Height = 21
+            TabOrder = 0
+            OnChange = UsernameEditChange
+          end
+          object PasswordEdit: TSpTBXEdit
+            Left = 120
+            Top = 72
+            Width = 121
+            Height = 21
+            TabOrder = 1
+            OnChange = PasswordEditChange
+            PasswordCharW = '*'
+          end
+          object LadderPasswordEdit: TSpTBXEdit
+            Left = 120
+            Top = 104
+            Width = 121
+            Height = 21
+            Enabled = False
+            TabOrder = 5
+            PasswordCharW = '*'
+          end
+          object SpTBXLabel1: TSpTBXLabel
+            Left = 24
+            Top = 104
+            Width = 87
+            Height = 13
+            Caption = 'Ladder password :'
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
+          object ChangeLadderPasswordButton: TSpTBXButton
+            Left = 248
+            Top = 104
+            Width = 41
+            Height = 21
+            Caption = 'Edit'
+            TabOrder = 7
+            OnClick = ChangeLadderPasswordButtonClick
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
+          object RegisterLadderAccountButton: TSpTBXButton
+            Left = 56
+            Top = 192
+            Width = 185
+            Height = 25
+            Caption = 'Create new ladder account'
+            TabOrder = 8
+            OnClick = RegisterLadderAccountButtonClick
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
+          object RememberPasswordsCheckBox: TSpTBXCheckBox
+            Left = 120
+            Top = 128
+            Width = 117
+            Height = 15
+            Caption = 'remember passwords'
+            TabOrder = 9
+          end
+        end
+      end
+      object SpTBXTabSheet6: TSpTBXTabSheet
+        Left = 0
+        Top = 23
+        Width = 401
+        Height = 306
+        Caption = 'Server'
+        ImageIndex = -1
+        TabItem = 'SpTBXTabItem6'
+        object GroupBox1: TSpTBXGroupBox
+          Left = 16
+          Top = 8
+          Width = 369
+          Height = 281
+          Caption = 'Server settings'
+          Color = clNone
+          ParentColor = False
+          TabOrder = 0
+          object Label1: TSpTBXLabel
+            Left = 16
+            Top = 32
+            Width = 74
+            Height = 13
+            Caption = 'Server address:'
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
+          object Label2: TSpTBXLabel
+            Left = 16
+            Top = 56
+            Width = 55
+            Height = 13
+            Caption = 'Server port:'
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
+          object ServerPortEdit: TSpTBXEdit
+            Left = 96
+            Top = 56
+            Width = 41
+            Height = 21
+            TabOrder = 1
+            Text = '8200'
+          end
+          object CheckBox10: TSpTBXCheckBox
+            Left = 16
+            Top = 128
+            Width = 197
+            Height = 15
+            Caption = 'Connect to backup host if primary fails'
+            TabOrder = 2
+            Checked = True
+            State = cbChecked
+          end
+          object CheckBox2: TSpTBXCheckBox
+            Left = 16
+            Top = 144
+            Width = 108
+            Height = 15
+            Caption = 'Connect on startup'
+            TabOrder = 3
+          end
+          object CheckBox7: TSpTBXCheckBox
+            Left = 16
+            Top = 160
+            Width = 226
+            Height = 15
+            Caption = 'Join #main once connected (recommended)'
+            TabOrder = 4
+          end
+          object ServerAddressEdit: TSpTBXButtonEdit
+            Left = 96
+            Top = 32
+            Width = 249
+            Height = 21
+            TabOrder = 0
+            EditButton.Left = 225
+            EditButton.Top = 0
+            EditButton.Width = 20
+            EditButton.Height = 17
+            EditButton.Caption = '...'
+            EditButton.Align = alRight
+            EditButton.DropDownArrow = False
+            EditButton.DropDownMenu = AddressPopupMenu
+            EditButton.LinkFont.Charset = DEFAULT_CHARSET
+            EditButton.LinkFont.Color = clBlue
+            EditButton.LinkFont.Height = -11
+            EditButton.LinkFont.Name = 'MS Sans Serif'
+            EditButton.LinkFont.Style = [fsUnderline]
+          end
+          object JvXPButton1: TSpTBXButton
+            Left = 272
+            Top = 56
+            Width = 73
+            Height = 21
+            Caption = 'Perform ...'
+            TabOrder = 7
+            OnClick = JvXPButton1Click
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
+        end
+      end
       object SpTBXTabSheet1: TSpTBXTabSheet
         Left = 0
         Top = 23
         Width = 401
-        Height = 282
+        Height = 306
         Caption = 'Skins'
         ImageIndex = -1
         TabItem = 'SpTBXTabItem1'
@@ -201,7 +442,7 @@
           Left = 16
           Top = 8
           Width = 361
-          Height = 257
+          Height = 281
           Caption = 'Skin manager'
           Color = clNone
           ParentColor = False
@@ -271,11 +512,85 @@
           end
         end
       end
+      object SpTBXTabSheet7: TSpTBXTabSheet
+        Left = 0
+        Top = 23
+        Width = 401
+        Height = 306
+        Caption = 'Scripts'
+        ImageIndex = -1
+        TabItem = 'SpTBXTabItem7'
+        object ScriptsDebugWindowBt: TSpTBXButton
+          Left = 132
+          Top = 56
+          Width = 137
+          Height = 25
+          Caption = 'Debug Window'
+          TabOrder = 0
+          OnClick = ScriptsDebugWindowBtClick
+          LinkFont.Charset = DEFAULT_CHARSET
+          LinkFont.Color = clBlue
+          LinkFont.Height = -11
+          LinkFont.Name = 'MS Sans Serif'
+          LinkFont.Style = [fsUnderline]
+        end
+        object ScriptsReloadBt: TSpTBXButton
+          Left = 132
+          Top = 88
+          Width = 137
+          Height = 25
+          Caption = 'Reload scripts'
+          TabOrder = 1
+          OnClick = ScriptsReloadBtClick
+          LinkFont.Charset = DEFAULT_CHARSET
+          LinkFont.Color = clBlue
+          LinkFont.Height = -11
+          LinkFont.Name = 'MS Sans Serif'
+          LinkFont.Style = [fsUnderline]
+        end
+        object ScriptsLoadNewBt: TSpTBXButton
+          Left = 132
+          Top = 120
+          Width = 137
+          Height = 25
+          Caption = 'Load new scripts'
+          TabOrder = 2
+          OnClick = ScriptsLoadNewBtClick
+          LinkFont.Charset = DEFAULT_CHARSET
+          LinkFont.Color = clBlue
+          LinkFont.Height = -11
+          LinkFont.Name = 'MS Sans Serif'
+          LinkFont.Style = [fsUnderline]
+        end
+        object ScriptsAdvancedOptionsBt: TSpTBXButton
+          Left = 132
+          Top = 152
+          Width = 137
+          Height = 25
+          Caption = 'Advanced options'
+          TabOrder = 3
+          Visible = False
+          OnClick = ScriptsAdvancedOptionsBtClick
+          LinkFont.Charset = DEFAULT_CHARSET
+          LinkFont.Color = clBlue
+          LinkFont.Height = -11
+          LinkFont.Name = 'MS Sans Serif'
+          LinkFont.Style = [fsUnderline]
+        end
+        object EnableScriptsCheckBox: TSpTBXCheckBox
+          Left = 104
+          Top = 24
+          Width = 193
+          Height = 15
+          Caption = 'Enable scripts BETA (requires restart)'
+          TabOrder = 4
+        end
+      end
       object SpTBXTabSheet3: TSpTBXTabSheet
         Left = 0
         Top = 23
         Width = 401
-        Height = 282
+        Height = 306
         Caption = 'Interface'
         ImageIndex = -1
         TabItem = 'SpTBXTabItem3'
@@ -283,7 +598,7 @@
           Left = 16
           Top = 8
           Width = 369
-          Height = 257
+          Height = 281
           Caption = 'Interface preferences'
           Color = clNone
           ParentColor = False
@@ -363,8 +678,8 @@
             TabOrder = 7
           end
           object UploadReplayCheckBox: TSpTBXCheckBox
-            Left = 312
-            Top = 232
+            Left = 24
+            Top = 248
             Width = 245
             Height = 15
             Caption = 'Ask to upload replay after the end of each battle'
@@ -434,326 +749,11 @@
           end
         end
       end
-      object SpTBXTabSheet7: TSpTBXTabSheet
-        Left = 0
-        Top = 23
-        Width = 401
-        Height = 282
-        Caption = 'Scripts'
-        ImageIndex = -1
-        TabItem = 'SpTBXTabItem7'
-        object ScriptsDebugWindowBt: TSpTBXButton
-          Left = 132
-          Top = 56
-          Width = 137
-          Height = 25
-          Caption = 'Debug Window'
-          TabOrder = 0
-          OnClick = ScriptsDebugWindowBtClick
-          LinkFont.Charset = DEFAULT_CHARSET
-          LinkFont.Color = clBlue
-          LinkFont.Height = -11
-          LinkFont.Name = 'MS Sans Serif'
-          LinkFont.Style = [fsUnderline]
-        end
-        object ScriptsReloadBt: TSpTBXButton
-          Left = 132
-          Top = 88
-          Width = 137
-          Height = 25
-          Caption = 'Reload scripts'
-          TabOrder = 1
-          OnClick = ScriptsReloadBtClick
-          LinkFont.Charset = DEFAULT_CHARSET
-          LinkFont.Color = clBlue
-          LinkFont.Height = -11
-          LinkFont.Name = 'MS Sans Serif'
-          LinkFont.Style = [fsUnderline]
-        end
-        object ScriptsLoadNewBt: TSpTBXButton
-          Left = 132
-          Top = 120
-          Width = 137
-          Height = 25
-          Caption = 'Load new scripts'
-          TabOrder = 2
-          OnClick = ScriptsLoadNewBtClick
-          LinkFont.Charset = DEFAULT_CHARSET
-          LinkFont.Color = clBlue
-          LinkFont.Height = -11
-          LinkFont.Name = 'MS Sans Serif'
-          LinkFont.Style = [fsUnderline]
-        end
-        object ScriptsAdvancedOptionsBt: TSpTBXButton
-          Left = 132
-          Top = 152
-          Width = 137
-          Height = 25
-          Caption = 'Advanced options'
-          TabOrder = 3
-          Visible = False
-          OnClick = ScriptsAdvancedOptionsBtClick
-          LinkFont.Charset = DEFAULT_CHARSET
-          LinkFont.Color = clBlue
-          LinkFont.Height = -11
-          LinkFont.Name = 'MS Sans Serif'
-          LinkFont.Style = [fsUnderline]
-        end
-        object EnableScriptsCheckBox: TSpTBXCheckBox
-          Left = 104
-          Top = 24
-          Width = 193
-          Height = 15
-          Caption = 'Enable scripts BETA (requires restart)'
-          TabOrder = 4
-        end
-      end
-      object SpTBXTabSheet6: TSpTBXTabSheet
-        Left = 0
-        Top = 23
-        Width = 401
-        Height = 282
-        Caption = 'Server'
-        ImageIndex = -1
-        TabItem = 'SpTBXTabItem6'
-        object GroupBox1: TSpTBXGroupBox
-          Left = 16
-          Top = 8
-          Width = 369
-          Height = 257
-          Caption = 'Server settings'
-          Color = clNone
-          ParentColor = False
-          TabOrder = 0
-          object Label1: TSpTBXLabel
-            Left = 16
-            Top = 32
-            Width = 74
-            Height = 13
-            Caption = 'Server address:'
-            LinkFont.Charset = DEFAULT_CHARSET
-            LinkFont.Color = clBlue
-            LinkFont.Height = -11
-            LinkFont.Name = 'MS Sans Serif'
-            LinkFont.Style = [fsUnderline]
-          end
-          object Label2: TSpTBXLabel
-            Left = 16
-            Top = 56
-            Width = 55
-            Height = 13
-            Caption = 'Server port:'
-            LinkFont.Charset = DEFAULT_CHARSET
-            LinkFont.Color = clBlue
-            LinkFont.Height = -11
-            LinkFont.Name = 'MS Sans Serif'
-            LinkFont.Style = [fsUnderline]
-          end
-          object ServerPortEdit: TSpTBXEdit
-            Left = 96
-            Top = 56
-            Width = 41
-            Height = 21
-            TabOrder = 1
-            Text = '8200'
-          end
-          object CheckBox10: TSpTBXCheckBox
-            Left = 16
-            Top = 128
-            Width = 197
-            Height = 15
-            Caption = 'Connect to backup host if primary fails'
-            TabOrder = 2
-            Checked = True
-            State = cbChecked
-          end
-          object CheckBox2: TSpTBXCheckBox
-            Left = 16
-            Top = 144
-            Width = 108
-            Height = 15
-            Caption = 'Connect on startup'
-            TabOrder = 3
-          end
-          object CheckBox7: TSpTBXCheckBox
-            Left = 16
-            Top = 160
-            Width = 226
-            Height = 15
-            Caption = 'Join #main once connected (recommended)'
-            TabOrder = 4
-          end
-          object ServerAddressEdit: TSpTBXButtonEdit
-            Left = 96
-            Top = 32
-            Width = 249
-            Height = 21
-            TabOrder = 0
-            EditButton.Left = 225
-            EditButton.Top = 0
-            EditButton.Width = 20
-            EditButton.Height = 17
-            EditButton.Caption = '...'
-            EditButton.Align = alRight
-            EditButton.DropDownArrow = False
-            EditButton.DropDownMenu = AddressPopupMenu
-            EditButton.LinkFont.Charset = DEFAULT_CHARSET
-            EditButton.LinkFont.Color = clBlue
-            EditButton.LinkFont.Height = -11
-            EditButton.LinkFont.Name = 'MS Sans Serif'
-            EditButton.LinkFont.Style = [fsUnderline]
-          end
-          object JvXPButton1: TSpTBXButton
-            Left = 272
-            Top = 56
-            Width = 73
-            Height = 21
-            Caption = 'Perform ...'
-            TabOrder = 7
-            OnClick = JvXPButton1Click
-            LinkFont.Charset = DEFAULT_CHARSET
-            LinkFont.Color = clBlue
-            LinkFont.Height = -11
-            LinkFont.Name = 'MS Sans Serif'
-            LinkFont.Style = [fsUnderline]
-          end
-        end
-      end
-      object SpTBXTabSheet5: TSpTBXTabSheet
-        Left = 0
-        Top = 23
-        Width = 401
-        Height = 282
-        Caption = 'Account'
-        ImageIndex = -1
-        TabItem = 'SpTBXTabItem5'
-        object GroupBox2: TSpTBXGroupBox
-          Left = 16
-          Top = 8
-          Width = 369
-          Height = 257
-          Caption = 'Account details'
-          Color = clNone
-          ParentColor = False
-          TabOrder = 0
-          object RegisterAccountButton: TSpTBXSpeedButton
-            Left = 56
-            Top = 160
-            Width = 185
-            Height = 25
-            Caption = 'Create new account'
-            OnClick = RegisterAccountButtonClick
-            LinkFont.Charset = DEFAULT_CHARSET
-            LinkFont.Color = clBlue
-            LinkFont.Height = -11
-            LinkFont.Name = 'MS Sans Serif'
-            LinkFont.Style = [fsUnderline]
-          end
-          object Label4: TSpTBXLabel
-            Left = 24
-            Top = 40
-            Width = 51
-            Height = 13
-            Caption = 'Username:'
-            LinkFont.Charset = DEFAULT_CHARSET
-            LinkFont.Color = clBlue
-            LinkFont.Height = -11
-            LinkFont.Name = 'MS Sans Serif'
-            LinkFont.Style = [fsUnderline]
-          end
-          object Label5: TSpTBXLabel
-            Left = 24
-            Top = 72
-            Width = 49
-            Height = 13
-            Caption = 'Password:'
-            LinkFont.Charset = DEFAULT_CHARSET
-            LinkFont.Color = clBlue
-            LinkFont.Height = -11
-            LinkFont.Name = 'MS Sans Serif'
-            LinkFont.Style = [fsUnderline]
-          end
-          object UsernameEdit: TSpTBXEdit
-            Left = 120
-            Top = 40
-            Width = 121
-            Height = 21
-            TabOrder = 0
-            OnChange = UsernameEditChange
-          end
-          object PasswordEdit: TSpTBXEdit
-            Left = 120
-            Top = 72
-            Width = 121
-            Height = 21
-            TabOrder = 1
-            OnChange = PasswordEditChange
-            PasswordCharW = '*'
-          end
-          object LadderPasswordEdit: TSpTBXEdit
-            Left = 120
-            Top = 104
-            Width = 121
-            Height = 21
-            Enabled = False
-            TabOrder = 5
-            PasswordCharW = '*'
-          end
-          object SpTBXLabel1: TSpTBXLabel
-            Left = 24
-            Top = 104
-            Width = 87
-            Height = 13
-            Caption = 'Ladder password :'
-            LinkFont.Charset = DEFAULT_CHARSET
-            LinkFont.Color = clBlue
-            LinkFont.Height = -11
-            LinkFont.Name = 'MS Sans Serif'
-            LinkFont.Style = [fsUnderline]
-          end
-          object ChangeLadderPasswordButton: TSpTBXButton
-            Left = 248
-            Top = 104
-            Width = 41
-            Height = 21
-            Caption = 'Edit'
-            TabOrder = 7
-            OnClick = ChangeLadderPasswordButtonClick
-            LinkFont.Charset = DEFAULT_CHARSET
-            LinkFont.Color = clBlue
-            LinkFont.Height = -11
-            LinkFont.Name = 'MS Sans Serif'
-            LinkFont.Style = [fsUnderline]
-          end
-          object RegisterLadderAccountButton: TSpTBXButton
-            Left = 56
-            Top = 192
-            Width = 185
-            Height = 25
-            Caption = 'Create new ladder account'
-            TabOrder = 8
-            OnClick = RegisterLadderAccountButtonClick
-            LinkFont.Charset = DEFAULT_CHARSET
-            LinkFont.Color = clBlue
-            LinkFont.Height = -11
-            LinkFont.Name = 'MS Sans Serif'
-            LinkFont.Style = [fsUnderline]
-          end
-          object RememberPasswordsCheckBox: TSpTBXCheckBox
-            Left = 120
-            Top = 128
-            Width = 117
-            Height = 15
-            Caption = 'remember passwords'
-            TabOrder = 9
-          end
-        end
-      end
       object SpTBXTabSheet4: TSpTBXTabSheet
         Left = 0
         Top = 23
         Width = 401
-        Height = 282
+        Height = 306
         Caption = 'Program'
         ImageIndex = -1
         TabItem = 'SpTBXTabItem4'
@@ -761,14 +761,14 @@
           Left = 16
           Top = 8
           Width = 369
-          Height = 257
+          Height = 281
           Caption = 'Program settings'
           Color = clNone
           ParentColor = False
           TabOrder = 0
           object ResetRegistryButton: TSpTBXSpeedButton
             Left = 240
-            Top = 224
+            Top = 248
             Width = 113
             Height = 22
             Caption = 'Reset registry data'
@@ -871,7 +871,7 @@
           end
           object CheckBox8: TSpTBXCheckBox
             Left = 16
-            Top = 232
+            Top = 256
             Width = 88
             Height = 15
             Caption = 'Enable logging'
@@ -881,7 +881,7 @@
           end
           object CheckBox9: TSpTBXCheckBox
             Left = 16
-            Top = 216
+            Top = 240
             Width = 128
             Height = 15
             Caption = 'Use sound notifications'
@@ -904,7 +904,7 @@
           end
           object CheckForNewVersionCheckBox: TSpTBXCheckBox
             Left = 16
-            Top = 200
+            Top = 224
             Width = 168
             Height = 15
             Caption = 'Auto update lobby to latest beta'
@@ -940,7 +940,7 @@
           end
           object EnableSpringDownloaderCheckBox: TSpTBXCheckBox
             Left = 16
-            Top = 184
+            Top = 208
             Width = 144
             Height = 15
             Caption = 'Enable Spring Downloader'
@@ -950,7 +950,7 @@
           end
           object UseLogonFormCheckBox: TSpTBXCheckBox
             Left = 16
-            Top = 168
+            Top = 192
             Width = 89
             Height = 15
             Caption = 'Use logon form'
@@ -958,12 +958,26 @@
             Checked = True
             State = cbChecked
           end
+          object TipsButton: TSpTBXButton
+            Left = 240
+            Top = 192
+            Width = 113
+            Height = 22
+            Caption = 'Tips ...'
+            TabOrder = 17
+            OnClick = TipsButtonClick
+            LinkFont.Charset = DEFAULT_CHARSET
+            LinkFont.Color = clBlue
+            LinkFont.Height = -11
+            LinkFont.Name = 'MS Sans Serif'
+            LinkFont.Style = [fsUnderline]
+          end
         end
       end
     end
     object ApplyAndCloseButton: TSpTBXButton
       Left = 43
-      Top = 352
+      Top = 376
       Width = 145
       Height = 25
       Caption = 'Apply and close'
@@ -977,7 +991,7 @@
     end
     object CancelAndCloseButton: TSpTBXButton
       Left = 227
-      Top = 352
+      Top = 376
       Width = 145
       Height = 25
       Caption = 'Cancel and close'

Modified: trunk/Lobby/TASClient/PreferencesFormUnit.pas
===================================================================
--- trunk/Lobby/TASClient/PreferencesFormUnit.pas	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/PreferencesFormUnit.pas	2008-09-05 16:29:19 UTC (rev 6372)
@@ -187,6 +187,7 @@
     EnableSpringDownloaderCheckBox: TSpTBXCheckBox;
     RememberPasswordsCheckBox: TSpTBXCheckBox;
     UseLogonFormCheckBox: TSpTBXCheckBox;
+    TipsButton: TSpTBXButton;
 
     function BattleSortStyleToColumn(SortStyle: Integer): Integer;
     function ColumnToBattleSortStyle(Column: Integer): Integer;
@@ -235,6 +236,7 @@
     procedure ScriptsLoadNewBtClick(Sender: TObject);
     procedure ScriptsDebugWindowBtClick(Sender: TObject);
     procedure ScriptsAdvancedOptionsBtClick(Sender: TObject);
+    procedure TipsButtonClick(Sender: TObject);
   private
     { Private declarations }
   public
@@ -320,7 +322,7 @@
   OnlineMapsUnit, NotificationsUnit, PerformFormUnit, HighlightingUnit,
   NewAccountUnit, IgnoreListUnit, MapListFormUnit, ColorsPreferenceUnit,
   ManageGroups, ReplaysUnit, PythonScriptDebugFormUnit, LobbyScriptUnit,
-  SpringDownloaderFormUnit, LogonFormUnit;
+  SpringDownloaderFormUnit, LogonFormUnit, TipsFormUnit;
 
 {$R *.dfm}
 
@@ -498,6 +500,8 @@
     try ReplaysForm.chkEnableFilters.Checked := Misc.GetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Forms\ReplaysForm', 'FiltersEnabled'); except end;
     try ReplaysForm.BottomPanel.Height := Misc.GetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Forms\ReplaysForm', 'Spliter1'); except end;
 
+    try TipsForm.chkShowTips.Checked := Misc.GetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Forms\TipsForm', 'ShowTips'); except end;
+
     ReadPreferencesRecordFromRegistry(Preferences);
   except
   end;
@@ -605,6 +609,8 @@
     Misc.SetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Forms\ReplaysForm', 'FiltersEnabled', rdInteger, ReplaysForm.chkEnableFilters.Checked);
     Misc.SetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Forms\ReplaysForm', 'Spliter1', rdInteger, ReplaysForm.BottomPanel.Height);
 
+    Misc.SetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Forms\TipsForm', 'ShowTips', rdInteger, Misc.BoolToInt(TipsForm.chkShowTips.Checked));
+
     // write custom team colors to registry:
     for i := 0 to High(TeamColors) do
       Misc.SetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\TeamColors', 'Color' + IntToStr(i), rdInteger, TeamColors[i]);
@@ -1576,4 +1582,9 @@
   ReleaseMainThread;
 end;
 
+procedure TPreferencesForm.TipsButtonClick(Sender: TObject);
+begin
+  TipsForm.ShowTips(True);
+end;
+
 end.

Modified: trunk/Lobby/TASClient/Python/api.txt
===================================================================
--- trunk/Lobby/TASClient/Python/api.txt	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/Python/api.txt	2008-09-05 16:29:19 UTC (rev 6372)
@@ -80,6 +80,7 @@
 - AddSplitter(name, parent)
 - AddTabsPanel(name, parent)
 - AddTab(caption, name, TabsPanelName)
+- AddForm(name, caption, borderStyle (1-&gt;5))
 
 
 

Modified: trunk/Lobby/TASClient/ReplaysUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/ReplaysUnit.dfm	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/ReplaysUnit.dfm	2008-09-05 16:29:19 UTC (rev 6372)
@@ -18,6 +18,7 @@
   Position = poOwnerFormCenter
   Scaled = False
   OnCreate = FormCreate
+  OnShow = FormShow
   PixelsPerInch = 96
   TextHeight = 13
   object SpTBXTitleBar1: TSpTBXTitleBar

Modified: trunk/Lobby/TASClient/ReplaysUnit.pas
===================================================================
--- trunk/Lobby/TASClient/ReplaysUnit.pas	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/ReplaysUnit.pas	2008-09-05 16:29:19 UTC (rev 6372)
@@ -249,6 +249,7 @@
     procedure btDeletePresetClick(Sender: TObject);
     procedure btClearPresetClick(Sender: TObject);
     procedure PresetListboxClick(Sender: TObject);
+    procedure FormShow(Sender: TObject);
   private
     { Private declarations }
   public
@@ -305,7 +306,7 @@
 
 uses  StrUtils, ShellAPI, BattleFormUnit, Misc, PreferencesFormUnit,
   InitWaitFormUnit,MsMultiPartFormData, ProgressBarWindow,
-  UploadReplayUnit, LobbyScriptUnit;
+  UploadReplayUnit, LobbyScriptUnit, TipsFormUnit;
 
 {$R *.dfm}
 
@@ -2915,4 +2916,9 @@
   FilterReplayList;
 end;
 
+procedure TReplaysForm.FormShow(Sender: TObject);
+begin
+  TipsForm.ShowTips;
+end;
+
 end.

Modified: trunk/Lobby/TASClient/SplashScreenUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/SplashScreenUnit.dfm	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/SplashScreenUnit.dfm	2008-09-05 16:29:19 UTC (rev 6372)
@@ -3,7 +3,6 @@
   Top = 368
   AlphaBlend = True
   AlphaBlendValue = 0
-  AutoSize = True
   BorderIcons = []
   BorderStyle = bsNone
   Caption = 'TASClient Loading ...'
@@ -17,6 +16,7 @@
   Font.Style = []
   OldCreateOrder = False
   Position = poScreenCenter
+  Scaled = False
   PixelsPerInch = 96
   TextHeight = 13
   object Image1: TImage

Modified: trunk/Lobby/TASClient/TASClient.dof
===================================================================
--- trunk/Lobby/TASClient/TASClient.dof	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/TASClient.dof	2008-09-05 16:29:19 UTC (rev 6372)
@@ -115,7 +115,7 @@
 MajorVer=0
 MinorVer=3
 Release=0
-Build=443
+Build=444
 Debug=0
 PreRelease=0
 Special=0
@@ -126,7 +126,7 @@
 [Version Info Keys]
 CompanyName=
 FileDescription=TA Spring lobby client
-FileVersion=0.3.0.443
+FileVersion=0.3.0.444
 InternalName=
 LegalCopyright=
 LegalTrademarks=

Modified: trunk/Lobby/TASClient/TASClient.dpr
===================================================================
--- trunk/Lobby/TASClient/TASClient.dpr	2008-09-05 14:38:57 UTC (rev 6371)
+++ trunk/Lobby/TASClient/TASClient.dpr	2008-09-05 16:29:19 UTC (rev 6372)
@@ -112,7 +112,9 @@
   LobbyScriptUnit in 'LobbyScriptUnit.pas',
   SpringDownloaderFormUnit in 'SpringDownloaderFormUnit.pas' {SpringDownloaderForm},
   LogonFormUnit in 'LogonFormUnit.pas' {LogonForm},
-  MapSelectionFormUnit in 'MapSelectionFormUnit.pas' {MapSelectionForm};
+  MapSelectionFormUnit in 'MapSelectionFormUnit.pas' {MapSelectionForm},
+  OKCANCL1 in 'C:\Program Files\Borland\Delphi7\ObjRepos\OKCANCL1.pas' {OKBottomDlg},
+  TipsFormUnit in 'TipsFormUnit.pas' {TipsForm};
 
 var
   i: Integer;
@@ -223,6 +225,7 @@
   Application.CreateForm(TColorsPreference, ColorsPreference);
   Application.CreateForm(TSearchPlayerForm, SearchPlayerForm);
   Application.CreateForm(TPythonScriptDebugForm, PythonScriptDebugForm);
+  Application.CreateForm(TTipsForm, TipsForm);
   //Application.CreateForm(TSpringDownloaderForm, SpringDownloaderForm);
   if not MainUnit.RunningUnderWine then
     Application.CreateForm(TMenuForm, MenuForm);

Modified: trunk/Lobby/TASClient/TASClient.res
===================================================================
(Binary files differ)

Added: trunk/Lobby/TASClient/TipsFormUnit.ddp
===================================================================
(Binary files differ)


Property changes on: trunk/Lobby/TASClient/TipsFormUnit.ddp
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/Lobby/TASClient/TipsFormUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/TipsFormUnit.dfm	                        (rev 0)
+++ trunk/Lobby/TASClient/TipsFormUnit.dfm	2008-09-05 16:29:19 UTC (rev 6372)
@@ -0,0 +1,173 @@
+object TipsForm: TTipsForm
+  Left = 512
+  Top = 149
+  BorderStyle = bsDialog
+  Caption = 'Tips'
+  ClientHeight = 317
+  ClientWidth = 370
+  Color = clBtnFace
+  Constraints.MaxHeight = 1000
+  Constraints.MaxWidth = 1680
+  Font.Charset = DEFAULT_CHARSET
+  Font.Color = clWindowText
+  Font.Height = -11
+  Font.Name = 'MS Sans Serif'
+  Font.Style = []
+  FormStyle = fsStayOnTop
+  OldCreateOrder = False
+  Position = poScreenCenter
+  Scaled = False
+  OnCreate = FormCreate
+  PixelsPerInch = 96
+  TextHeight = 13
+  object SpTBXTitleBar1: TSpTBXTitleBar
+    Left = 0
+    Top = 0
+    Width = 370
+    Height = 317
+    Caption = 'Tips'
+    FixedSize = True
+    Options.Maximize = False
+    object Panel2: TPanel
+      Left = 16
+      Top = 40
+      Width = 337
+      Height = 232
+      BevelInner = bvRaised
+      BevelOuter = bvLowered
+      Caption = 'Panel2'
+      TabOrder = 1
+      DesignSize = (
+        337
+        232)
+      object Panel1: TPanel
+        Left = 8
+        Top = 8
+        Width = 321
+        Height = 216
+        Anchors = [akLeft, akTop, akRight, akBottom]
+        BevelOuter = bvNone
+        Color = clInfoBk
+        TabOrder = 0
+        DesignSize = (
+          321
+          216)
+        object Label1: TLabel
+          Left = 72
+          Top = 24
+          Width = 170
+          Height = 28
+          Caption = 'Did you know ...'
+          Font.Charset = DEFAULT_CHARSET
+          Font.Color = clWindowText
+          Font.Height = -24
+          Font.Name = 'Arial'
+          Font.Style = [fsItalic]
+          ParentFont = False
+        end
+        object Image1: TImage
+          Left = 16
+          Top = 8
+          Width = 49
+          Height = 49
+          Picture.Data = {
+            0B544A76474946496D616765330700004749463839612D002D00F70100798956
+            FFFFFFCBD5A38C9576C1CA9BD9DCCCBDC894F0F0F1B5C284D1D5C2667741B9C3
+            92FCFCFAA0B15DA5B660D6D9CCD7D7D79AA4729AAA5AEAEAEAC9D39FCACAC6DF
+            DFDEA1AD6FAAAD9DD4DCB3C5CCABFAFAFA98A664DCE2C59FA48AE0E0E0C7CABB
+            F4F4F494A162DADADAB2B6A6D4D4D5AABB69FCFCFCA8B66CC2CD92D0D4BEF8F8
+            F8CBD1B4768B66E6EBD3CDD2BAEAEEDAD8D8D8919B6CA0AB74A9BA64C5C6BEA7
+            B865ADBC6DDEE2DBD1D9ADA0AE6AA3A989BAC58BAEBD71BCC989EDEEEAD6DDB8
+            F9FAF5B3C179CAD2ABF4F6EDEDF1E19BA965B7C18CB0BC82E6E6E8232F15A8B8
+            65CCD1BCDADAD89AA56ECDCEC997A65ADDDEDC959C7BB8BAB0D8DAD1F0F3E59D
+            A86FDCDCDCE5E5E7ADBA79EEEEEDB1BE7EBBBBBCA2B06D97A55FA1A886EAEBE5
+            E8EDD7919D65A0A979DDDEDADBDCD9A7B666C3CE94A9B189B6B9ADA8B966A6B5
+            6CA1A981AFBB7DA9B8709AA27BF1F1F2A5B567E3E3E5E0E1DCDADBD5D6D7D4C4
+            CF98B8BDA6B0B798ABB876A7AD92E7E9E29DA96B9DAD5BC3C4BEADB09CA6B664
+            A2B06AA7B863A6B762A6B761A7B862A6B763A8B963E9E9E9EDEDEDECECECEFEF
+            EFE7E7E7E2E2E2D0D0D0BFC2B3EEEEEEE3E3E3A6B862E8E8E8E4E4E4E5E5E4E6
+            E6E6A5B662D5D5D6A7B763EFEFF0A4B561CECECCE5E5E5D3D3D4A2AC7BD2D2D3
+            D7D8D5E7E7E6E2E2E1B1C076BBBDB2A4B269F3F3F3A5B565B4C37BFBFCF993A3
+            57D0D0CFA6B271D5DBC0C1C8A3C3CCA2EFEFEEE3E2E3E3E4E2C8CFADD0D7B5A4
+            B36DA8AB9BB3B5AAA8AC94A1A58FE4E9D0DFE5C88BAD71BEC0B99FAC6EEAEAE8
+            C6CEA8D3D4D19FAB70E1E1E1C4C4C3A2A692FBFBF892A96CA7B964F1F1F1ADBB
+            74BDC698828F4FBBBDB5BDBFB5A5AA8E809D6AD8E0BBE0E1DBE4E7DAE3E6DBE0
+            E5DDC0C2BA334020C1C2BC465B30CED8A99EAE5CB5BF8C9FAD69A5AF7E878D82
+            989E81F7F7F7DDDFD4A2B35FDFE2D4AFBC78A6B8639FA77DC7C8C3C3CAA7C4CC
+            A39BA182A6B564CBCBCBD0D6BAB5C37C7A8570B9C683939B72E9E9E8E4E4E5E0
+            E4D1A9B772EEEEEF9FA87CD4D7C8CBCCC7E7ECD5A4B65FF2F5E9FFFFFF21F904
+            010000FF002C000000002D002D000008FF00FF091C48B020C159632EE4E214C2
+            A0C387101F9EDA71E890A140F948D45911B1A3C77F27FED810344890201A8202
+            A1235166C3C797044BC521699266321A3674B04963E1044C8F4FBA1C2A59B366
+            C94328757C9932CAE74F831666D0205AB4EA511A862E7C7956E9E9402D6C5056
+            2544681055A3829002FAB5E31ABD9F2BF4A81164A8E8A0543E7A087270162DD2
+            76C3A0D598F09184199A466FF03B56A5438A1B65ABFAA511C78A473FA6861695
+            44C80E11550102300873464D5FC9E7D875AC73616AD542847AC0F3B18D1F8300
+            418098386DD2D021274D228A1AE35A3249420E1C98101024C0891C367817B281
+            21E2C443C68D0F5AB22B341121848C13FF42520C22039188B31B351126B42A1F
+            0EAA1A2A840244098832D3AB1FE4404D8EDB017C175E550E30E3CE240F05A5D9
+            7EC899E0032F0032B04D74451942C83DE370E1125452F1661421A408E04273A2
+            15418169AF5DA201165C38049658FBA9214015A13150843429F410D95848CC41
+            07060D1114D75C756537881A190008C31937F06796558598A1821CC144104B41
+            86E927D9203DB8705B1142F0E5E15E0B50F2401E5314544366631E47C80D76EC
+            62477CEA1922891B541043C01B410AC45A71D91532480A6798D08F0928669749
+            2197A88345025D5440D0708066076215A3D941A17A9910D2C61C64F0E0010303
+            29B34332EA7D9843680100A1A55D51AAFF500F0B7C0437D02DCDACC20D9D46DE
+            95813F5580972A999550B14575040180CD00DF782101398598948964650921CF
+            AB35D9E9460172AC1301220529A00438AC3C8206075034E0E12064B5C9A83A49
+            E8734F9AE162130F04253852031E5640C1CD26C36667E1A71F18C0A7410068D3
+            C208234080092815DCF189B3E4105564AA831482CA0B58BC10A9430328D00219
+            8D5830420C9878C289B9E8AA1BB0490E1CD14919088CEA9033004483C3049644
+            F2C115236092EFBEFDF601F07E92A0F0403DB4F031C243CA0CD08B359A283201
+            23941063B2C3104B4CB1C504BEC20815E620FB5036C8BC03CC018B2432C1249D
+            947C72CA2B9F9BEE591666318D9EDF46FFB4812E1C20F1CE1E076892882288F4
+            FC73D043F30B85D12669FC421209A0406F44E2A4138E08590C51CD2207406235
+            D65A37FC70C4133FEB40379544C1C3C11F9D208C0762B4024B395A1C808FDB70
+            CB8DB2CA2C7BF300162CE820E95316DC22830E0614F003DB8727EE33D042EBAB
+            0F2374D44CAA57FF20828B0C461CE10A18858B7E75D65B43C04823C1D4CA3D41
+            CAF82285175BD44278E8BCC76DC115913CB08CD9EF1BC80AF6C10E11E46108D4
+            3800F41067894644C10011784B000D72825018430CB6B0833D62018745402211
+            B260C21A2E3741878C020332F086013AF003381C800C08805D0921A28834CC83
+            03080002188A77BC197624047E9002E7107A60331F7E640315908218EAF09380
+            00003B}
+          Transparent = True
+        end
+        object mmTip: TTntMemo
+          Left = 16
+          Top = 64
+          Width = 289
+          Height = 136
+          Anchors = [akLeft, akTop, akRight, akBottom]
+          BorderStyle = bsNone
+          Color = clInfoBk
+          ReadOnly = True
+          TabOrder = 0
+        end
+      end
+    end
+    object btNextTip: TSpTBXButton
+      Left = 240
+      Top = 279
+      Width = 113
+      Height = 25
+      Caption = 'Next tip'
+      TabOrder = 2
+      OnClick = btNextTipClick
+      LinkFont.Charset = DEFAULT_CHARSET
+      LinkFont.Color = clBlue
+      LinkFont.Height = -11
+      LinkFont.Name = 'MS Sans Serif'
+      LinkFont.Style = [fsUnderline]
+    end
+    object chkShowTips: TSpTBXCheckBox
+      Left = 16
+      Top = 279
+      Width = 64
+      Height = 15
+      Caption = 'Show tips'
+      TabOrder = 3
+      Checked = True
+      State = cbChecked
+    end
+  end
+end

Added: trunk/Lobby/TASClient/TipsFormUnit.pas
===================================================================
--- trunk/Lobby/TASClient/TipsFormUnit.pas	                        (rev 0)
+++ trunk/Lobby/TASClient/TipsFormUnit.pas	2008-09-05 16:29:19 UTC (rev 6372)
@@ -0,0 +1,139 @@
+unit TipsFormUnit;
+
+interface
+
+uses
+  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
+  Dialogs, SpTBXItem, JvGIF, ExtCtrls, StdCtrls, SpTBXControls, TBXDkPanels,
+  TntStdCtrls,JclUnicode, Math;
+
+type
+  TTip = record
+    Msg: string;
+    Form: integer;
+  end;
+  PTip = ^TTip;
+
+  TTipsForm = class(TForm)
+    SpTBXTitleBar1: TSpTBXTitleBar;
+    Panel2: TPanel;
+    Panel1: TPanel;
+    Label1: TLabel;
+    Image1: TImage;
+    btNextTip: TSpTBXButton;
+    chkShowTips: TSpTBXCheckBox;
+    mmTip: TTntMemo;
+    procedure FormCreate(Sender: TObject);
+    procedure btNextTipClick(Sender: TObject);
+  protected
+    TipList: TList;
+    CurrentFormTipList: TList;
+    currentForm: integer;
+    currentTip: integer;
+  private
+    { Private declarations }
+  public
+    property Tips : TList read TipList;
+    procedure LoadTips;
+    procedure ShowTips(forceShow: boolean = false);
+  end;
+
+var
+  TipsForm: TTipsForm;
+
+implementation
+
+uses Misc,MainUnit, StrUtils, BattleFormUnit, ReplaysUnit, PreferencesFormUnit;
+
+{$R *.dfm}
+
+procedure TTipsForm.LoadTips;
+var
+  rawTips : string;
+  rawTipsList: TStringList;
+  rawTip: string;
+  t : PTip;
+  i,j: integer;
+  tipAdded: boolean;
+begin
+  try
+    rawTips := ReadFile2(VAR_FOLDER+'\tips.txt');
+  except
+    MessageDlg(VAR_FOLDER+'\tips.txt not found.',mtError,[mbOK],0);
+    Exit;
+  end;
+
+  rawTipsList := TStringList.Create;
+  ParseDelimited(rawTipsList,rawTips,EOL+'##','');
+
+  for i:=0 to rawTipsList.Count-1 do
+  begin
+    rawTip := rawTipsList[i];
+    if rawTip = '' then
+      Continue;
+
+    New(t);
+    t.Msg := MidStr(rawTip,3,High(Integer));
+    t.Form := StrToInt(rawTip[1]);
+
+    TipList.Add(t);
+
+  end;
+end;
+
+procedure TTipsForm.ShowTips(forceShow: boolean = false);
+var
+  i: integer;
+begin
+  if not chkShowTips.Checked and not forceShow then Exit;
+
+  if BattleForm.Active and (BattleState.Status = Hosting) then
+    currentForm := 1
+  else if BattleForm.Active and (BattleState.Status = Joined) then
+    currentForm := 2
+  else if BattleForm.Active then
+    currentForm := 3
+  else if ReplaysForm.Active then
+    currentForm := 4
+  else
+    currentForm := 0;
+
+  CurrentFormTipList.Clear;
+  for i := 0 to TipList.Count-1 do
+    if PTip(TipList[i]).Form = currentForm then
+      CurrentFormTipList.Add(TipList[i]);
+
+  if CurrentFormTipList.Count &gt; 0 then
+  begin
+    currentTip := -1;
+    btNextTipClick(nil);
+    Show;
+  end;
+end;
+
+procedure TTipsForm.FormCreate(Sender: TObject);
+begin
+  TipList := TList.Create;
+  CurrentFormTipList := TList.Create;
+
+  if not SpTBXTitleBar1.Active then
+    RemoveSpTBXTitleBarMarges(self);
+
+  LoadTips;
+end;
+
+procedure TTipsForm.btNextTipClick(Sender: TObject);
+var
+  i: integer;
+  firstPrio0 : integer;
+  rnd : integer;
+begin
+  rnd := RandomRange(0,CurrentFormTipList.Count-1);;
+  while (rnd = currentTip) and (CurrentFormTipList.Count &gt; 1) do
+    rnd := RandomRange(0,CurrentFormTipList.Count-1);
+  currentTip := rnd;
+
+  mmTip.Text := PTip(CurrentFormTipList[currentTip]).Msg;
+end;
+
+end.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001141.html">[Taspring-linux-commit] r6371 - trunk/rts/build/scons
</A></li>
	<LI>Next message: <A HREF="001143.html">[Taspring-linux-commit] r6373 - trunk/rts/System/Sync
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1142">[ date ]</a>
              <a href="thread.html#1142">[ thread ]</a>
              <a href="subject.html#1142">[ subject ]</a>
              <a href="author.html#1142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
