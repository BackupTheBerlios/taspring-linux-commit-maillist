<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r6384 -	trunk/tools/ArchiveMoverLinux/libmlsevenzip
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6384%20-%0A%09trunk/tools/ArchiveMoverLinux/libmlsevenzip&In-Reply-To=%3C20080907210638.3D9C54A43%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001153.html">
   <LINK REL="Next"  HREF="001155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r6384 -	trunk/tools/ArchiveMoverLinux/libmlsevenzip</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6384%20-%0A%09trunk/tools/ArchiveMoverLinux/libmlsevenzip&In-Reply-To=%3C20080907210638.3D9C54A43%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r6384 -	trunk/tools/ArchiveMoverLinux/libmlsevenzip">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Sun Sep  7 23:06:38 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001153.html">[Taspring-linux-commit] r6383 - in trunk: . rts rts/Game rts/System	rts/System/Sync
</A></li>
        <LI>Next message: <A HREF="001155.html">[Taspring-linux-commit] r6385 - in trunk: rts/System	tools/MapDesigner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1154">[ date ]</a>
              <a href="thread.html#1154">[ thread ]</a>
              <a href="subject.html#1154">[ subject ]</a>
              <a href="author.html#1154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: det
Date: 2008-09-07 23:06:38 +0200 (Sun, 07 Sep 2008)
New Revision: 6384

Modified:
   trunk/tools/ArchiveMoverLinux/libmlsevenzip/ml_sevenzip.c
Log:
ArchiveMoverLinux
 * Minor cleanup


Modified: trunk/tools/ArchiveMoverLinux/libmlsevenzip/ml_sevenzip.c
===================================================================
--- trunk/tools/ArchiveMoverLinux/libmlsevenzip/ml_sevenzip.c	2008-09-07 21:05:40 UTC (rev 6383)
+++ trunk/tools/ArchiveMoverLinux/libmlsevenzip/ml_sevenzip.c	2008-09-07 21:06:38 UTC (rev 6384)
@@ -93,10 +93,10 @@
 {
 
   CFileInStream *archive_in = (CFileInStream *) object;
-  value readable = (archive_in-&gt;readable);
-  CAMLparam1 (readable);
-  CAMLlocal4 (read, tuple, ml_string, ml_size);
+  CAMLparam0 ();
+  CAMLlocal5 (readable, read, tuple, ml_string, ml_size);
 
+  readable = archive_in-&gt;readable;
   read = Field(readable, 0);
   tuple = caml_callback(read, Val_int(*size));
   ml_string = Field(tuple, 0);
@@ -113,10 +113,10 @@
 SRes ml_sevenzip_seek(void *object, CFileSize pos, ESzSeek origin)
 {
   CFileInStream *archive_in = (CFileInStream *) object;
-  value readable = archive_in-&gt;readable;
-  CAMLparam1 (readable);
-  CAMLlocal2 (seek, term);
+  CAMLparam0 ();
+  CAMLlocal3 (readable, seek, term);
 
+  readable = archive_in-&gt;readable;
   seek = Field(readable, 1);
 
   switch (origin) {
@@ -176,17 +176,16 @@
 value ml_sevenzip_entries(value sevenzip)
 {
   CAMLparam1 (sevenzip);
-  CAMLlocal1 (entries);
+  CAMLlocal2 (entries, entry);
   CSzArEx db = sevenzip_in_file_val(sevenzip);
 
   entries = caml_alloc (db.db.NumFiles, 0);
 
   UInt32 i;
-  for (i = 0; i &lt; db.db.NumFiles; i++)
-    {
-      value entry = alloc_sevenzip_entry(db, i);
-      Store_field (entries, i, entry);
-    }
+  for (i = 0; i &lt; db.db.NumFiles; i++) {
+    entry = alloc_sevenzip_entry(db, i);
+    Store_field (entries, i, entry);
+  }
 
   CAMLreturn (entries);
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001153.html">[Taspring-linux-commit] r6383 - in trunk: . rts rts/Game rts/System	rts/System/Sync
</A></li>
	<LI>Next message: <A HREF="001155.html">[Taspring-linux-commit] r6385 - in trunk: rts/System	tools/MapDesigner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1154">[ date ]</a>
              <a href="thread.html#1154">[ thread ]</a>
              <a href="subject.html#1154">[ subject ]</a>
              <a href="author.html#1154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
