<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r5307 - in trunk/Lobby/AFLobby/src/aflobby:	. helpers protocol/tasserver
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5307%20-%20in%20trunk/Lobby/AFLobby/src/aflobby%3A%0A%09.%20helpers%20protocol/tasserver&In-Reply-To=%3CE1JDQLg-0004N8-W0%40proserver.fnord.lan%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000114.html">
   <LINK REL="Next"  HREF="000116.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r5307 - in trunk/Lobby/AFLobby/src/aflobby:	. helpers protocol/tasserver</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5307%20-%20in%20trunk/Lobby/AFLobby/src/aflobby%3A%0A%09.%20helpers%20protocol/tasserver&In-Reply-To=%3CE1JDQLg-0004N8-W0%40proserver.fnord.lan%3E"
       TITLE="[Taspring-linux-commit] r5307 - in trunk/Lobby/AFLobby/src/aflobby:	. helpers protocol/tasserver">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Fri Jan 11 21:19:28 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000114.html">[Taspring-linux-commit] r5306 - trunk/rts/Game/UI
</A></li>
        <LI>Next message: <A HREF="000116.html">[Taspring-linux-commit] r5308 - trunk/rts/Game/UI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#115">[ date ]</a>
              <a href="thread.html#115">[ thread ]</a>
              <a href="subject.html#115">[ subject ]</a>
              <a href="author.html#115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tnowell
Date: 2008-01-11 21:19:28 +0100 (Fri, 11 Jan 2008)
New Revision: 5307

Modified:
   trunk/Lobby/AFLobby/src/aflobby/CBattleModel.java
   trunk/Lobby/AFLobby/src/aflobby/CBattlePlayerTableModel.java
   trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form
   trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java
   trunk/Lobby/AFLobby/src/aflobby/CChannel.java
   trunk/Lobby/AFLobby/src/aflobby/CChatPanel.java
   trunk/Lobby/AFLobby/src/aflobby/CGlestBattleModel.java
   trunk/Lobby/AFLobby/src/aflobby/CPrivateMsgWindow.form
   trunk/Lobby/AFLobby/src/aflobby/CPrivateMsgWindow.java
   trunk/Lobby/AFLobby/src/aflobby/CStartBox.form
   trunk/Lobby/AFLobby/src/aflobby/CStartBox.java
   trunk/Lobby/AFLobby/src/aflobby/CStartRectangleDrawer.java
   trunk/Lobby/AFLobby/src/aflobby/CToast.form
   trunk/Lobby/AFLobby/src/aflobby/CToast.java
   trunk/Lobby/AFLobby/src/aflobby/CUnitSyncJNIBindings.java
   trunk/Lobby/AFLobby/src/aflobby/IBattleModel.java
   trunk/Lobby/AFLobby/src/aflobby/helpers/CStringHelper.java
   trunk/Lobby/AFLobby/src/aflobby/protocol/tasserver/CTASServerProtocol.java
Log:
- added a lot of the extra unitsync bindings added in 0.76b1
- added white space formatting to unitsync JNI bindings
- corrected a bug with multiple spaces in messages
- corrected multiple spaces in channel headers to fix ascii art
- basic client support for mod and map options
- corrected formatting issues for private message window
- fixed toast window updates making the window vanish as soon as it was to appear, and fiddled the timing of message removal
- fixed ally and team numbers starting at zero, they're now incremented to fit in with the other lobbies
- corrected code to suit changes to the TASServer protocol in 0.76b1
- fixed a GUI quirk in the battle window involving the 3 sliders and alignment, they're now properly aligned and stretch to the full width of the window.
- modifications to fix some boxes in the starting rectangle drawer being missed out

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleModel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleModel.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleModel.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -327,6 +327,7 @@
             
         } else if (e.IsEvent(&quot;SETSCRIPTTAGS&quot;)){
             
+            RemoveAllOptions();
             String[] pairs = e.parameters.split(&quot;\t&quot;);
             
             for(int i = 0; i&lt; pairs.length; i++){
@@ -360,6 +361,12 @@
                 } else if(key.equalsIgnoreCase(&quot;GAME/GhostedBuildings&quot;)){
                     battlewindow.setGhostedBuildings(Integer.parseInt(value)==1);
                     
+                } else {
+                    this.PutOption(key, value);
+                    /*LM.Toasts.AddMessage(
+                            &quot;Error:: Custom mod/ma options where used, this &quot;+
+                            &quot;build of AFLobby does not support custom mod/&quot;+
+                            &quot;map options, your game will not sync&quot;);*/
                 }
                 
             }
@@ -641,24 +648,30 @@
         LM.protocol.SendTraffic(&quot;SAYBATTLEEX  &quot; + message);
     }
 
+    private Map&lt;String, Object&gt; options = new TreeMap&lt;String, Object&gt;();
+    
     public Map&lt;String, Object&gt; GetOptions() {
-        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);
+        return options;
     }
 
     public Object GetOption(String option) {
-        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);
+        return options.get(option);
     }
 
     public boolean HasOption(String option) {
-        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);
+        return options.containsKey(option);
     }
 
     public void PutOption(String option, Object value) {
-        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);
+        options.put(option, value);
     }
 
     public void RemoveOption(String option) {
-        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);
+        options.remove(option);
     }
+
+    public void RemoveAllOptions() {
+        options.clear();
+    }
     //
 }

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattlePlayerTableModel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattlePlayerTableModel.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattlePlayerTableModel.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -105,11 +105,16 @@
             case 4:
                 // colour
                 BufferedImage i = new BufferedImage(16,16,BufferedImage.TYPE_INT_ARGB);
+                
                 Graphics2D g = i.createGraphics();
+                
                 g.setColor(b.getColor());
                 g.fillRoundRect(0, 0, 16, 16, 6, 6);
                 g.setColor(b.getColor().darker());
                 g.drawRoundRect(0, 0, 16, 16, 6, 6);
+                
+                g.dispose();
+                
                 return new ImageIcon(i);
                 //return b.statString;
             case 5:
@@ -128,13 +133,13 @@
                 if(b.isSpec()){
                     return &quot;s&quot;;
                 }
-                return b.getTeamNo();
+                return b.getTeamNo()+1;
                 
             case 8:
                 if(b.isSpec()){
                     return &quot;s&quot;;
                 }
-                return b.getAllyNo();
+                return b.getAllyNo()+1;
                 
             case 9:
                 // bonus%

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.form	2008-01-11 20:19:28 UTC (rev 5307)
@@ -55,9 +55,6 @@
     &lt;Container class=&quot;javax.swing.JTabbedPane&quot; name=&quot;GameOptionsPane&quot;&gt;
       &lt;Properties&gt;
         &lt;Property name=&quot;tabLayoutPolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
-        &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-          &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-        &lt;/Property&gt;
         &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
           &lt;Dimension value=&quot;[867, 548]&quot;/&gt;
         &lt;/Property&gt;
@@ -175,9 +172,6 @@
             &lt;/Container&gt;
             &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;sayButton&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                &lt;/Property&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                   &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Say&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
@@ -244,9 +238,6 @@
               &lt;SubComponents&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;ExitButton&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                       &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Exit&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                     &lt;/Property&gt;
@@ -259,9 +250,6 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;GameStartButton&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                       &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Start&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                     &lt;/Property&gt;
@@ -275,9 +263,6 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;LockToggle&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                       &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Lock&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                     &lt;/Property&gt;
@@ -288,9 +273,6 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;ReadyToggle&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                       &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Ready&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                     &lt;/Property&gt;
@@ -304,9 +286,6 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;SpectatorToggle&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                       &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Spectator&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                     &lt;/Property&gt;
@@ -317,9 +296,6 @@
                 &lt;/Component&gt;
                 &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel7&quot;&gt;
                   &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,true)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
                     &lt;Property name=&quot;horizontalAlignment&quot; type=&quot;int&quot; value=&quot;0&quot;/&gt;
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                       &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.map&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
@@ -705,42 +681,65 @@
           &lt;Layout&gt;
             &lt;DimensionLayout dim=&quot;0&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;LimitDGunCheck&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;GameSpeedLockCheck&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;GhostedCheck&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;DiminMMCheck&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Component id=&quot;LimitDGunCheck&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;GameSpeedLockCheck&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;GhostedCheck&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;DiminMMCheck&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;/Group&gt;
+                                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                          &lt;Component id=&quot;jLabel3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                          &lt;Component id=&quot;jLabel2&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;/Group&gt;
+                                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;40&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                          &lt;Component id=&quot;StartPosCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                          &lt;Component id=&quot;GameEndCombo&quot; alignment=&quot;0&quot; pref=&quot;275&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;/Group&gt;
+                                  &lt;/Group&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace pref=&quot;441&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;jLabel3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;jLabel2&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;40&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;HostButtonsPanel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace pref=&quot;624&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
                               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;StartPosCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;Component id=&quot;GameEndCombo&quot; alignment=&quot;0&quot; pref=&quot;275&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Component id=&quot;jLabel4&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;121&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;StartingMetalSlider&quot; linkSize=&quot;10&quot; pref=&quot;647&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;StartingMetalSpinner&quot; linkSize=&quot;9&quot; min=&quot;-2&quot; pref=&quot;64&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;/Group&gt;
+                                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                          &lt;Component id=&quot;jLabel5&quot; linkSize=&quot;5&quot; alignment=&quot;0&quot; pref=&quot;121&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                          &lt;Component id=&quot;jLabel6&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;121&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;/Group&gt;
+                                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                          &lt;Component id=&quot;MaxUnitsSlider&quot; linkSize=&quot;10&quot; min=&quot;0&quot; pref=&quot;647&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                          &lt;Component id=&quot;StartingEnergySlider&quot; linkSize=&quot;10&quot; alignment=&quot;0&quot; min=&quot;0&quot; pref=&quot;647&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;/Group&gt;
+                                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                          &lt;Component id=&quot;MaxUnitsSpinner&quot; linkSize=&quot;9&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;64&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                          &lt;Component id=&quot;StartingEnergySpinner&quot; linkSize=&quot;9&quot; min=&quot;-2&quot; pref=&quot;64&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;/Group&gt;
+                                  &lt;/Group&gt;
                               &lt;/Group&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;441&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jPanel8&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;jPanel10&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jPanel9&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;728&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;HostButtonsPanel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;624&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;
             &lt;DimensionLayout dim=&quot;1&quot;&gt;
@@ -766,13 +765,25 @@
                       &lt;Component id=&quot;GameSpeedLockCheck&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;LimitDGunCheck&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace type=&quot;unrelated&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel8&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel9&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace type=&quot;separate&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;StartingMetalSlider&quot; linkSize=&quot;8&quot; pref=&quot;23&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jLabel4&quot; linkSize=&quot;6&quot; alignment=&quot;0&quot; pref=&quot;23&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;StartingMetalSpinner&quot; linkSize=&quot;8&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel10&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;StartingEnergySpinner&quot; linkSize=&quot;8&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;StartingEnergySlider&quot; linkSize=&quot;8&quot; pref=&quot;23&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jLabel5&quot; linkSize=&quot;6&quot; alignment=&quot;1&quot; pref=&quot;23&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;jLabel6&quot; linkSize=&quot;6&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;MaxUnitsSpinner&quot; linkSize=&quot;8&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;MaxUnitsSlider&quot; linkSize=&quot;8&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;182&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;
@@ -780,9 +791,6 @@
           &lt;SubComponents&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;StartPosCombo&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                &lt;/Property&gt;
                 &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
                   &lt;StringArray count=&quot;3&quot;&gt;
                     &lt;StringItem index=&quot;0&quot; value=&quot;Fixed&quot;/&gt;
@@ -824,9 +832,6 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;GameEndCombo&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                &lt;/Property&gt;
                 &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
                   &lt;Connection code=&quot;new javax.swing.DefaultComboBoxModel(new String[] { bundle.getString(&quot;CBattleWindow.Destroy_All&quot;), bundle.getString(&quot;CBattleWindow.Destroy_Commander&quot;), bundle.getString(&quot;CBattleWindow.Lineage&quot;)})&quot; type=&quot;code&quot;/&gt;
                 &lt;/Property&gt;
@@ -838,9 +843,6 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;DiminMMCheck&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                &lt;/Property&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                   &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Diminishing_Metal_Maker_Returns&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
@@ -859,9 +861,6 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;GhostedCheck&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                &lt;/Property&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                   &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Ghosted_Buildings&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
@@ -880,9 +879,6 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;GameSpeedLockCheck&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                &lt;/Property&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                   &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
@@ -901,9 +897,6 @@
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;LimitDGunCheck&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                  &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                &lt;/Property&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
                   &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Limit_DGun_To_Start_Pos&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
@@ -920,230 +913,6 @@
                 &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;LimitDGunCheckStateChanged&quot;/&gt;
               &lt;/Events&gt;
             &lt;/Component&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel8&quot;&gt;
-
-              &lt;Layout&gt;
-                &lt;DimensionLayout dim=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jLabel4&quot; min=&quot;-2&quot; pref=&quot;121&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;StartingMetalSlider&quot; min=&quot;-2&quot; pref=&quot;192&quot; max=&quot;-2&quot; attributes=&quot;2&quot;/&gt;
-                          &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;StartingMetalSpinner&quot; min=&quot;-2&quot; pref=&quot;64&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-                &lt;DimensionLayout dim=&quot;1&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;StartingMetalSlider&quot; pref=&quot;30&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                      &lt;Component id=&quot;jLabel4&quot; alignment=&quot;0&quot; pref=&quot;23&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                      &lt;Component id=&quot;StartingMetalSpinner&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;/Group&gt;
-                                  &lt;EmptySpace pref=&quot;18&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-              &lt;/Layout&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel4&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;labelFor&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                      &lt;ComponentRef name=&quot;StartingMetalSlider&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Starting_Metal&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JSlider&quot; name=&quot;StartingMetalSlider&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;majorTickSpacing&quot; type=&quot;int&quot; value=&quot;500&quot;/&gt;
-                    &lt;Property name=&quot;maximum&quot; type=&quot;int&quot; value=&quot;10000&quot;/&gt;
-                    &lt;Property name=&quot;snapToTicks&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-                    &lt;Property name=&quot;value&quot; type=&quot;int&quot; value=&quot;1000&quot;/&gt;
-                    &lt;Property name=&quot;opaque&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;StartingMetalSliderStateChanged&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;StartingMetalSpinner&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;value&quot; type=&quot;java.lang.Object&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;1000&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;StartingMetalSpinnerStateChanged&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel9&quot;&gt;
-
-              &lt;Layout&gt;
-                &lt;DimensionLayout dim=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jLabel5&quot; min=&quot;-2&quot; pref=&quot;115&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;EmptySpace type=&quot;unrelated&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;StartingEnergySlider&quot; pref=&quot;188&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
-                          &lt;EmptySpace type=&quot;unrelated&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;StartingEnergySpinner&quot; min=&quot;-2&quot; pref=&quot;64&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-                &lt;DimensionLayout dim=&quot;1&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;StartingEnergySlider&quot; alignment=&quot;0&quot; pref=&quot;23&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;jLabel5&quot; alignment=&quot;0&quot; pref=&quot;23&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;StartingEnergySpinner&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-              &lt;/Layout&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel5&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;labelFor&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                      &lt;ComponentRef name=&quot;StartingEnergySlider&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Starting_Energy&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JSlider&quot; name=&quot;StartingEnergySlider&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;majorTickSpacing&quot; type=&quot;int&quot; value=&quot;500&quot;/&gt;
-                    &lt;Property name=&quot;maximum&quot; type=&quot;int&quot; value=&quot;10000&quot;/&gt;
-                    &lt;Property name=&quot;minorTickSpacing&quot; type=&quot;int&quot; value=&quot;500&quot;/&gt;
-                    &lt;Property name=&quot;snapToTicks&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-                    &lt;Property name=&quot;value&quot; type=&quot;int&quot; value=&quot;1000&quot;/&gt;
-                    &lt;Property name=&quot;opaque&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;StartingEnergySliderStateChanged&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;StartingEnergySpinner&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;StartingEnergySpinnerStateChanged&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel10&quot;&gt;
-
-              &lt;Layout&gt;
-                &lt;DimensionLayout dim=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jLabel6&quot; min=&quot;-2&quot; pref=&quot;121&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;MaxUnitsSlider&quot; pref=&quot;188&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
-                          &lt;EmptySpace type=&quot;unrelated&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;MaxUnitsSpinner&quot; min=&quot;-2&quot; pref=&quot;64&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-                &lt;DimensionLayout dim=&quot;1&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;MaxUnitsSlider&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;jLabel6&quot; alignment=&quot;1&quot; pref=&quot;23&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;MaxUnitsSpinner&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-              &lt;/Layout&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel6&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;labelFor&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                      &lt;ComponentRef name=&quot;MaxUnitsSlider&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                      &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Max_Units&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JSlider&quot; name=&quot;MaxUnitsSlider&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;maximum&quot; type=&quot;int&quot; value=&quot;5000&quot;/&gt;
-                    &lt;Property name=&quot;minorTickSpacing&quot; type=&quot;int&quot; value=&quot;100&quot;/&gt;
-                    &lt;Property name=&quot;snapToTicks&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-                    &lt;Property name=&quot;value&quot; type=&quot;int&quot; value=&quot;500&quot;/&gt;
-                    &lt;Property name=&quot;opaque&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;MaxUnitsSliderStateChanged&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;MaxUnitsSpinner&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;CUISettings.GetFont(12,false)&quot; type=&quot;code&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;MaxUnitsSpinnerStateChanged&quot;/&gt;
-                  &lt;/Events&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
             &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;HostButtonsPanel&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;opaque&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
@@ -1193,6 +962,93 @@
                 &lt;/Component&gt;
               &lt;/SubComponents&gt;
             &lt;/Container&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel4&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;labelFor&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;StartingMetalSlider&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Starting_Metal&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JSlider&quot; name=&quot;StartingMetalSlider&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;majorTickSpacing&quot; type=&quot;int&quot; value=&quot;500&quot;/&gt;
+                &lt;Property name=&quot;maximum&quot; type=&quot;int&quot; value=&quot;10000&quot;/&gt;
+                &lt;Property name=&quot;snapToTicks&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+                &lt;Property name=&quot;value&quot; type=&quot;int&quot; value=&quot;1000&quot;/&gt;
+                &lt;Property name=&quot;opaque&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;StartingMetalSliderStateChanged&quot;/&gt;
+              &lt;/Events&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;StartingMetalSpinner&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;value&quot; type=&quot;java.lang.Object&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;1000&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;StartingMetalSpinnerStateChanged&quot;/&gt;
+              &lt;/Events&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel5&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;labelFor&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;StartingEnergySlider&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Starting_Energy&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JSlider&quot; name=&quot;StartingEnergySlider&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;majorTickSpacing&quot; type=&quot;int&quot; value=&quot;500&quot;/&gt;
+                &lt;Property name=&quot;maximum&quot; type=&quot;int&quot; value=&quot;10000&quot;/&gt;
+                &lt;Property name=&quot;minorTickSpacing&quot; type=&quot;int&quot; value=&quot;500&quot;/&gt;
+                &lt;Property name=&quot;snapToTicks&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+                &lt;Property name=&quot;value&quot; type=&quot;int&quot; value=&quot;1000&quot;/&gt;
+                &lt;Property name=&quot;opaque&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;StartingEnergySliderStateChanged&quot;/&gt;
+              &lt;/Events&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;StartingEnergySpinner&quot;&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;StartingEnergySpinnerStateChanged&quot;/&gt;
+              &lt;/Events&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;MaxUnitsSpinner&quot;&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;MaxUnitsSpinnerStateChanged&quot;/&gt;
+              &lt;/Events&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JSlider&quot; name=&quot;MaxUnitsSlider&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;maximum&quot; type=&quot;int&quot; value=&quot;5000&quot;/&gt;
+                &lt;Property name=&quot;minorTickSpacing&quot; type=&quot;int&quot; value=&quot;100&quot;/&gt;
+                &lt;Property name=&quot;snapToTicks&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+                &lt;Property name=&quot;value&quot; type=&quot;int&quot; value=&quot;500&quot;/&gt;
+                &lt;Property name=&quot;opaque&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;stateChanged&quot; listener=&quot;javax.swing.event.ChangeListener&quot; parameters=&quot;javax.swing.event.ChangeEvent&quot; handler=&quot;MaxUnitsSliderStateChanged&quot;/&gt;
+              &lt;/Events&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel6&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;labelFor&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;MaxUnitsSlider&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CBattleWindow.Max_Units&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
           &lt;/SubComponents&gt;
         &lt;/Container&gt;
         &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;AITab&quot;&gt;
@@ -1210,7 +1066,7 @@
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jLabel9&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jLabel9&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;145&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
                           &lt;Component id=&quot;jSeparator1&quot; alignment=&quot;0&quot; pref=&quot;842&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
@@ -1267,8 +1123,8 @@
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jLabel9&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace type=&quot;separate&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jLabel9&quot; min=&quot;-2&quot; pref=&quot;26&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
                           &lt;Component id=&quot;jLabel14&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;AICombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;22&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CBattleWindow.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -23,6 +23,7 @@
 import java.util.Arrays;
 import java.util.Iterator;
 import java.util.List;
+import java.util.Map;
 import java.util.Timer;
 import java.util.TimerTask;
 import java.util.TreeMap;
@@ -860,18 +861,78 @@
                     System.out.println(m);
                     throw new NullPointerException();
                 }
+                
                 s += &quot;\tGameType=&quot; + an + &quot;;\n&quot;;
                 s += &quot;\tLimitDGun=&quot; + BooltoInt(info.limitDGun) + &quot;;\n&quot;;
                 s += &quot;\tDiminishingMMs=&quot; + BooltoInt(info.diminishingMMs) + &quot;;\n&quot;;
                 s += &quot;\tGhostedBuildings=&quot; + BooltoInt(info.ghostedBuildings) + &quot;;\n\n&quot;;
                 //+/**/&quot;
+                
                 if (this.info.GetHost().equalsIgnoreCase(LM.protocol.GetUsername())) {
                     s += &quot;\tHostIP=localhost;\n&quot;;
                 } else {
                     s += &quot;\tHostIP=&quot; + info.ip + &quot;;\n&quot;;
                 }
+                
                 s += &quot;\tHostPort=&quot; + info.port + &quot;;\n\n&quot;;
 
+                // mod options
+                
+                Map&lt;String, Object&gt; options = battlemodel.GetOptions();
+                
+                Map&lt;String, Object&gt; mapOptions = new TreeMap&lt;String, Object&gt;();
+                Map&lt;String, Object&gt; modOptions = new TreeMap&lt;String, Object&gt;();
+                Map&lt;String, Object&gt; generalOptions = new TreeMap&lt;String, Object&gt;();
+                
+                for(String k2 : options.keySet()){
+                    String k = k2.toLowerCase();
+                    k.replaceAll(&quot;\\\\&quot;, &quot;/&quot;);
+                    
+                    if(k.startsWith(&quot;game/mapoptions/&quot;)){
+                        //
+                        mapOptions.put(k.substring(16), options.get(k2));
+                    } else if(k.startsWith(&quot;game/modoptions/&quot;)){
+                        //
+                        modOptions.put(k.substring(16), options.get(k2));
+                    } else if(k.startsWith(&quot;game/&quot;)){
+                        //
+                        generalOptions.put(k.substring(5), options.get(k2));
+                    }
+                }
+                
+                if(!generalOptions.isEmpty()){
+                    //
+                    for(String k : generalOptions.keySet()){
+                        s += &quot;\t&quot; + k + &quot;=&quot; + generalOptions.get(k) + &quot;;\n&quot;;
+                    }
+                }
+                
+                if(!modOptions.isEmpty()){
+                    //
+                    s += &quot;\t[modoptions]\n&quot;;
+                    s += &quot;\t{\n&quot;;
+                    
+                    for(String k : modOptions.keySet()){
+                        s += &quot;\t\t&quot; + k + &quot;=&quot; + modOptions.get(k) + &quot;;\n&quot;;
+                    }
+                    
+                    s += &quot;\t}\n\n&quot;;
+                }
+                
+                if(!mapOptions.isEmpty()){
+                    //
+                    s += &quot;\t[mapoptions]\n&quot;;
+                    s += &quot;\t{\n&quot;;
+                    
+                    for(String k : mapOptions.keySet()){
+                        s += &quot;\t\t&quot; + k + &quot;=&quot; + mapOptions.get(k) + &quot;;\n&quot;;
+                    }
+                    
+                    s += &quot;\t}\n\n&quot;;
+                }
+                
+                
+                
                 for (int k = 0; k &lt; info.GetPlayerNames().size(); k++) {
                     String z = info.GetPlayerNames().get(k);
                     if (z.equalsIgnoreCase(LM.protocol.GetUsername())) {
@@ -1114,21 +1175,18 @@
         GhostedCheck = new javax.swing.JCheckBox();
         GameSpeedLockCheck = new javax.swing.JCheckBox();
         LimitDGunCheck = new javax.swing.JCheckBox();
-        jPanel8 = new javax.swing.JPanel();
+        HostButtonsPanel = new javax.swing.JPanel();
+        jButton1 = new javax.swing.JButton();
+        jButton2 = new javax.swing.JButton();
         jLabel4 = new javax.swing.JLabel();
         StartingMetalSlider = new javax.swing.JSlider();
         StartingMetalSpinner = new javax.swing.JSpinner();
-        jPanel9 = new javax.swing.JPanel();
         jLabel5 = new javax.swing.JLabel();
         StartingEnergySlider = new javax.swing.JSlider();
         StartingEnergySpinner = new javax.swing.JSpinner();
-        jPanel10 = new javax.swing.JPanel();
-        jLabel6 = new javax.swing.JLabel();
-        MaxUnitsSlider = new javax.swing.JSlider();
         MaxUnitsSpinner = new javax.swing.JSpinner();
-        HostButtonsPanel = new javax.swing.JPanel();
-        jButton1 = new javax.swing.JButton();
-        jButton2 = new javax.swing.JButton();
+        MaxUnitsSlider = new javax.swing.JSlider();
+        jLabel6 = new javax.swing.JLabel();
         AITab = new javax.swing.JPanel();
         AICombo = new javax.swing.JComboBox();
         AddAIButton = new javax.swing.JButton();
@@ -1180,7 +1238,6 @@
         });
 
         GameOptionsPane.setTabLayoutPolicy(javax.swing.JTabbedPane.SCROLL_TAB_LAYOUT);
-        GameOptionsPane.setFont(CUISettings.GetFont(12,false));
         GameOptionsPane.setMinimumSize(new java.awt.Dimension(867, 548));
         GameOptionsPane.setPreferredSize(new java.awt.Dimension(867, 548));
 
@@ -1206,7 +1263,6 @@
         jToolBar2.add(cSmileyCombo1);
         cSmileyCombo1.Init(UserMessage);
 
-        sayButton.setFont(CUISettings.GetFont(12,false));
         sayButton.setText(bundle.getString(&quot;CBattleWindow.Say&quot;)); // NOI18N
         sayButton.setMargin(new java.awt.Insets(2, 6, 2, 6));
         sayButton.addActionListener(new java.awt.event.ActionListener() {
@@ -1215,7 +1271,6 @@
             }
         });
 
-        ExitButton.setFont(CUISettings.GetFont(12,false));
         ExitButton.setText(bundle.getString(&quot;CBattleWindow.Exit&quot;)); // NOI18N
         ExitButton.setAlignmentX(1.0F);
         ExitButton.addMouseListener(new java.awt.event.MouseAdapter() {
@@ -1229,7 +1284,6 @@
             }
         });
 
-        GameStartButton.setFont(CUISettings.GetFont(12,false));
         GameStartButton.setText(bundle.getString(&quot;CBattleWindow.Start&quot;)); // NOI18N
         GameStartButton.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
@@ -1237,7 +1291,6 @@
             }
         });
 
-        LockToggle.setFont(CUISettings.GetFont(12,false));
         LockToggle.setText(bundle.getString(&quot;CBattleWindow.Lock&quot;)); // NOI18N
         LockToggle.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
@@ -1245,7 +1298,6 @@
             }
         });
 
-        ReadyToggle.setFont(CUISettings.GetFont(12,false));
         ReadyToggle.setText(bundle.getString(&quot;CBattleWindow.Ready&quot;)); // NOI18N
         ReadyToggle.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
@@ -1253,7 +1305,6 @@
             }
         });
 
-        SpectatorToggle.setFont(CUISettings.GetFont(12,false));
         SpectatorToggle.setText(bundle.getString(&quot;CBattleWindow.Spectator&quot;)); // NOI18N
         SpectatorToggle.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
@@ -1261,7 +1312,6 @@
             }
         });
 
-        jLabel7.setFont(CUISettings.GetFont(12,true));
         jLabel7.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
         jLabel7.setText(bundle.getString(&quot;CBattleWindow.map&quot;)); // NOI18N
         jLabel7.setVerticalAlignment(javax.swing.SwingConstants.BOTTOM);
@@ -1524,7 +1574,6 @@
 
         GameOptionsPane.addTab(&quot;Maps&quot;, MapTab);
 
-        StartPosCombo.setFont(CUISettings.GetFont(12,false));
         StartPosCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { &quot;Fixed&quot;, &quot;Random&quot;, &quot;Choose ingame&quot; }));
         StartPosCombo.addMouseListener(new java.awt.event.MouseAdapter() {
             public void mousePressed(java.awt.event.MouseEvent evt) {
@@ -1545,7 +1594,6 @@
         jLabel3.setLabelFor(GameEndCombo);
         jLabel3.setText(bundle.getString(&quot;CBattleWindow.Game_End_Condition&quot;)); // NOI18N
 
-        GameEndCombo.setFont(CUISettings.GetFont(12,false));
         GameEndCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { bundle.getString(&quot;CBattleWindow.Destroy_All&quot;), bundle.getString(&quot;CBattleWindow.Destroy_Commander&quot;), bundle.getString(&quot;CBattleWindow.Lineage&quot;)}));
         GameEndCombo.addMouseListener(new java.awt.event.MouseAdapter() {
             public void mousePressed(java.awt.event.MouseEvent evt) {
@@ -1558,7 +1606,6 @@
             }
         });
 
-        DiminMMCheck.setFont(CUISettings.GetFont(12,false));
         DiminMMCheck.setText(bundle.getString(&quot;CBattleWindow.Diminishing_Metal_Maker_Returns&quot;)); // NOI18N
         DiminMMCheck.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
         DiminMMCheck.setMargin(new java.awt.Insets(0, 0, 0, 0));
@@ -1568,7 +1615,6 @@
             }
         });
 
-        GhostedCheck.setFont(CUISettings.GetFont(12,false));
         GhostedCheck.setText(bundle.getString(&quot;CBattleWindow.Ghosted_Buildings&quot;)); // NOI18N
         GhostedCheck.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
         GhostedCheck.setMargin(new java.awt.Insets(0, 0, 0, 0));
@@ -1578,7 +1624,6 @@
             }
         });
 
-        GameSpeedLockCheck.setFont(CUISettings.GetFont(12,false));
         GameSpeedLockCheck.setText(bundle.getString(&quot;CBattleWindow.&quot;)); // NOI18N
         GameSpeedLockCheck.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
         GameSpeedLockCheck.setMargin(new java.awt.Insets(0, 0, 0, 0));
@@ -1588,7 +1633,6 @@
             }
         });
 
-        LimitDGunCheck.setFont(CUISettings.GetFont(12,false));
         LimitDGunCheck.setText(bundle.getString(&quot;CBattleWindow.Limit_DGun_To_Start_Pos&quot;)); // NOI18N
         LimitDGunCheck.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
         LimitDGunCheck.setMargin(new java.awt.Insets(0, 0, 0, 0));
@@ -1598,11 +1642,46 @@
             }
         });
 
-        jLabel4.setFont(CUISettings.GetFont(12,false));
+        HostButtonsPanel.setOpaque(false);
+
+        jButton1.setText(&quot;Fix Teams&quot;);
+        jButton1.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jButton1ActionPerformed(evt);
+            }
+        });
+
+        jButton2.setText(&quot;Force FFA&quot;);
+        jButton2.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jButton2ActionPerformed(evt);
+            }
+        });
+
+        javax.swing.GroupLayout HostButtonsPanelLayout = new javax.swing.GroupLayout(HostButtonsPanel);
+        HostButtonsPanel.setLayout(HostButtonsPanelLayout);
+        HostButtonsPanelLayout.setHorizontalGroup(
+            HostButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(HostButtonsPanelLayout.createSequentialGroup()
+                .addContainerGap()
+                .addComponent(jButton1)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                .addComponent(jButton2)
+                .addContainerGap(50, Short.MAX_VALUE))
+        );
+        HostButtonsPanelLayout.setVerticalGroup(
+            HostButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, HostButtonsPanelLayout.createSequentialGroup()
+                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .addGroup(HostButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
+                    .addComponent(jButton1)
+                    .addComponent(jButton2))
+                .addContainerGap())
+        );
+
         jLabel4.setLabelFor(StartingMetalSlider);
         jLabel4.setText(bundle.getString(&quot;CBattleWindow.Starting_Metal&quot;)); // NOI18N
 
-        StartingMetalSlider.setFont(CUISettings.GetFont(12,false));
         StartingMetalSlider.setMajorTickSpacing(500);
         StartingMetalSlider.setMaximum(10000);
         StartingMetalSlider.setSnapToTicks(true);
@@ -1614,7 +1693,6 @@
             }
         });
 
-        StartingMetalSpinner.setFont(CUISettings.GetFont(12,false));
         StartingMetalSpinner.setValue(1000);
         StartingMetalSpinner.addChangeListener(new javax.swing.event.ChangeListener() {
             public void stateChanged(javax.swing.event.ChangeEvent evt) {
@@ -1622,39 +1700,9 @@
             }
         });
 
-        javax.swing.GroupLayout jPanel8Layout = new javax.swing.GroupLayout(jPanel8);
-        jPanel8.setLayout(jPanel8Layout);
-        jPanel8Layout.setHorizontalGroup(
-            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(jPanel8Layout.createSequentialGroup()
-                .addContainerGap()
-                .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 121, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(StartingMetalSlider, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .addComponent(StartingMetalSpinner, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap())
-        );
-        jPanel8Layout.setVerticalGroup(
-            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(jPanel8Layout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addGroup(jPanel8Layout.createSequentialGroup()
-                        .addComponent(StartingMetalSlider, javax.swing.GroupLayout.DEFAULT_SIZE, 30, Short.MAX_VALUE)
-                        .addContainerGap())
-                    .addGroup(jPanel8Layout.createSequentialGroup()
-                        .addGroup(jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
-                            .addComponent(jLabel4, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 23, Short.MAX_VALUE)
-                            .addComponent(StartingMetalSpinner, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
-                        .addContainerGap(18, Short.MAX_VALUE))))
-        );
-
-        jLabel5.setFont(CUISettings.GetFont(12,false));
         jLabel5.setLabelFor(StartingEnergySlider);
         jLabel5.setText(bundle.getString(&quot;CBattleWindow.Starting_Energy&quot;)); // NOI18N
 
-        StartingEnergySlider.setFont(CUISettings.GetFont(12,false));
         StartingEnergySlider.setMajorTickSpacing(500);
         StartingEnergySlider.setMaximum(10000);
         StartingEnergySlider.setMinorTickSpacing(500);
@@ -1667,42 +1715,18 @@
             }
         });
 
-        StartingEnergySpinner.setFont(CUISettings.GetFont(12,false));
         StartingEnergySpinner.addChangeListener(new javax.swing.event.ChangeListener() {
             public void stateChanged(javax.swing.event.ChangeEvent evt) {
                 StartingEnergySpinnerStateChanged(evt);
             }
         });
 
-        javax.swing.GroupLayout jPanel9Layout = new javax.swing.GroupLayout(jPanel9);
-        jPanel9.setLayout(jPanel9Layout);
-        jPanel9Layout.setHorizontalGroup(
-            jPanel9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel9Layout.createSequentialGroup()
-                .addContainerGap()
-                .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
-                .addComponent(StartingEnergySlider, javax.swing.GroupLayout.DEFAULT_SIZE, 188, Short.MAX_VALUE)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
-                .addComponent(StartingEnergySpinner, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap())
-        );
-        jPanel9Layout.setVerticalGroup(
-            jPanel9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel9Layout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(jPanel9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
-                    .addComponent(StartingEnergySlider, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 23, Short.MAX_VALUE)
-                    .addComponent(jLabel5, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 23, Short.MAX_VALUE)
-                    .addComponent(StartingEnergySpinner, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap())
-        );
+        MaxUnitsSpinner.addChangeListener(new javax.swing.event.ChangeListener() {
+            public void stateChanged(javax.swing.event.ChangeEvent evt) {
+                MaxUnitsSpinnerStateChanged(evt);
+            }
+        });
 
-        jLabel6.setFont(CUISettings.GetFont(12,false));
-        jLabel6.setLabelFor(MaxUnitsSlider);
-        jLabel6.setText(bundle.getString(&quot;CBattleWindow.Max_Units&quot;)); // NOI18N
-
-        MaxUnitsSlider.setFont(CUISettings.GetFont(12,false));
         MaxUnitsSlider.setMaximum(5000);
         MaxUnitsSlider.setMinorTickSpacing(100);
         MaxUnitsSlider.setSnapToTicks(true);
@@ -1714,106 +1738,64 @@
             }
         });
 
-        MaxUnitsSpinner.setFont(CUISettings.GetFont(12,false));
-        MaxUnitsSpinner.addChangeListener(new javax.swing.event.ChangeListener() {
-            public void stateChanged(javax.swing.event.ChangeEvent evt) {
-                MaxUnitsSpinnerStateChanged(evt);
-            }
-        });
+        jLabel6.setLabelFor(MaxUnitsSlider);
+        jLabel6.setText(bundle.getString(&quot;CBattleWindow.Max_Units&quot;)); // NOI18N
 
-        javax.swing.GroupLayout jPanel10Layout = new javax.swing.GroupLayout(jPanel10);
-        jPanel10.setLayout(jPanel10Layout);
-        jPanel10Layout.setHorizontalGroup(
-            jPanel10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(jPanel10Layout.createSequentialGroup()
-                .addContainerGap()
-                .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 121, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(MaxUnitsSlider, javax.swing.GroupLayout.DEFAULT_SIZE, 188, Short.MAX_VALUE)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
-                .addComponent(MaxUnitsSpinner, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap())
-        );
-        jPanel10Layout.setVerticalGroup(
-            jPanel10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(jPanel10Layout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(jPanel10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addComponent(MaxUnitsSlider, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
-                    .addComponent(jLabel6, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 23, Short.MAX_VALUE)
-                    .addComponent(MaxUnitsSpinner, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap())
-        );
-
-        HostButtonsPanel.setOpaque(false);
-
-        jButton1.setText(&quot;Fix Teams&quot;);
-        jButton1.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                jButton1ActionPerformed(evt);
-            }
-        });
-
-        jButton2.setText(&quot;Force FFA&quot;);
-        jButton2.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                jButton2ActionPerformed(evt);
-            }
-        });
-
-        javax.swing.GroupLayout HostButtonsPanelLayout = new javax.swing.GroupLayout(HostButtonsPanel);
-        HostButtonsPanel.setLayout(HostButtonsPanelLayout);
-        HostButtonsPanelLayout.setHorizontalGroup(
-            HostButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(HostButtonsPanelLayout.createSequentialGroup()
-                .addContainerGap()
-                .addComponent(jButton1)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(jButton2)
-                .addContainerGap(50, Short.MAX_VALUE))
-        );
-        HostButtonsPanelLayout.setVerticalGroup(
-            HostButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, HostButtonsPanelLayout.createSequentialGroup()
-                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .addGroup(HostButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
-                    .addComponent(jButton1)
-                    .addComponent(jButton2))
-                .addContainerGap())
-        );
-
         javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
         jPanel6.setLayout(jPanel6Layout);
         jPanel6Layout.setHorizontalGroup(
             jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
-                .addContainerGap()
-                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
-                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
-                        .addComponent(LimitDGunCheck, javax.swing.GroupLayout.Alignment.LEADING)
-                        .addComponent(GameSpeedLockCheck, javax.swing.GroupLayout.Alignment.LEADING)
-                        .addComponent(GhostedCheck, javax.swing.GroupLayout.Alignment.LEADING)
-                        .addComponent(DiminMMCheck, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel6Layout.createSequentialGroup()
-                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                            .addComponent(jLabel3)
-                            .addComponent(jLabel2))
-                        .addGap(40, 40, 40)
-                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
-                            .addComponent(StartPosCombo, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                            .addComponent(GameEndCombo, 0, 275, Short.MAX_VALUE))))
-                .addContainerGap(441, Short.MAX_VALUE))
             .addGroup(jPanel6Layout.createSequentialGroup()
-                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
-                    .addComponent(jPanel8, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .addComponent(jPanel10, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .addComponent(jPanel9, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                .addGap(728, 728, 728))
-            .addGroup(jPanel6Layout.createSequentialGroup()
                 .addContainerGap()
-                .addComponent(HostButtonsPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap(624, Short.MAX_VALUE))
+                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
+                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
+                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
+                                .addComponent(LimitDGunCheck, javax.swing.GroupLayout.Alignment.LEADING)
+                                .addComponent(GameSpeedLockCheck, javax.swing.GroupLayout.Alignment.LEADING)
+                                .addComponent(GhostedCheck, javax.swing.GroupLayout.Alignment.LEADING)
+                                .addComponent(DiminMMCheck, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel6Layout.createSequentialGroup()
+                                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                                    .addComponent(jLabel3)
+                                    .addComponent(jLabel2))
+                                .addGap(40, 40, 40)
+                                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
+                                    .addComponent(StartPosCombo, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                                    .addComponent(GameEndCombo, 0, 275, Short.MAX_VALUE))))
+                        .addContainerGap(441, Short.MAX_VALUE))
+                    .addGroup(jPanel6Layout.createSequentialGroup()
+                        .addComponent(HostButtonsPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
+                        .addContainerGap(624, Short.MAX_VALUE))
+                    .addGroup(jPanel6Layout.createSequentialGroup()
+                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
+                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
+                                .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 121, javax.swing.GroupLayout.PREFERRED_SIZE)
+                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                                .addComponent(StartingMetalSlider, javax.swing.GroupLayout.DEFAULT_SIZE, 647, Short.MAX_VALUE)
+                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                                .addComponent(StartingMetalSpinner, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE))
+                            .addGroup(jPanel6Layout.createSequentialGroup()
+                                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                                    .addComponent(jLabel5, javax.swing.GroupLayout.DEFAULT_SIZE, 121, Short.MAX_VALUE)
+                                    .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 121, javax.swing.GroupLayout.PREFERRED_SIZE))
+                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
+                                    .addComponent(MaxUnitsSlider, 0, 647, Short.MAX_VALUE)
+                                    .addComponent(StartingEnergySlider, javax.swing.GroupLayout.Alignment.LEADING, 0, 647, Short.MAX_VALUE))
+                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
+                                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                                    .addComponent(MaxUnitsSpinner, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE)
+                                    .addComponent(StartingEnergySpinner, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE))))
+                        .addContainerGap())))
         );
+
+        jPanel6Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jLabel4, jLabel5, jLabel6});
+
+        jPanel6Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {MaxUnitsSpinner, StartingEnergySpinner, StartingMetalSpinner});
+
+        jPanel6Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {MaxUnitsSlider, StartingEnergySlider, StartingMetalSlider});
+
         jPanel6Layout.setVerticalGroup(
             jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(jPanel6Layout.createSequentialGroup()
@@ -1835,15 +1817,28 @@
                 .addComponent(GameSpeedLockCheck)
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addComponent(LimitDGunCheck)
-                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
-                .addComponent(jPanel8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addGap(18, 18, 18)
+                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                    .addComponent(StartingMetalSlider, javax.swing.GroupLayout.DEFAULT_SIZE, 23, Short.MAX_VALUE)
+                    .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, 23, Short.MAX_VALUE)
+                    .addComponent(StartingMetalSpinner, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(jPanel9, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
+                    .addComponent(StartingEnergySpinner, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
+                    .addComponent(StartingEnergySlider, javax.swing.GroupLayout.DEFAULT_SIZE, 23, Short.MAX_VALUE)
+                    .addComponent(jLabel5, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 23, Short.MAX_VALUE))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
-                .addComponent(jPanel10, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap(113, Short.MAX_VALUE))
+                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
+                    .addComponent(jLabel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .addComponent(MaxUnitsSpinner)
+                    .addComponent(MaxUnitsSlider, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
+                .addGap(182, 182, 182))
         );
 
+        jPanel6Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {jLabel4, jLabel5, jLabel6});
+
+        jPanel6Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {MaxUnitsSlider, MaxUnitsSpinner, StartingEnergySlider, StartingEnergySpinner, StartingMetalSlider, StartingMetalSpinner});
+
         GameOptionsPane.addTab(&quot;Game Options&quot;, jPanel6);
 
         AddAIButton.setText(&quot;Add AI&quot;);
@@ -1933,7 +1928,7 @@
             .addGroup(AITabLayout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(AITabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
-                    .addComponent(jLabel9)
+                    .addComponent(jLabel9, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE)
                     .addComponent(jSeparator1, javax.swing.GroupLayout.DEFAULT_SIZE, 842, Short.MAX_VALUE)
                     .addGroup(AITabLayout.createSequentialGroup()
                         .addGroup(AITabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
@@ -1983,8 +1978,8 @@
             AITabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(AITabLayout.createSequentialGroup()
                 .addContainerGap()
-                .addComponent(jLabel9)
-                .addGap(18, 18, 18)
+                .addComponent(jLabel9, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addGroup(AITabLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                     .addComponent(jLabel14)
                     .addComponent(AICombo, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
@@ -3163,13 +3158,10 @@
     private javax.swing.JLabel jLabel7;
     private javax.swing.JLabel jLabel8;
     private javax.swing.JLabel jLabel9;
-    private javax.swing.JPanel jPanel10;
     private javax.swing.JPanel jPanel2;
     private javax.swing.JPanel jPanel5;
     private javax.swing.JPanel jPanel6;
     private javax.swing.JPanel jPanel7;
-    private javax.swing.JPanel jPanel8;
-    private javax.swing.JPanel jPanel9;
     private javax.swing.JPopupMenu jPopupMenu1;
     private javax.swing.JScrollPane jScrollPane12;
     private javax.swing.JScrollPane jScrollPane2;

Modified: trunk/Lobby/AFLobby/src/aflobby/CChannel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChannel.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CChannel.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -465,7 +465,11 @@
                 Date topicset = new Date(Long.parseLong(e.data[3]));
                 String topic = Misc.toHTML(Misc.makeSentence(e.data, 4));
                 topic = topic.replaceAll(&quot;\\\\n&quot;, &quot;&lt;br&gt;&quot;);
-                AddMessage(&quot;&lt;font face=\&quot;Bitstream Vera Sans Mono, Andale Mono,Consolas, Courier New, Courier, Monospace\&quot; size=\&quot;3\&quot;&gt;&lt;b&gt;Topic : &lt;br&gt;&quot; + topic + &quot; set by :&quot; + e.data[2] + &quot; on &quot; + topicset.toString() + &quot;&lt;/b&gt;&lt;/font&gt;&quot;);
+                topic = aflobby.CChatPanel.ParseChatText(topic);
+                topic = &quot;&lt;font face=\&quot;Bitstream Vera Sans Mono, Andale Mono,Consolas, Courier New, Courier, Monospace\&quot; size=\&quot;3\&quot;&gt;&lt;b&gt;Topic : &lt;br&gt;&quot; + topic + &quot; set by :&quot; + e.data[2] + &quot; on &quot; + topicset.toString() + &quot;&lt;/b&gt;&lt;/font&gt;&quot;;
+                if (chatpanel != null) {
+                    chatpanel.AddRawHTML(topic);
+                }
                 logger.info(&quot;TOPIC: &quot; + Misc.makeSentence(e.data, 4));
                 lastsent = &quot;&quot;;
             }

Modified: trunk/Lobby/AFLobby/src/aflobby/CChatPanel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CChatPanel.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CChatPanel.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -162,7 +162,7 @@
         SwingUtilities.invokeLater (doWorkRunnable);
     }
     
-    public String ParseChatText(String msg){
+    public static  String ParseChatText(String msg){
         if(CSmileyManager.loaded==false){
             CSmileyManager.Init();
         }
@@ -171,6 +171,7 @@
         for (int i = 0; i &lt; CSmileyManager.smileys.length; i++) {//Misc.GetLobbyFolderPath ()+
             q = q.replaceAll (&quot;:&quot;+CSmileyManager.smileys[i]+&quot;:&quot;,&quot;&lt;img src=\&quot;file:/&quot;+Misc.GetAbsoluteLobbyFolderPath ()+&quot;images/smileys/&quot;+CSmileyManager.smileys[i]+&quot;.gif\&quot;&gt;&lt;/img&gt;&quot;);
         }
+        q = q.replaceAll(&quot; &quot;, &quot;&#160;&quot;);
         return q;
     }
     

Modified: trunk/Lobby/AFLobby/src/aflobby/CGlestBattleModel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CGlestBattleModel.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CGlestBattleModel.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -249,6 +249,10 @@
     public void RemoveOption(String option) {
         throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);
     }
+
+    public void RemoveAllOptions() {
+        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);
+    }
     
 
 }

Modified: trunk/Lobby/AFLobby/src/aflobby/CPrivateMsgWindow.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CPrivateMsgWindow.form	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CPrivateMsgWindow.form	2008-01-11 20:19:28 UTC (rev 5307)
@@ -161,6 +161,9 @@
                   &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;Accumulate_messages&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
                 &lt;/Property&gt;
               &lt;/Properties&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;jToggleButton1ActionPerformed&quot;/&gt;
+              &lt;/Events&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;aflobby.UI.CSmileyCombo&quot; name=&quot;cSmileyCombo1&quot;&gt;
               &lt;Properties&gt;
@@ -196,4 +199,4 @@
       &lt;/SubComponents&gt;
     &lt;/Container&gt;
   &lt;/SubComponents&gt;
-&lt;/Form&gt;
\ No newline at end of file
+&lt;/Form&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CPrivateMsgWindow.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CPrivateMsgWindow.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CPrivateMsgWindow.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -114,7 +114,7 @@
                         String time = &quot;&lt;font face=\&quot;Arial, Helvetica, sans-serif\&quot; size=\&quot;3\&quot; color=\&quot;&quot; + ColourHelper.ColourToHex(CTextColours.GetColor(&quot;timestamps&quot;, &quot;&quot;+Color.gray.getRGB())) + &quot;\&quot;&gt;[&quot; + Misc.easyDateFormat(&quot;hh:mm:ss&quot;) + &quot;] &lt;/font&gt;&quot;;
                         if (jToggleButton1.isSelected()) {
                             if (lastsent.equalsIgnoreCase(LM.protocol.GetUsername().trim()) == false) {//
-                                Add(&quot;&lt;font face=\&quot;Arial, Helvetica, sans-serif\&quot; size=\&quot;3\&quot;&gt;&lt;b&gt;&lt;i&gt;&quot; + LM.protocol.GetUsername() + &quot; &quot; + java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CPrivateMessageWindow._says:&quot;) + time + &quot;&lt;font face=\&quot;Arial, Helvetica, sans-serif\&quot; size=\&quot;3\&quot;&gt;&quot; + Msg + &quot;&lt;/font&gt;&quot;);
+                                Add(&quot;&lt;font face=\&quot;Arial, Helvetica, sans-serif\&quot; size=\&quot;3\&quot;&gt;&lt;b&gt;&lt;i&gt;&quot; + LM.protocol.GetUsername() + &quot; &quot; + java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CPrivateMessageWindow._says:&quot;)+&quot;&lt;/i&gt;&lt;/b&gt;&lt;br&gt;&quot; + time + &quot;&lt;font face=\&quot;Arial, Helvetica, sans-serif\&quot; size=\&quot;3\&quot;&gt;&quot; + Msg + &quot;&lt;/font&gt;&quot;);
                                 lastsent = LM.protocol.GetUsername().trim();
                             } else {//&lt;b&gt;&lt;i&gt;
                                 Add(time + &quot;&lt;font face=\&quot;Arial, Helvetica, sans-serif\&quot; size=\&quot;3\&quot;&gt;&quot; + Msg + &quot;&lt;/font&gt;&quot;);
@@ -219,6 +219,11 @@
         jToggleButton1.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 11));
         jToggleButton1.setSelected(true);
         jToggleButton1.setText(bundle.getString(&quot;Accumulate_messages&quot;)); // NOI18N
+        jToggleButton1.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                jToggleButton1ActionPerformed(evt);
+            }
+        });
 
         cSmileyCombo1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { &quot;Item 1&quot;, &quot;Item 2&quot;, &quot;Item 3&quot;, &quot;Item 4&quot; }));
 
@@ -230,7 +235,7 @@
                 .addContainerGap()
                 .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                     .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
-                        .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 340, Short.MAX_VALUE)
+                        .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 344, Short.MAX_VALUE)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 78, javax.swing.GroupLayout.PREFERRED_SIZE))
                     .addGroup(jPanel2Layout.createSequentialGroup()
@@ -248,7 +253,7 @@
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                     .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
-                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 63, Short.MAX_VALUE))
+                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 65, Short.MAX_VALUE))
                 .addContainerGap())
         );
 
@@ -308,6 +313,11 @@
         SendMessage();
     }//GEN-LAST:event_jButton1MousePressed
 
+    private void jToggleButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jToggleButton1ActionPerformed
+        accumulate = jToggleButton1.isSelected();
+    }//GEN-LAST:event_jToggleButton1ActionPerformed
+    
+    boolean accumulate = true;
     /**
      * @param args the command line arguments
      */
@@ -396,9 +406,9 @@
                 String Msg = CStringHelper.getChatHTML(Misc.makeSentence(e.data, 2),false);
                 String User = CStringHelper.getUserChatHTML(e.data[1]);
 
-                if (chat.GetAutoScroll()) {
+                if (accumulate) {
                     if (lastsent.equalsIgnoreCase(User.trim()) == false) {
-                        Add(User +&quot; &quot;+ java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;).getString(&quot;CPrivateMessageWindow._says:&quot;) +&quot;&lt;br&gt;&quot;+ time + Msg);
+                        Add(User +&quot; &lt;br&gt;&quot;+ time + Msg);
                         lastsent = User.trim();
                     } else {
                         Add(time + Msg);

Modified: trunk/Lobby/AFLobby/src/aflobby/CStartBox.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CStartBox.form	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CStartBox.form	2008-01-11 20:19:28 UTC (rev 5307)
@@ -1,6 +1,6 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
 
-&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JPanelFormInfo&quot;&gt;
+&lt;Form version=&quot;1.3&quot; maxVersion=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JPanelFormInfo&quot;&gt;
   &lt;Properties&gt;
     &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
       &lt;Connection code=&quot;new DefaultResizableBorder(6)&quot; type=&quot;code&quot;/&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CStartBox.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CStartBox.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CStartBox.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -21,7 +21,9 @@
     public CStartRectangleDrawer j;
     private int number = 0;
 
-    /** Creates new form CStartBox */
+    /** Creates new form CStartBox
+     * @param j 
+     */
     public CStartBox(CStartRectangleDrawer j) {
         this.j = j;
         number = j.boxes.size();

Modified: trunk/Lobby/AFLobby/src/aflobby/CStartRectangleDrawer.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CStartRectangleDrawer.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CStartRectangleDrawer.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -257,7 +257,7 @@
         java.awt.Dimension td = jLayeredPane1.getSize();
         for(int i = 0; i &lt; boxes.size (); i++){
             CStartBox c = boxes.get (i);
-            if(c.getNumber () &gt; highest){
+            //if(c.getNumber () &gt; highest){
                 highest = c.getNumber ();
                 
                 java.awt.Point p = c.getLocation ();
@@ -268,7 +268,7 @@
                     (int)(p.getX ()*(200/td.getWidth ()))+(int)(d.getWidth ()*(200/td.getWidth ())),
                     (int)(p.getY ()*(200/td.getHeight ()))+(int)(d.getHeight ()*(200/td.getHeight ()))
                     );
-            }
+//            }
             //RectHandler.
         }
         // update the lobby server with the enw rectangles

Modified: trunk/Lobby/AFLobby/src/aflobby/CToast.form
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CToast.form	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CToast.form	2008-01-11 20:19:28 UTC (rev 5307)
@@ -7,9 +7,6 @@
       &lt;ResourceString bundle=&quot;aflobby/languages.properties&quot; key=&quot;CToast.title&quot; replaceFormat=&quot;java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)&quot;/&gt;
     &lt;/Property&gt;
     &lt;Property name=&quot;alwaysOnTop&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-    &lt;Property name=&quot;font&quot; type=&quot;java.awt.Font&quot; editor=&quot;org.netbeans.beaninfo.editors.FontEditor&quot;&gt;
-      &lt;Font name=&quot;Arial&quot; size=&quot;10&quot; style=&quot;0&quot;/&gt;
-    &lt;/Property&gt;
     &lt;Property name=&quot;iconImage&quot; type=&quot;java.awt.Image&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
       &lt;Connection code=&quot;CUISettings.GetWindowIcon()&quot; type=&quot;code&quot;/&gt;
     &lt;/Property&gt;
@@ -36,9 +33,9 @@
     &lt;DimensionLayout dim=&quot;1&quot;&gt;
       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;jScrollPane1&quot; min=&quot;-2&quot; pref=&quot;182&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jScrollPane1&quot; pref=&quot;182&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
           &lt;/Group&gt;
       &lt;/Group&gt;
     &lt;/DimensionLayout&gt;

Modified: trunk/Lobby/AFLobby/src/aflobby/CToast.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CToast.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CToast.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -64,7 +64,6 @@
         java.util.ResourceBundle bundle = java.util.ResourceBundle.getBundle(&quot;aflobby/languages&quot;); // NOI18N
         setTitle(bundle.getString(&quot;CToast.title&quot;)); // NOI18N
         setAlwaysOnTop(true);
-        setFont(new java.awt.Font(&quot;Arial&quot;, 0, 10));
         setIconImage(CUISettings.GetWindowIcon());
 
         jScrollPane1.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
@@ -88,8 +87,8 @@
             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(layout.createSequentialGroup()
                 .addContainerGap()
-                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 182, javax.swing.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 182, Short.MAX_VALUE)
+                .addContainerGap())
         );
 
         pack();
@@ -113,13 +112,14 @@
     public void Update (){
         //
         a++;
-        if(a &gt; 300){
+        if(a &gt; 1000){
             Runnable doWorkRunnable = new Runnable () {
                 public void run () {
                     
                     if(!msgs.isEmpty ()){
                         
                         msgs.remove (0);
+                        RedrawMsgs ();
                     }else if(isVisible ()){
                         setVisible (false);
                     }

Modified: trunk/Lobby/AFLobby/src/aflobby/CUnitSyncJNIBindings.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/CUnitSyncJNIBindings.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/CUnitSyncJNIBindings.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -31,6 +31,9 @@
     }
 
     // load up the UnitSync.dll/UnitSync.so library
+    /**
+     * A boolean signifying if the library is loaded. If the library is
+     */
     public static boolean loaded = false;
 
     public static boolean LoadUnitSync(String libpath) {
@@ -77,102 +80,139 @@
     }
 
 
-    public static native String GetSpringVersion();
+    public static native String     GetSpringVersion();
 
-    public static native void Message(String p_szMessage);
+    public static native void       Message(String p_szMessage);
 
-    public static native int Init(boolean isServer, int id);
+    public static native int        Init(boolean isServer, int id);
+    public static native void       UnInit();
 
-    public static native void UnInit();
+    public static native int        ProcessUnits();
+    public static native int        ProcessUnitsNoChecksum();
 
-    public static native int ProcessUnits();
+    public static native String     GetCurrentList();
 
-    public static native int ProcessUnitsNoChecksum();
+    public static native void       AddClient(int id, String unitList);
+    public static native void       RemoveClient(int id);
 
-    public static native String GetCurrentList();
+    public static native String     GetClientDiff(int id);
+    public static native void       InstallClientDiff(String diff);
 
-    public static native void AddClient(int id, String unitList);
+    public static native int        GetUnitCount();
+    public static native String     GetUnitName(int unit);
+    public static native String     GetFullUnitName(int unit);
+    public static native int        IsUnitDisabled(int unit);
+    public static native int        IsUnitDisabledByClient(int unit, int clientId);
 
-    public static native void RemoveClient(int id);
 
-    public static native String GetClientDiff(int id);
+    public static native void       AddArchive(String name);
+    public static native void       AddAllArchives(String root);
 
-    public static native void InstallClientDiff(String diff);
+    public static native String     GetArchiveChecksum(String arname); //unsigned integer
 
-    public static native int GetUnitCount();
+    public static native int        GetMapCount();
+    public static native String     GetMapName(int index);
 
-    public static native String GetUnitName(int unit);
+    //public static native int      GetMapInfoEx(String name, MapInfo outInfo, int version);
 
-    public static native String GetFullUnitName(int unit);
+    //public static native void*    GetMinimap(String filename, int miplevel);
+    
+    public static native int        GetMapArchiveCount(String mapName);
+    public static native String     GetMapArchiveName(int index);
+    public static native String     GetMapChecksum(int index); // unsigned
 
-    public static native int IsUnitDisabled(int unit);
+    public static native int        GetPrimaryModCount();
 
-    public static native int IsUnitDisabledByClient(int unit, int clientId);
+    public static native String     GetPrimaryModName(int index);
+    public static native String     GetPrimaryModArchive(int index);
+    public static native int        GetPrimaryModArchiveCount(int index);
+    public static native String     GetPrimaryModArchiveList(int arnr);
 
-    //public static native int InitArchiveScanner();
-    public static native void AddArchive(String name);
+    public static native int        GetPrimaryModIndex(String name);
 
-    public static native void AddAllArchives(String root);
+    public static native String     GetPrimaryModChecksum(int index); //unsigned
+    public static native String     GetPrimaryModChecksumFromName(String name);
+    
+    public static native String     GetPrimaryModDescription(int index);
+    public static native String     GetPrimaryModMutator(int index);
+    public static native String     GetPrimaryModVersion(int index);
+    public static native String     GetPrimaryModShortGame(int index);
+    public static native String     GetPrimaryModGame(int index);
+    public static native String     GetPrimaryModShortName(int index);
 
-    public static native String GetArchiveChecksum(String arname); //unsigned integer
+    public static native int        GetSideCount();
+    public static native String     GetSideName(int side);
 
-    public static native int GetMapCount();
 
-    public static native String GetMapName(int index);
+    public static native int        OpenFileVFS(String name);
+    public static native void       CloseFileVFS(int handle);
+    public static native String     ReadFileVFS(int handle);
+    public static native int        FileSizeVFS(int handle);
 
-    //public static native int GetMapInfoEx(String name, MapInfo outInfo, int version);
-    //public static native int GetMapInfo(String name, MapInfo outInfo);
-    //public static native void* GetMinimap(String filename, int miplevel);
-    public static native int GetMapArchiveCount(String mapName);
+    public static native int        InitFindVFS ();
+    public static native String     SearchVFS (String pattern);////////////
+    
+    public static native int        OpenArchive(String name);
+    public static native void       CloseArchive(int archive);
+    public static native int        FindFilesArchive(int archive, int cur, String nameBuf, int size);
 
-    public static native String GetMapArchiveName(int index);
+    public static native int        OpenArchiveFile(int archive, String name);
+    public static native String     ReadArchiveFile(int archive, int handle);
+    public static native void       CloseArchiveFile(int archive, int handle);
+    public static native int        SizeArchiveFile(int archive, int handle);
 
-    public static native String GetMapChecksum(int index); // unsigned
+    public static native String     GetDataDirs(boolean write);
 
-    public static native int GetPrimaryModCount();
-
-    public static native String GetPrimaryModName(int index);
-
-    public static native String GetPrimaryModArchive(int index);
-
-    public static native int GetPrimaryModArchiveCount(int index);
-
-    public static native String GetPrimaryModArchiveList(int arnr);
-
-    public static native int GetPrimaryModIndex(String name);
-
-    public static native String GetPrimaryModChecksum(int index); //unsigned
-
-    public static native int GetSideCount();
-
-    public static native String GetSideName(int side);
-
-
-    public static native int OpenFileVFS(String name);
-
-    public static native void CloseFileVFS(int handle);
-
-    public static native String ReadFileVFS(int handle);
-
-    public static native int FileSizeVFS(int handle);
-
-    public static native int InitFindVFS ();
-    public static native String SearchVFS (String pattern);////////////
-    public static native int OpenArchive(String name);
-
-    public static native void CloseArchive(int archive);
-
-    public static native int FindFilesArchive(int archive, int cur, String nameBuf, int size);
-
-    public static native int OpenArchiveFile(int archive, String name);
-
-    public static native String ReadArchiveFile(int archive, int handle);
-
-    public static native void CloseArchiveFile(int archive, int handle);
-
-    public static native int SizeArchiveFile(int archive, int handle);
-
-    public static native String GetDataDirs(boolean write);
-
-    public static native boolean WriteMiniMap(String mapfile, String imagename, int miplevel);
+    public static native boolean    WriteMiniMap(String mapfile, String imagename, int miplevel);
+    
+    // 0.76b1+ additions
+    
+    public static native String     GetMapInfo();
+    
+    
+    // Spring settings and configuration options
+    
+    public static native void       SetSpringConfigFloat(String name, float value);
+    public static native void       SetSpringConfigInt(String name, int value);
+    public static native void       SetSpringConfigString(String name, String value);
+    
+    public static native float      GetSpringConfigFloat(String name, float defvalue);
+    public static native int        GetSpringConfigInt(String name, int defvalue);
+    public static native String     GetSpringConfigString(String name, String defvalue);
+    
+    
+    // lua custom lobby settings
+    
+    public static native int        GetMapOptionCount(String mapName);
+    public static native int        GetModOptionCount();
+    
+    public static native String     GetOptionKey(int optIndex);
+    public static native String     GetOptionName(int optIndex);
+    public static native String     GetOptionDesc(int optIndex);
+    public static native int        GetOptionType(int optIndex);
+    
+    
+    // boolean options
+    
+    public static native int        GetOptionBoolDef(int optIndex);
+    
+    
+    // Number Options
+    public static native float      GetOptionNumberDef(int optIndex);
+    public static native float      GetOptionNumberMin(int optIndex);
+    public static native float      GetOptionNumberMax(int optIndex);
+    public static native float      GetOptionNumberStep(int optIndex);
+    
+    // String options
+    public static native String     GetOptionStringDef(int optIndex);
+    public static native int        GetOptionStringMaxLen(int optIndex);
+    
+    // List options
+    public static native int        GetOptionListCount(int optIndex);
+    public static native String     GetOptionListDef(int optIndex);
+    public static native String     GetOptionListItemKey(int optIndex, int itemIndex);
+    public static native String     GetOptionListItemName(int optIndex, int itemIndex);
+    public static native String     GetOptionListItemDesc(int optIndex, int itemIndex);
+    
+    
 }

Modified: trunk/Lobby/AFLobby/src/aflobby/IBattleModel.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/IBattleModel.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/IBattleModel.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -47,5 +47,6 @@
     public boolean HasOption(String option);
     public void PutOption(String option,Object value);
     public void RemoveOption(String option);
+    public void RemoveAllOptions();
     
 }

Modified: trunk/Lobby/AFLobby/src/aflobby/helpers/CStringHelper.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/helpers/CStringHelper.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/helpers/CStringHelper.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -5,8 +5,9 @@
 
 package aflobby.helpers;
 
-import aflobby.*;
-import aflobby.helpers.CBase64Coder;
+import aflobby.CTextColours;
+import aflobby.ColourHelper;
+import aflobby.Misc;
 import java.awt.Color;
 import java.security.MessageDigest;
 import java.security.NoSuchAlgorithmException;

Modified: trunk/Lobby/AFLobby/src/aflobby/protocol/tasserver/CTASServerProtocol.java
===================================================================
--- trunk/Lobby/AFLobby/src/aflobby/protocol/tasserver/CTASServerProtocol.java	2008-01-11 20:16:12 UTC (rev 5306)
+++ trunk/Lobby/AFLobby/src/aflobby/protocol/tasserver/CTASServerProtocol.java	2008-01-11 20:19:28 UTC (rev 5307)
@@ -139,15 +139,16 @@
             int i = Integer.parseInt(e.data[1]);
             CBattleInfo b = GetBattles().get(i);
             // JOINBATTLE BATTLE_ID startingmetal startingenery maxunits startpos gameendcondition limitdgun diminishingMMs ghostedBuildings hashcode
-            b.metal = Integer.parseInt(e.data[2]);
+            // JOINBATTLE BATTLE_ID hashcode
+            /*b.metal = Integer.parseInt(e.data[2]);
             b.energy = Integer.parseInt(e.data[3]);
             b.maxunits = Integer.parseInt(e.data[4]);
             b.startPos = Integer.parseInt(e.data[5]);
             b.gameEndCondition = Integer.parseInt(e.data[6]);
             b.limitDGun = CBattleWindow.InttoBool(Integer.parseInt(e.data[7]));
             b.diminishingMMs = CBattleWindow.InttoBool(Integer.parseInt(e.data[8]));
-            b.ghostedBuildings = CBattleWindow.InttoBool(Integer.parseInt(e.data[9]));
-            b.maphash = e.data[10];
+            b.ghostedBuildings = CBattleWindow.InttoBool(Integer.parseInt(e.data[9]));*/
+            b.modhash = e.data[2];
             
             if (b != null) {
                 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000114.html">[Taspring-linux-commit] r5306 - trunk/rts/Game/UI
</A></li>
	<LI>Next message: <A HREF="000116.html">[Taspring-linux-commit] r5308 - trunk/rts/Game/UI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#115">[ date ]</a>
              <a href="thread.html#115">[ thread ]</a>
              <a href="subject.html#115">[ subject ]</a>
              <a href="author.html#115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
