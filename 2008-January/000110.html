<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r5302 - in trunk/rts/System/Net: . Test
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5302%20-%20in%20trunk/rts/System/Net%3A%20.%20Test&In-Reply-To=%3CE1JD4EN-0006Hk-AO%40proserver.fnord.lan%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000109.html">
   <LINK REL="Next"  HREF="000111.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r5302 - in trunk/rts/System/Net: . Test</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r5302%20-%20in%20trunk/rts/System/Net%3A%20.%20Test&In-Reply-To=%3CE1JD4EN-0006Hk-AO%40proserver.fnord.lan%3E"
       TITLE="[Taspring-linux-commit] r5302 - in trunk/rts/System/Net: . Test">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Thu Jan 10 21:42:27 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000109.html">[Taspring-linux-commit] r5301 - trunk/Lobby/TASServer
</A></li>
        <LI>Next message: <A HREF="000111.html">[Taspring-linux-commit] r5303 - trunk/rts/Sim/Weapons
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110">[ date ]</a>
              <a href="thread.html#110">[ thread ]</a>
              <a href="subject.html#110">[ subject ]</a>
              <a href="author.html#110">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tvo
Date: 2008-01-10 21:42:26 +0100 (Thu, 10 Jan 2008)
New Revision: 5302

Modified:
   trunk/rts/System/Net/ProtocolDef.cpp
   trunk/rts/System/Net/ProtocolDef.h
   trunk/rts/System/Net/Test/main.cpp
Log:
* Add argument to netcode UnitTest to use for server address.
  This makes it work on vserver, where apparently recvfrom() gets the outside
  IP as sender address even if the connection originated locally.
* Remove executable bit of some C++ files.




Property changes on: trunk/rts/System/Net/ProtocolDef.cpp
___________________________________________________________________
Name: svn:executable
   - *


Property changes on: trunk/rts/System/Net/ProtocolDef.h
___________________________________________________________________
Name: svn:executable
   - *

Modified: trunk/rts/System/Net/Test/main.cpp
===================================================================
--- trunk/rts/System/Net/Test/main.cpp	2008-01-10 16:00:21 UTC (rev 5301)
+++ trunk/rts/System/Net/Test/main.cpp	2008-01-10 20:42:26 UTC (rev 5302)
@@ -51,7 +51,7 @@
 	return true;
 }
 
-int main()
+int main(int argc, const char* const* argv)
 {
 	// prepare test packets:
 	unsigned char buffer[10];
@@ -83,7 +83,7 @@
 	std::cout &lt;&lt; &quot;Testing UDP networking...&quot; &lt;&lt; std::endl;
 	
 	netcode::CNet* client = new netcode::CNet();
-	client-&gt;InitClient(&quot;localhost&quot;, serverportnum, 5001, 1);
+	client-&gt;InitClient(argc &gt; 1 ? argv[1] : &quot;localhost&quot;, serverportnum, 5001, 1);
 	
 	client-&gt;RegisterMessage((unsigned char)0, 10);
 	client-&gt;RegisterMessage((unsigned char)1, 100);


Property changes on: trunk/rts/System/Net/Test/main.cpp
___________________________________________________________________
Name: svn:executable
   - *


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000109.html">[Taspring-linux-commit] r5301 - trunk/Lobby/TASServer
</A></li>
	<LI>Next message: <A HREF="000111.html">[Taspring-linux-commit] r5303 - trunk/rts/Sim/Weapons
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110">[ date ]</a>
              <a href="thread.html#110">[ thread ]</a>
              <a href="subject.html#110">[ subject ]</a>
              <a href="author.html#110">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
