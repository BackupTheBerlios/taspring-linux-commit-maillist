<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r6295 - in trunk/rts: Game Game/Camera	Game/StartScripts Game/UI Lua Map Rendering Rendering/Env	Rendering/GL Rendering/Textures Rendering/UnitModels Sim	Sim/Features Sim/Misc Sim/MoveTypes Sim/Objects Sim/Path	Sim/Projectiles Sim/Projectiles/Unsynced	Sim/Projectiles/WeaponProjectiles Sim/Units Sim/Units/COB	Sim/Units/CommandAI System
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6295%20-%20in%20trunk/rts%3A%20Game%20Game/Camera%0A%09Game/StartScripts%20Game/UI%20Lua%20Map%20Rendering%20Rendering/Env%0A%09Rendering/GL%20Rendering/Textures%20Rendering/UnitModels%20Sim%0A%09Sim/Features%20Sim/Misc%20Sim/MoveTypes%20Sim/Objects%20Sim/Path%0A%09Sim/Projectiles%20Sim/Projectiles/Unsynced%0A%09Sim/Projectiles/WeaponProjectiles%20Sim/Units%20Sim/Units/COB%0A%09Sim/Units/CommandAI%20System&In-Reply-To=%3C20080821223509.D1B3B48A4%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001064.html">
   <LINK REL="Next"  HREF="001066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r6295 - in trunk/rts: Game Game/Camera	Game/StartScripts Game/UI Lua Map Rendering Rendering/Env	Rendering/GL Rendering/Textures Rendering/UnitModels Sim	Sim/Features Sim/Misc Sim/MoveTypes Sim/Objects Sim/Path	Sim/Projectiles Sim/Projectiles/Unsynced	Sim/Projectiles/WeaponProjectiles Sim/Units Sim/Units/COB	Sim/Units/CommandAI System</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6295%20-%20in%20trunk/rts%3A%20Game%20Game/Camera%0A%09Game/StartScripts%20Game/UI%20Lua%20Map%20Rendering%20Rendering/Env%0A%09Rendering/GL%20Rendering/Textures%20Rendering/UnitModels%20Sim%0A%09Sim/Features%20Sim/Misc%20Sim/MoveTypes%20Sim/Objects%20Sim/Path%0A%09Sim/Projectiles%20Sim/Projectiles/Unsynced%0A%09Sim/Projectiles/WeaponProjectiles%20Sim/Units%20Sim/Units/COB%0A%09Sim/Units/CommandAI%20System&In-Reply-To=%3C20080821223509.D1B3B48A4%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r6295 - in trunk/rts: Game Game/Camera	Game/StartScripts Game/UI Lua Map Rendering Rendering/Env	Rendering/GL Rendering/Textures Rendering/UnitModels Sim	Sim/Features Sim/Misc Sim/MoveTypes Sim/Objects Sim/Path	Sim/Projectiles Sim/Projectiles/Unsynced	Sim/Projectiles/WeaponProjectiles Sim/Units Sim/Units/COB	Sim/Units/CommandAI System">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Fri Aug 22 00:35:09 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001064.html">[Taspring-linux-commit] r6294 - trunk/Lobby/TASClient
</A></li>
        <LI>Next message: <A HREF="001066.html">[Taspring-linux-commit] r6296 - in trunk/rts: System	System/FileSystem System/Net System/creg lib/lua/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1065">[ date ]</a>
              <a href="thread.html#1065">[ thread ]</a>
              <a href="subject.html#1065">[ subject ]</a>
              <a href="author.html#1065">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: imbaczek
Date: 2008-08-22 00:35:06 +0200 (Fri, 22 Aug 2008)
New Revision: 6295

Modified:
   trunk/rts/Game/Action.cpp
   trunk/rts/Game/Camera.cpp
   trunk/rts/Game/Camera/CameraController.cpp
   trunk/rts/Game/Camera/FPSController.cpp
   trunk/rts/Game/Camera/FreeController.cpp
   trunk/rts/Game/Camera/OverheadController.cpp
   trunk/rts/Game/Camera/OverviewController.cpp
   trunk/rts/Game/Camera/RotOverheadController.cpp
   trunk/rts/Game/Camera/SmoothController.cpp
   trunk/rts/Game/Camera/TWController.cpp
   trunk/rts/Game/CameraHandler.cpp
   trunk/rts/Game/ChatMessage.cpp
   trunk/rts/Game/CommandMessage.cpp
   trunk/rts/Game/Console.cpp
   trunk/rts/Game/ConsoleHistory.cpp
   trunk/rts/Game/Game.cpp
   trunk/rts/Game/GameController.cpp
   trunk/rts/Game/GameData.cpp
   trunk/rts/Game/GameHelper.cpp
   trunk/rts/Game/GameHelper.h
   trunk/rts/Game/GameServer.cpp
   trunk/rts/Game/GameSetup.cpp
   trunk/rts/Game/Player.cpp
   trunk/rts/Game/PlayerRoster.cpp
   trunk/rts/Game/PreGame.cpp
   trunk/rts/Game/SelectedUnits.cpp
   trunk/rts/Game/SelectedUnitsAI.cpp
   trunk/rts/Game/StartScripts/AirScript.cpp
   trunk/rts/Game/StartScripts/CommanderScript.cpp
   trunk/rts/Game/StartScripts/CommanderScript2.cpp
   trunk/rts/Game/StartScripts/EmptyScript.cpp
   trunk/rts/Game/StartScripts/LoadScript.cpp
   trunk/rts/Game/StartScripts/Script.cpp
   trunk/rts/Game/StartScripts/ScriptHandler.cpp
   trunk/rts/Game/StartScripts/SpawnScript.cpp
   trunk/rts/Game/StartScripts/TestScript.cpp
   trunk/rts/Game/Team.cpp
   trunk/rts/Game/UI/CommandColors.cpp
   trunk/rts/Game/UI/CursorIcons.cpp
   trunk/rts/Game/UI/EndGameBox.cpp
   trunk/rts/Game/UI/GameInfo.cpp
   trunk/rts/Game/UI/GameSetupDrawer.cpp
   trunk/rts/Game/UI/GuiHandler.cpp
   trunk/rts/Game/UI/HwMouseCursor.cpp
   trunk/rts/Game/UI/InfoConsole.cpp
   trunk/rts/Game/UI/InputReceiver.cpp
   trunk/rts/Game/UI/KeyAutoBinder.cpp
   trunk/rts/Game/UI/KeyBindings.cpp
   trunk/rts/Game/UI/KeyCodes.cpp
   trunk/rts/Game/UI/KeySet.cpp
   trunk/rts/Game/UI/LuaUI.cpp
   trunk/rts/Game/UI/MiniMap.cpp
   trunk/rts/Game/UI/MouseCursor.cpp
   trunk/rts/Game/UI/MouseHandler.cpp
   trunk/rts/Game/UI/ProfileDrawer.cpp
   trunk/rts/Game/UI/QuitBox.cpp
   trunk/rts/Game/UI/ResourceBar.cpp
   trunk/rts/Game/UI/SelectionKeyHandler.cpp
   trunk/rts/Game/UI/ShareBox.cpp
   trunk/rts/Game/UI/StartPosSelecter.cpp
   trunk/rts/Game/UI/TooltipConsole.cpp
   trunk/rts/Game/WaitCommandsAI.cpp
   trunk/rts/Game/WordCompletion.cpp
   trunk/rts/Lua/LuaBitOps.cpp
   trunk/rts/Lua/LuaCallInCheck.cpp
   trunk/rts/Lua/LuaConstCMD.cpp
   trunk/rts/Lua/LuaConstCMDTYPE.cpp
   trunk/rts/Lua/LuaConstGL.cpp
   trunk/rts/Lua/LuaConstGame.cpp
   trunk/rts/Lua/LuaFBOs.cpp
   trunk/rts/Lua/LuaFeatureDefs.cpp
   trunk/rts/Lua/LuaGaia.cpp
   trunk/rts/Lua/LuaHandle.cpp
   trunk/rts/Lua/LuaHandleSynced.cpp
   trunk/rts/Lua/LuaIO.cpp
   trunk/rts/Lua/LuaInputReceiver.cpp
   trunk/rts/Lua/LuaMaterial.cpp
   trunk/rts/Lua/LuaOpenGL.cpp
   trunk/rts/Lua/LuaParser.cpp
   trunk/rts/Lua/LuaPathFinder.cpp
   trunk/rts/Lua/LuaRBOs.cpp
   trunk/rts/Lua/LuaRules.cpp
   trunk/rts/Lua/LuaScream.cpp
   trunk/rts/Lua/LuaShaders.cpp
   trunk/rts/Lua/LuaSyncedCall.cpp
   trunk/rts/Lua/LuaSyncedCtrl.cpp
   trunk/rts/Lua/LuaSyncedMoveCtrl.cpp
   trunk/rts/Lua/LuaSyncedRead.cpp
   trunk/rts/Lua/LuaSyncedTable.cpp
   trunk/rts/Lua/LuaTextures.cpp
   trunk/rts/Lua/LuaUnitDefs.cpp
   trunk/rts/Lua/LuaUnitRendering.cpp
   trunk/rts/Lua/LuaUnsyncedCall.cpp
   trunk/rts/Lua/LuaUnsyncedCtrl.cpp
   trunk/rts/Lua/LuaUnsyncedRead.cpp
   trunk/rts/Lua/LuaUtils.cpp
   trunk/rts/Lua/LuaVFS.cpp
   trunk/rts/Lua/LuaWeaponDefs.cpp
   trunk/rts/Map/BaseGroundDrawer.cpp
   trunk/rts/Map/BasicMapDamage.cpp
   trunk/rts/Map/Ground.cpp
   trunk/rts/Map/HeightMapTexture.cpp
   trunk/rts/Map/MapDamage.cpp
   trunk/rts/Map/MapInfo.cpp
   trunk/rts/Map/MapParser.cpp
   trunk/rts/Map/MetalMap.cpp
   trunk/rts/Map/ReadMap.cpp
   trunk/rts/Rendering/Env/AdvSky.cpp
   trunk/rts/Rendering/Env/AdvTreeDrawer.cpp
   trunk/rts/Rendering/Env/AdvTreeGenerator.cpp
   trunk/rts/Rendering/Env/AdvWater.cpp
   trunk/rts/Rendering/Env/BaseSky.cpp
   trunk/rts/Rendering/Env/BaseTreeDrawer.cpp
   trunk/rts/Rendering/Env/BaseWater.cpp
   trunk/rts/Rendering/Env/BasicSky.cpp
   trunk/rts/Rendering/Env/BasicTreeDrawer.cpp
   trunk/rts/Rendering/Env/BasicWater.cpp
   trunk/rts/Rendering/Env/BumpWater.cpp
   trunk/rts/Rendering/Env/DynWater.cpp
   trunk/rts/Rendering/Env/GrassDrawer.cpp
   trunk/rts/Rendering/Env/RefractWater.cpp
   trunk/rts/Rendering/Env/SkyBox.cpp
   trunk/rts/Rendering/FartextureHandler.cpp
   trunk/rts/Rendering/FontTexture.cpp
   trunk/rts/Rendering/GL/FBO.cpp
   trunk/rts/Rendering/GL/VertexArray.cpp
   trunk/rts/Rendering/GL/VertexArrayRange.cpp
   trunk/rts/Rendering/GL/glExtra.cpp
   trunk/rts/Rendering/GL/glList.cpp
   trunk/rts/Rendering/GL/glTextBox.cpp
   trunk/rts/Rendering/GL/myGL.cpp
   trunk/rts/Rendering/GroundDecalHandler.cpp
   trunk/rts/Rendering/GroundFlash.cpp
   trunk/rts/Rendering/IconHandler.cpp
   trunk/rts/Rendering/InMapDraw.cpp
   trunk/rts/Rendering/ShadowHandler.cpp
   trunk/rts/Rendering/Textures/Bitmap.cpp
   trunk/rts/Rendering/Textures/ColorMap.cpp
   trunk/rts/Rendering/Textures/NamedTextures.cpp
   trunk/rts/Rendering/Textures/TAPalette.cpp
   trunk/rts/Rendering/Textures/TextureAtlas.cpp
   trunk/rts/Rendering/Textures/TextureHandler.cpp
   trunk/rts/Rendering/Textures/nv_dds.cpp
   trunk/rts/Rendering/UnitModels/3DModelParser.cpp
   trunk/rts/Rendering/UnitModels/3DOParser.cpp
   trunk/rts/Rendering/UnitModels/UnitDrawer.cpp
   trunk/rts/Rendering/UnitModels/s3oParser.cpp
   trunk/rts/Rendering/VerticalSync.cpp
   trunk/rts/Rendering/glFont.cpp
   trunk/rts/Sim/Features/Feature.cpp
   trunk/rts/Sim/Features/FeatureHandler.cpp
   trunk/rts/Sim/Misc/AirBaseHandler.cpp
   trunk/rts/Sim/Misc/CategoryHandler.cpp
   trunk/rts/Sim/Misc/CollisionHandler.cpp
   trunk/rts/Sim/Misc/DamageArray.cpp
   trunk/rts/Sim/Misc/DamageArrayHandler.cpp
   trunk/rts/Sim/Misc/GeometricObjects.cpp
   trunk/rts/Sim/Misc/GroundBlockingObjectMap.cpp
   trunk/rts/Sim/Misc/InterceptHandler.cpp
   trunk/rts/Sim/Misc/LosHandler.cpp
   trunk/rts/Sim/Misc/QuadField.cpp
   trunk/rts/Sim/Misc/RadarHandler.cpp
   trunk/rts/Sim/Misc/Wind.cpp
   trunk/rts/Sim/ModInfo.cpp
   trunk/rts/Sim/MoveTypes/AirMoveType.cpp
   trunk/rts/Sim/MoveTypes/GroundMoveType.cpp
   trunk/rts/Sim/MoveTypes/MoveInfo.cpp
   trunk/rts/Sim/MoveTypes/MoveType.cpp
   trunk/rts/Sim/MoveTypes/ScriptMoveType.cpp
   trunk/rts/Sim/MoveTypes/TAAirMoveType.cpp
   trunk/rts/Sim/Objects/SolidObject.cpp
   trunk/rts/Sim/Objects/WorldObject.cpp
   trunk/rts/Sim/Path/PathCache.cpp
   trunk/rts/Sim/Path/PathEstimator.cpp
   trunk/rts/Sim/Path/PathEstimator.h
   trunk/rts/Sim/Path/PathFinder.cpp
   trunk/rts/Sim/Path/PathFinder.h
   trunk/rts/Sim/Path/PathManager.cpp
   trunk/rts/Sim/Projectiles/ExplosionGenerator.cpp
   trunk/rts/Sim/Projectiles/FireProjectile.cpp
   trunk/rts/Sim/Projectiles/FlareProjectile.cpp
   trunk/rts/Sim/Projectiles/PieceProjectile.cpp
   trunk/rts/Sim/Projectiles/Projectile.cpp
   trunk/rts/Sim/Projectiles/ProjectileHandler.cpp
   trunk/rts/Sim/Projectiles/ProjectileHandler.h
   trunk/rts/Sim/Projectiles/Unsynced/BitmapMuzzleFlame.cpp
   trunk/rts/Sim/Projectiles/Unsynced/BubbleProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/DirtProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/ExploSpikeProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/GenericParticleProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/GeoSquareProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/GeoThermSmokeProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/GfxProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/HeatCloudProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/MuzzleFlame.cpp
   trunk/rts/Sim/Projectiles/Unsynced/RepulseGfx.cpp
   trunk/rts/Sim/Projectiles/Unsynced/ShieldPartProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SimpleParticleSystem.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile2.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SmokeTrailProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SpherePartProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/TracerProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/WakeProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/WreckProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/BeamLaserProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/EmgProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/ExplosiveProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/FireBallProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/FlameProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/LargeBeamLaserProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/LaserProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/LightingProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/MissileProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/StarburstProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/TorpedoProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/WeaponProjectile.cpp
   trunk/rts/Sim/SideParser.cpp
   trunk/rts/Sim/Units/COB/CobEngine.cpp
   trunk/rts/Sim/Units/COB/CobFile.cpp
   trunk/rts/Sim/Units/COB/CobInstance.cpp
   trunk/rts/Sim/Units/COB/CobThread.cpp
   trunk/rts/Sim/Units/CommandAI/AirCAI.cpp
   trunk/rts/Sim/Units/CommandAI/BuilderCAI.cpp
   trunk/rts/Sim/Units/CommandAI/CommandAI.cpp
   trunk/rts/Sim/Units/CommandAI/FactoryCAI.cpp
   trunk/rts/Sim/Units/CommandAI/MobileCAI.cpp
   trunk/rts/Sim/Units/CommandAI/TransportCAI.cpp
   trunk/rts/Sim/Units/Unit.cpp
   trunk/rts/Sim/Units/UnitDefHandler.cpp
   trunk/rts/Sim/Units/UnitHandler.cpp
   trunk/rts/Sim/Units/UnitLoader.cpp
   trunk/rts/Sim/Units/UnitTracker.cpp
   trunk/rts/System/mmgr.cpp
Log:
sweeping update of #include sequences so mmgr works better.

also, minor #ifdefing of overloaded new/delete when mmgr is in use.

Modified: trunk/rts/Game/Action.cpp
===================================================================
--- trunk/rts/Game/Action.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Action.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,8 +1,9 @@
-#include &quot;Action.h&quot;
-
 #include &lt;vector&gt;
 #include &lt;algorithm&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;Action.h&quot;
 #include &quot;System/FileSystem/SimpleParser.h&quot;
 
 Action::Action(const std::string&amp; line)

Modified: trunk/rts/Game/Camera/CameraController.cpp
===================================================================
--- trunk/rts/Game/Camera/CameraController.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Camera/CameraController.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,3 +1,6 @@
+#include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;CameraController.h&quot;
 
 #include &quot;Platform/ConfigHandler.h&quot;

Modified: trunk/rts/Game/Camera/FPSController.cpp
===================================================================
--- trunk/rts/Game/Camera/FPSController.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Camera/FPSController.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,3 +1,6 @@
+#include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;FPSController.h&quot;
 
 #include &quot;Platform/ConfigHandler.h&quot;

Modified: trunk/rts/Game/Camera/FreeController.cpp
===================================================================
--- trunk/rts/Game/Camera/FreeController.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Camera/FreeController.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,5 +1,9 @@
+#include &quot;StdAfx.h&quot;
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_types.h&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;FreeController.h&quot;
 
 #include &quot;Platform/ConfigHandler.h&quot;

Modified: trunk/rts/Game/Camera/OverheadController.cpp
===================================================================
--- trunk/rts/Game/Camera/OverheadController.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Camera/OverheadController.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,5 +1,9 @@
+#include &quot;StdAfx.h&quot;
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_types.h&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;OverheadController.h&quot;
 
 #include &quot;Platform/ConfigHandler.h&quot;

Modified: trunk/rts/Game/Camera/OverviewController.cpp
===================================================================
--- trunk/rts/Game/Camera/OverviewController.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Camera/OverviewController.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,3 +1,6 @@
+#include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;OverviewController.h&quot;
 
 #include &quot;Map/Ground.h&quot;

Modified: trunk/rts/Game/Camera/RotOverheadController.cpp
===================================================================
--- trunk/rts/Game/Camera/RotOverheadController.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Camera/RotOverheadController.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,3 +1,6 @@
+#include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;RotOverheadController.h&quot;
 
 #include &quot;Platform/ConfigHandler.h&quot;

Modified: trunk/rts/Game/Camera/SmoothController.cpp
===================================================================
--- trunk/rts/Game/Camera/SmoothController.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Camera/SmoothController.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,13 @@
-#include &quot;SmoothController.h&quot;
+#include &quot;StdAfx.h&quot;
 
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_types.h&gt;
 #include &lt;SDL_timer.h&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;SmoothController.h&quot;
+
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/CameraHandler.h&quot;

Modified: trunk/rts/Game/Camera/TWController.cpp
===================================================================
--- trunk/rts/Game/Camera/TWController.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Camera/TWController.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,5 +1,10 @@
+#include &quot;StdAfx.h&quot;
+
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_types.h&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;TWController.h&quot;
 
 #include &quot;Platform/ConfigHandler.h&quot;

Modified: trunk/rts/Game/Camera.cpp
===================================================================
--- trunk/rts/Game/Camera.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Camera.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,11 +3,12 @@
 //
 //////////////////////////////////////////////////////////////////////
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;Camera.h&quot;
-
 #include &quot;Map/Ground.h&quot;
-#include &quot;mmgr.h&quot;
 
+
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Game/CameraHandler.cpp
===================================================================
--- trunk/rts/Game/CameraHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/CameraHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,7 @@
 #include &quot;StdAfx.h&quot;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;CameraHandler.h&quot;
 
 #include &quot;Game/Action.h&quot;

Modified: trunk/rts/Game/ChatMessage.cpp
===================================================================
--- trunk/rts/Game/ChatMessage.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/ChatMessage.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,3 +1,7 @@
+#include &quot;StdAfx.h&quot;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;ChatMessage.h&quot;
 
 #include &quot;BaseNetProtocol.h&quot;

Modified: trunk/rts/Game/CommandMessage.cpp
===================================================================
--- trunk/rts/Game/CommandMessage.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/CommandMessage.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,7 +1,10 @@
+#include &quot;StdAfx.h&quot;
+#include &lt;assert.h&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;CommandMessage.h&quot;
 
-#include &lt;assert.h&gt;
-
 #include &quot;BaseNetProtocol.h&quot;
 #include &quot;Net/PackPacket.h&quot;
 #include &quot;Net/UnpackPacket.h&quot;

Modified: trunk/rts/Game/Console.cpp
===================================================================
--- trunk/rts/Game/Console.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Console.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,3 +1,8 @@
+#include &quot;StdAfx.h&quot;
+#include &lt;assert.h&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;Console.h&quot; 
 
 #include &quot;LogOutput.h&quot;

Modified: trunk/rts/Game/ConsoleHistory.cpp
===================================================================
--- trunk/rts/Game/ConsoleHistory.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/ConsoleHistory.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,9 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;ConsoleHistory.h&quot;
 
 

Modified: trunk/rts/Game/Game.cpp
===================================================================
--- trunk/rts/Game/Game.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Game.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -10,7 +10,11 @@
 #include &lt;locale&gt;
 #include &lt;sstream&gt;
 
-#include &quot;Rendering/GL/myGL.h&quot;
+#include &lt;boost/thread/thread.hpp&gt;
+#include &lt;boost/bind.hpp&gt;
+
+#include &lt;boost/thread/barrier.hpp&gt;
+
 #include &lt;SDL_keyboard.h&gt;
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_mouse.h&gt;
@@ -19,6 +23,9 @@
 #include &lt;SDL_events.h&gt;
 #include &lt;SDL_video.h&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Game.h&quot;
 #include &quot;float.h&quot;
 #include &quot;Camera.h&quot;
@@ -148,12 +155,7 @@
 #  include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #endif
 
-#include &quot;mmgr.h&quot;
-#include &lt;boost/thread/thread.hpp&gt;
-#include &lt;boost/bind.hpp&gt;
 
-#include &lt;boost/thread/barrier.hpp&gt;
-
 #ifdef USE_GML
 #include &quot;lib/gml/gmlsrv.h&quot;
 gmlClientServer&lt;void, int,CUnit*&gt; gmlProcessor;

Modified: trunk/rts/Game/GameController.cpp
===================================================================
--- trunk/rts/Game/GameController.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/GameController.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,8 @@
 #include &quot;StdAfx.h&quot;
 
-#include &quot;GameController.h&quot;
-
 #include &quot;mmgr.h&quot;
 
+#include &quot;GameController.h&quot;
 
 
 CGameController::CGameController(void)

Modified: trunk/rts/Game/GameData.cpp
===================================================================
--- trunk/rts/Game/GameData.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/GameData.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,7 +1,10 @@
+#include &quot;StdAfx.h&quot;
+#include &lt;assert.h&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;GameData.h&quot;
 
-#include &lt;assert.h&gt;
-
 #include &quot;BaseNetProtocol.h&quot;
 #include &quot;Net/PackPacket.h&quot;
 #include &quot;Net/UnpackPacket.h&quot;

Modified: trunk/rts/Game/GameHelper.cpp
===================================================================
--- trunk/rts/Game/GameHelper.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/GameHelper.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Camera.h&quot;
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Game.h&quot;
@@ -33,7 +35,6 @@
 #include &quot;Sound.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
 #include &quot;System/EventHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Game/GameHelper.h
===================================================================
--- trunk/rts/Game/GameHelper.h	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/GameHelper.h	2008-08-21 22:35:06 UTC (rev 6295)
@@ -61,7 +61,7 @@
 	CExplosionGenerator *stdExplosionGenerator;
 
 	struct WaitingDamage{
-#ifndef SYNCIFY
+#if !defined(SYNCIFY) &amp;&amp; !defined(USE_MMGR)
 		inline void* operator new(size_t size){return mempool.Alloc(size);};
 		inline void operator delete(void* p,size_t size){mempool.Free(p,size);};
 #endif

Modified: trunk/rts/Game/GameServer.cpp
===================================================================
--- trunk/rts/Game/GameServer.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/GameServer.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,6 +1,6 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;GameServer.h&quot;
 
+
 #include &lt;stdarg.h&gt;
 #include &lt;ctime&gt;
 #include &lt;boost/bind.hpp&gt;
@@ -10,10 +10,17 @@
 #if defined DEDICATED || defined DEBUG
 #include &lt;iostream&gt;
 #endif
+#include &lt;malloc.h&gt;
+
+#include &quot;mmgr.h&quot;
+
+#include &quot;GameServer.h&quot;
+
 #ifndef NO_AVI
 #include &quot;Game.h&quot;
 #endif
 
+#include &quot;LogOutput.h&quot;
 #include &quot;GameSetup.h&quot;
 #include &quot;Action.h&quot;
 #include &quot;ChatMessage.h&quot;
@@ -1349,6 +1356,8 @@
 
 unsigned CGameServer::BindConnection(unsigned wantedNumber, bool isLocal, boost::shared_ptr&lt;netcode::CConnection&gt; link)
 {
+	m_validateAllAllocUnits();
+	_heapchk();
 	unsigned hisNewNumber = wantedNumber;
 	if (demoReader) {
 		hisNewNumber = std::max(wantedNumber, (unsigned)demoReader-&gt;GetFileHeader().maxPlayerNum+1);
@@ -1365,6 +1374,9 @@
 		}
 	}
 
+	logOutput.Print(&quot;0\n&quot;);
+	m_validateAllAllocUnits();
+    _heapchk();
 	if (setup &amp;&amp; hisNewNumber &gt;= static_cast&lt;unsigned&gt;(setup-&gt;numPlayers) &amp;&amp; !demoReader)
 	{
 		// number not in setup, drop connection
@@ -1374,8 +1386,11 @@
 	
 	players[hisNewNumber].reset(new GameParticipant(isLocal)); // give him rights to change speed, kick players etc
 	players[hisNewNumber]-&gt;link = link;
-	if (setup)
+	logOutput.Print(&quot;1\n&quot;);
+	if (setup) {
 		*static_cast&lt;PlayerBase*&gt;(players[hisNewNumber].get()) = setup-&gt;playerStartingData[hisNewNumber];
+	}
+	logOutput.Print(&quot;2\n&quot;);
 	link-&gt;SendData(CBaseNetProtocol::Get().SendSetPlayerNum((unsigned char)hisNewNumber));
 	link-&gt;SendData(boost::shared_ptr&lt;const RawPacket&gt;(gameData-&gt;Pack()));
 

Modified: trunk/rts/Game/GameSetup.cpp
===================================================================
--- trunk/rts/Game/GameSetup.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/GameSetup.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -5,6 +5,8 @@
 #include &lt;map&gt;
 #include &lt;SDL_timer.h&gt;
 
+#include &quot;mmgr.h&quot;
+
 #ifndef DEDICATED
 	#include &quot;Team.h&quot;
 #endif
@@ -19,6 +21,7 @@
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Rendering/Textures/TAPalette.h&quot;
 #include &quot;System/UnsyncedRNG.h&quot;
+#include &quot;LogOutput.h&quot;
 
 
 using namespace std;

Modified: trunk/rts/Game/Player.cpp
===================================================================
--- trunk/rts/Game/Player.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Player.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,17 +2,18 @@
 // Player.cpp: implementation of the CPlayer class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &lt;assert.h&gt;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;Player.h&quot;
 #include &quot;Team.h&quot;
 #ifdef DIRECT_CONTROL_ALLOWED
 #  include &quot;UI/MouseHandler.h&quot;
 #  include &quot;CameraHandler.h&quot;
 #  include &quot;Camera.h&quot;
-#  include &lt;assert.h&gt;
 #endif
 #include &quot;System/EventHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND(CPlayer,);
 

Modified: trunk/rts/Game/PlayerRoster.cpp
===================================================================
--- trunk/rts/Game/PlayerRoster.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/PlayerRoster.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;PlayerRoster.h&quot;
 #include &quot;Player.h&quot;
 #include &quot;Team.h&quot;

Modified: trunk/rts/Game/PreGame.cpp
===================================================================
--- trunk/rts/Game/PreGame.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/PreGame.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,13 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;PreGame.h&quot;
 #include &lt;map&gt;
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_timer.h&gt;
 #include &lt;SDL_types.h&gt;
 #include &lt;set&gt;
+
+#include &quot;mmgr.h&quot;
+
+#include &quot;PreGame.h&quot;
 #include &quot;Game.h&quot;
 #include &quot;Team.h&quot;
 #include &quot;FPUCheck.h&quot;
@@ -33,7 +36,6 @@
 #include &quot;StartScripts/ScriptHandler.h&quot;
 #include &quot;UI/InfoConsole.h&quot;
 #include &quot;UI/MouseHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 // msvc behaves really strange
 #if _MSC_VER

Modified: trunk/rts/Game/SelectedUnits.cpp
===================================================================
--- trunk/rts/Game/SelectedUnits.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/SelectedUnits.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,11 +3,14 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
-#include &quot;Game/Team.h&quot;
-#include &quot;SelectedUnits.h&quot;
 #include &lt;map&gt;
 #include &lt;SDL_types.h&gt;
 #include &lt;SDL_keysym.h&gt;
+
+#include &quot;mmgr.h&quot;
+
+#include &quot;Game/Team.h&quot;
+#include &quot;SelectedUnits.h&quot;
 #include &quot;WaitCommandsAI.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;NetProtocol.h&quot;
@@ -34,7 +37,6 @@
 #include &quot;Player.h&quot;
 #include &quot;Camera.h&quot;
 #include &quot;Sound.h&quot;
-#include &quot;mmgr.h&quot;
 
 extern Uint8 *keys;
 

Modified: trunk/rts/Game/SelectedUnitsAI.cpp
===================================================================
--- trunk/rts/Game/SelectedUnitsAI.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/SelectedUnitsAI.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -6,6 +6,9 @@
 ////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;SelectedUnitsAI.h&quot;
 #include &quot;SelectedUnits.h&quot;
 #include &quot;LogOutput.h&quot;
@@ -20,7 +23,6 @@
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 //#include &quot;GroundMoveType.h&quot;
-#include &quot;mmgr.h&quot;
 
 const int CMDPARAM_MOVE_X = 0;
 const int CMDPARAM_MOVE_Y = 1;

Modified: trunk/rts/Game/StartScripts/AirScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/AirScript.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/StartScripts/AirScript.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;AirScript.h&quot;
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
@@ -11,9 +13,9 @@
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
-#include &quot;mmgr.h&quot;
 
 
+
 const char* armhawk_name[] = { &quot;arm_hawk&quot;, &quot;ARMHAWK&quot;, NULL };
 const char* armfig_name [] = { &quot;arm_freedom_fighter&quot;, &quot;ARMFIG&quot;, NULL };
 const char* corvamp_name[] = { &quot;core_vamp&quot;, &quot;CORVAMP&quot;, NULL };

Modified: trunk/rts/Game/StartScripts/CommanderScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/CommanderScript.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/StartScripts/CommanderScript.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,9 @@
 #include &lt;algorithm&gt;
 #include &lt;cctype&gt;
 #include &lt;map&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;CommanderScript.h&quot;
 #include &quot;ExternalAI/GlobalAIHandler.h&quot;
 #include &quot;Game/Game.h&quot;
@@ -17,9 +20,9 @@
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
 #include &quot;System/LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
 
+
 extern std::string stupidGlobalMapname;
 
 

Modified: trunk/rts/Game/StartScripts/CommanderScript2.cpp
===================================================================
--- trunk/rts/Game/StartScripts/CommanderScript2.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/StartScripts/CommanderScript2.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;CommanderScript2.h&quot;
 #include &quot;Game/Team.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
@@ -7,8 +9,8 @@
 #include &quot;Sim/SideParser.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
 #include &quot;System/LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
+
 extern std::string stupidGlobalMapname;
 
 

Modified: trunk/rts/Game/StartScripts/EmptyScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/EmptyScript.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/StartScripts/EmptyScript.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,9 +2,10 @@
 // EmptyScript.cpp: implementation of the CEmptyScript class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;EmptyScript.h&quot;
-#include &quot;mmgr.h&quot;
+
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Game/StartScripts/LoadScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/LoadScript.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/StartScripts/LoadScript.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,6 +1,9 @@
 #include &quot;StdAfx.h&quot;
 #include &lt;iostream&gt;
 #include &lt;vector&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;LoadScript.h&quot;
 #include &quot;ExternalAI/GlobalAIHandler.h&quot;
 #include &quot;Game/GameSetup.h&quot;

Modified: trunk/rts/Game/StartScripts/Script.cpp
===================================================================
--- trunk/rts/Game/StartScripts/Script.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/StartScripts/Script.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,10 +3,12 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Script.h&quot;
 #include &quot;ScriptHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
+
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Game/StartScripts/ScriptHandler.cpp
===================================================================
--- trunk/rts/Game/StartScripts/ScriptHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/StartScripts/ScriptHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;ScriptHandler.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
@@ -19,8 +21,8 @@
 #ifndef NO_LUA
 #  include &quot;System/Platform/errorhandler.h&quot;
 #endif
-#include &quot;mmgr.h&quot;
 
+
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Game/StartScripts/SpawnScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/SpawnScript.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/StartScripts/SpawnScript.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,6 +1,9 @@
 #include &quot;StdAfx.h&quot;
 #include &lt;fstream&gt;
 #include &lt;set&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;SpawnScript.h&quot;
 #include &quot;Game/Team.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
@@ -14,8 +17,8 @@
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
 #include &quot;System/LogOutput.h&quot;
 #include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
+
 extern std::string stupidGlobalMapname;
 
 CSpawnScript::CSpawnScript(bool _autonomous) :

Modified: trunk/rts/Game/StartScripts/TestScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/TestScript.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/StartScripts/TestScript.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;TestScript.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
@@ -13,8 +15,8 @@
 #include &quot;Game/Team.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
+
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Game/Team.cpp
===================================================================
--- trunk/rts/Game/Team.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/Team.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Messages.h&quot;
 #include &quot;Team.h&quot;
 #include &quot;LogOutput.h&quot;
@@ -18,7 +20,6 @@
 #include &quot;creg/STL_List.h&quot;
 #include &quot;creg/STL_Map.h&quot;
 #include &quot;creg/STL_Set.h&quot;
-#include &quot;mmgr.h&quot;
 #include &quot;NetProtocol.h&quot;
 
 CR_BIND(CTeam,);

Modified: trunk/rts/Game/UI/CommandColors.cpp
===================================================================
--- trunk/rts/Game/UI/CommandColors.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/CommandColors.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -7,6 +7,9 @@
 #include &lt;string&gt;
 #include &lt;vector&gt;
 #include &lt;map&gt;
+
+#include &quot;mmgr.h&quot;
+
 using namespace std;
 
 #include &quot;Rendering/GL/myGL.h&quot;

Modified: trunk/rts/Game/UI/CursorIcons.cpp
===================================================================
--- trunk/rts/Game/UI/CursorIcons.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/CursorIcons.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,8 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;algorithm&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;CursorIcons.h&quot;
 #include &quot;CommandColors.h&quot;
 #include &quot;MouseHandler.h&quot;
@@ -12,9 +16,9 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
 
-#include &lt;algorithm&gt;
 
 
+
 CCursorIcons cursorIcons;
 
 

Modified: trunk/rts/Game/UI/EndGameBox.cpp
===================================================================
--- trunk/rts/Game/UI/EndGameBox.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/EndGameBox.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,7 @@
 #include &quot;StdAfx.h&quot;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;EndGameBox.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;

Modified: trunk/rts/Game/UI/GameInfo.cpp
===================================================================
--- trunk/rts/Game/UI/GameInfo.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/GameInfo.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,8 +1,11 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;GameInfo.h&quot;
 #include &lt;string&gt;
 #include &lt;vector&gt;
+#include &lt;SDL_keysym.h&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;GameInfo.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/glFont.h&quot;
@@ -13,8 +16,8 @@
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/ModInfo.h&quot;
-#include &lt;SDL_keysym.h&gt;
 
+
 using namespace std;
 
 

Modified: trunk/rts/Game/UI/GameSetupDrawer.cpp
===================================================================
--- trunk/rts/Game/UI/GameSetupDrawer.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/GameSetupDrawer.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,14 @@
-#include &quot;GameSetupDrawer.h&quot;
-
+#include &quot;StdAfx.h&quot;
 #include &lt;assert.h&gt;
 #include &lt;string&gt;
 #include &lt;map&gt;
 #include &lt;SDL_timer.h&gt;
 #include &lt;SDL_keysym.h&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;GameSetupDrawer.h&quot;
+
 #include &quot;NetProtocol.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;../CameraHandler.h&quot;

Modified: trunk/rts/Game/UI/GuiHandler.cpp
===================================================================
--- trunk/rts/Game/UI/GuiHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/GuiHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,10 +3,13 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;GuiHandler.h&quot;
 #include &lt;map&gt;
 #include &lt;set&gt;
 #include &lt;list&gt;
+
+#include &quot;mmgr.h&quot;
+
+#include &quot;GuiHandler.h&quot;
 #include &quot;SDL_keysym.h&quot;
 #include &quot;SDL_mouse.h&quot;
 #include &quot;CommandColors.h&quot;
@@ -51,7 +54,6 @@
 #include &quot;System/FileSystem/SimpleParser.h&quot;
 #include &quot;System/LogOutput.h&quot;
 #include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 extern Uint8 *keys;
 

Modified: trunk/rts/Game/UI/HwMouseCursor.cpp
===================================================================
--- trunk/rts/Game/UI/HwMouseCursor.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/HwMouseCursor.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,18 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;SDL_syswm.h&gt;
+
+#ifdef WIN32
+#  include &quot;windows.h&quot;
+#  include &quot;MouseInput.h&quot;
+typedef unsigned char byte;
+#elif defined(__APPLE__)
+	/*do nothing (duno how to create cursors on runtime on macs)*/
+#else
+#  include &lt;X11/Xcursor/Xcursor.h&gt;
+#endif
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;bitops.h&quot;
 #include &quot;CommandColors.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
@@ -9,18 +23,9 @@
 #include &quot;myMath.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
-#include &quot;mmgr.h&quot;
-#include &lt;SDL_syswm.h&gt;
 
-#ifdef WIN32
-#  include &quot;windows.h&quot;
-#  include &quot;MouseInput.h&quot;
-#elif defined(__APPLE__)
-	/*do nothing (duno how to create cursors on runtime on macs)*/
-#else
-#  include &lt;X11/Xcursor/Xcursor.h&gt;
-#endif
 
+
 //int savedcount=0;
 
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Game/UI/InfoConsole.cpp
===================================================================
--- trunk/rts/Game/UI/InfoConsole.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/InfoConsole.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,9 +2,11 @@
 // InfoConsole.cpp: implementation of the CInfoConsole class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &lt;fstream&gt;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;InfoConsole.h&quot;
-#include &lt;fstream&gt;
 #include &quot;GuiHandler.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -17,7 +19,6 @@
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;InputReceiver.h&quot;
 
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Game/UI/InputReceiver.cpp
===================================================================
--- trunk/rts/Game/UI/InputReceiver.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/InputReceiver.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,7 +1,8 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;InputReceiver.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 float CInputReceiver::guiAlpha = 0.8f;

Modified: trunk/rts/Game/UI/KeyAutoBinder.cpp
===================================================================
--- trunk/rts/Game/UI/KeyAutoBinder.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/KeyAutoBinder.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,11 +2,11 @@
 // KeyAutoBinder.cpp: implementation of the CKeyAutoBinder class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &lt;cctype&gt;
+#include &quot;mmgr.h&quot;
 
 #include &quot;KeyAutoBinder.h&quot;
 
-#include &lt;cctype&gt;
-
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;KeyBindings.h&quot;

Modified: trunk/rts/Game/UI/KeyBindings.cpp
===================================================================
--- trunk/rts/Game/UI/KeyBindings.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/KeyBindings.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,9 +3,12 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;KeyBindings.h&quot;
 #include &lt;stdio.h&gt;
 #include &lt;cctype&gt;
+
+#include &quot;mmgr.h&quot;
+
+#include &quot;KeyBindings.h&quot;
 #include &quot;SDL_keysym.h&quot;
 #include &quot;KeyCodes.h&quot;
 #include &quot;KeySet.h&quot;

Modified: trunk/rts/Game/UI/KeyCodes.cpp
===================================================================
--- trunk/rts/Game/UI/KeyCodes.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/KeyCodes.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,11 +2,12 @@
 // KeyCodes.cpp: implementation of the CKeyCodes class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;KeyCodes.h&quot;
 #include &quot;SDL_keysym.h&quot;
-#include &lt;cctype&gt;
-
 #include &quot;System/LogOutput.h&quot;
 
 

Modified: trunk/rts/Game/UI/KeySet.cpp
===================================================================
--- trunk/rts/Game/UI/KeySet.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/KeySet.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,12 +2,14 @@
 // CKeyBindings.cpp: implementation of the CKeyBindings class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &lt;stdlib.h&gt;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;KeySet.h&quot;
 #include &quot;KeyCodes.h&quot;
 #include &quot;SDL_keysym.h&quot;
 #include &quot;SDL_types.h&quot;
-#include &lt;stdlib.h&gt;
 
 #include &quot;System/LogOutput.h&quot;
 

Modified: trunk/rts/Game/UI/LuaUI.cpp
===================================================================
--- trunk/rts/Game/UI/LuaUI.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/LuaUI.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,14 +3,18 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaUI.h&quot;
-
 #include &lt;stdio.h&gt;
 #include &lt;set&gt;
 #include &lt;cctype&gt;
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_mouse.h&gt;
 #include &lt;SDL_timer.h&gt;
+
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaUI.h&quot;
+
+
 using namespace std;
 
 #include &quot;LuaInclude.h&quot;

Modified: trunk/rts/Game/UI/MiniMap.cpp
===================================================================
--- trunk/rts/Game/UI/MiniMap.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/MiniMap.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -6,6 +6,9 @@
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_mouse.h&gt;
 #include &lt;SDL_types.h&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;CommandColors.h&quot;
 #include &quot;CursorIcons.h&quot;
 #include &quot;ExternalAI/Group.h&quot;
@@ -55,9 +58,9 @@
 #include &quot;System/FileSystem/SimpleParser.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;TooltipConsole.h&quot;
-#include &quot;mmgr.h&quot;
 
 
+
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Game/UI/MouseCursor.cpp
===================================================================
--- trunk/rts/Game/UI/MouseCursor.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/MouseCursor.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;bitops.h&quot;
 #include &quot;CommandColors.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
@@ -9,8 +11,8 @@
 #include &quot;myMath.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
-#include &quot;mmgr.h&quot;
 
+
 //////////////////////////////////////////////////////////////////////
 // CMouseCursor Class
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Game/UI/MouseHandler.cpp
===================================================================
--- trunk/rts/Game/UI/MouseHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/MouseHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -7,6 +7,9 @@
 #include &lt;SDL_mouse.h&gt;
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_events.h&gt;
+
+#include &quot;mmgr.h&quot;
+
 #include &quot;MouseHandler.h&quot;
 #include &quot;Game/CameraHandler.h&quot;
 #include &quot;Game/Camera/CameraController.h&quot;
@@ -42,7 +45,6 @@
 #include &quot;Sim/Units/UnitTracker.h&quot;
 #include &quot;System/EventHandler.h&quot;
 #include &quot;Sound.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Game/UI/ProfileDrawer.cpp
===================================================================
--- trunk/rts/Game/UI/ProfileDrawer.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/ProfileDrawer.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,7 +1,8 @@
-#include &quot;ProfileDrawer.h&quot;
-
+#include &quot;StdAfx.h&quot;
 #include &lt;assert.h&gt;
+#include &quot;mmgr.h&quot;
 
+#include &quot;ProfileDrawer.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/glFont.h&quot;

Modified: trunk/rts/Game/UI/QuitBox.cpp
===================================================================
--- trunk/rts/Game/UI/QuitBox.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/QuitBox.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,7 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;SDL_keysym.h&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;MouseHandler.h&quot;
@@ -6,7 +9,6 @@
 #include &quot;QuitBox.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &lt;SDL_keysym.h&gt;
 
 extern bool globalQuit;
 

Modified: trunk/rts/Game/UI/ResourceBar.cpp
===================================================================
--- trunk/rts/Game/UI/ResourceBar.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/ResourceBar.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,12 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;ResourceBar.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Game/Team.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;NetProtocol.h&quot;
-#include &quot;mmgr.h&quot;
-
 #include &quot;TimeProfiler.h&quot;
 
 CResourceBar* resourceBar=0;

Modified: trunk/rts/Game/UI/SelectionKeyHandler.cpp
===================================================================
--- trunk/rts/Game/UI/SelectionKeyHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/SelectionKeyHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,8 @@
 #include &lt;fstream&gt;
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_types.h&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera/CameraController.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/CameraHandler.h&quot;
@@ -18,7 +20,6 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitTypes/Building.h&quot;
-#include &quot;mmgr.h&quot;
 
 CSelectionKeyHandler *selectionKeys;
 

Modified: trunk/rts/Game/UI/ShareBox.cpp
===================================================================
--- trunk/rts/Game/UI/ShareBox.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/ShareBox.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,7 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;SDL_keysym.h&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;ShareBox.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -7,8 +10,8 @@
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;NetProtocol.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &lt;SDL_keysym.h&gt;
 
+
 int CShareBox::lastShareTeam=0;
 
 CShareBox::CShareBox(void)

Modified: trunk/rts/Game/UI/StartPosSelecter.cpp
===================================================================
--- trunk/rts/Game/UI/StartPosSelecter.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/StartPosSelecter.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;StartPosSelecter.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;

Modified: trunk/rts/Game/UI/TooltipConsole.cpp
===================================================================
--- trunk/rts/Game/UI/TooltipConsole.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/UI/TooltipConsole.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;TooltipConsole.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -18,7 +20,6 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;System/EventHandler.h&quot;
 #include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 CTooltipConsole* tooltip = 0;

Modified: trunk/rts/Game/WaitCommandsAI.cpp
===================================================================
--- trunk/rts/Game/WaitCommandsAI.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/WaitCommandsAI.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,8 +3,10 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
+#include &lt;SDL_timer.h&gt;
 #include &quot;WaitCommandsAI.h&quot;
-#include &lt;SDL_timer.h&gt;
 #include &quot;SelectedUnits.h&quot;
 #include &quot;Team.h&quot;
 #include &quot;Game/GameHelper.h&quot;

Modified: trunk/rts/Game/WordCompletion.cpp
===================================================================
--- trunk/rts/Game/WordCompletion.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Game/WordCompletion.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -8,6 +8,8 @@
 
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;WordCompletion.h&quot;
 
 CWordCompletion::CWordCompletion()

Modified: trunk/rts/Lua/LuaBitOps.cpp
===================================================================
--- trunk/rts/Lua/LuaBitOps.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaBitOps.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // LuaBitOps.cpp: implementation of the LuaBitOps class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;LuaBitOps.h&quot;
 

Modified: trunk/rts/Lua/LuaCallInCheck.cpp
===================================================================
--- trunk/rts/Lua/LuaCallInCheck.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaCallInCheck.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // LuaCallInCheck.cpp: implementation of the LuaCallInCheck class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;LuaCallInCheck.h&quot;
 #include &quot;LuaInclude.h&quot;

Modified: trunk/rts/Lua/LuaConstCMD.cpp
===================================================================
--- trunk/rts/Lua/LuaConstCMD.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaConstCMD.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // LuaConstCMD.cpp: implementation of the LuaConstCMD class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;LuaConstCMD.h&quot;
 

Modified: trunk/rts/Lua/LuaConstCMDTYPE.cpp
===================================================================
--- trunk/rts/Lua/LuaConstCMDTYPE.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaConstCMDTYPE.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // LuaConstCMDTYPE.cpp: implementation of the LuaConstCMDTYPE class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;LuaConstCMDTYPE.h&quot;
 

Modified: trunk/rts/Lua/LuaConstGL.cpp
===================================================================
--- trunk/rts/Lua/LuaConstGL.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaConstGL.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // LuaConstGL.cpp: implementation of the LuaConstGL class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;LuaConstGL.h&quot;
 

Modified: trunk/rts/Lua/LuaConstGame.cpp
===================================================================
--- trunk/rts/Lua/LuaConstGame.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaConstGame.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // LuaConstGame.cpp: implementation of the LuaConstGame class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;LuaConstGame.h&quot;
 

Modified: trunk/rts/Lua/LuaFBOs.cpp
===================================================================
--- trunk/rts/Lua/LuaFBOs.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaFBOs.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,12 +2,13 @@
 // LuaFBOs.cpp: implementation of the LuaFBOs class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &lt;map&gt;
+using std::map;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;LuaFBOs.h&quot;
 
-#include &lt;map&gt;
-using std::map;
-
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaFeatureDefs.cpp
===================================================================
--- trunk/rts/Lua/LuaFeatureDefs.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaFeatureDefs.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,8 +3,6 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaFeatureDefs.h&quot;
-
 #include &lt;set&gt;
 #include &lt;string&gt;
 #include &lt;vector&gt;
@@ -12,6 +10,10 @@
 #include &lt;map&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaFeatureDefs.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaDefs.h&quot;

Modified: trunk/rts/Lua/LuaGaia.cpp
===================================================================
--- trunk/rts/Lua/LuaGaia.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaGaia.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,10 +3,13 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaGaia.h&quot;
 #include &lt;set&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaGaia.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaUtils.h&quot;

Modified: trunk/rts/Lua/LuaHandle.cpp
===================================================================
--- trunk/rts/Lua/LuaHandle.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaHandle.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,12 +3,15 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaHandle.h&quot;
 #include &lt;string&gt;
 #include &lt;SDL_keysym.h&gt;
 #include &lt;SDL_mouse.h&gt;
 #include &lt;SDL_timer.h&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaHandle.h&quot;
+
 #include &quot;Game/UI/LuaUI.h&quot;
 #include &quot;Lua/LuaGaia.h&quot;
 #include &quot;Lua/LuaRules.h&quot;

Modified: trunk/rts/Lua/LuaHandleSynced.cpp
===================================================================
--- trunk/rts/Lua/LuaHandleSynced.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaHandleSynced.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,10 +3,13 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaHandleSynced.h&quot;
 #include &lt;set&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaHandleSynced.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaCallInCheck.h&quot;

Modified: trunk/rts/Lua/LuaIO.cpp
===================================================================
--- trunk/rts/Lua/LuaIO.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaIO.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,153 +1,155 @@
-#include &quot;StdAfx.h&quot;
-// LuaIO.cpp: implementation of the LuaIO class.
-//
-//////////////////////////////////////////////////////////////////////
-
-#include &quot;LuaIO.h&quot;
-
-#include &lt;stdio.h&gt;
-#include &lt;errno.h&gt;
-
-#ifndef _MSC_VER	// this header file does not exist for the microsoft compiler
- #include &lt;unistd.h&gt;
-#endif
-
-#include &lt;string&gt;
-using std::string;
-
-#include &quot;LuaHandle.h&quot;
-#include &quot;LuaInclude.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-
-
-/******************************************************************************/
-/******************************************************************************/
-
-static bool IsSafePath(const string&amp; path)
-{
-	// keep searches within the Spring directory
-	if ((path[0] == '/') || (path[0] == '\\') ||
-	    ((path.size() &gt;= 2) &amp;&amp; (path[1] == ':'))) {
-		return false;
-	}
-	if (path.find(&quot;..&quot;) != string::npos) {
-		return false;
-	}
-	return true;
-}
-
-
-/******************************************************************************/
-/******************************************************************************/
-
-bool LuaIO::IsSimplePath(const string&amp; path)
-{
-	// keep searches within the Spring directory
-	if ((path[0] == '/') || (path[0] == '\\') ||
-	    ((path.size() &gt;= 2) &amp;&amp; (path[1] == ':'))) {
-		return false;
-	}
-	if (path.find(&quot;..&quot;) != string::npos) {
-		return false;
-	}
-	return true;
-}
-
-
-bool LuaIO::SafeExecPath(const string&amp; path)
-{
-	return false; // don't allow execution of external programs, yet
-}
-
-
-bool LuaIO::SafeReadPath(const string&amp; path)
-{
-	return filesystem.InReadDir(path);
-}
-
-
-bool LuaIO::SafeWritePath(const string&amp; path)
-{
-	string prefix = &quot;&quot;; // FIXME
-#if !defined UNITSYNC &amp;&amp; !defined DEDICATED
-	const CLuaHandle* lh = CLuaHandle::GetActiveHandle();
-	if (lh != NULL) {
-		prefix = lh-&gt;GetName() + &quot;/&quot; + &quot;Write&quot;;
-	}
-#endif
-	return filesystem.InWriteDir(path, prefix);
-}
-
-
-/******************************************************************************/
-/******************************************************************************/
-
-FILE* LuaIO::fopen(lua_State* L, const char* path, const char* mode)
-{
-	bool read  = false;
-	bool write = false;
-
-	// check the mode string
-	const string modeStr = StringToLower(mode);
-	if (modeStr.find_first_not_of(&quot;rwabt+&quot;) != string::npos) {
-		errno = EINVAL;
-		return NULL;
-	}
-	if (!IsSafePath(path)) {
-		errno = EPERM; //EACCESS?
-		return NULL;
-	}
-	return ::fopen(path, mode);
-}
-
-
-FILE* LuaIO::popen(lua_State* L, const char* command, const char* type)
-{
-	// check the type string
-	const string typeStr = StringToLower(type);
-	if (typeStr.find_first_not_of(&quot;rw&quot;) != string::npos) {
-		errno = EINVAL;
-		return NULL;
-	}
-	errno = EINVAL;	
-	return NULL;
-}
-
-
-int LuaIO::pclose(lua_State* L, FILE* stream)
-{
-	errno = ECHILD;	
-	return -1;
-}
-
-
-int LuaIO::system(lua_State* L, const char* command)
-{
-	luaL_error(L, &quot;the system() call is not available&quot;);
-	return -1; //
-}
-
-
-int LuaIO::remove(lua_State* L, const char* pathname)
-{
-	if (!SafeWritePath(pathname)) {
-		errno = EPERM; //EACCESS?
-		return -1;
-	}
-	return ::remove(pathname);
-}
-
-
-int LuaIO::rename(lua_State* L, const char* oldpath, const char* newpath)
-{
-	if (!SafeWritePath(oldpath) ||
-			!SafeWritePath(newpath)) {
-		errno = EPERM; //EACCESS?
-		return -1;
-	}
-	return ::rename(oldpath, newpath);
-}
-
-
-/******************************************************************************/
-/******************************************************************************/
+#include &quot;StdAfx.h&quot;
+// LuaIO.cpp: implementation of the LuaIO class.
+//
+//////////////////////////////////////////////////////////////////////
+
+#include &lt;stdio.h&gt;
+#include &lt;errno.h&gt;
+
+#ifndef _MSC_VER	// this header file does not exist for the microsoft compiler
+ #include &lt;unistd.h&gt;
+#endif
+
+#include &lt;string&gt;
+using std::string;
+
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaIO.h&quot;
+
+#include &quot;LuaHandle.h&quot;
+#include &quot;LuaInclude.h&quot;
+#include &quot;System/Platform/FileSystem.h&quot;
+
+
+/******************************************************************************/
+/******************************************************************************/
+
+static bool IsSafePath(const string&amp; path)
+{
+	// keep searches within the Spring directory
+	if ((path[0] == '/') || (path[0] == '\\') ||
+	    ((path.size() &gt;= 2) &amp;&amp; (path[1] == ':'))) {
+		return false;
+	}
+	if (path.find(&quot;..&quot;) != string::npos) {
+		return false;
+	}
+	return true;
+}
+
+
+/******************************************************************************/
+/******************************************************************************/
+
+bool LuaIO::IsSimplePath(const string&amp; path)
+{
+	// keep searches within the Spring directory
+	if ((path[0] == '/') || (path[0] == '\\') ||
+	    ((path.size() &gt;= 2) &amp;&amp; (path[1] == ':'))) {
+		return false;
+	}
+	if (path.find(&quot;..&quot;) != string::npos) {
+		return false;
+	}
+	return true;
+}
+
+
+bool LuaIO::SafeExecPath(const string&amp; path)
+{
+	return false; // don't allow execution of external programs, yet
+}
+
+
+bool LuaIO::SafeReadPath(const string&amp; path)
+{
+	return filesystem.InReadDir(path);
+}
+
+
+bool LuaIO::SafeWritePath(const string&amp; path)
+{
+	string prefix = &quot;&quot;; // FIXME
+#if !defined UNITSYNC &amp;&amp; !defined DEDICATED
+	const CLuaHandle* lh = CLuaHandle::GetActiveHandle();
+	if (lh != NULL) {
+		prefix = lh-&gt;GetName() + &quot;/&quot; + &quot;Write&quot;;
+	}
+#endif
+	return filesystem.InWriteDir(path, prefix);
+}
+
+
+/******************************************************************************/
+/******************************************************************************/
+
+FILE* LuaIO::fopen(lua_State* L, const char* path, const char* mode)
+{
+	bool read  = false;
+	bool write = false;
+
+	// check the mode string
+	const string modeStr = StringToLower(mode);
+	if (modeStr.find_first_not_of(&quot;rwabt+&quot;) != string::npos) {
+		errno = EINVAL;
+		return NULL;
+	}
+	if (!IsSafePath(path)) {
+		errno = EPERM; //EACCESS?
+		return NULL;
+	}
+	return ::fopen(path, mode);
+}
+
+
+FILE* LuaIO::popen(lua_State* L, const char* command, const char* type)
+{
+	// check the type string
+	const string typeStr = StringToLower(type);
+	if (typeStr.find_first_not_of(&quot;rw&quot;) != string::npos) {
+		errno = EINVAL;
+		return NULL;
+	}
+	errno = EINVAL;	
+	return NULL;
+}
+
+
+int LuaIO::pclose(lua_State* L, FILE* stream)
+{
+	errno = ECHILD;	
+	return -1;
+}
+
+
+int LuaIO::system(lua_State* L, const char* command)
+{
+	luaL_error(L, &quot;the system() call is not available&quot;);
+	return -1; //
+}
+
+
+int LuaIO::remove(lua_State* L, const char* pathname)
+{
+	if (!SafeWritePath(pathname)) {
+		errno = EPERM; //EACCESS?
+		return -1;
+	}
+	return ::remove(pathname);
+}
+
+
+int LuaIO::rename(lua_State* L, const char* oldpath, const char* newpath)
+{
+	if (!SafeWritePath(oldpath) ||
+			!SafeWritePath(newpath)) {
+		errno = EPERM; //EACCESS?
+		return -1;
+	}
+	return ::rename(oldpath, newpath);
+}
+
+
+/******************************************************************************/
+/******************************************************************************/

Modified: trunk/rts/Lua/LuaInputReceiver.cpp
===================================================================
--- trunk/rts/Lua/LuaInputReceiver.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaInputReceiver.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -5,6 +5,8 @@
 
 #include &lt;string&gt;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;LuaInputReceiver.h&quot;
 #include &quot;System/EventHandler.h&quot;
 

Modified: trunk/rts/Lua/LuaMaterial.cpp
===================================================================
--- trunk/rts/Lua/LuaMaterial.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaMaterial.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,13 +3,15 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaMaterial.h&quot;
-
 #include &lt;string&gt;
 #include &lt;vector&gt;
 using std::string;
 using std::vector;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaMaterial.h&quot;
+
 #include &quot;LuaHashString.h&quot;
 #include &quot;LuaHandle.h&quot;
 #include &quot;LuaOpenGL.h&quot;

Modified: trunk/rts/Lua/LuaOpenGL.cpp
===================================================================
--- trunk/rts/Lua/LuaOpenGL.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaOpenGL.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -11,7 +11,6 @@
 // - use materials instead of raw calls (again, handle dlists)
 //
 
-#include &quot;LuaOpenGL.h&quot;
 #include &lt;string&gt;
 #include &lt;vector&gt;
 #include &lt;algorithm&gt;
@@ -19,6 +18,10 @@
 #include &lt;SDL_mouse.h&gt;
 #include &lt;SDL_timer.h&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaOpenGL.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaParser.cpp
===================================================================
--- trunk/rts/Lua/LuaParser.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaParser.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -10,6 +10,8 @@
 #include &lt;boost/regex.hpp&gt;
 #include &lt;SDL_timer.h&gt;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaIO.h&quot;

Modified: trunk/rts/Lua/LuaPathFinder.cpp
===================================================================
--- trunk/rts/Lua/LuaPathFinder.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaPathFinder.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,13 +3,15 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaPathFinder.h&quot;
-
 #include &lt;stdlib.h&gt;
 #include &lt;algorithm&gt;
 
+#include &quot;mmgr.h&quot;
+
 using namespace std;
 
+#include &quot;LuaPathFinder.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaRBOs.cpp
===================================================================
--- trunk/rts/Lua/LuaRBOs.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaRBOs.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //
 //////////////////////////////////////////////////////////////////////
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;LuaRBOs.h&quot;
 
 #include &quot;LuaInclude.h&quot;

Modified: trunk/rts/Lua/LuaRules.cpp
===================================================================
--- trunk/rts/Lua/LuaRules.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaRules.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,10 +3,13 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaRules.h&quot;
 #include &lt;set&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaRules.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaCallInCheck.h&quot;

Modified: trunk/rts/Lua/LuaScream.cpp
===================================================================
--- trunk/rts/Lua/LuaScream.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaScream.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //
 //////////////////////////////////////////////////////////////////////
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;LuaScream.h&quot;
 
 #include &quot;LuaInclude.h&quot;

Modified: trunk/rts/Lua/LuaShaders.cpp
===================================================================
--- trunk/rts/Lua/LuaShaders.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaShaders.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,13 +3,15 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaShaders.h&quot;
-
 #include &lt;string&gt;
 #include &lt;vector&gt;
 using std::string;
 using std::vector;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaShaders.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHashString.h&quot;

Modified: trunk/rts/Lua/LuaSyncedCall.cpp
===================================================================
--- trunk/rts/Lua/LuaSyncedCall.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaSyncedCall.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,12 +3,15 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaSyncedCall.h&quot;
 #include &lt;set&gt;
 #include &lt;list&gt;
 #include &lt;cctype&gt;
 using namespace std;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaSyncedCall.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaSyncedCtrl.cpp
===================================================================
--- trunk/rts/Lua/LuaSyncedCtrl.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaSyncedCtrl.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,11 +3,14 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaSyncedCtrl.h&quot;
 #include &lt;set&gt;
 #include &lt;list&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaSyncedCtrl.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaRules.h&quot; // for MAX_LUA_COB_ARGS

Modified: trunk/rts/Lua/LuaSyncedMoveCtrl.cpp
===================================================================
--- trunk/rts/Lua/LuaSyncedMoveCtrl.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaSyncedMoveCtrl.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,11 +3,14 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaSyncedMoveCtrl.h&quot;
 #include &lt;set&gt;
 #include &lt;list&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaSyncedMoveCtrl.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaSyncedRead.cpp
===================================================================
--- trunk/rts/Lua/LuaSyncedRead.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaSyncedRead.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,11 +3,14 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaSyncedRead.h&quot;
 #include &lt;set&gt;
 #include &lt;list&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaSyncedRead.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaSyncedTable.cpp
===================================================================
--- trunk/rts/Lua/LuaSyncedTable.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaSyncedTable.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -8,6 +8,7 @@
 //         __newindex call. This could be used in conjunction with the
 //         current setup to avoid table creation in WrapTable().
 
+#include &quot;mmgr.h&quot;
 
 #include &quot;LuaSyncedTable.h&quot;
 

Modified: trunk/rts/Lua/LuaTextures.cpp
===================================================================
--- trunk/rts/Lua/LuaTextures.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaTextures.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //
 //////////////////////////////////////////////////////////////////////
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;LuaTextures.h&quot;
 
 #include &quot;Rendering/GL/myGL.h&quot;

Modified: trunk/rts/Lua/LuaUnitDefs.cpp
===================================================================
--- trunk/rts/Lua/LuaUnitDefs.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaUnitDefs.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,8 +3,6 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaUnitDefs.h&quot;
-
 #include &lt;set&gt;
 #include &lt;string&gt;
 #include &lt;vector&gt;
@@ -12,6 +10,10 @@
 #include &lt;map&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaUnitDefs.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaDefs.h&quot;

Modified: trunk/rts/Lua/LuaUnitRendering.cpp
===================================================================
--- trunk/rts/Lua/LuaUnitRendering.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaUnitRendering.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //
 //////////////////////////////////////////////////////////////////////
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;LuaUnitRendering.h&quot;
 #include &quot;LuaMaterial.h&quot;
 

Modified: trunk/rts/Lua/LuaUnsyncedCall.cpp
===================================================================
--- trunk/rts/Lua/LuaUnsyncedCall.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaUnsyncedCall.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,12 +3,15 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaUnsyncedCall.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &lt;set&gt;
 #include &lt;list&gt;
 #include &lt;cctype&gt;
 using namespace std;
 
+#include &quot;LuaUnsyncedCall.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaUnsyncedCtrl.cpp
===================================================================
--- trunk/rts/Lua/LuaUnsyncedCtrl.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaUnsyncedCtrl.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,7 +3,6 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaUnsyncedCtrl.h&quot;
 #include &lt;set&gt;
 #include &lt;list&gt;
 #include &lt;cctype&gt;
@@ -15,6 +14,10 @@
 #include &lt;SDL_mouse.h&gt;
 #include &lt;SDL_timer.h&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaUnsyncedCtrl.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaUnsyncedRead.cpp
===================================================================
--- trunk/rts/Lua/LuaUnsyncedRead.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaUnsyncedRead.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,7 +3,6 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaUnsyncedRead.h&quot;
 #include &lt;set&gt;
 #include &lt;list&gt;
 #include &lt;cctype&gt;
@@ -14,6 +13,10 @@
 #include &quot;SDL_keysym.h&quot;
 #include &quot;SDL_mouse.h&quot;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaUnsyncedRead.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaUtils.cpp
===================================================================
--- trunk/rts/Lua/LuaUtils.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaUtils.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,10 +3,13 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaUtils.h&quot;
 #include &lt;set&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaUtils.h&quot;
+
 #include &quot;LogOutput.h&quot;
 
 

Modified: trunk/rts/Lua/LuaVFS.cpp
===================================================================
--- trunk/rts/Lua/LuaVFS.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaVFS.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,7 +3,6 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaVFS.h&quot;
 #include &lt;set&gt;
 #include &lt;list&gt;
 #include &lt;cctype&gt;
@@ -11,6 +10,10 @@
 #include &lt;boost/regex.hpp&gt;
 using namespace std;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaVFS.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaHandle.h&quot;

Modified: trunk/rts/Lua/LuaWeaponDefs.cpp
===================================================================
--- trunk/rts/Lua/LuaWeaponDefs.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Lua/LuaWeaponDefs.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,8 +3,6 @@
 //
 //////////////////////////////////////////////////////////////////////
 
-#include &quot;LuaWeaponDefs.h&quot;
-
 #include &lt;set&gt;
 #include &lt;string&gt;
 #include &lt;vector&gt;
@@ -12,6 +10,10 @@
 #include &lt;map&gt;
 #include &lt;cctype&gt;
 
+#include &quot;mmgr.h&quot;
+
+#include &quot;LuaWeaponDefs.h&quot;
+
 #include &quot;LuaInclude.h&quot;
 
 #include &quot;LuaDefs.h&quot;

Modified: trunk/rts/Map/BaseGroundDrawer.cpp
===================================================================
--- trunk/rts/Map/BaseGroundDrawer.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Map/BaseGroundDrawer.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,5 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
 
 #include &quot;BaseGroundDrawer.h&quot;
 
@@ -19,9 +20,9 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;System/Platform/ConfigHandler.h&quot;
 #include &quot;System/FastMath.h&quot;
-#include &quot;mmgr.h&quot;
 
 
+
 CBaseGroundDrawer::CBaseGroundDrawer(void)
 {
 	updateFov = true;

Modified: trunk/rts/Map/BasicMapDamage.cpp
===================================================================
--- trunk/rts/Map/BasicMapDamage.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Map/BasicMapDamage.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BasicMapDamage.h&quot;
 #include &quot;ReadMap.h&quot;
 #include &quot;MapInfo.h&quot;
@@ -17,7 +19,6 @@
 #include &quot;Sim/Features/FeatureHandler.h&quot;
 #include &quot;Sim/Units/UnitTypes/Building.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 CBasicMapDamage::CBasicMapDamage(void)

Modified: trunk/rts/Map/Ground.cpp
===================================================================
--- trunk/rts/Map/Ground.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Map/Ground.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Ground.h&quot;
 #include &quot;ReadMap.h&quot;
 #include &quot;Game/Camera.h&quot;
@@ -10,7 +12,6 @@
 #include &quot;Sim/Projectiles/Projectile.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Sim/Misc/GeometricObjects.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Map/HeightMapTexture.cpp
===================================================================
--- trunk/rts/Map/HeightMapTexture.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Map/HeightMapTexture.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // HeightMapTexture.cpp: implementation of the HeightMapTexture class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;HeightMapTexture.h&quot;
 

Modified: trunk/rts/Map/MapDamage.cpp
===================================================================
--- trunk/rts/Map/MapDamage.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Map/MapDamage.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;MapDamage.h&quot;
 #include &quot;BasicMapDamage.h&quot;
 #include &quot;NoMapDamage.h&quot;

Modified: trunk/rts/Map/MapInfo.cpp
===================================================================
--- trunk/rts/Map/MapInfo.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Map/MapInfo.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,5 +1,6 @@
 #include &quot;StdAfx.h&quot;
 #include &lt;assert.h&gt;
+#include &quot;mmgr.h&quot;
 
 #include &quot;MapInfo.h&quot;
 

Modified: trunk/rts/Map/MapParser.cpp
===================================================================
--- trunk/rts/Map/MapParser.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Map/MapParser.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -4,6 +4,8 @@
 #include &lt;ctype.h&gt;
 using namespace std;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;MapParser.h&quot;
 #include &quot;Lua/LuaSyncedRead.h&quot;
 #include &quot;System/FileSystem/FileHandler.h&quot;

Modified: trunk/rts/Map/MetalMap.cpp
===================================================================
--- trunk/rts/Map/MetalMap.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Map/MetalMap.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,10 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;MetalMap.h&quot;
 #include &quot;GlobalStuff.h&quot;
 #include &quot;ReadMap.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND(CMetalMap,(NULL, 0, 0, 0.0f));
 

Modified: trunk/rts/Map/ReadMap.cpp
===================================================================
--- trunk/rts/Map/ReadMap.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Map/ReadMap.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,10 +3,12 @@
 //
 //////////////////////////////////////////////////////////////////////
 
+#include &lt;stdlib.h&gt;
+#include &lt;string&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;ReadMap.h&quot;
-#include &lt;stdlib.h&gt;
-#include &lt;string&gt;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;Ground.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
@@ -23,7 +25,6 @@
 #include &quot;System/LoadSaveInterface.h&quot;
 #include &quot;System/LogOutput.h&quot;
 #include &quot;System/Platform/errorhandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Rendering/Env/AdvSky.cpp
===================================================================
--- trunk/rts/Rendering/Env/AdvSky.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/AdvSky.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;AdvSky.h&quot;
 
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -14,7 +16,6 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;Matrix44f.h&quot;
-#include &quot;mmgr.h&quot;
 
 #define Y_PART 10.0
 #define X_PART 10.0

Modified: trunk/rts/Rendering/Env/AdvTreeDrawer.cpp
===================================================================
--- trunk/rts/Rendering/Env/AdvTreeDrawer.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/AdvTreeDrawer.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,7 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
 #include &quot;AdvTreeDrawer.h&quot;
 #include &quot;Map/BaseGroundDrawer.h&quot;
 #include &quot;Map/Ground.h&quot;
@@ -17,7 +18,6 @@
 #include &quot;GrassDrawer.h&quot;
 #include &quot;Matrix44f.h&quot;
 #include &quot;Rendering/ShadowHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/Env/AdvTreeGenerator.cpp
===================================================================
--- trunk/rts/Rendering/Env/AdvTreeGenerator.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/AdvTreeGenerator.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;AdvTreeGenerator.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
@@ -13,7 +15,6 @@
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;System/LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
 using std::max;
 using std::min;

Modified: trunk/rts/Rendering/Env/AdvWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/AdvWater.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/AdvWater.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;AdvWater.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -17,7 +19,6 @@
 #include &quot;Sim/Features/FeatureHandler.h&quot;
 #include &quot;System/EventHandler.h&quot;
 #include &quot;Map/MapInfo.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/Env/BaseSky.cpp
===================================================================
--- trunk/rts/Rendering/Env/BaseSky.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/BaseSky.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BaseSky.h&quot;
 #include &quot;BasicSky.h&quot;
 #include &quot;AdvSky.h&quot;
@@ -7,7 +9,6 @@
 #include &quot;SkyBox.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;mmgr.h&quot;
 
 CBaseSky* sky=0;
 

Modified: trunk/rts/Rendering/Env/BaseTreeDrawer.cpp
===================================================================
--- trunk/rts/Rendering/Env/BaseTreeDrawer.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/BaseTreeDrawer.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BaseTreeDrawer.h&quot;
 #include &quot;BasicTreeDrawer.h&quot;
 #include &quot;AdvTreeDrawer.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;Game/Camera.h&quot;
-#include &quot;mmgr.h&quot;
 
 CBaseTreeDrawer* treeDrawer=0;
 

Modified: trunk/rts/Rendering/Env/BaseWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/BaseWater.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/BaseWater.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BaseWater.h&quot;
 #include &quot;BasicWater.h&quot;
 #include &quot;AdvWater.h&quot;
@@ -8,7 +10,6 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;DynWater.h&quot;
 #include &quot;RefractWater.h&quot;
-#include &quot;mmgr.h&quot;
 
 CBaseWater* water=0;
 

Modified: trunk/rts/Rendering/Env/BasicSky.cpp
===================================================================
--- trunk/rts/Rendering/Env/BasicSky.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/BasicSky.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -6,6 +6,9 @@
 #endif
 
 #include &quot;StdAfx.h&quot;
+#include &lt;assert.h&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BasicSky.h&quot;
 
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -17,11 +20,9 @@
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;Matrix44f.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction
-#include &lt;assert.h&gt;
 
 //////////////////////////////////////////////////////////////////////
 

Modified: trunk/rts/Rendering/Env/BasicTreeDrawer.cpp
===================================================================
--- trunk/rts/Rendering/Env/BasicTreeDrawer.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/BasicTreeDrawer.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BasicTreeDrawer.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
@@ -12,7 +14,6 @@
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;System/LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/Env/BasicWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/BasicWater.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/BasicWater.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // DrawWater.cpp: implementation of the CBasicWater class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;BasicWater.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -9,7 +10,6 @@
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/Env/BumpWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/BumpWater.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/BumpWater.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -8,6 +8,9 @@
  */
 
 #include &quot;StdAfx.h&quot;
+#include &lt;boost/format.hpp&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;bitops.h&quot;
 #include &quot;BumpWater.h&quot;
 #include &quot;BaseSky.h&quot;
@@ -29,7 +32,6 @@
 #include &quot;System/Platform/ConfigHandler.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &lt;boost/format.hpp&gt;
 
 using std::string;
 using std::vector;

Modified: trunk/rts/Rendering/Env/DynWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/DynWater.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/DynWater.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,7 +1,9 @@
 #include &quot;StdAfx.h&quot;
+//#include &lt;windows.h&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;DynWater.h&quot;
 #include &quot;Game/Game.h&quot;
-//#include &lt;windows.h&gt;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;

Modified: trunk/rts/Rendering/Env/GrassDrawer.cpp
===================================================================
--- trunk/rts/Rendering/Env/GrassDrawer.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/GrassDrawer.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,7 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;algorithm&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;GrassDrawer.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Game/Camera.h&quot;
@@ -11,13 +14,11 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;myMath.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &lt;algorithm&gt;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Rendering/ShadowHandler.h&quot;
 //#include &quot;TimeProfiler.h&quot;
-#include &quot;mmgr.h&quot;
 
 static const float turfSize=20;				//single turf size
 static const int grassSquareSize=4;		//mapsquares per grass square

Modified: trunk/rts/Rendering/Env/RefractWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/RefractWater.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/RefractWater.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,5 +1,7 @@
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;RefractWater.h&quot;
 #include &quot;LogOutput.h&quot;

Modified: trunk/rts/Rendering/Env/SkyBox.cpp
===================================================================
--- trunk/rts/Rendering/Env/SkyBox.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Env/SkyBox.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;SkyBox.h&quot;
 #include &quot;float3.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -8,7 +10,6 @@
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
-#include &quot;mmgr.h&quot;
 
 CSkyBox::CSkyBox(std::string texture)
 {

Modified: trunk/rts/Rendering/FartextureHandler.cpp
===================================================================
--- trunk/rts/Rendering/FartextureHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/FartextureHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;FartextureHandler.h&quot;
 #include &quot;UnitModels/3DOParser.h&quot;
 #include &quot;GL/myGL.h&quot;
@@ -6,7 +8,6 @@
 #include &quot;UnitModels/UnitDrawer.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;Map/MapInfo.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 CFartextureHandler* fartextureHandler = NULL;

Modified: trunk/rts/Rendering/FontTexture.cpp
===================================================================
--- trunk/rts/Rendering/FontTexture.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/FontTexture.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -25,6 +25,8 @@
 #include &lt;IL/il.h&gt;
 #include &lt;IL/ilu.h&gt;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;FontTexture.h&quot;
 #include &quot;LogOutput.h&quot;
 

Modified: trunk/rts/Rendering/GL/FBO.cpp
===================================================================
--- trunk/rts/Rendering/GL/FBO.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/GL/FBO.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -10,6 +10,8 @@
 #include &quot;StdAfx.h&quot;
 #include &lt;assert.h&gt;
 #include &lt;vector&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;IFramebuffer.h&quot;
 #include &quot;FBO.h&quot;
 #include &quot;LogOutput.h&quot;

Modified: trunk/rts/Rendering/GL/VertexArray.cpp
===================================================================
--- trunk/rts/Rendering/GL/VertexArray.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/GL/VertexArray.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,9 +3,10 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;VertexArray.h&quot;
 #include &quot;myGL.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/GL/VertexArrayRange.cpp
===================================================================
--- trunk/rts/Rendering/GL/VertexArrayRange.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/GL/VertexArrayRange.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,9 +3,10 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
-#include &quot;VertexArrayRange.h&quot;
 #include &quot;mmgr.h&quot;
 
+#include &quot;VertexArrayRange.h&quot;
+
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Rendering/GL/glExtra.cpp
===================================================================
--- trunk/rts/Rendering/GL/glExtra.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/GL/glExtra.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,7 +1,8 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;glExtra.h&quot;
 #include &quot;Map/Ground.h&quot;
-#include &quot;mmgr.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;LogOutput.h&quot;
 

Modified: trunk/rts/Rendering/GL/glList.cpp
===================================================================
--- trunk/rts/Rendering/GL/glList.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/GL/glList.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -4,13 +4,14 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;glList.h&quot;
+#include &lt;SDL_keysym.h&gt;
+#include &lt;SDL_mouse.h&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;myGL.h&quot;
 #include &quot;Game/UI/MouseHandler.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &lt;SDL_keysym.h&gt;
-#include &lt;SDL_mouse.h&gt;
-#include &quot;mmgr.h&quot;
 
 const float itemFontScale = 1.5f;
 const float itemXMargin = 0.02f;

Modified: trunk/rts/Rendering/GL/glTextBox.cpp
===================================================================
--- trunk/rts/Rendering/GL/glTextBox.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/GL/glTextBox.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,10 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;glTextBox.h&quot;
 #include &quot;myGL.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;Game/UI/MouseHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 CglTextBox::CglTextBox(std::string heading,std::string intext,int autoBreakAt)

Modified: trunk/rts/Rendering/GL/myGL.cpp
===================================================================
--- trunk/rts/Rendering/GL/myGL.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/GL/myGL.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,8 +1,11 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;ostream&gt;
+#include &lt;fstream&gt;
+#include &lt;SDL.h&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;myGL.h&quot;
 #include &quot;Rendering/glFont.h&quot;
-#include &lt;ostream&gt;
-#include &lt;fstream&gt;
 #include &quot;VertexArray.h&quot;
 #include &quot;VertexArrayRange.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
@@ -12,11 +15,8 @@
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;FPUCheck.h&quot;
-#include &lt;SDL.h&gt;
-#include &quot;mmgr.h&quot;
 #include &quot;System/GlobalStuff.h&quot;
 
-
 #include &quot;IFramebuffer.h&quot;
 
 using namespace std;

Modified: trunk/rts/Rendering/GroundDecalHandler.cpp
===================================================================
--- trunk/rts/Rendering/GroundDecalHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/GroundDecalHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,6 +1,8 @@
 #include &quot;StdAfx.h&quot;
 #include &lt;algorithm&gt;
 #include &lt;cctype&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;GroundDecalHandler.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
@@ -17,7 +19,6 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitTypes/Building.h&quot;
 #include &quot;System/LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
 using std::list;
 using std::min;

Modified: trunk/rts/Rendering/GroundFlash.cpp
===================================================================
--- trunk/rts/Rendering/GroundFlash.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/GroundFlash.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;GroundFlash.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Map/Ground.h&quot;
@@ -6,7 +8,6 @@
 #include &quot;GL/VertexArray.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Rendering/Textures/ColorMap.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CGroundFlash, CExpGenSpawnable, );
 

Modified: trunk/rts/Rendering/IconHandler.cpp
===================================================================
--- trunk/rts/Rendering/IconHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/IconHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -7,12 +7,13 @@
 #include &lt;cctype&gt;
 #include &lt;vector&gt;
 #include &lt;string&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;GlobalStuff.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;IconHandler.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
-#include &quot;mmgr.h&quot;
 
 using std::string;
 

Modified: trunk/rts/Rendering/InMapDraw.cpp
===================================================================
--- trunk/rts/Rendering/InMapDraw.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/InMapDraw.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,8 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;SDL_mouse.h&quot;
+#include &quot;SDL_keyboard.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;InMapDraw.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/Game.h&quot;
@@ -17,8 +21,6 @@
 #include &quot;System/LogOutput.h&quot;
 #include &quot;System/Sound.h&quot;
 #include &quot;creg/STL_List.h&quot;
-#include &quot;SDL_mouse.h&quot;
-#include &quot;SDL_keyboard.h&quot;
 
 
 #define DRAW_QUAD_SIZE 32

Modified: trunk/rts/Rendering/ShadowHandler.cpp
===================================================================
--- trunk/rts/Rendering/ShadowHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/ShadowHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;ShadowHandler.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;Game/Camera.h&quot;
@@ -15,7 +17,6 @@
 #include &quot;Rendering/GL/IFramebuffer.h&quot;
 #include &quot;Sim/Features/FeatureHandler.h&quot;
 #include &quot;System/EventHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CShadowHandler* shadowHandler=0;
 

Modified: trunk/rts/Rendering/Textures/Bitmap.cpp
===================================================================
--- trunk/rts/Rendering/Textures/Bitmap.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Textures/Bitmap.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -10,11 +10,9 @@
 //#define USE_QUICKTIME
 #endif
 
-#include &quot;Rendering/GL/myGL.h&quot;
 #include &lt;ostream&gt;
 #include &lt;fstream&gt;
 #include &lt;string.h&gt;
-#include &quot;FileSystem/FileHandler.h&quot;
 #if defined(USE_QUICKTIME)
 #include &lt;QuickTime/ImageCompression.h&gt;
 #include &lt;QuickTime/QuickTimeComponents.h&gt;
@@ -22,10 +20,13 @@
 #include &lt;IL/il.h&gt;
 #include &lt;IL/ilu.h&gt;
 #endif
+#include &quot;mmgr.h&quot;
+
+#include &quot;Rendering/GL/myGL.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;Platform/FileSystem.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;bitops.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/Textures/ColorMap.cpp
===================================================================
--- trunk/rts/Rendering/Textures/ColorMap.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Textures/ColorMap.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,11 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;sstream&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;ColorMap.h&quot;
 #include &quot;Bitmap.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
-#include &lt;sstream&gt;
 
 std::vector&lt;CColorMap *&gt; CColorMap::colorMaps;
 std::map&lt;std::string, CColorMap *&gt; CColorMap::colorMapsMap;

Modified: trunk/rts/Rendering/Textures/NamedTextures.cpp
===================================================================
--- trunk/rts/Rendering/Textures/NamedTextures.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Textures/NamedTextures.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;bitops.h&quot;
 #include &quot;NamedTextures.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;

Modified: trunk/rts/Rendering/Textures/TAPalette.cpp
===================================================================
--- trunk/rts/Rendering/Textures/TAPalette.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Textures/TAPalette.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,7 +1,8 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;TAPalette.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/Textures/TextureAtlas.cpp
===================================================================
--- trunk/rts/Rendering/Textures/TextureAtlas.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Textures/TextureAtlas.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;list&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;TextureAtlas.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &lt;list&gt;
 
 CR_BIND(AtlasedTexture, );
 CR_BIND_DERIVED(GroundFXTexture, AtlasedTexture, );

Modified: trunk/rts/Rendering/Textures/TextureHandler.cpp
===================================================================
--- trunk/rts/Rendering/Textures/TextureHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Textures/TextureHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,13 +3,14 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
-#include &quot;TextureHandler.h&quot;
 
 #include &lt;algorithm&gt;
 #include &lt;cctype&gt;
 #include &lt;set&gt;
 #include &lt;sstream&gt;
+#include &quot;mmgr.h&quot;
 
+#include &quot;TextureHandler.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;FileSystem/SimpleParser.h&quot;
 #include &quot;Game/Team.h&quot;
@@ -21,7 +22,6 @@
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
 #include &quot;TAPalette.h&quot;
-#include &quot;mmgr.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/Textures/nv_dds.cpp
===================================================================
--- trunk/rts/Rendering/Textures/nv_dds.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/Textures/nv_dds.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -189,14 +189,16 @@
 #include &lt;string.h&gt;
 #include &lt;assert.h&gt;
 #include &quot;nv_dds.h&quot;
+
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;Platform/byteorder.h&quot;
-
 // Moved because of conflicts with GLEW.
 #if defined(UNIX) || defined(unix)
 #  include &lt;GL/glx.h&gt;
 #endif
 
+#include &quot;mmgr.h&quot;
+
 using namespace std;
 using namespace nv_dds;
 

Modified: trunk/rts/Rendering/UnitModels/3DModelParser.cpp
===================================================================
--- trunk/rts/Rendering/UnitModels/3DModelParser.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/UnitModels/3DModelParser.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;algorithm&gt;
+#include &lt;cctype&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;3DModelParser.h&quot;
 #include &quot;3DOParser.h&quot;
 #include &quot;s3oParser.h&quot;
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
-#include &lt;algorithm&gt;
-#include &lt;cctype&gt;
 
 C3DModelParser* modelParser=0;
 

Modified: trunk/rts/Rendering/UnitModels/3DOParser.cpp
===================================================================
--- trunk/rts/Rendering/UnitModels/3DOParser.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/UnitModels/3DOParser.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,31 +3,32 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &lt;vector&gt;
+#include &lt;set&gt;
+#include &lt;algorithm&gt;
+#include &lt;cctype&gt;
+#include &lt;locale&gt;
+#include &lt;stdexcept&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;3DOParser.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;GlobalStuff.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &lt;vector&gt;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;FileSystem/VFSHandler.h&quot;
-#include &lt;set&gt;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;FileSystem/SimpleParser.h&quot;
 #include &quot;Rendering/FartextureHandler.h&quot;
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
 #include &quot;Rendering/Textures/TAPalette.h&quot;
 #include &quot;Matrix44f.h&quot;
-#include &lt;algorithm&gt;
-#include &lt;cctype&gt;
-#include &lt;locale&gt;
-#include &lt;stdexcept&gt;
 #include &quot;Game/Team.h&quot;
 #include &quot;Game/Player.h&quot;
 #include &quot;Platform/errorhandler.h&quot;
 #include &quot;Platform/byteorder.h&quot;
 #include &quot;SDL_types.h&quot;
 #include &quot;s3oParser.h&quot;
-#include &quot;mmgr.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Rendering/UnitModels/UnitDrawer.cpp
===================================================================
--- trunk/rts/Rendering/UnitModels/UnitDrawer.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/UnitModels/UnitDrawer.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;UnitDrawer.h&quot;
 #include &quot;myMath.h&quot;
 #include &quot;LogOutput.h&quot;

Modified: trunk/rts/Rendering/UnitModels/s3oParser.cpp
===================================================================
--- trunk/rts/Rendering/UnitModels/s3oParser.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/UnitModels/s3oParser.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -7,6 +7,8 @@
 #include &lt;fstream&gt;
 #include &lt;locale&gt;
 #include &lt;stdexcept&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;s3oParser.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
@@ -16,7 +18,6 @@
 #include &quot;Rendering/Textures/TextureHandler.h&quot;
 #include &quot;Platform/byteorder.h&quot;
 #include &quot;Platform/errorhandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 void SS3O::DrawStatic()
 {

Modified: trunk/rts/Rendering/VerticalSync.cpp
===================================================================
--- trunk/rts/Rendering/VerticalSync.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/VerticalSync.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -8,11 +8,12 @@
 #else
 #include &lt;GL/glxew.h&gt; // for glXWaitVideoSyncSGI()
 #endif
+#include &quot;mmgr.h&quot;
+
 #include &quot;VerticalSync.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;System/LogOutput.h&quot;
 #include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 CVerticalSync VSync;

Modified: trunk/rts/Rendering/glFont.cpp
===================================================================
--- trunk/rts/Rendering/glFont.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Rendering/glFont.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -7,10 +7,11 @@
 #include &lt;stdio.h&gt;
 #include &lt;stdarg.h&gt;
 #include &lt;stdexcept&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;myMath.h&quot;
 #include &quot;Platform/FileSystem.h&quot;
-#include &quot;mmgr.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Sim/Features/Feature.cpp
===================================================================
--- trunk/rts/Sim/Features/Feature.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Features/Feature.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Feature.h&quot;
 #include &quot;FeatureHandler.h&quot;
 #include &quot;Game/Team.h&quot;
@@ -22,7 +24,6 @@
 #include &quot;Sim/Projectiles/Unsynced/SmokeProjectile.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CFeature, CSolidObject, )
 

Modified: trunk/rts/Sim/Features/FeatureHandler.cpp
===================================================================
--- trunk/rts/Sim/Features/FeatureHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Features/FeatureHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;FeatureHandler.h&quot;
 #include &quot;Feature.h&quot;
 #include &quot;Game/Camera.h&quot;
@@ -26,7 +28,6 @@
 #include &quot;System/EventHandler.h&quot;
 #include &quot;System/TimeProfiler.h&quot;
 #include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;mmgr.h&quot;
 #include &quot;creg/STL_List.h&quot;
 #include &quot;creg/STL_Set.h&quot;
 

Modified: trunk/rts/Sim/Misc/AirBaseHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/AirBaseHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/AirBaseHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,10 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
 #include &quot;AirBaseHandler.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;creg/STL_List.h&quot;
-#include &quot;mmgr.h&quot;
 
 CAirBaseHandler* airBaseHandler=0;
 

Modified: trunk/rts/Sim/Misc/CategoryHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/CategoryHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/CategoryHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,12 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;CategoryHandler.h&quot;
-#include &quot;LogOutput.h&quot;
 #include &lt;algorithm&gt;
 #include &lt;cctype&gt;
-#include &quot;creg/STL_Map.h&quot;
 #include &quot;mmgr.h&quot;
 
+#include &quot;CategoryHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;creg/STL_Map.h&quot;
+
 CR_BIND(CCategoryHandler, );
 
 CR_REG_METADATA(CCategoryHandler, (

Modified: trunk/rts/Sim/Misc/CollisionHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/CollisionHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/CollisionHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;System/FastMath.h&quot;
 #include &quot;System/float3.h&quot;
 #include &quot;System/Matrix44f.h&quot;

Modified: trunk/rts/Sim/Misc/DamageArray.cpp
===================================================================
--- trunk/rts/Sim/Misc/DamageArray.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/DamageArray.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;DamageArray.h&quot;
 #include &quot;DamageArrayHandler.h&quot;
 

Modified: trunk/rts/Sim/Misc/DamageArrayHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/DamageArrayHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/DamageArrayHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,14 +1,15 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;algorithm&gt;
+#include &lt;locale&gt;
+#include &lt;cctype&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;DamageArrayHandler.h&quot;
 #include &quot;DamageArray.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
-#include &lt;algorithm&gt;
-#include &lt;locale&gt;
-#include &lt;cctype&gt;
 #include &quot;creg/STL_Map.h&quot;
-#include &quot;mmgr.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Sim/Misc/GeometricObjects.cpp
===================================================================
--- trunk/rts/Sim/Misc/GeometricObjects.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/GeometricObjects.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;creg/STL_Map.h&quot;
 #include &quot;GeometricObjects.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Projectiles/Unsynced/GeoSquareProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND(CGeometricObjects, );
 CR_BIND(CGeometricObjects::GeoGroup, );

Modified: trunk/rts/Sim/Misc/GroundBlockingObjectMap.cpp
===================================================================
--- trunk/rts/Sim/Misc/GroundBlockingObjectMap.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/GroundBlockingObjectMap.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,5 +1,6 @@
 #include &quot;StdAfx.h&quot;
 #include &lt;assert.h&gt;
+#include &quot;mmgr.h&quot;
 
 #include &quot;GroundBlockingObjectMap.h&quot;
 #include &quot;Sim/Objects/SolidObject.h&quot;

Modified: trunk/rts/Sim/Misc/InterceptHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/InterceptHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/InterceptHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;InterceptHandler.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Projectiles/WeaponProjectiles/WeaponProjectile.h&quot;
@@ -7,7 +9,6 @@
 #include &quot;Sim/Weapons/PlasmaRepulser.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;creg/STL_List.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND(CInterceptHandler, )
 CR_REG_METADATA(CInterceptHandler, (

Modified: trunk/rts/Sim/Misc/LosHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/LosHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/LosHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,19 +2,19 @@
 // LosHandler.cpp: implementation of the CLosHandler class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &lt;list&gt;
+#include &quot;mmgr.h&quot;
 
 #include &quot;LosHandler.h&quot;
 
 #include &quot;Sim/ModInfo.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
-#include &lt;list&gt;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Platform/errorhandler.h&quot;
 #include &quot;creg/STL_Deque.h&quot;
 #include &quot;creg/STL_List.h&quot;
-#include &quot;mmgr.h&quot;
 
 using std::min;
 using std::max;

Modified: trunk/rts/Sim/Misc/QuadField.cpp
===================================================================
--- trunk/rts/Sim/Misc/QuadField.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/QuadField.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,13 +3,14 @@
 //
 //////////////////////////////////////////////////////////////////////
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;QuadField.h&quot;
 
 #include &quot;Sim/Features/Feature.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;creg/STL_List.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 CR_BIND(CQuadField, );

Modified: trunk/rts/Sim/Misc/RadarHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/RadarHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/RadarHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,11 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;RadarHandler.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;LosHandler.h&quot;
 #include &quot;Rendering/UnitModels/3DOParser.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 CR_BIND(CRadarHandler, (false));

Modified: trunk/rts/Sim/Misc/Wind.cpp
===================================================================
--- trunk/rts/Sim/Misc/Wind.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Misc/Wind.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,8 +1,9 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Wind.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Map/MapInfo.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND(CWind, );
 

Modified: trunk/rts/Sim/ModInfo.cpp
===================================================================
--- trunk/rts/Sim/ModInfo.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/ModInfo.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,5 +1,7 @@
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;GlobalStuff.h&quot;
 #include &quot;ModInfo.h&quot;
 #include &quot;Game/GameSetup.h&quot;

Modified: trunk/rts/Sim/MoveTypes/AirMoveType.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/AirMoveType.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/MoveTypes/AirMoveType.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;AirMoveType.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/Player.h&quot;
@@ -18,7 +20,6 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sound.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CAirMoveType, AAirMoveType, (NULL));
 CR_BIND(CAirMoveType::DrawLine, );

Modified: trunk/rts/Sim/MoveTypes/GroundMoveType.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/GroundMoveType.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/MoveTypes/GroundMoveType.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;GroundMoveType.h&quot;
 #include &quot;ExternalAI/GlobalAIHandler.h&quot;
 #include &quot;Game/Camera.h&quot;
@@ -33,7 +35,6 @@
 #include &quot;System/Sound.h&quot;
 #include &quot;System/FastMath.h&quot;
 #include &quot;myMath.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CGroundMoveType, AMoveType, (NULL));
 

Modified: trunk/rts/Sim/MoveTypes/MoveInfo.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/MoveInfo.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/MoveTypes/MoveInfo.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,7 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;boost/lexical_cast.hpp&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;MoveInfo.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
@@ -6,10 +9,8 @@
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;MoveMath/MoveMath.h&quot;
-#include &lt;boost/lexical_cast.hpp&gt;
 #include &quot;creg/STL_Deque.h&quot;
 #include &quot;creg/STL_Map.h&quot;
-#include &quot;mmgr.h&quot;
 
 using std::min;
 using std::max;

Modified: trunk/rts/Sim/MoveTypes/MoveType.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/MoveType.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/MoveTypes/MoveType.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,10 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;MoveType.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED_INTERFACE(AMoveType, CObject);
 

Modified: trunk/rts/Sim/MoveTypes/ScriptMoveType.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/ScriptMoveType.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/MoveTypes/ScriptMoveType.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,5 +1,6 @@
 
 #include &quot;StdAfx.h&quot;
+#include &quot;System/mmgr.h&quot;
 
 #include &quot;ScriptMoveType.h&quot;
 
@@ -17,7 +18,6 @@
 #include &quot;Sim/Units/UnitTypes/Building.h&quot;
 #include &quot;System/Matrix44f.h&quot;
 #include &quot;System/myMath.h&quot;
-#include &quot;System/mmgr.h&quot;
 
 CR_BIND_DERIVED(CScriptMoveType, AMoveType, (NULL));
 

Modified: trunk/rts/Sim/MoveTypes/TAAirMoveType.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/TAAirMoveType.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/MoveTypes/TAAirMoveType.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,5 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
 
 #include &quot;TAAirMoveType.h&quot;
 

Modified: trunk/rts/Sim/Objects/SolidObject.cpp
===================================================================
--- trunk/rts/Sim/Objects/SolidObject.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Objects/SolidObject.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;SolidObject.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;LogOutput.h&quot;

Modified: trunk/rts/Sim/Objects/WorldObject.cpp
===================================================================
--- trunk/rts/Sim/Objects/WorldObject.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Objects/WorldObject.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,8 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
 #include &quot;WorldObject.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CWorldObject, CObject, )
 CR_REG_METADATA(CWorldObject, (

Modified: trunk/rts/Sim/Path/PathCache.cpp
===================================================================
--- trunk/rts/Sim/Path/PathCache.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Path/PathCache.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,10 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;PathCache.h&quot;
 #include &lt;algorithm&gt;
-#include &quot;LogOutput.h&quot;
 #include &quot;mmgr.h&quot;
 
+#include &quot;PathCache.h&quot;
+#include &quot;LogOutput.h&quot;
+
 using namespace std;
 
 CPathCache::CPathCache(int blocksX,int blocksZ)

Modified: trunk/rts/Sim/Path/PathEstimator.cpp
===================================================================
--- trunk/rts/Sim/Path/PathEstimator.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Path/PathEstimator.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,22 +1,25 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;fstream&gt;
+#include &lt;boost/bind.hpp&gt;
+#include &lt;boost/version.hpp&gt;
+#include &quot;lib/minizip/zip.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;PathEstimator.h&quot;
+
 #include &quot;LogOutput.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &lt;fstream&gt;
 
 #include &quot;Map/Ground.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 
-#include &quot;lib/minizip/zip.h&quot;
 #include &quot;FileSystem/ArchiveZip.h&quot;
 #include &quot;Platform/FileSystem.h&quot;
 
-#include &lt;boost/bind.hpp&gt;
-#include &lt;boost/version.hpp&gt;
 
 #define PATHDEBUG false
 

Modified: trunk/rts/Sim/Path/PathEstimator.h
===================================================================
--- trunk/rts/Sim/Path/PathEstimator.h	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Path/PathEstimator.h	2008-08-21 22:35:06 UTC (rev 6295)
@@ -39,9 +39,11 @@
 		CPathEstimator(CPathFinder* pathFinder, unsigned int BLOCK_SIZE, unsigned int moveMathOpt, std::string name);
 		~CPathEstimator();
 
+#if !defined(USE_MMGR)
 		// note: thread-safety (see PathFinder.cpp)?
 		void* operator new(size_t size) { return pfAlloc(size); }
 		inline void operator delete(void* p, size_t size) { pfDealloc(p, size); }
+#endif
 
 		void Draw(void);
 

Modified: trunk/rts/Sim/Path/PathFinder.cpp
===================================================================
--- trunk/rts/Sim/Path/PathFinder.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Path/PathFinder.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,13 +1,14 @@
 #include &quot;StdAfx.h&quot;
+#include &lt;ostream&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;PathFinder.h&quot;
 #include &quot;Sim/MoveTypes/MoveMath/MoveMath.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Rendering/GL/glExtra.h&quot;
-#include &lt;ostream&gt;
 #include &quot;Sim/MoveTypes/MoveInfo.h&quot;
 #include &quot;Map/Ground.h&quot;
-#include &quot;mmgr.h&quot;
 
 #define PATHDEBUG false
 

Modified: trunk/rts/Sim/Path/PathFinder.h
===================================================================
--- trunk/rts/Sim/Path/PathFinder.h	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Path/PathFinder.h	2008-08-21 22:35:06 UTC (rev 6295)
@@ -17,8 +17,10 @@
 	CPathFinder();
 	virtual ~CPathFinder();
 
+#if !defined(USE_MMGR)
 	void* operator new(size_t size){return pfAlloc(size);};
 	inline void operator delete(void* p,size_t size){pfDealloc(p,size);};
+#endif
 
 	/**
 	Gives a detailed path from given starting location to target defined in CPathFinderDef,

Modified: trunk/rts/Sim/Path/PathManager.cpp
===================================================================
--- trunk/rts/Sim/Path/PathManager.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Path/PathManager.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,8 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;SDL_timer.h&quot;
+#include &lt;vector&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;PathManager.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Sim/MoveTypes/MoveInfo.h&quot;
@@ -7,12 +11,9 @@
 #include &quot;Sim/MoveTypes/MoveMath/ShipMoveMath.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;TimeProfiler.h&quot;
-#include &lt;vector&gt;
 #include &quot;PathFinder.h&quot;
 #include &quot;PathEstimator.h&quot;
-#include &quot;SDL_timer.h&quot;
 #include &quot;Map/MapInfo.h&quot;
-#include &quot;mmgr.h&quot;
 
 const float ESTIMATE_DISTANCE = 55;
 const float MIN_ESTIMATE_DISTANCE = 40;

Modified: trunk/rts/Sim/Projectiles/ExplosionGenerator.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/ExplosionGenerator.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/ExplosionGenerator.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,8 @@
 #include &lt;fstream&gt;
 #include &lt;stdexcept&gt;
 #include &lt;SDL_types.h&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;creg/VarTypes.h&quot;
 #include &quot;ExplosionGenerator.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
@@ -21,7 +23,6 @@
 #include &quot;Sim/Projectiles/Unsynced/SpherePartProjectile.h&quot;
 #include &quot;Sim/Projectiles/Unsynced/WakeProjectile.h&quot;
 #include &quot;Sim/Projectiles/Unsynced/WreckProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 using std::min;
 using std::max;

Modified: trunk/rts/Sim/Projectiles/FireProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/FireProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/FireProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;FireProjectile.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
@@ -8,7 +10,6 @@
 #include &quot;ProjectileHandler.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;creg/STL_List.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CFireProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),NULL,0,0,0,0));
 CR_BIND(CFireProjectile::SubParticle, );

Modified: trunk/rts/Sim/Projectiles/FlareProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/FlareProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/FlareProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;FlareProjectile.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;LogOutput.h&quot;
@@ -9,7 +11,6 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;WeaponProjectiles/MissileProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CFlareProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),0,0));
 

Modified: trunk/rts/Sim/Projectiles/PieceProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/PieceProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/PieceProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;GlobalStuff.h&quot;
@@ -19,7 +21,6 @@
 #include &quot;Sync/SyncTracer.h&quot;
 #include &quot;Unsynced/SmokeProjectile.h&quot;
 #include &quot;Unsynced/SmokeTrailProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 static const float Smoke_Time = 40;
 

Modified: trunk/rts/Sim/Projectiles/Projectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Projectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Projectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // Projectile.cpp: implementation of the CProjectile class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;Rendering/GL/myGL.h&quot;			// Header File For The OpenGL32 Library
 #include &quot;Projectile.h&quot;
@@ -12,7 +13,6 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;Rendering/UnitModels/3DModelParser.h&quot;
 #include &quot;Map/MapInfo.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CProjectile, CExpGenSpawnable, );
 

Modified: trunk/rts/Sim/Projectiles/ProjectileHandler.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/ProjectileHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/ProjectileHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,8 +3,10 @@
 //
 //////////////////////////////////////////////////////////////////////
 
+#include &quot;StdAfx.h&quot;
 #include &lt;algorithm&gt;
-#include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Projectile.h&quot;
 #include &quot;ProjectileHandler.h&quot;
 #include &quot;Game/Camera.h&quot;
@@ -36,7 +38,6 @@
 #include &quot;System/TimeProfiler.h&quot;
 #include &quot;System/creg/STL_Map.h&quot;
 #include &quot;System/creg/STL_List.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 CProjectileHandler* ph;

Modified: trunk/rts/Sim/Projectiles/ProjectileHandler.h
===================================================================
--- trunk/rts/Sim/Projectiles/ProjectileHandler.h	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/ProjectileHandler.h	2008-08-21 22:35:06 UTC (rev 6295)
@@ -128,8 +128,10 @@
 	void UpdatePerlin();
 	void GenerateNoiseTex(unsigned int tex,int size);
 	struct FlyingPiece{
+#if !defined(USE_MMGR)
 		inline void* operator new(size_t size){return mempool.Alloc(size);};
 		inline void operator delete(void* p,size_t size){mempool.Free(p,size);};
+#endif
 
 		S3DOPrimitive* prim;
 		S3DO* object;

Modified: trunk/rts/Sim/Projectiles/Unsynced/BitmapMuzzleFlame.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/BitmapMuzzleFlame.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/BitmapMuzzleFlame.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,11 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BitmapMuzzleFlame.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Rendering/Textures/ColorMap.h&quot;
 #include &quot;Rendering/Textures/TextureAtlas.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CBitmapMuzzleFlame, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/BubbleProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/BubbleProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/BubbleProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,10 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BubbleProjectile.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CBubbleProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),0,0,0,NULL,0));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/DirtProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/DirtProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/DirtProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,6 +2,7 @@
 // DirtProjectile.cpp: implementation of the CDirtCloudProjectile class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;DirtProjectile.h&quot;
 #include &quot;Game/Camera.h&quot;
@@ -9,7 +10,6 @@
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CDirtProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/ExploSpikeProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/ExploSpikeProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/ExploSpikeProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,10 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;ExploSpikeProjectile.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CExploSpikeProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/GenericParticleProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/GenericParticleProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/GenericParticleProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;GenericParticleProjectile.h&quot;
 #include &quot;GlobalStuff.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Rendering/Textures/ColorMap.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CGenericParticleProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),NULL));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/GeoSquareProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/GeoSquareProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/GeoSquareProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,9 +1,10 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;GeoSquareProjectile.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CGeoSquareProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),float3(0,0,0),0,0));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/GeoThermSmokeProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/GeoThermSmokeProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/GeoThermSmokeProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,8 +1,9 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;GeoThermSmokeProjectile.h&quot;
 #include &quot;Sim/Features/Feature.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CGeoThermSmokeProjectile,CSmokeProjectile,(float3(),float3(),1,0));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/GfxProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/GfxProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/GfxProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,12 +2,12 @@
 // GfxProjectile.cpp: implementation of the CGfxProjectile class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;Game/Camera.h&quot;
 #include &quot;GfxProjectile.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CGfxProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/HeatCloudProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/HeatCloudProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/HeatCloudProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -2,12 +2,12 @@
 // HeatCloudProjectile.cpp: implementation of the CHeatCloudCloudProjectile class.
 //
 //////////////////////////////////////////////////////////////////////
+#include &quot;mmgr.h&quot;
 
 #include &quot;Game/Camera.h&quot;
 #include &quot;HeatCloudProjectile.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CHeatCloudProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/MuzzleFlame.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/MuzzleFlame.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/MuzzleFlame.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;MuzzleFlame.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
+
 CR_BIND_DERIVED(CMuzzleFlame, CProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),0));
 
 CR_REG_METADATA(CMuzzleFlame,(

Modified: trunk/rts/Sim/Projectiles/Unsynced/RepulseGfx.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/RepulseGfx.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/RepulseGfx.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,11 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;RepulseGfx.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CRepulseGfx, CProjectile, (NULL,NULL,0,float3(0,0,0)));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/ShieldPartProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/ShieldPartProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/ShieldPartProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,11 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;ShieldPartProjectile.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Rendering/Textures/TextureAtlas.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CShieldPartProjectile, CProjectile, (float3(0,0,0),0,0,0,float3(0,0,0),0,NULL,NULL));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/SimpleParticleSystem.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SimpleParticleSystem.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/SimpleParticleSystem.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;GenericParticleProjectile.h&quot;
 #include &quot;GlobalStuff.h&quot;
@@ -6,7 +8,6 @@
 #include &quot;Rendering/Textures/ColorMap.h&quot;
 #include &quot;SimpleParticleSystem.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CSimpleParticleSystem, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,13 +3,14 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;SmokeProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CSmokeProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile2.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile2.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile2.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,13 +3,14 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;SmokeProjectile2.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CSmokeProjectile2, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/SmokeTrailProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SmokeTrailProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/SmokeTrailProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;myMath.h&quot;
@@ -11,7 +13,6 @@
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;SmokeTrailProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CSmokeTrailProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),float3(0,0,0),NULL,0,0,0,0,0,0,NULL,NULL));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/SpherePartProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SpherePartProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/SpherePartProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,10 +1,11 @@
 #include &quot;StdAfx.h&quot;
 #include &lt;algorithm&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;SpherePartProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 using std::min;
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/TracerProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/TracerProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/TracerProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,9 +3,10 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;TracerProjectile.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;			// Header File For The OpenGL32 Library
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CTracerProjectile, CProjectile, )
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/WakeProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/WakeProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/WakeProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;Rendering/Env/BaseWater.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;WakeProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CWakeProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),0,0,NULL,0,0,0));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/WreckProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/WreckProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/Unsynced/WreckProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/MapInfo.h&quot;
@@ -11,7 +13,6 @@
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;SmokeProjectile.h&quot;
 #include &quot;WreckProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CWreckProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),0,0));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/BeamLaserProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/BeamLaserProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/BeamLaserProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BeamLaserProjectile.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CBeamLaserProjectile, CWeaponProjectile,
 		(float3(0,0,0),float3(0,0,0),0,0,float3(0,0,0),float3(0,0,0),NULL,0,0,0,NULL,0,0));

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/EmgProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/EmgProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/EmgProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;EmgProjectile.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Map/Ground.h&quot;
@@ -6,7 +8,6 @@
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CEmgProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),NULL,float3(0,0,0),0,0,NULL));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/ExplosiveProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/ExplosiveProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/ExplosiveProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;ExplosiveProjectile.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
@@ -12,7 +14,6 @@
 #include &quot;Sim/Misc/InterceptHandler.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CExplosiveProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),NULL,NULL,1,0));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/FireBallProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/FireBallProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/FireBallProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;creg/STL_Deque.h&quot;
 #include &quot;FireBallProjectile.h&quot;
 #include &quot;Game/Camera.h&quot;
@@ -7,7 +9,6 @@
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CFireBallProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),NULL,NULL,float3(0,0,0),NULL));
 CR_BIND(CFireBallProjectile::Spark, );

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/FlameProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/FlameProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/FlameProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;FlameProjectile.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Map/Ground.h&quot;
@@ -6,7 +8,6 @@
 #include &quot;Rendering/Textures/ColorMap.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CFlameProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),NULL,NULL,0));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/LargeBeamLaserProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/LargeBeamLaserProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/LargeBeamLaserProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;LargeBeamLaserProjectile.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CLargeBeamLaserProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),float3(0,0,0),NULL,NULL));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/LaserProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/LaserProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/LaserProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;LaserProjectile.h&quot;
 #include &quot;LogOutput.h&quot;
@@ -7,7 +9,6 @@
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Projectiles/Unsynced/SimpleParticleSystem.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CLaserProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),NULL,0,float3(0,0,0),float3(0,0,0),0,NULL,0));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/LightingProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/LightingProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/LightingProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,12 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;LightingProjectile.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CLightingProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),NULL,float3(0,0,0),NULL,0,NULL));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/MissileProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/MissileProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/MissileProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;LogOutput.h&quot;
@@ -17,7 +19,6 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;mmgr.h&quot;
 
 static const float Smoke_Time=60;
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/StarburstProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/StarburstProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/StarburstProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;LogOutput.h&quot;
@@ -15,7 +17,6 @@
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;StarburstProjectile.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;mmgr.h&quot;
 
 static const float Smoke_Time=70;
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/TorpedoProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/TorpedoProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/TorpedoProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Map/Ground.h&quot;
@@ -11,7 +13,6 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;TorpedoProjectile.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CTorpedoProjectile, CTorpedoProjectile, (float3(0,0,0),float3(0,0,0),NULL,0,0,0,0,NULL,NULL));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/WeaponProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/WeaponProjectile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/WeaponProjectile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;WeaponProjectile.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sound.h&quot;
@@ -17,7 +19,6 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Misc/InterceptHandler.h&quot;
 #include &quot;System/LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 

Modified: trunk/rts/Sim/SideParser.cpp
===================================================================
--- trunk/rts/Sim/SideParser.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/SideParser.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -6,6 +6,8 @@
 using std::string;
 using std::set;
 
+#include &quot;mmgr.h&quot;
+
 #include &quot;SideParser.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;Lua/LuaSyncedRead.h&quot;

Modified: trunk/rts/Sim/Units/COB/CobEngine.cpp
===================================================================
--- trunk/rts/Sim/Units/COB/CobEngine.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/COB/CobEngine.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;CobEngine.h&quot;
 #include &quot;CobThread.h&quot;
 #include &quot;CobInstance.h&quot;
@@ -6,7 +8,6 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;Platform/errorhandler.h&quot;
-#include &quot;mmgr.h&quot;
 
 #ifndef _CONSOLE
 #include &quot;TimeProfiler.h&quot;

Modified: trunk/rts/Sim/Units/COB/CobFile.cpp
===================================================================
--- trunk/rts/Sim/Units/COB/CobFile.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/COB/CobFile.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,14 +1,15 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;CobFile.h&quot;
-#include &quot;FileSystem/FileHandler.h&quot;
-#include &quot;LogOutput.h&quot;
 #include &lt;algorithm&gt;
 #include &lt;locale&gt;
 #include &lt;cctype&gt;
 #include &lt;string.h&gt;
+#include &quot;mmgr.h&quot;
+
+#include &quot;CobFile.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;LogOutput.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;Platform/byteorder.h&quot;
-#include &quot;mmgr.h&quot;
 
 //The following structure is taken from <A HREF="http://visualta.tauniverse.com/Downloads/ta-cob-fmt.txt">http://visualta.tauniverse.com/Downloads/ta-cob-fmt.txt</A>
 //Information on missing fields from Format_Cob.pas

Modified: trunk/rts/Sim/Units/COB/CobInstance.cpp
===================================================================
--- trunk/rts/Sim/Units/COB/CobInstance.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/COB/CobInstance.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;CobEngine.h&quot;
 #include &quot;CobFile.h&quot;
 #include &quot;CobInstance.h&quot;
@@ -7,6 +9,7 @@
 #ifndef _CONSOLE
 
 #include &lt;SDL_types.h&gt;
+
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
@@ -37,7 +40,6 @@
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;mmgr.h&quot;
 
 #endif
 
@@ -891,6 +893,8 @@
 					if(gu-&gt;usRandFloat()&gt;pieceChance)
 						continue;
 
+                    // FIXME: this is a memory leak
+                    // a comment in FlyingPiece says it deletes, but mmgr says otherwise
 					SS3OVertex * verts = SAFE_NEW SS3OVertex[4];
 
 					verts[0] = cookedPiece-&gt;vertices[cookedPiece-&gt;vertexDrawOrder[i + 0]];

Modified: trunk/rts/Sim/Units/COB/CobThread.cpp
===================================================================
--- trunk/rts/Sim/Units/COB/CobThread.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/COB/CobThread.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,5 +1,7 @@
 #include &quot;StdAfx.h&quot;
 #include &lt;sstream&gt;
+#include &quot;mmgr.h&quot;
+
 #include &quot;CobThread.h&quot;
 #include &quot;CobFile.h&quot;
 #include &quot;CobInstance.h&quot;
@@ -7,7 +9,6 @@
 #include &quot;Lua/LuaRules.h&quot;
 
 #include &quot;LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
 #ifdef _CONSOLE
 #include &quot;GlobalStuff.h&quot;

Modified: trunk/rts/Sim/Units/CommandAI/AirCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/AirCAI.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/CommandAI/AirCAI.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;AirCAI.h&quot;
 #include &quot;LineDrawer.h&quot;
 #include &quot;ExternalAI/Group.h&quot;
@@ -15,7 +17,6 @@
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;System/myMath.h&quot;
 #include &quot;System/LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CAirCAI,CMobileCAI , );
 

Modified: trunk/rts/Sim/Units/CommandAI/BuilderCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/BuilderCAI.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/CommandAI/BuilderCAI.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;BuilderCAI.h&quot;
 #include &quot;TransportCAI.h&quot;
 #include &quot;LineDrawer.h&quot;
@@ -30,7 +32,6 @@
 #include &quot;Sim/Units/UnitTypes/Factory.h&quot;
 #include &quot;Sim/Units/UnitTypes/TransportUnit.h&quot;
 #include &quot;myMath.h&quot;
-#include &quot;mmgr.h&quot;
 #include &quot;creg/STL_Map.h&quot;
 
 

Modified: trunk/rts/Sim/Units/CommandAI/CommandAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/CommandAI.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/CommandAI/CommandAI.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;CommandAI.h&quot;
 #include &quot;FactoryCAI.h&quot;
 #include &quot;LineDrawer.h&quot;
@@ -27,7 +29,6 @@
 #include &quot;LoadSaveInterface.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;myMath.h&quot;
-#include &quot;mmgr.h&quot;
 #include &quot;creg/STL_Set.h&quot;
 #include &quot;creg/STL_Deque.h&quot;
 

Modified: trunk/rts/Sim/Units/CommandAI/FactoryCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/FactoryCAI.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/CommandAI/FactoryCAI.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;FactoryCAI.h&quot;
 #include &quot;LineDrawer.h&quot;
 #include &quot;ExternalAI/Group.h&quot;
@@ -17,7 +19,6 @@
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
 #include &quot;Sim/Units/UnitTypes/Factory.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 #include &quot;creg/STL_Map.h&quot;
 
 CR_BIND_DERIVED(CFactoryCAI ,CCommandAI , );

Modified: trunk/rts/Sim/Units/CommandAI/MobileCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/MobileCAI.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/CommandAI/MobileCAI.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;MobileCAI.h&quot;
 #include &quot;TransportCAI.h&quot;
 #include &quot;LineDrawer.h&quot;
@@ -21,7 +23,6 @@
 #include &quot;Sim/Weapons/DGunWeapon.h&quot;
 #include &quot;System/LogOutput.h&quot;
 #include &quot;myMath.h&quot;
-#include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CMobileCAI ,CCommandAI , );
 

Modified: trunk/rts/Sim/Units/CommandAI/TransportCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/TransportCAI.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/CommandAI/TransportCAI.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;TransportCAI.h&quot;
 #include &quot;LineDrawer.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
@@ -16,7 +18,6 @@
 #include &quot;Sim/MoveTypes/TAAirMoveType.h&quot;
 #include &quot;Sim/ModInfo.h&quot;
 #include &quot;Rendering/UnitModels/3DOParser.h&quot;
-#include &quot;mmgr.h&quot;
 #include &quot;creg/STL_List.h&quot;
 
 #define AIRTRANSPORT_DOCKING_RADIUS 16

Modified: trunk/rts/Sim/Units/Unit.cpp
===================================================================
--- trunk/rts/Sim/Units/Unit.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/Unit.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;COB/CobFile.h&quot;
 #include &quot;COB/CobInstance.h&quot;
 #include &quot;CommandAI/CommandAI.h&quot;
@@ -58,7 +60,6 @@
 #include &quot;UnitLoader.h&quot;
 #include &quot;UnitTypes/Building.h&quot;
 #include &quot;UnitTypes/TransportUnit.h&quot;
-#include &quot;mmgr.h&quot;
 
 #include &quot;COB/CobEngine.h&quot;
 #include &quot;CommandAI/AirCAI.h&quot;

Modified: trunk/rts/Sim/Units/UnitDefHandler.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitDefHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/UnitDefHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,11 +1,12 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;UnitDefHandler.h&quot;
 #include &lt;stdio.h&gt;
 #include &lt;algorithm&gt;
 #include &lt;iostream&gt;
 #include &lt;locale&gt;
 #include &lt;cctype&gt;
+#include &quot;mmgr.h&quot;
 
+#include &quot;UnitDefHandler.h&quot;
 #include &quot;UnitDef.h&quot;
 #include &quot;UnitDefImage.h&quot;
 
@@ -31,7 +32,6 @@
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;System/LogOutput.h&quot;
 #include &quot;System/Sound.h&quot;
-#include &quot;mmgr.h&quot;
 
 const char YARDMAP_CHAR = 'c';		//Need to be low case.
 

Modified: trunk/rts/Sim/Units/UnitHandler.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitHandler.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/UnitHandler.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -4,6 +4,8 @@
 
 #include &quot;StdAfx.h&quot;
 #include &lt;assert.h&gt;
+#include &quot;System/mmgr.h&quot;
+
 #include &quot;UnitHandler.h&quot;
 #include &quot;Unit.h&quot;
 #include &quot;UnitDefHandler.h&quot;
@@ -30,7 +32,6 @@
 #include &quot;System/LogOutput.h&quot;
 #include &quot;System/TimeProfiler.h&quot;
 #include &quot;System/myMath.h&quot;
-#include &quot;System/mmgr.h&quot;
 #include &quot;System/Platform/ConfigHandler.h&quot;
 #include &quot;System/Sync/SyncTracer.h&quot;
 #include &quot;System/creg/STL_Deque.h&quot;

Modified: trunk/rts/Sim/Units/UnitLoader.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitLoader.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/UnitLoader.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -3,6 +3,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;UnitLoader.h&quot;
 #include &quot;Unit.h&quot;
 #include &quot;UnitDefHandler.h&quot;

Modified: trunk/rts/Sim/Units/UnitTracker.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitTracker.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/Sim/Units/UnitTracker.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -1,4 +1,6 @@
 #include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
 #include &quot;UnitTracker.h&quot;
 #include &quot;Unit.h&quot;
 #include &quot;UnitHandler.h&quot;
@@ -9,7 +11,6 @@
 #include &quot;Map/Ground.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;mmgr.h&quot;
 
 
 CUnitTracker unitTracker;

Modified: trunk/rts/System/mmgr.cpp
===================================================================
--- trunk/rts/System/mmgr.cpp	2008-08-21 22:02:20 UTC (rev 6294)
+++ trunk/rts/System/mmgr.cpp	2008-08-21 22:35:06 UTC (rev 6295)
@@ -148,7 +148,7 @@
 static	const	unsigned int	hashBits               = 16;
 static __thread		bool		randomWipe             = true;
 static __thread		bool		alwaysValidateAll      = false;
-static __thread		bool		alwaysLogAll           = false;
+static __thread		bool		alwaysLogAll           = true;
 static __thread		bool		alwaysWipeAll          = true;
 static		bool		cleanupLogOnFirstRun   = true;
 static	const	unsigned int	paddingSize            = 32;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001064.html">[Taspring-linux-commit] r6294 - trunk/Lobby/TASClient
</A></li>
	<LI>Next message: <A HREF="001066.html">[Taspring-linux-commit] r6296 - in trunk/rts: System	System/FileSystem System/Net System/creg lib/lua/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1065">[ date ]</a>
              <a href="thread.html#1065">[ thread ]</a>
              <a href="subject.html#1065">[ subject ]</a>
              <a href="author.html#1065">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
