<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r7005 - in trunk: AI/Global/AAI	AI/Global/JCAI AI/Global/KAI-0.2 AI/Global/KAIK-0.13	AI/Global/NTai/AI/NTai/SDK AI/Group/MexUpgraderAI	rts/ExternalAI rts/Game rts/Game/Camera rts/Game/StartScripts	rts/Game/UI rts/Lua rts/Map rts/Map/SM3 rts/Map/SM3/terrain	rts/Map/SMF rts/Rendering rts/Rendering/Env rts/Rendering/GL	rts/Rendering/Textures rts/Rendering/UnitModels rts/Sim	rts/Sim/Features rts/Sim/Misc rts/Sim/MoveTypes rts/Sim/Path	rts/Sim/Projectiles rts/Sim/Projectiles/Unsynced	rts/Sim/Projectiles/WeaponProjectiles rts/Sim/Units	rts/Sim/Units/COB rts/Sim/Units/CommandAI	rts/Sim/Units/UnitTypes rts/Sim/Weapons rts/System	rts/System/FileSystem rts/System/Platform	rts/System/Platform/Linux rts/System/Platform/Mac	rts/System/Platform/Win rts/System/Script rts/System/Sync	rts/System/creg
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7005%20-%20in%20trunk%3A%20AI/Global/AAI%0A%09AI/Global/JCAI%20AI/Global/KAI-0.2%20AI/Global/KAIK-0.13%0A%09AI/Global/NTai/AI/NTai/SDK%20AI/Group/MexUpgraderAI%0A%09rts/ExternalAI%20rts/Game%20rts/Game/Camera%20rts/Game/StartScripts%0A%09rts/Game/UI%20rts/Lua%20rts/Map%20rts/Map/SM3%20rts/Map/SM3/terrain%0A%09rts/Map/SMF%20rts/Rendering%20rts/Rendering/Env%20rts/Rendering/GL%0A%09rts/Rendering/Textures%20rts/Rendering/UnitModels%20rts/Sim%0A%09rts/Sim/Features%20rts/Sim/Misc%20rts/Sim/MoveTypes%20rts/Sim/Path%0A%09rts/Sim/Projectiles%20rts/Sim/Projectiles/Unsynced%0A%09rts/Sim/Projectiles/WeaponProjectiles%20rts/Sim/Units%0A%09rts/Sim/Units/COB%20rts/Sim/Units/CommandAI%0A%09rts/Sim/Units/UnitTypes%20rts/Sim/Weapons%20rts/System%0A%09rts/System/FileSystem%20rts/System/Platform%0A%09rts/System/Platform/Linux%20rts/System/Platform/Mac%0A%09rts/System/Platform/Win%20rts/System/Script%20rts/System/Sync%0A%09rts/System/creg&In-Reply-To=%3C20081109193555.EBC62472D%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001773.html">
   <LINK REL="Next"  HREF="001775.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r7005 - in trunk: AI/Global/AAI	AI/Global/JCAI AI/Global/KAI-0.2 AI/Global/KAIK-0.13	AI/Global/NTai/AI/NTai/SDK AI/Group/MexUpgraderAI	rts/ExternalAI rts/Game rts/Game/Camera rts/Game/StartScripts	rts/Game/UI rts/Lua rts/Map rts/Map/SM3 rts/Map/SM3/terrain	rts/Map/SMF rts/Rendering rts/Rendering/Env rts/Rendering/GL	rts/Rendering/Textures rts/Rendering/UnitModels rts/Sim	rts/Sim/Features rts/Sim/Misc rts/Sim/MoveTypes rts/Sim/Path	rts/Sim/Projectiles rts/Sim/Projectiles/Unsynced	rts/Sim/Projectiles/WeaponProjectiles rts/Sim/Units	rts/Sim/Units/COB rts/Sim/Units/CommandAI	rts/Sim/Units/UnitTypes rts/Sim/Weapons rts/System	rts/System/FileSystem rts/System/Platform	rts/System/Platform/Linux rts/System/Platform/Mac	rts/System/Platform/Win rts/System/Script rts/System/Sync	rts/System/creg</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7005%20-%20in%20trunk%3A%20AI/Global/AAI%0A%09AI/Global/JCAI%20AI/Global/KAI-0.2%20AI/Global/KAIK-0.13%0A%09AI/Global/NTai/AI/NTai/SDK%20AI/Group/MexUpgraderAI%0A%09rts/ExternalAI%20rts/Game%20rts/Game/Camera%20rts/Game/StartScripts%0A%09rts/Game/UI%20rts/Lua%20rts/Map%20rts/Map/SM3%20rts/Map/SM3/terrain%0A%09rts/Map/SMF%20rts/Rendering%20rts/Rendering/Env%20rts/Rendering/GL%0A%09rts/Rendering/Textures%20rts/Rendering/UnitModels%20rts/Sim%0A%09rts/Sim/Features%20rts/Sim/Misc%20rts/Sim/MoveTypes%20rts/Sim/Path%0A%09rts/Sim/Projectiles%20rts/Sim/Projectiles/Unsynced%0A%09rts/Sim/Projectiles/WeaponProjectiles%20rts/Sim/Units%0A%09rts/Sim/Units/COB%20rts/Sim/Units/CommandAI%0A%09rts/Sim/Units/UnitTypes%20rts/Sim/Weapons%20rts/System%0A%09rts/System/FileSystem%20rts/System/Platform%0A%09rts/System/Platform/Linux%20rts/System/Platform/Mac%0A%09rts/System/Platform/Win%20rts/System/Script%20rts/System/Sync%0A%09rts/System/creg&In-Reply-To=%3C20081109193555.EBC62472D%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r7005 - in trunk: AI/Global/AAI	AI/Global/JCAI AI/Global/KAI-0.2 AI/Global/KAIK-0.13	AI/Global/NTai/AI/NTai/SDK AI/Group/MexUpgraderAI	rts/ExternalAI rts/Game rts/Game/Camera rts/Game/StartScripts	rts/Game/UI rts/Lua rts/Map rts/Map/SM3 rts/Map/SM3/terrain	rts/Map/SMF rts/Rendering rts/Rendering/Env rts/Rendering/GL	rts/Rendering/Textures rts/Rendering/UnitModels rts/Sim	rts/Sim/Features rts/Sim/Misc rts/Sim/MoveTypes rts/Sim/Path	rts/Sim/Projectiles rts/Sim/Projectiles/Unsynced	rts/Sim/Projectiles/WeaponProjectiles rts/Sim/Units	rts/Sim/Units/COB rts/Sim/Units/CommandAI	rts/Sim/Units/UnitTypes rts/Sim/Weapons rts/System	rts/System/FileSystem rts/System/Platform	rts/System/Platform/Linux rts/System/Platform/Mac	rts/System/Platform/Win rts/System/Script rts/System/Sync	rts/System/creg">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Sun Nov  9 20:35:55 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001773.html">[Taspring-linux-commit] r7004 - in trunk/rts: Game Game/UI Lua	build/vstudio8
</A></li>
        <LI>Next message: <A HREF="001775.html">[Taspring-linux-commit] r7006 - trunk/tools/unitsync
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1774">[ date ]</a>
              <a href="thread.html#1774">[ thread ]</a>
              <a href="subject.html#1774">[ subject ]</a>
              <a href="author.html#1774">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tvo
Date: 2008-11-09 20:35:51 +0100 (Sun, 09 Nov 2008)
New Revision: 7005

Added:
   trunk/rts/Sim/Misc/GlobalConstants.h
   trunk/rts/Sim/Misc/GlobalSynced.cpp
   trunk/rts/Sim/Misc/GlobalSynced.h
   trunk/rts/Sim/Misc/ModInfo.cpp
   trunk/rts/Sim/Misc/ModInfo.h
   trunk/rts/Sim/Misc/SideParser.cpp
   trunk/rts/Sim/Misc/SideParser.h
   trunk/rts/Sim/Misc/Team.cpp
   trunk/rts/Sim/Misc/Team.h
Removed:
   trunk/rts/Game/GlobalConstants.h
   trunk/rts/Game/GlobalSynced.cpp
   trunk/rts/Game/GlobalSynced.h
   trunk/rts/Game/Team.cpp
   trunk/rts/Game/Team.h
   trunk/rts/Sim/ModInfo.cpp
   trunk/rts/Sim/ModInfo.h
   trunk/rts/Sim/SideParser.cpp
   trunk/rts/Sim/SideParser.h
Modified:
   trunk/AI/Global/AAI/aidef.h
   trunk/AI/Global/JCAI/BaseAIDef.h
   trunk/AI/Global/KAI-0.2/DamageControl.cpp
   trunk/AI/Global/KAIK-0.13/Unit.cpp
   trunk/AI/Global/KAIK-0.13/UnitTable.cpp
   trunk/AI/Global/NTai/AI/NTai/SDK/AI.h
   trunk/AI/Group/MexUpgraderAI/GroupAI.cpp
   trunk/rts/ExternalAI/AICallback.cpp
   trunk/rts/ExternalAI/AICheats.cpp
   trunk/rts/ExternalAI/GlobalAI.cpp
   trunk/rts/ExternalAI/GlobalAIHandler.cpp
   trunk/rts/ExternalAI/GlobalAIHandler.h
   trunk/rts/ExternalAI/Group.cpp
   trunk/rts/ExternalAI/Group.h
   trunk/rts/ExternalAI/GroupHandler.h
   trunk/rts/Game/Action.cpp
   trunk/rts/Game/Camera.cpp
   trunk/rts/Game/Camera/FPSController.cpp
   trunk/rts/Game/Camera/FreeController.cpp
   trunk/rts/Game/Camera/OrbitController.cpp
   trunk/rts/Game/Camera/OverheadController.cpp
   trunk/rts/Game/Camera/SmoothController.cpp
   trunk/rts/Game/Camera/TWController.cpp
   trunk/rts/Game/CameraHandler.cpp
   trunk/rts/Game/Game.cpp
   trunk/rts/Game/GameController.cpp
   trunk/rts/Game/GameHelper.cpp
   trunk/rts/Game/GameServer.cpp
   trunk/rts/Game/GameServer.h
   trunk/rts/Game/GameSetup.cpp
   trunk/rts/Game/GameSetup.h
   trunk/rts/Game/Player.cpp
   trunk/rts/Game/PlayerRoster.cpp
   trunk/rts/Game/PreGame.cpp
   trunk/rts/Game/SelectMenu.cpp
   trunk/rts/Game/SelectedUnits.cpp
   trunk/rts/Game/SelectedUnitsAI.cpp
   trunk/rts/Game/StartScripts/AirScript.cpp
   trunk/rts/Game/StartScripts/CommanderScript.cpp
   trunk/rts/Game/StartScripts/CommanderScript2.cpp
   trunk/rts/Game/StartScripts/GlobalAITestScript.cpp
   trunk/rts/Game/StartScripts/LoadScript.cpp
   trunk/rts/Game/StartScripts/SpawnScript.cpp
   trunk/rts/Game/StartScripts/TestScript.cpp
   trunk/rts/Game/UI/CommandColors.cpp
   trunk/rts/Game/UI/EndGameBox.cpp
   trunk/rts/Game/UI/EndGameBox.h
   trunk/rts/Game/UI/GameInfo.cpp
   trunk/rts/Game/UI/GameSetupDrawer.cpp
   trunk/rts/Game/UI/GuiHandler.cpp
   trunk/rts/Game/UI/GuiHandler.h
   trunk/rts/Game/UI/KeyAutoBinder.cpp
   trunk/rts/Game/UI/KeyBindings.cpp
   trunk/rts/Game/UI/KeyCodes.cpp
   trunk/rts/Game/UI/KeySet.cpp
   trunk/rts/Game/UI/LuaUI.cpp
   trunk/rts/Game/UI/MiniMap.cpp
   trunk/rts/Game/UI/MouseCursor.cpp
   trunk/rts/Game/UI/MouseHandler.cpp
   trunk/rts/Game/UI/QuitBox.cpp
   trunk/rts/Game/UI/ResourceBar.cpp
   trunk/rts/Game/UI/SelectionKeyHandler.cpp
   trunk/rts/Game/UI/ShareBox.cpp
   trunk/rts/Game/UI/StartPosSelecter.cpp
   trunk/rts/Game/UI/TooltipConsole.cpp
   trunk/rts/Game/WaitCommandsAI.cpp
   trunk/rts/Game/WaitCommandsAI.h
   trunk/rts/Lua/LuaCallInCheck.cpp
   trunk/rts/Lua/LuaConstGame.cpp
   trunk/rts/Lua/LuaFBOs.cpp
   trunk/rts/Lua/LuaFeatureDefs.cpp
   trunk/rts/Lua/LuaGaia.cpp
   trunk/rts/Lua/LuaHandle.cpp
   trunk/rts/Lua/LuaHandle.h
   trunk/rts/Lua/LuaHandleSynced.cpp
   trunk/rts/Lua/LuaIO.cpp
   trunk/rts/Lua/LuaInputReceiver.cpp
   trunk/rts/Lua/LuaMaterial.cpp
   trunk/rts/Lua/LuaOpenGL.cpp
   trunk/rts/Lua/LuaParser.cpp
   trunk/rts/Lua/LuaParser.h
   trunk/rts/Lua/LuaRBOs.cpp
   trunk/rts/Lua/LuaRules.cpp
   trunk/rts/Lua/LuaScream.cpp
   trunk/rts/Lua/LuaShaders.cpp
   trunk/rts/Lua/LuaSyncedCall.cpp
   trunk/rts/Lua/LuaSyncedCtrl.cpp
   trunk/rts/Lua/LuaSyncedMoveCtrl.cpp
   trunk/rts/Lua/LuaSyncedRead.cpp
   trunk/rts/Lua/LuaTextures.cpp
   trunk/rts/Lua/LuaUnitDefs.cpp
   trunk/rts/Lua/LuaUnitRendering.cpp
   trunk/rts/Lua/LuaUnsyncedCall.cpp
   trunk/rts/Lua/LuaUnsyncedCtrl.cpp
   trunk/rts/Lua/LuaUnsyncedRead.cpp
   trunk/rts/Lua/LuaUtils.cpp
   trunk/rts/Lua/LuaVFS.cpp
   trunk/rts/Lua/LuaWeaponDefs.cpp
   trunk/rts/Map/BaseGroundDrawer.cpp
   trunk/rts/Map/Ground.h
   trunk/rts/Map/HeightMapTexture.cpp
   trunk/rts/Map/MapInfo.cpp
   trunk/rts/Map/MapParser.cpp
   trunk/rts/Map/MetalMap.h
   trunk/rts/Map/ReadMap.cpp
   trunk/rts/Map/ReadMap.h
   trunk/rts/Map/SM3/Sm3GroundDrawer.cpp
   trunk/rts/Map/SM3/Sm3Map.cpp
   trunk/rts/Map/SM3/terrain/Lightcalc.cpp
   trunk/rts/Map/SM3/terrain/Terrain.cpp
   trunk/rts/Map/SM3/terrain/TerrainBase.h
   trunk/rts/Map/SM3/terrain/TerrainTexture.cpp
   trunk/rts/Map/SM3/terrain/TerrainTextureGLSL.cpp
   trunk/rts/Map/SM3/terrain/Textures.cpp
   trunk/rts/Map/SMF/BFGroundDrawer.cpp
   trunk/rts/Map/SMF/SmfMapFile.cpp
   trunk/rts/Map/SMF/SmfReadMap.cpp
   trunk/rts/Rendering/Env/AdvSky.cpp
   trunk/rts/Rendering/Env/AdvTreeGenerator.cpp
   trunk/rts/Rendering/Env/AdvWater.cpp
   trunk/rts/Rendering/Env/BaseTreeDrawer.cpp
   trunk/rts/Rendering/Env/BaseWater.cpp
   trunk/rts/Rendering/Env/BasicSky.cpp
   trunk/rts/Rendering/Env/BasicTreeDrawer.cpp
   trunk/rts/Rendering/Env/BasicWater.cpp
   trunk/rts/Rendering/Env/BumpWater.cpp
   trunk/rts/Rendering/Env/DynWater.cpp
   trunk/rts/Rendering/Env/GrassDrawer.cpp
   trunk/rts/Rendering/Env/RefractWater.cpp
   trunk/rts/Rendering/Env/SkyBox.cpp
   trunk/rts/Rendering/FartextureHandler.cpp
   trunk/rts/Rendering/FartextureHandler.h
   trunk/rts/Rendering/GL/FBO.h
   trunk/rts/Rendering/GL/IFramebuffer.h
   trunk/rts/Rendering/GL/VertexArray.h
   trunk/rts/Rendering/GL/glList.cpp
   trunk/rts/Rendering/GL/myGL.cpp
   trunk/rts/Rendering/GroundDecalHandler.cpp
   trunk/rts/Rendering/GroundDecalHandler.h
   trunk/rts/Rendering/GroundFlash.cpp
   trunk/rts/Rendering/GroundFlash.h
   trunk/rts/Rendering/IconHandler.cpp
   trunk/rts/Rendering/InMapDraw.cpp
   trunk/rts/Rendering/InMapDraw.h
   trunk/rts/Rendering/ShadowHandler.cpp
   trunk/rts/Rendering/Textures/Bitmap.cpp
   trunk/rts/Rendering/Textures/Bitmap.h
   trunk/rts/Rendering/Textures/ColorMap.cpp
   trunk/rts/Rendering/Textures/NamedTextures.cpp
   trunk/rts/Rendering/Textures/TextureAtlas.cpp
   trunk/rts/Rendering/Textures/TextureHandler.cpp
   trunk/rts/Rendering/UnitModels/3DModelParser.cpp
   trunk/rts/Rendering/UnitModels/3DOParser.cpp
   trunk/rts/Rendering/UnitModels/UnitDrawer.cpp
   trunk/rts/Rendering/UnitModels/s3oParser.cpp
   trunk/rts/Rendering/VerticalSync.cpp
   trunk/rts/Rendering/glFont.cpp
   trunk/rts/Sim/Features/Feature.cpp
   trunk/rts/Sim/Features/FeatureHandler.cpp
   trunk/rts/Sim/Misc/AirBaseHandler.cpp
   trunk/rts/Sim/Misc/AirBaseHandler.h
   trunk/rts/Sim/Misc/CategoryHandler.cpp
   trunk/rts/Sim/Misc/CollisionHandler.cpp
   trunk/rts/Sim/Misc/DamageArrayHandler.cpp
   trunk/rts/Sim/Misc/GroundBlockingObjectMap.cpp
   trunk/rts/Sim/Misc/InterceptHandler.cpp
   trunk/rts/Sim/Misc/LosHandler.cpp
   trunk/rts/Sim/Misc/QuadField.cpp
   trunk/rts/Sim/Misc/QuadField.h
   trunk/rts/Sim/Misc/Wind.cpp
   trunk/rts/Sim/MoveTypes/GroundMoveType.cpp
   trunk/rts/Sim/MoveTypes/MoveInfo.cpp
   trunk/rts/Sim/MoveTypes/MoveType.h
   trunk/rts/Sim/MoveTypes/ScriptMoveType.cpp
   trunk/rts/Sim/MoveTypes/TAAirMoveType.cpp
   trunk/rts/Sim/Path/PathCache.cpp
   trunk/rts/Sim/Path/PathCache.h
   trunk/rts/Sim/Path/PathManager.cpp
   trunk/rts/Sim/Projectiles/ExpGenSpawner.cpp
   trunk/rts/Sim/Projectiles/ExplosionGenerator.cpp
   trunk/rts/Sim/Projectiles/FireProjectile.cpp
   trunk/rts/Sim/Projectiles/FlareProjectile.cpp
   trunk/rts/Sim/Projectiles/PieceProjectile.cpp
   trunk/rts/Sim/Projectiles/Projectile.cpp
   trunk/rts/Sim/Projectiles/ProjectileHandler.cpp
   trunk/rts/Sim/Projectiles/Unsynced/BitmapMuzzleFlame.cpp
   trunk/rts/Sim/Projectiles/Unsynced/BubbleProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/DirtProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/ExploSpikeProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/GenericParticleProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/GeoSquareProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/GfxProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/HeatCloudProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/MuzzleFlame.cpp
   trunk/rts/Sim/Projectiles/Unsynced/RepulseGfx.cpp
   trunk/rts/Sim/Projectiles/Unsynced/ShieldPartProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SimpleParticleSystem.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile2.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SmokeTrailProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/SpherePartProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/TracerProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/WakeProjectile.cpp
   trunk/rts/Sim/Projectiles/Unsynced/WreckProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/EmgProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/ExplosiveProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/FireBallProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/FlameProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/LargeBeamLaserProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/LaserProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/LightningProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/MissileProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/StarburstProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/TorpedoProjectile.cpp
   trunk/rts/Sim/Projectiles/WeaponProjectiles/WeaponProjectile.cpp
   trunk/rts/Sim/Units/COB/CobFile.cpp
   trunk/rts/Sim/Units/COB/CobInstance.cpp
   trunk/rts/Sim/Units/COB/CobInstance.h
   trunk/rts/Sim/Units/COB/CobThread.cpp
   trunk/rts/Sim/Units/CommandAI/AirCAI.cpp
   trunk/rts/Sim/Units/CommandAI/BuilderCAI.cpp
   trunk/rts/Sim/Units/CommandAI/BuilderCAI.h
   trunk/rts/Sim/Units/CommandAI/CommandAI.cpp
   trunk/rts/Sim/Units/CommandAI/CommandAI.h
   trunk/rts/Sim/Units/CommandAI/CommandQueue.h
   trunk/rts/Sim/Units/CommandAI/FactoryCAI.cpp
   trunk/rts/Sim/Units/CommandAI/MobileCAI.cpp
   trunk/rts/Sim/Units/CommandAI/TransportCAI.cpp
   trunk/rts/Sim/Units/Unit.cpp
   trunk/rts/Sim/Units/Unit.h
   trunk/rts/Sim/Units/UnitDefHandler.cpp
   trunk/rts/Sim/Units/UnitHandler.cpp
   trunk/rts/Sim/Units/UnitHandler.h
   trunk/rts/Sim/Units/UnitTracker.cpp
   trunk/rts/Sim/Units/UnitTypes/Builder.cpp
   trunk/rts/Sim/Units/UnitTypes/Building.cpp
   trunk/rts/Sim/Units/UnitTypes/ExtractorBuilding.cpp
   trunk/rts/Sim/Units/UnitTypes/Factory.cpp
   trunk/rts/Sim/Units/UnitTypes/TransportUnit.cpp
   trunk/rts/Sim/Weapons/BeamLaser.cpp
   trunk/rts/Sim/Weapons/DGunWeapon.cpp
   trunk/rts/Sim/Weapons/EmgCannon.cpp
   trunk/rts/Sim/Weapons/MeleeWeapon.cpp
   trunk/rts/Sim/Weapons/PlasmaRepulser.cpp
   trunk/rts/Sim/Weapons/Rifle.cpp
   trunk/rts/Sim/Weapons/Weapon.cpp
   trunk/rts/Sim/Weapons/WeaponDefHandler.cpp
   trunk/rts/Sim/Weapons/bombdropper.cpp
   trunk/rts/System/DemoRecorder.cpp
   trunk/rts/System/DemoRecorder.h
   trunk/rts/System/FileSystem/ArchiveScanner.cpp
   trunk/rts/System/FileSystem/SimpleParser.h
   trunk/rts/System/GlobalUnsynced.cpp
   trunk/rts/System/LoadSaveHandler.cpp
   trunk/rts/System/LogOutput.cpp
   trunk/rts/System/Messages.cpp
   trunk/rts/System/MouseInput.cpp
   trunk/rts/System/Platform/Linux/DataDirLocater.cpp
   trunk/rts/System/Platform/Linux/OpenALSound.cpp
   trunk/rts/System/Platform/Linux/UnixFileSystemHandler.cpp
   trunk/rts/System/Platform/Linux/UnixFileSystemHandler.h
   trunk/rts/System/Platform/Mac/MacFileSystemHandler.cpp
   trunk/rts/System/Platform/NullSound.h
   trunk/rts/System/Platform/Win/DataDirLocater.cpp
   trunk/rts/System/Platform/Win/DxSound.h
   trunk/rts/System/Platform/Win/OggStream.cpp
   trunk/rts/System/Platform/Win/WinFileSystemHandler.cpp
   trunk/rts/System/Platform/byteorder.h
   trunk/rts/System/Platform/errorhandler.cpp
   trunk/rts/System/Script/LuaBinder.cpp
   trunk/rts/System/Script/LuaFunctions.cpp
   trunk/rts/System/Sound.cpp
   trunk/rts/System/Sound.h
   trunk/rts/System/SpringApp.cpp
   trunk/rts/System/StdAfx.h
   trunk/rts/System/Sync/SyncChecker.h
   trunk/rts/System/Sync/SyncDebugger.cpp
   trunk/rts/System/Sync/SyncDebugger.h
   trunk/rts/System/Sync/SyncTracer.cpp
   trunk/rts/System/creg/creg.cpp
   trunk/rts/System/myMath.h
Log:
Moved Global stuff that belongs to simulation, to Sim.
Moved Team to Sim, that belongs there too.
Moved Sim/* to Sim/Misc.

Updated #include statements to reflect this change.
(and also updated all #include statements that had 'System/' written out,
this was side effect of dirchange tool...)



Modified: trunk/AI/Global/AAI/aidef.h
===================================================================
--- trunk/AI/Global/AAI/aidef.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/AI/Global/AAI/aidef.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -21,7 +21,7 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/MoveTypes/MoveInfo.h&quot;
 #include &quot;System/Vec2.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Units/CommandAI/CommandQueue.h&quot;

Modified: trunk/AI/Global/JCAI/BaseAIDef.h
===================================================================
--- trunk/AI/Global/JCAI/BaseAIDef.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/AI/Global/JCAI/BaseAIDef.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,20 +3,20 @@
 //
 // A skirmish AI for the TA Spring engine.
 // Copyright Jelmer Cnossen
-// 
+//
 // Released under GPL license: see LICENSE.html for more information.
 //-------------------------------------------------------------------------
 #ifndef JC_BASE_AI_DEF_H
 #define JC_BASE_AI_DEF_H
 
 #include &quot;System/Vec2.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;ExternalAI/IGlobalAI.h&quot;
 #include &quot;ExternalAI/IGlobalAICallback.h&quot;
 #include &quot;ExternalAI/IAICallback.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/MoveTypes/MoveInfo.h&quot;
-#include &lt;assert.h&gt; 
+#include &lt;assert.h&gt;
 #include &lt;algorithm&gt;
 #include &lt;map&gt;
 #include &lt;set&gt;
@@ -30,7 +30,7 @@
 
 #ifdef _MSC_VER
 #pragma warning(disable: 4244 4018) // signed/unsigned and loss of precision...
-#endif 
+#endif
 
 typedef unsigned char uchar;
 typedef unsigned long ulong;
@@ -63,9 +63,9 @@
 #define AI_PATH &quot;aidll/globalai/jcai/&quot;
 
 
-struct ResourceInfo 
+struct ResourceInfo
 {
-	ResourceInfo() { energy=metal=0.0f; } 
+	ResourceInfo() { energy=metal=0.0f; }
 	ResourceInfo(float e,float m) : energy(e),metal(m) {}
 	ResourceInfo&amp; operator+=(const ResourceInfo &amp;x) { energy+=x.energy; metal+=x.metal; return *this; }
 	ResourceInfo&amp; operator-=(const ResourceInfo &amp;x) { energy-=x.energy; metal-=x.metal; return *this; }

Modified: trunk/AI/Global/KAI-0.2/DamageControl.cpp
===================================================================
--- trunk/AI/Global/KAI-0.2/DamageControl.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/AI/Global/KAI-0.2/DamageControl.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,6 +1,6 @@
 #include &quot;DamageControl.h&quot;
 
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 
 CDamageControl::CDamageControl(AIClasses* ai)
 {
@@ -21,14 +21,14 @@
 }
 
 void CDamageControl::GenerateDPSTables()
-{	
+{
 	L(&quot;Generating DPS tables....&quot;);
 	//L(&quot;&quot;);
 	for(int i= 1; i &lt;= NumOfUnitTypes; i++){
 		//L(&quot;*****************************UNIT: &quot; &lt;&lt; ai-&gt;ut-&gt;unittypearray[i].def-&gt;humanName);
 		ai-&gt;ut-&gt;unittypearray[i].DPSvsUnit.resize(NumOfUnitTypes+1);
 		ai-&gt;ut-&gt;unittypearray[i].AverageDPS = 0;
-		for(int v = 1; v &lt;= NumOfUnitTypes; v++){			
+		for(int v = 1; v &lt;= NumOfUnitTypes; v++){
 			float dps = GetDPSvsUnit(ai-&gt;ut-&gt;unittypearray[i].def,ai-&gt;ut-&gt;unittypearray[v].def);
 			ai-&gt;ut-&gt;unittypearray[i].DPSvsUnit[v] = dps;
 			ai-&gt;ut-&gt;unittypearray[i].AverageDPS += dps;
@@ -56,12 +56,12 @@
 		if(enemiesCount[i] &gt; 0)
 		{
 			//int id = ai-&gt;cheat-&gt;GetUnitDef(enemies[i])-&gt;id;
-			UnitType* unitType = &amp;unittypearray[i];			
+			UnitType* unitType = &amp;unittypearray[i];
 			float enemycost = unitType-&gt;Cost * enemiesCount[i];
 			TheirTotalCost += enemycost;
 			if(unitType-&gt;def-&gt;isCommander)
 				enemycost = 100; // Ignore the commander (hack mostly)
-			TheirUnitsAll[i].Cost = enemycost;			
+			TheirUnitsAll[i].Cost = enemycost;
 			TheirUnitsAll[i].Hitpoints = unitType-&gt;def-&gt;health * enemiesCount[i];
 			if(ai-&gt;ut-&gt;GetCategory(unitType-&gt;def) == CAT_DEFENCE){
 				TheirDefences[i].Cost = enemycost;
@@ -99,7 +99,7 @@
 void CDamageControl::UpdateMyDistribution()
 {
 	//L(&quot;UpdateMyDistribution&quot;);
-	MyTotalCost = 0.0001; // Safety if I have 0 units.	
+	MyTotalCost = 0.0001; // Safety if I have 0 units.
 	//ai-&gt;math-&gt;TimerStart();
 	for(int i= 1; i &lt;= NumOfUnitTypes; i++){
 		MyUnitsAll[i].Clear();
@@ -155,7 +155,7 @@
 {
 	//L(&quot;Getting CombatScore for : &quot; &lt;&lt; unit-&gt;humanName &lt;&lt; &quot; number of units: &quot; &lt;&lt; NumOfUnitTypes);
 	float score = 0;
-	int category = GCAT(unit); 
+	int category = GCAT(unit);
 	bool foundaunit = false;
 	if(category == CAT_ATTACK || category == CAT_ARTILLERY || category == CAT_ASSAULT){
 		for(int i = 1; i &lt;= NumOfUnitTypes; i++){
@@ -192,7 +192,7 @@
 				score+= ai-&gt;ut-&gt;unittypearray[unit-&gt;id].DPSvsUnit[i] * TheirArmy[i].Cost / TheirArmy[i].Hitpoints / (MyDefences[i].Damage + 1); // kill the stuff with the best value
 				//L(&quot;Score:&quot; &lt;&lt; score);
 				//score+= 0; // This was for making a debug brakepoint
-				foundaunit = true;				
+				foundaunit = true;
 			}
 		}
 		if(!foundaunit){ // if nothing found try to kill his movable units (comm and builders)
@@ -236,7 +236,7 @@
 		float dps = 0;
 		bool canhit = false;
 		bool underwater = false;
-		//string targetcat;	
+		//string targetcat;
 		int armortype = victim-&gt;armorType;
 		int numberofdamages;
 		ai-&gt;cb-&gt;GetValue(AIVAL_NUMDAMAGETYPES,&amp;numberofdamages);
@@ -252,7 +252,7 @@
 				//L(unit-&gt;weapons[i].name &lt;&lt; &quot; Targcat: &quot; &lt;&lt;  targetcat);
 				//L(&quot;unit-&gt;categoryString &quot; &lt;&lt;  unit-&gt;categoryString);
 				//L(&quot;victim-&gt;categoryString &quot; &lt;&lt;  victim-&gt;categoryString);
-				
+
 				unsigned int a = victim-&gt;category;
 				unsigned int b = unit-&gt;weapons[i].def-&gt;onlyTargetCategory; // This is what the weapon can target
 				unsigned int c = unit-&gt;weapons[i].onlyTargetCat; // This is what the unit accepts as this weapons target
@@ -277,20 +277,20 @@
 					if(victim-&gt;canfly &amp;&amp; unit-&gt;wantedHeight &lt;= victim-&gt;wantedHeight)
 						canhit = false; // If the target can fly and it flyes below the victim its useless
 				}
-				
+
 				if(canhit){
 					//L(unit-&gt;weapons[i].name &lt;&lt; &quot; a: &quot; &lt;&lt;  a &lt;&lt; &quot;, b: &quot; &lt;&lt; b &lt;&lt; &quot;, c: &quot; &lt;&lt; c &lt;&lt; &quot;, d: &quot; &lt;&lt; d);
 					//L(&quot;unit-&gt;categoryString &quot; &lt;&lt;  unit-&gt;categoryString);
 					//L(&quot;victim-&gt;categoryString &quot; &lt;&lt;  victim-&gt;categoryString);
-				
+
 				}
 				//unit-&gt;weapons[i].def-&gt;turnrate
 				if(canhit){
 					float accuracy = unit-&gt;weapons[i].def-&gt;accuracy *2.8;
 					if(victim-&gt;speed &gt; 0){ // Better not use !=  as floats can have many forms of 0
 						accuracy *= 1-(unit-&gt;weapons[i].def-&gt;targetMoveError);
-					}					
-					float basedamage = unit-&gt;weapons[i].def-&gt;damages[armortype] * unit-&gt;weapons[i].def-&gt;salvosize * unit-&gt;weapons[i].def-&gt;projectilespershot / unit-&gt;weapons[i].def-&gt;reload;	
+					}
+					float basedamage = unit-&gt;weapons[i].def-&gt;damages[armortype] * unit-&gt;weapons[i].def-&gt;salvosize * unit-&gt;weapons[i].def-&gt;projectilespershot / unit-&gt;weapons[i].def-&gt;reload;
 					float AOE = unit-&gt;weapons[i].def-&gt;areaOfEffect * 0.7;
 					float tohitprobability;
 					float impactarea;
@@ -305,7 +305,7 @@
 						u = 0.00000001;
 					//L(&quot;Type: &quot; &lt;&lt; unit-&gt;weapons[i].def-&gt;type);
 					if(unit-&gt;weapons[i].def-&gt;type == string(&quot;Cannon&quot;)){ // Do ballistic calculations to account for increased flight time
-						//L(&quot;Is ballistic! Gravity: &quot; &lt;&lt; gravity);						
+						//L(&quot;Is ballistic! Gravity: &quot; &lt;&lt; gravity);
 						//L(&quot;u = &quot; &lt;&lt; u &lt;&lt; &quot; distancetravelled*gravity)/(u*u) = &quot; &lt;&lt; (distancetravelled*gravity)/(u*u));
 						float sinoid = (distancetravelled*gravity)/(u*u);
 						sinoid = min(sinoid,1.0f);
@@ -319,9 +319,9 @@
 						distancetravelled = 2*sqrt(halfd*halfd+heightreached*heightreached) * 1.1;
 						//L(&quot;Height reached: &quot; &lt;&lt; heightreached &lt;&lt; &quot; distance travelled &quot; &lt;&lt; distancetravelled);
 					}
-					
+
 					//L(&quot;Name: &quot; &lt;&lt; unit-&gt;weapons[i].name &lt;&lt; &quot; AOE: &quot; &lt;&lt; AOE &lt;&lt; &quot; Accuracy: &quot; &lt;&lt; unit-&gt;weapons[i].def-&gt;accuracy &lt;&lt; &quot; range: &quot; &lt;&lt; unit-&gt;weapons[i].def-&gt;range);
-					if((victim-&gt;canfly &amp;&amp; unit-&gt;weapons[i].def-&gt;selfExplode) || !victim-&gt;canfly){					
+					if((victim-&gt;canfly &amp;&amp; unit-&gt;weapons[i].def-&gt;selfExplode) || !victim-&gt;canfly){
 						impactarea = pow((accuracy*distancetravelled)+AOE,2);
 						targetarea = ((victim-&gt;xsize * 16) + AOE) * ((victim-&gt;ysize * 16) + AOE);
 					}
@@ -365,7 +365,7 @@
 					assert(tohitprobability &gt;= 0);
 					dps += basedamage * tohitprobability;
 				}
-			}	
+			}
 		}
 		//if(unit-&gt;weapons.size() &gt; 0)
 		//L(&quot;DPS: &quot; &lt;&lt; dps);

Modified: trunk/AI/Global/KAIK-0.13/Unit.cpp
===================================================================
--- trunk/AI/Global/KAIK-0.13/Unit.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/AI/Global/KAIK-0.13/Unit.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,7 +1,7 @@
 #include &quot;Unit.h&quot;
 #include &quot;GlobalAI.h&quot;
 
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 
 CR_BIND(CUNIT, )
 CR_REG_METADATA(CUNIT, (

Modified: trunk/AI/Global/KAIK-0.13/UnitTable.cpp
===================================================================
--- trunk/AI/Global/KAIK-0.13/UnitTable.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/AI/Global/KAIK-0.13/UnitTable.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,7 +2,7 @@
 
 #include &quot;UnitTable.h&quot;
 
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;System/Util.h&quot;
 
 /// CR_BIND(CUnitTable, );
@@ -18,12 +18,12 @@
 /// 	CR_MEMBER(metal_storages),
 /// 	CR_MEMBER(energy_storages),
 /// 	CR_MEMBER(nuke_silos),
-/// 
+///
 /// 	CR_MEMBER(numOfSides),
 /// 	CR_MEMBER(sideNames),
 /// 	CR_MEMBER(modSideMap),
 /// 	CR_MEMBER(teamSides),
-/// 
+///
 /// 	CR_MEMBER(unitTypes)
 /// ));
 

Modified: trunk/AI/Global/NTai/AI/NTai/SDK/AI.h
===================================================================
--- trunk/AI/Global/NTai/AI/NTai/SDK/AI.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/AI/Global/NTai/AI/NTai/SDK/AI.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -28,7 +28,7 @@
 #include &quot;ExternalAI/IAICallback.h&quot; // AI Callback
 #include &quot;ExternalAI/IGlobalAICallback.h&quot; //GlobalAI callback
 #include &quot;ExternalAI/IAICheats.h&quot; // Cheat Interface
-#include &quot;Game/GlobalConstants.h&quot; // Common definitions in spring
+#include &quot;Sim/Misc/GlobalConstants.h&quot; // Common definitions in spring
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot; // Needed for WeaponDef
 #include &quot;Sim/Misc/DamageArray.h&quot; // Needed for WeaponDef
 #include &quot;Sim/MoveTypes/MoveInfo.h&quot;

Modified: trunk/AI/Group/MexUpgraderAI/GroupAI.cpp
===================================================================
--- trunk/AI/Group/MexUpgraderAI/GroupAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/AI/Group/MexUpgraderAI/GroupAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,7 +13,7 @@
 #include &quot;creg/STL_Set.h&quot;
 #include &quot;creg/Serializer.h&quot;
 #include &quot;creg/cregex.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 
 #define CMD_CHANGE_MODE 	160
 #define CMD_AREA_UPGRADE 	165

Modified: trunk/rts/ExternalAI/AICallback.cpp
===================================================================
--- trunk/rts/ExternalAI/AICallback.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/ExternalAI/AICallback.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,7 +9,7 @@
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Game/Player.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/UI/MiniMap.h&quot;
 #include &quot;Game/UI/MouseHandler.h&quot;
 #include &quot;Lua/LuaRules.h&quot;
@@ -30,7 +30,7 @@
 #include &quot;Sim/Misc/GeometricObjects.h&quot;
 #include &quot;Sim/Misc/LosHandler.h&quot;
 #include &quot;Sim/Misc/QuadField.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 #include &quot;Sim/Path/PathManager.h&quot;
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
 #include &quot;Sim/Units/CommandAI/LineDrawer.h&quot;

Modified: trunk/rts/ExternalAI/AICheats.cpp
===================================================================
--- trunk/rts/ExternalAI/AICheats.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/ExternalAI/AICheats.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,8 +8,8 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
 #include &quot;NetProtocol.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/GameServer.h&quot;
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;mmgr.h&quot;

Modified: trunk/rts/ExternalAI/GlobalAI.cpp
===================================================================
--- trunk/rts/ExternalAI/GlobalAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/ExternalAI/GlobalAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,14 +9,14 @@
 #include &quot;Platform/SharedLib.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;mmgr.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 
 #include &lt;sstream&gt;
 
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 CR_BIND_DERIVED(CGlobalAI, CObject, (0, NULL))
 CR_REG_METADATA(CGlobalAI, (

Modified: trunk/rts/ExternalAI/GlobalAIHandler.cpp
===================================================================
--- trunk/rts/ExternalAI/GlobalAIHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/ExternalAI/GlobalAIHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,15 +2,15 @@
 #include &quot;GlobalAIHandler.h&quot;
 #include &quot;GlobalAI.h&quot;
 #include &quot;IGlobalAI.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/Player.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/TimeProfiler.h&quot;
-#include &quot;System/NetProtocol.h&quot;
-#include &quot;System/Platform/errorhandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;TimeProfiler.h&quot;
+#include &quot;NetProtocol.h&quot;
+#include &quot;Platform/errorhandler.h&quot;
 #include &quot;mmgr.h&quot;
 
 CGlobalAIHandler* globalAI=0;

Modified: trunk/rts/ExternalAI/GlobalAIHandler.h
===================================================================
--- trunk/rts/ExternalAI/GlobalAIHandler.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/ExternalAI/GlobalAIHandler.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 #include &quot;Object.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;float3.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &lt;map&gt;
 #include &lt;string&gt;
 

Modified: trunk/rts/ExternalAI/Group.cpp
===================================================================
--- trunk/rts/ExternalAI/Group.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/ExternalAI/Group.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,8 +9,8 @@
 #include &quot;GroupHandler.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;EventHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Platform/errorhandler.h&quot;
 #include &quot;mmgr.h&quot;

Modified: trunk/rts/ExternalAI/Group.h
===================================================================
--- trunk/rts/ExternalAI/Group.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/ExternalAI/Group.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,7 +11,7 @@
 #include &quot;Platform/SharedLib.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitSet.h&quot;
-#include &quot;ExternalAI/aikey.h&quot;
+#include &quot;aikey.h&quot;
 class IGroupAI;
 class CUnit;
 class CFeature;

Modified: trunk/rts/ExternalAI/GroupHandler.h
===================================================================
--- trunk/rts/ExternalAI/GroupHandler.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/ExternalAI/GroupHandler.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,8 +8,8 @@
 #include &lt;string&gt;
 #include &lt;vector&gt;
 #include &lt;set&gt;
-#include &quot;ExternalAI/aikey.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;aikey.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 
 class CGroup;
 class CUnitSet;

Modified: trunk/rts/Game/Action.cpp
===================================================================
--- trunk/rts/Game/Action.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Action.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,7 +5,7 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;Action.h&quot;
-#include &quot;System/FileSystem/SimpleParser.h&quot;
+#include &quot;FileSystem/SimpleParser.h&quot;
 
 Action::Action(const std::string&amp; line)
 {

Modified: trunk/rts/Game/Camera/FPSController.cpp
===================================================================
--- trunk/rts/Game/Camera/FPSController.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Camera/FPSController.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,7 +7,7 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 using std::min;
 using std::max;

Modified: trunk/rts/Game/Camera/FreeController.cpp
===================================================================
--- trunk/rts/Game/Camera/FreeController.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Camera/FreeController.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 using std::max;
 using std::min;

Modified: trunk/rts/Game/Camera/OrbitController.cpp
===================================================================
--- trunk/rts/Game/Camera/OrbitController.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Camera/OrbitController.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,7 +7,7 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/UI/MouseHandler.h&quot;
 #include &quot;Map/Ground.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 
 extern Uint8* keys;

Modified: trunk/rts/Game/Camera/OverheadController.cpp
===================================================================
--- trunk/rts/Game/Camera/OverheadController.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Camera/OverheadController.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #include &quot;Game/UI/MouseHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 
 

Modified: trunk/rts/Game/Camera/SmoothController.cpp
===================================================================
--- trunk/rts/Game/Camera/SmoothController.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Camera/SmoothController.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,7 +14,7 @@
 #include &quot;Game/UI/MouseHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 
 

Modified: trunk/rts/Game/Camera/TWController.cpp
===================================================================
--- trunk/rts/Game/Camera/TWController.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Camera/TWController.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Game/UI/MouseHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 extern Uint8 *keys;
 

Modified: trunk/rts/Game/Camera.cpp
===================================================================
--- trunk/rts/Game/Camera.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Camera.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,8 +5,8 @@
 
 #include &quot;mmgr.h&quot;
 
-#include &quot;System/myMath.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;myMath.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Camera.h&quot;
 #include &quot;Map/Ground.h&quot;
 

Modified: trunk/rts/Game/CameraHandler.cpp
===================================================================
--- trunk/rts/Game/CameraHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/CameraHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,17 +5,17 @@
 
 #include &quot;CameraHandler.h&quot;
 
-#include &quot;Game/Action.h&quot;
-#include &quot;Game/Camera.h&quot;
-#include &quot;Game/Camera/CameraController.h&quot;
-#include &quot;Game/Camera/FPSController.h&quot;
-#include &quot;Game/Camera/OverheadController.h&quot;
-#include &quot;Game/Camera/SmoothController.h&quot;
-#include &quot;Game/Camera/RotOverheadController.h&quot;
-#include &quot;Game/Camera/FreeController.h&quot;
-#include &quot;Game/Camera/OverviewController.h&quot;
-#include &quot;Game/Camera/TWController.h&quot;
-#include &quot;Game/Camera/OrbitController.h&quot;
+#include &quot;Action.h&quot;
+#include &quot;Camera.h&quot;
+#include &quot;Camera/CameraController.h&quot;
+#include &quot;Camera/FPSController.h&quot;
+#include &quot;Camera/OverheadController.h&quot;
+#include &quot;Camera/SmoothController.h&quot;
+#include &quot;Camera/RotOverheadController.h&quot;
+#include &quot;Camera/FreeController.h&quot;
+#include &quot;Camera/OverviewController.h&quot;
+#include &quot;Camera/TWController.h&quot;
+#include &quot;Camera/OrbitController.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;GlobalUnsynced.h&quot;

Modified: trunk/rts/Game/Game.cpp
===================================================================
--- trunk/rts/Game/Game.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Game.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -44,7 +44,7 @@
 #include &quot;SelectedUnits.h&quot;
 #include &quot;PlayerRoster.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;ChatMessage.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;WaitCommandsAI.h&quot;
@@ -91,8 +91,8 @@
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;Lua/LuaSyncedRead.h&quot;
 #include &quot;Lua/LuaUnsyncedCtrl.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
-#include &quot;Sim/SideParser.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
+#include &quot;Sim/Misc/SideParser.h&quot;
 #include &quot;Sim/Misc/CategoryHandler.h&quot;
 #include &quot;Sim/Misc/DamageArrayHandler.h&quot;
 #include &quot;Sim/Features/FeatureHandler.h&quot;
@@ -117,13 +117,13 @@
 #include &quot;StartScripts/Script.h&quot;
 #include &quot;StartScripts/ScriptHandler.h&quot;
 #include &quot;Sync/SyncedPrimitiveIO.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/Sound.h&quot;
-#include &quot;System/FileSystem/SimpleParser.h&quot;
-#include &quot;System/Platform/NullSound.h&quot;
-#include &quot;System/Net/RawPacket.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;Sound.h&quot;
+#include &quot;FileSystem/SimpleParser.h&quot;
+#include &quot;Platform/NullSound.h&quot;
+#include &quot;Net/RawPacket.h&quot;
 #include &quot;UI/CommandColors.h&quot;
 #include &quot;UI/CursorIcons.h&quot;
 #include &quot;UI/EndGameBox.h&quot;

Modified: trunk/rts/Game/GameController.cpp
===================================================================
--- trunk/rts/Game/GameController.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/GameController.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,7 +3,7 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;GameController.h&quot;
-#include &quot;System/Platform/Clipboard.h&quot;
+#include &quot;Platform/Clipboard.h&quot;
 
 
 CGameController::CGameController(void)

Modified: trunk/rts/Game/GameHelper.cpp
===================================================================
--- trunk/rts/Game/GameHelper.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/GameHelper.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,12 +6,12 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;mmgr.h&quot;
 
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Camera.h&quot;
-#include &quot;Game/GameSetup.h&quot;
+#include &quot;GameSetup.h&quot;
 #include &quot;Game.h&quot;
 #include &quot;GameHelper.h&quot;
-#include &quot;Game/UI/LuaUI.h&quot;
+#include &quot;UI/LuaUI.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/MapDamage.h&quot;
@@ -26,7 +26,7 @@
 #include &quot;Sim/Misc/LosHandler.h&quot;
 #include &quot;Sim/Misc/QuadField.h&quot;
 #include &quot;Sim/Misc/RadarHandler.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 #include &quot;Sim/Projectiles/ExplosionGenerator.h&quot;
 #include &quot;Sim/Projectiles/Projectile.h&quot;
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
@@ -37,8 +37,8 @@
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;myMath.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Game/GameServer.cpp
===================================================================
--- trunk/rts/Game/GameServer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/GameServer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -27,25 +27,25 @@
 
 #include &quot;LogOutput.h&quot;
 #include &quot;GameSetup.h&quot;
-#include &quot;GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Action.h&quot;
 #include &quot;ChatMessage.h&quot;
 #include &quot;CommandMessage.h&quot;
-#include &quot;System/StdAfx.h&quot;
-#include &quot;System/BaseNetProtocol.h&quot;
-#include &quot;System/Net/UDPListener.h&quot;
-#include &quot;System/Net/Connection.h&quot;
-#include &quot;System/Net/UDPConnection.h&quot;
-#include &quot;System/Net/LocalConnection.h&quot;
-#include &quot;System/Net/UnpackPacket.h&quot;
-#include &quot;System/DemoReader.h&quot;
-#include &quot;System/AutohostInterface.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot; // for syncdebug
+#include &quot;StdAfx.h&quot;
+#include &quot;BaseNetProtocol.h&quot;
+#include &quot;Net/UDPListener.h&quot;
+#include &quot;Net/Connection.h&quot;
+#include &quot;Net/UDPConnection.h&quot;
+#include &quot;Net/LocalConnection.h&quot;
+#include &quot;Net/UnpackPacket.h&quot;
+#include &quot;DemoReader.h&quot;
+#include &quot;AutohostInterface.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;GlobalUnsynced.h&quot; // for syncdebug
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;FileSystem/CRC.h&quot;
 #include &quot;Player.h&quot;
-#include &quot;Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Server/MsgStrings.h&quot;
 
 

Modified: trunk/rts/Game/GameServer.h
===================================================================
--- trunk/rts/Game/GameServer.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/GameServer.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,8 +13,8 @@
 #include &quot;Console.h&quot;
 #include &quot;GameData.h&quot;
 #include &quot;PlayerBase.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
-#include &quot;System/UnsyncedRNG.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
+#include &quot;UnsyncedRNG.h&quot;
 #include &quot;SFloat3.h&quot;
 
 class CBaseNetProtocol;

Modified: trunk/rts/Game/GameSetup.cpp
===================================================================
--- trunk/rts/Game/GameSetup.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/GameSetup.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,9 +13,9 @@
 #include &quot;FileSystem/ArchiveScanner.h&quot;
 #include &quot;Map/MapParser.h&quot;
 #include &quot;Rendering/Textures/TAPalette.h&quot;
-#include &quot;System/UnsyncedRNG.h&quot;
-#include &quot;System/Exceptions.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;UnsyncedRNG.h&quot;
+#include &quot;Exceptions.h&quot;
+#include &quot;Util.h&quot;
 
 
 using namespace std;

Modified: trunk/rts/Game/GameSetup.h
===================================================================
--- trunk/rts/Game/GameSetup.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/GameSetup.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 #include &lt;vector&gt;
 
 #include &quot;SFloat3.h&quot;
-#include &quot;GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;PlayerBase.h&quot;
 
 class TdfParser;

Deleted: trunk/rts/Game/GlobalConstants.h
===================================================================
--- trunk/rts/Game/GlobalConstants.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/GlobalConstants.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,62 +0,0 @@
-#ifndef GLOBAL_CONSTANTS_H
-#define GLOBAL_CONSTANTS_H
-
-/**
- * @brief maximum world size
- *
- * Defines the maximum world size as 1000000
- */
-const int MAX_WORLD_SIZE = 1000000;
-
-/**
- * @brief square size
- *
- * Defines the size of 1 square as 8
- */
-const int  SQUARE_SIZE = 8;
-
-/**
- * @brief game speed
- *
- * Defines the game speed as 30
- */
-const int GAME_SPEED = 30;
-
-/**
- * @brief max view range
- *
- * Defines the maximum view range as 8000
- */
-const int MAX_VIEW_RANGE = 8000;
-
-/**
- * @brief max teams
- *
- * Defines the maximum number of teams
- * as 17 (16 real teams, and an extra slot for the GAIA team)
- */
-const int MAX_TEAMS = 17;
-
-/**
- * @brief max players
- *
- * Defines the maximum number of players as 32
- */
-const int MAX_PLAYERS = 32;
-
-/**
- * @brief near plane
- *
- * Defines the near plane as 2.8f
- */
-const float NEAR_PLANE = 2.8f;
-
-/**
- * @brief randint max
- *
- * Defines the maximum random integer as 0x7fff
- */
-const int RANDINT_MAX = 0x7fff;
-
-
-#endif

Deleted: trunk/rts/Game/GlobalSynced.cpp
===================================================================
--- trunk/rts/Game/GlobalSynced.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/GlobalSynced.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,242 +0,0 @@
-#include &quot;StdAfx.h&quot;
-#include &quot;GlobalSynced.h&quot;
-
-#include &lt;assert.h&gt;
-#include &lt;cstring&gt;
-
-#include &quot;GameSetup.h&quot;
-#include &quot;Team.h&quot;
-#include &quot;Player.h&quot;
-#include &quot;Lua/LuaGaia.h&quot;
-#include &quot;Lua/LuaRules.h&quot;
-
-/**
- * @brief global synced
- *
- * Global instance of CGlobalSyncedStuff
- */
-CGlobalSyncedStuff* gs;
-
-
-
-CR_BIND(CGlobalSyncedStuff,);
-
-CR_REG_METADATA(CGlobalSyncedStuff, (
-	CR_MEMBER(randSeed),
-	CR_MEMBER(initRandSeed),
-	CR_MEMBER(frameNum),
-	CR_MEMBER(speedFactor),
-	CR_MEMBER(userSpeedFactor),
-	CR_MEMBER(paused),
-	CR_MEMBER(tempNum),
-	CR_MEMBER(godMode),
-	CR_MEMBER(globalLOS),
-	CR_MEMBER(cheatEnabled),
-	CR_MEMBER(noHelperAIs),
-	CR_MEMBER(editDefsEnabled),
-	CR_MEMBER(useLuaRules),
-	CR_MEMBER(useLuaGaia),
-	CR_MEMBER(gaiaTeamID),
-	CR_MEMBER(gaiaAllyTeamID),
-	CR_MEMBER(gameMode),
-	CR_MEMBER(players),
-	CR_MEMBER(activeTeams),
-	CR_MEMBER(activeAllyTeams),
-	CR_MEMBER(activePlayers),
-	CR_MEMBER(allies),
-	CR_MEMBER(team2allyteam),
-	CR_MEMBER(teams),
-	CR_RESERVED(64)
-));
-
-
-/**
- * Initializes variables in CGlobalSyncedStuff
- */
-CGlobalSyncedStuff::CGlobalSyncedStuff()
-{
-	hmapx = 256;
-	hmapy = 256;
-	randSeed = 18655;
-	initRandSeed = randSeed;
-	frameNum = 0;
-	speedFactor = 1;
-	userSpeedFactor = 1;
-	paused = false;
-	godMode = false;
-	globalLOS = false;
-	cheatEnabled = false;
-	noHelperAIs = false;
-	editDefsEnabled = false;
-	tempNum = 2;
-	gameMode = 0;
-	useLuaGaia = true;
-	gaiaTeamID = -1;
-	gaiaAllyTeamID = -1;
-	useLuaRules = true;
-	
-	for(int a = 0; a &lt; MAX_TEAMS; ++a) {
-		teams[a] = SAFE_NEW CTeam();
-		teams[a]-&gt;teamNum = a;
-		team2allyteam[a] = a;
-	}
-	for(int a = 0; a &lt; MAX_PLAYERS; ++a) {
-		players[a] = SAFE_NEW CPlayer();
-		players[a]-&gt;playerNum = a;
-	}
-
-	for (int a = 0; a &lt; MAX_TEAMS; ++a) {
-		for (int b = 0; b &lt; MAX_TEAMS; ++b) {
-			allies[a][b] = false;
-		}
-		allies[a][a] = true;
-	}
-
-	activeTeams = 2;
-	activeAllyTeams = 2;
-	activePlayers = MAX_PLAYERS;
-}
-
-/**
- * Destroys data inside CGlobalSyncedStuff
- */
-CGlobalSyncedStuff::~CGlobalSyncedStuff()
-{
-	for(int a = 0; a &lt; MAX_TEAMS; a++) {
-		delete teams[a];
-	}
-	for(int a = 0; a &lt; MAX_PLAYERS; a++) {
-		delete players[a];
-	}
-}
-
-void CGlobalSyncedStuff::LoadFromSetup(const CGameSetup* setup)
-{
-	gameMode = setup-&gt;gameMode;
-	noHelperAIs = !!setup-&gt;noHelperAIs;
-
-	useLuaGaia  = CLuaGaia::SetConfigString(setup-&gt;luaGaiaStr);
-	useLuaRules = CLuaRules::SetConfigString(setup-&gt;luaRulesStr);
-
-	activePlayers = setup-&gt;numPlayers;
-	activeTeams = setup-&gt;numTeams;
-	activeAllyTeams = setup-&gt;numAllyTeams;
-	
-	assert(activeTeams &lt;= MAX_TEAMS);
-	assert(activeAllyTeams &lt;= MAX_TEAMS);
-
-	for (int i = 0; i &lt; activePlayers; ++i)
-	{
-		// TODO: refactor
-		*static_cast&lt;PlayerBase*&gt;(players[i]) = setup-&gt;playerStartingData[i];
-	}
-
-	for (int i = 0; i &lt; activeTeams; ++i)
-	{
-		teams[i]-&gt;metal = setup-&gt;startMetal;
-		teams[i]-&gt;metalIncome = setup-&gt;startMetal; // for the endgame statistics
-
-		teams[i]-&gt;energy = setup-&gt;startEnergy;
-		teams[i]-&gt;energyIncome = setup-&gt;startEnergy;
-
-		float3 start(setup-&gt;teamStartingData[i].startPos.x, setup-&gt;teamStartingData[i].startPos.y, setup-&gt;teamStartingData[i].startPos.z);
-		teams[i]-&gt;StartposMessage(start, (setup-&gt;startPosType != CGameSetup::StartPos_ChooseInGame));
-		std::memcpy(teams[i]-&gt;color, setup-&gt;teamStartingData[i].color, 4);
-		teams[i]-&gt;handicap = setup-&gt;teamStartingData[i].handicap;
-		teams[i]-&gt;leader = setup-&gt;teamStartingData[i].leader;
-		teams[i]-&gt;side = setup-&gt;teamStartingData[i].side;
-		SetAllyTeam(i, setup-&gt;teamStartingData[i].teamAllyteam);
-		if (!setup-&gt;teamStartingData[i].aiDll.empty())
-		{
-			if (setup-&gt;teamStartingData[i].aiDll.substr(0, 6) == &quot;LuaAI:&quot;) // its a LuaAI
-			{
-				teams[i]-&gt;luaAI = setup-&gt;teamStartingData[i].aiDll.substr(6);
-				teams[i]-&gt;isAI = true;
-			}
-			else // no LuaAI
-			{
-				if (setup-&gt;hostDemo) // in demo replay, we don't need AI's to load again
-					teams[i]-&gt;dllAI = &quot;&quot;;
-				else
-				{
-					teams[i]-&gt;dllAI = setup-&gt;teamStartingData[i].aiDll;
-					teams[i]-&gt;isAI = true;
-				}
-			}
-		}
-	}
-
-	for (int allyTeam1 = 0; allyTeam1 &lt; activeAllyTeams; ++allyTeam1)
-	{
-		for (int allyTeam2 = 0; allyTeam2 &lt; activeAllyTeams; ++allyTeam2)
-			allies[allyTeam1][allyTeam2] = setup-&gt;allyStartingData[allyTeam1].allies[allyTeam2];
-	}
-
-	if (useLuaGaia) {
-		// Gaia adjustments
-		gaiaTeamID = activeTeams;
-		gaiaAllyTeamID = activeAllyTeams;
-		activeTeams++;
-		activeAllyTeams++;
-
-		// Setup the gaia team
-		CTeam* team = gs-&gt;Team(gs-&gt;gaiaTeamID);
-		team-&gt;color[0] = 255;
-		team-&gt;color[1] = 255;
-		team-&gt;color[2] = 255;
-		team-&gt;color[3] = 255;
-		team-&gt;gaia = true;
-		team-&gt;StartposMessage(float3(0.0, 0.0, 0.0), true);
-		//players[setup-&gt;numPlayers]-&gt;team = gaiaTeamID;
-		SetAllyTeam(gaiaTeamID, gaiaAllyTeamID);
-	}
-}
-
-/**
- * @return synced random integer
- *
- * returns a synced random integer
- */
-int CGlobalSyncedStuff::randInt()
-{
-	randSeed = (randSeed * 214013L + 2531011L);
-	return randSeed &amp; RANDINT_MAX;
-}
-
-/**
- * @return synced random float
- *
- * returns a synced random float
- */
-float CGlobalSyncedStuff::randFloat()
-{
-	randSeed = (randSeed * 214013L + 2531011L);
-	return float(randSeed &amp; RANDINT_MAX)/RANDINT_MAX;
-}
-
-/**
- * @return synced random vector
- *
- * returns a synced random vector
- */
-float3 CGlobalSyncedStuff::randVector()
-{
-	float3 ret;
-	do {
-		ret.x = randFloat()*2-1;
-		ret.y = randFloat()*2-1;
-		ret.z = randFloat()*2-1;
-	} while(ret.SqLength()&gt;1);
-
-	return ret;
-}
-
-int CGlobalSyncedStuff::Player(const std::string&amp; name)
-{
-	for (int i = 0; i &lt; MAX_PLAYERS; ++i) {
-		if (players[i] &amp;&amp; players[i]-&gt;name == name) {
-			return i;
-		}
-	}
-	return -1;
-}

Deleted: trunk/rts/Game/GlobalSynced.h
===================================================================
--- trunk/rts/Game/GlobalSynced.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/GlobalSynced.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,341 +0,0 @@
-#ifndef GLOBAL_UNSYNCED_H
-#define GLOBAL_UNSYNCED_H
-
-#include &lt;string&gt;
-
-#include &quot;float3.h&quot;
-#include &quot;GlobalConstants.h&quot;
-#include &quot;creg/creg.h&quot;
-
-
-class CGameSetup;
-class CTeam;
-class CPlayer;
-
-/**
- * @brief Global synced stuff
- *
- * Class contains globally accessible
- * stuff that remains synced.
- */
-class CGlobalSyncedStuff
-{
-public:
-	CR_DECLARE(CGlobalSyncedStuff);
-	CGlobalSyncedStuff();  //!&lt; Constructor
-	~CGlobalSyncedStuff(); //!&lt; Destructor
-	void LoadFromSetup(const CGameSetup*);
-
-	int    randInt();    //!&lt; synced random int
-	float  randFloat();  //!&lt; synced random float
-	float3 randVector(); //!&lt; synced random vector
-
-	void SetRandSeed(unsigned int seed, bool init = false) {
-		randSeed = seed;
-		if (init) { initRandSeed = randSeed; }
-	}
-	unsigned int GetRandSeed()     const { return randSeed; }
-	unsigned int GetInitRandSeed() const { return initRandSeed; }
-
-	/**
-	* @brief frame number
-	*
-	* Stores the current frame number
-	*/
-	int frameNum;
-
-	/**
-	* @brief speed factor
-	*
-	* Contains the actual gamespeed used by the game
-	*/
-	float speedFactor;
-
-	/**
-	* @brief user speed factor
-	*
-	* Contains the user's speed factor.
-	* The real gamespeed can be up to this
-	* but is lowered if a computer can't keep up
-	*/
-	float userSpeedFactor;
-
-	/**
-	* @brief paused
-	*
-	* Holds whether the game is paused
-	*/
-	bool paused;
-
-	/**
-	* @brief map x
-	*
-	* The map's number of squares in the x direction
-	* (note that the number of vertices is one more)
-	*/
-	int mapx;
-
-	/**
-	* @brief map y
-	*
-	* The map's number of squares in the y direction
-	*/
-	int mapy;
-
-	/**
-	* @brief map squares
-	*
-	* Total number of squares on the map
-	*/
-	int mapSquares;
-
-	/**
-	* @brief half map x
-	*
-	* Contains half of the number of squares in the x direction
-	*/
-	int hmapx;
-
-	/**
-	* @brief half map y
-	*
-	* Contains half of the number of squares in the y direction
-	*/
-	int hmapy;
-
-	/**
-	* @brief map x power of 2
-	*
-	* Map's size in the x direction rounded
-	* up to the next power of 2
-	*/
-	int pwr2mapx;
-
-	/**
-	* @brief map y power of 2
-	*
-	* Map's size in the y direction rounded
-	* up to the next power of 2
-	*/
-	int pwr2mapy;
-
-	/**
-	* @brief temp num
-	*
-	* Used for getting temporary but unique numbers
-	* (increase after each use)
-	*/
-	int tempNum;
-
-	/**
-	* @brief god mode
-	*
-	* Whether god mode is enabled, allows all players to control all units (even specs)
-	*/
-	bool godMode;
-
-	/**
-	* @brief global line-of-sight
-	*
-	* Whether everything on the map is visible at all times
-	*/
-	bool globalLOS;
-
-	/**
-	* @brief cheat enabled
-	*
-	* Whether cheating is enabled
-	*/
-	bool cheatEnabled;
-
-	/**
-	* @brief disable helper AIs
-	*
-	* Whether helper AIs are allowed, including GroupAI and LuaUI control widgets
-	*/
-	bool noHelperAIs;
-
-	/**
-	* @brief definition editing enabled
-	*
-	* Whether definition editing is enabled
-	*/
-	bool editDefsEnabled;
-
-	/**
-	* @brief LuaRules control
-	*
-	* Whether or not LuaRules is enabled
-	*/
-	bool useLuaRules;
-
-	/**
-	* @brief LuaGaia control
-	*
-	* Whether or not LuaGaia is enabled
-	*/
-	bool useLuaGaia;
-
-	/**
-	* @brief gaia team
-	*
-	* gaia's team id
-	*/
-	int gaiaTeamID;
-
-	/**
-	* @brief gaia team
-	*
-	* gaia's team id
-	*/
-	int gaiaAllyTeamID;
-
-	/**
-	* @brief game mode
-	*
-	* Determines the commander mode of this game
-	*   0: game continues after commander dies
-	*   1: game ends when commander dies
-	*   2: lineage mode (all descendants die when a commander dies)
-	*/
-	int gameMode;
-
-	/**
-	* @brief players
-	*
-	* Array of CPlayer pointers, for all the
-	* players in the game
-	* (size MAX_PLAYERS)
-	*/
-	CPlayer* players[MAX_PLAYERS];
-
-	/**
-	* @brief active teams
-	*
-	* The number of active teams
-	* (don't change during play)
-	*/
-	int activeTeams;
-
-	/**
-	* @brief active ally teams
-	*
-	* The number of active ally teams
-	*/
-	int activeAllyTeams;
-
-	/**
-	* @brief active players
-	*
-	* The number of active players
-	*/
-	int activePlayers;
-
-	/**
-	* @brief Player
-	* @param name name of the player
-	* @return his playernumber of -1 if not found
-	*
-	* Search a player by name.
-	*/
-	int Player(const std::string&amp; name);
-
-	/**
-	* @brief Team
-	* @param i index to fetch
-	* @return CTeam pointer
-	*
-	* Accesses a CTeam pointer at a given index
-	*/
-	CTeam *Team(int i) { return teams[i]; }
-
-	/**
-	* @brief ally
-	* @param a first index
-	* @param b second index
-	* @return allies[a][b]
-	*
-	* Returns ally at [a][b]
-	*/
-	bool Ally(int a,int b) { return allies[a][b]; }
-
-	/**
-	* @brief ally team
-	* @param team team to find
-	* @return the ally team
-	*
-	* returns the team2ally at given index
-	*/
-	int AllyTeam(int team) { return team2allyteam[team]; }
-
-	/**
-	* @brief allied teams
-	* @param a first team
-	* @param b second team
-	* @return whether teams are allied
-	*
-	* Tests whether teams are allied
-	*/
-	bool AlliedTeams(int a,int b) { return allies[team2allyteam[a]][team2allyteam[b]]; }
-
-	/**
-	* @brief set ally team
-	* @param team team to set
-	* @param allyteam allyteam to set
-	*
-	* Sets team's ally team
-	*/
-	void SetAllyTeam(int team, int allyteam) { team2allyteam[team]=allyteam; }
-
-	/**
-	* @brief set ally
-	* @param allyteamA first allyteam
-	* @param allyteamB second allyteam
-	* @param allied whether or not these two teams are allied
-	*
-	* Sets two allyteams to be allied or not
-	*/
-	void SetAlly(int allyteamA,int allyteamB, bool allied) { allies[allyteamA][allyteamB]=allied; }
-
-private:
-	/**
-	* @brief random seed
-	*
-	* Holds the synced random seed
-	*/
-	int randSeed;
-
-	/**
-	* @brief initial random seed
-	*
-	* Holds the synced initial random seed
-	*/
-	int initRandSeed;
-
-	/**
-	* @brief allies array
-	*
-	* Array indicates whether teams are allied,
-	* allies[a][b] means allyteam a is allied with
-	* allyteam b, NOT the other way around
-	*/
-	bool allies[MAX_TEAMS][MAX_TEAMS];
-
-	/**
-	* @brief team to ally team
-	*
-	* Array stores what ally team a specific team is part of
-	*/
-	int team2allyteam[MAX_TEAMS];
-
-	/**
-	* @brief teams
-	*
-	* Array of CTeam pointers for teams in game
-	*/
-	CTeam* teams[MAX_TEAMS];
-};
-
-extern CGlobalSyncedStuff* gs;
-
-#endif //GLOBAL_UNSYNCED_H

Modified: trunk/rts/Game/Player.cpp
===================================================================
--- trunk/rts/Game/Player.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Player.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,15 +7,15 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;Player.h&quot;
-#include &quot;Team.h&quot;
-#include &quot;GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #ifdef DIRECT_CONTROL_ALLOWED
 #  include &quot;UI/MouseHandler.h&quot;
 #  include &quot;CameraHandler.h&quot;
 #  include &quot;Camera.h&quot;
 #endif
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND(CPlayer,);
 

Modified: trunk/rts/Game/PlayerRoster.cpp
===================================================================
--- trunk/rts/Game/PlayerRoster.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/PlayerRoster.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,9 +9,9 @@
 
 #include &quot;PlayerRoster.h&quot;
 #include &quot;Player.h&quot;
-#include &quot;Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Util.h&quot;
-#include &quot;GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;GlobalUnsynced.h&quot;
 
 static int CompareAllies     (const void* a, const void* b);

Modified: trunk/rts/Game/PreGame.cpp
===================================================================
--- trunk/rts/Game/PreGame.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/PreGame.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,18 +12,18 @@
 #include &quot;PreGame.h&quot;
 #include &quot;Game.h&quot;
 #include &quot;GameVersion.h&quot;
-#include &quot;Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;FPUCheck.h&quot;
 #include &quot;GameServer.h&quot;
 #include &quot;GameSetup.h&quot;
 #include &quot;GameData.h&quot;
-#include &quot;GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;NetProtocol.h&quot;
 #include &quot;Net/RawPacket.h&quot;
 #include &quot;DemoRecorder.h&quot;
 #include &quot;DemoReader.h&quot;
 #include &quot;LoadSaveHandler.h&quot;
-#include &quot;System/TdfParser.h&quot;
+#include &quot;TdfParser.h&quot;
 #include &quot;FileSystem/ArchiveScanner.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;FileSystem/VFSHandler.h&quot;

Modified: trunk/rts/Game/SelectMenu.cpp
===================================================================
--- trunk/rts/Game/SelectMenu.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/SelectMenu.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,14 +12,14 @@
 #include &quot;PreGame.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;Rendering/GL/glList.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Exceptions.h&quot;
-#include &quot;System/TdfParser.h&quot;
-#include &quot;System/FileSystem/ArchiveScanner.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/VFSHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Exceptions.h&quot;
+#include &quot;TdfParser.h&quot;
+#include &quot;FileSystem/ArchiveScanner.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/VFSHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;StartScripts/ScriptHandler.h&quot;
 
 using std::string;

Modified: trunk/rts/Game/SelectedUnits.cpp
===================================================================
--- trunk/rts/Game/SelectedUnits.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/SelectedUnits.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,8 +9,8 @@
 
 #include &quot;mmgr.h&quot;
 
-#include &quot;Game/Team.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;SelectedUnits.h&quot;
 #include &quot;WaitCommandsAI.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -33,8 +33,8 @@
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
 #include &quot;Sim/Units/CommandAI/LineDrawer.h&quot;
 #include &quot;Sim/Units/UnitTypes/TransportUnit.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;Player.h&quot;
 #include &quot;Camera.h&quot;
 #include &quot;Sound.h&quot;

Modified: trunk/rts/Game/SelectedUnitsAI.cpp
===================================================================
--- trunk/rts/Game/SelectedUnitsAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/SelectedUnitsAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,7 +13,7 @@
 #include &quot;SelectedUnits.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;NetProtocol.h&quot;
-#include &quot;GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;GlobalUnsynced.h&quot;
 #include &quot;Player.h&quot;
 #include &quot;WaitCommandsAI.h&quot;
@@ -23,7 +23,7 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
-//#include &quot;GroundMoveType.h&quot;
+//#include &quot;Sim/MoveTypes/GroundMoveType.h&quot;
 
 const int CMDPARAM_MOVE_X = 0;
 const int CMDPARAM_MOVE_Y = 1;

Modified: trunk/rts/Game/StartScripts/AirScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/AirScript.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/StartScripts/AirScript.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,7 +13,7 @@
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 
 

Modified: trunk/rts/Game/StartScripts/CommanderScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/CommanderScript.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/StartScripts/CommanderScript.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,17 +9,17 @@
 #include &quot;ExternalAI/GlobalAIHandler.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Game/GameSetup.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/UI/MiniMap.h&quot;
 #include &quot;Game/UI/InfoConsole.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;Map/MapParser.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;Sim/SideParser.h&quot;
+#include &quot;Sim/Misc/SideParser.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 #include &quot;Exceptions.h&quot;
 
 

Modified: trunk/rts/Game/StartScripts/CommanderScript2.cpp
===================================================================
--- trunk/rts/Game/StartScripts/CommanderScript2.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/StartScripts/CommanderScript2.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,13 +2,13 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;CommanderScript2.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;Map/MapParser.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;Sim/SideParser.h&quot;
+#include &quot;Sim/Misc/SideParser.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 #include &quot;Exceptions.h&quot;
 
 

Modified: trunk/rts/Game/StartScripts/GlobalAITestScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/GlobalAITestScript.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/StartScripts/GlobalAITestScript.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,17 +1,17 @@
 #include &lt;algorithm&gt;
 #include &lt;cctype&gt;
-#include &quot;System/StdAfx.h&quot;
+#include &quot;StdAfx.h&quot;
 #include &quot;GlobalAITestScript.h&quot;
 #include &quot;ExternalAI/GlobalAIHandler.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;Map/MapParser.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;Sim/SideParser.h&quot;
+#include &quot;Sim/Misc/SideParser.h&quot;
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;mmgr.h&quot;
 #include &quot;Exceptions.h&quot;

Modified: trunk/rts/Game/StartScripts/LoadScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/LoadScript.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/StartScripts/LoadScript.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,11 +7,11 @@
 #include &quot;LoadScript.h&quot;
 #include &quot;ExternalAI/GlobalAIHandler.h&quot;
 #include &quot;Game/GameSetup.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
-#include &quot;System/LoadSaveHandler.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
+#include &quot;LoadSaveHandler.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
 
 extern std::string stupidGlobalMapname;
 

Modified: trunk/rts/Game/StartScripts/SpawnScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/SpawnScript.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/StartScripts/SpawnScript.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,18 +5,18 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;SpawnScript.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;Map/MapParser.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;Sim/SideParser.h&quot;
+#include &quot;Sim/Misc/SideParser.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/CommandAI/Command.h&quot;
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
 
 
 extern std::string stupidGlobalMapname;

Modified: trunk/rts/Game/StartScripts/TestScript.cpp
===================================================================
--- trunk/rts/Game/StartScripts/TestScript.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/StartScripts/TestScript.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Sim/Features/FeatureHandler.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 

Deleted: trunk/rts/Game/Team.cpp
===================================================================
--- trunk/rts/Game/Team.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Team.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,468 +0,0 @@
-// Team.cpp: implementation of the CTeam class.
-//
-//////////////////////////////////////////////////////////////////////
-
-#include &quot;StdAfx.h&quot;
-#include &quot;mmgr.h&quot;
-
-#include &quot;Team.h&quot;
-
-#include &quot;Messages.h&quot;
-#include &quot;GlobalSynced.h&quot;
-#include &quot;LogOutput.h&quot;
-#include &quot;Player.h&quot;
-#include &quot;GlobalUnsynced.h&quot;
-#include &quot;Game/UI/LuaUI.h&quot;
-#include &quot;Lua/LuaRules.h&quot;
-#include &quot;Sim/Units/Unit.h&quot;
-#include &quot;Sim/Units/UnitHandler.h&quot;
-#include &quot;Sim/Units/UnitDef.h&quot;
-#include &quot;ExternalAI/GlobalAI.h&quot;
-#include &quot;ExternalAI/GlobalAIHandler.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;creg/STL_List.h&quot;
-#include &quot;creg/STL_Map.h&quot;
-#include &quot;creg/STL_Set.h&quot;
-#include &quot;NetProtocol.h&quot;
-
-CR_BIND(CTeam,);
-
-CR_REG_METADATA(CTeam, (
-				CR_MEMBER(teamNum),
-				CR_RESERVED(1),
-				CR_MEMBER(isDead),
-				CR_MEMBER(gaia),
-				CR_MEMBER(color),
-				CR_MEMBER(leader),
-				CR_MEMBER(lineageRoot),
-				CR_MEMBER(handicap),
-				CR_MEMBER(side),
-				CR_MEMBER(isAI),
-				CR_MEMBER(luaAI),
-				CR_MEMBER(dllAI),
-				CR_MEMBER(units),
-				CR_MEMBER(startPos),
-				CR_MEMBER(metal),
-				CR_MEMBER(energy),
-				CR_MEMBER(metalPull),
-				CR_MEMBER(prevMetalPull),
-				CR_MEMBER(metalIncome),
-				CR_MEMBER(prevMetalIncome),
-				CR_MEMBER(metalExpense),
-				CR_MEMBER(prevMetalExpense),
-				CR_MEMBER(metalUpkeep),
-				CR_MEMBER(prevMetalUpkeep),
-				CR_MEMBER(energyPull),
-				CR_MEMBER(prevEnergyPull),
-				CR_MEMBER(energyIncome),
-				CR_MEMBER(prevEnergyIncome),
-				CR_MEMBER(energyExpense),
-				CR_MEMBER(prevEnergyExpense),
-				CR_MEMBER(energyUpkeep),
-				CR_MEMBER(prevEnergyUpkeep),
-				CR_MEMBER(metalStorage),
-				CR_MEMBER(energyStorage),
-				CR_MEMBER(metalShare),
-				CR_MEMBER(energyShare),
-				CR_MEMBER(delayedMetalShare),
-				CR_MEMBER(delayedEnergyShare),
-				CR_MEMBER(metalSent),
-				CR_MEMBER(metalReceived),
-				CR_MEMBER(energySent),
-				CR_MEMBER(energyReceived),
-				CR_MEMBER(currentStats),
-				CR_MEMBER(lastStatSave),
-				CR_MEMBER(numCommanders),
-				CR_MEMBER(statHistory),
-				CR_MEMBER(modParams),
-				CR_MEMBER(modParamsMap),
-				CR_RESERVED(64)
-				));
-
-CR_BIND(CTeam::Statistics,);
-
-CR_REG_METADATA_SUB(CTeam, Statistics, (
-					CR_MEMBER(metalUsed),
-					CR_MEMBER(energyUsed),
-					CR_MEMBER(metalProduced),
-					CR_MEMBER(energyProduced),
-					CR_MEMBER(metalExcess),
-					CR_MEMBER(energyExcess),
-					CR_MEMBER(metalReceived),
-					CR_MEMBER(energyReceived),
-					CR_MEMBER(metalSent),
-					CR_MEMBER(energySent),
-					CR_MEMBER(damageDealt),
-					CR_MEMBER(damageReceived),
-					CR_MEMBER(unitsProduced),
-					CR_MEMBER(unitsDied),
-					CR_MEMBER(unitsReceived),
-					CR_MEMBER(unitsSent),
-					CR_MEMBER(unitsCaptured),
-					CR_MEMBER(unitsOutCaptured),
-					CR_MEMBER(unitsKilled),
-					CR_RESERVED(16)
-					));
-
-//////////////////////////////////////////////////////////////////////
-// Construction/Destruction
-//////////////////////////////////////////////////////////////////////
-
-CTeam::CTeam()
-: gaia(false),
-  metal(200000),
-  energy(900000),
-  metalPull(0),     prevMetalPull(0),
-  metalIncome(0),   prevMetalIncome(0),
-  metalExpense(0),  prevMetalExpense(0),
-  metalUpkeep(0),   prevMetalUpkeep(0),
-  energyPull(0),    prevEnergyPull(0),
-  energyIncome(0),  prevEnergyIncome(0),
-  energyExpense(0), prevEnergyExpense(0),
-  energyUpkeep(0),  prevEnergyUpkeep(0),
-  metalStorage(1000000),
-  energyStorage(1000000),
-  metalShare(0.99f),
-  energyShare(0.95f),
-  delayedMetalShare(0),
-  delayedEnergyShare(0),
-  metalSent(0),
-  metalReceived(0),
-  energySent(0),
-  energyReceived(0),
-  side(&quot;arm&quot;),
-  isAI(false),
-  luaAI(&quot;&quot;),
-  dllAI(&quot;&quot;),
-  startPos(100,100,100),
-  handicap(1),
-  leader(-1),
-  lineageRoot(-1),
-  isDead(false),
-  lastStatSave(0),
-  numCommanders(0)
-{
-	memset(&amp;currentStats,0,sizeof(currentStats));
-	statHistory.push_back(currentStats);
-}
-
-
-CTeam::~CTeam()
-{
-}
-
-
-bool CTeam::UseMetal(float amount)
-{
-	if ((metal - (prevMetalUpkeep * 10)) &gt;= amount) {
-		metal -= amount;
-		metalExpense += amount;
-		return true;
-	}
-	return false;
-}
-
-
-bool CTeam::UseEnergy(float amount)
-{
-	if ((energy - (prevEnergyUpkeep * 10)) &gt;= amount) {
-		energy -= amount;
-		energyExpense += amount;
-		return true;
-	}
-	return false;
-}
-
-
-bool CTeam::UseMetalUpkeep(float amount)
-{
-	if (metal &gt;= amount) {
-		metal -= amount;
-		metalExpense += amount;
-		metalUpkeep += amount;
-		return true;
-	}
-	return false;
-}
-
-
-bool CTeam::UseEnergyUpkeep(float amount)
-{
-	if (energy &gt;= amount) {
-		energy -= amount;
-		energyExpense += amount;
-		energyUpkeep += amount;
-		return true;
-	}
-	return false;
-}
-
-
-void CTeam::AddMetal(float amount, bool hc)
-{
-	if (hc) { amount *= handicap; }
-	metal += amount;
-	metalIncome += amount;
-	if (metal &gt; metalStorage) {
-		delayedMetalShare += metal - metalStorage;
-		metal = metalStorage;
-	}
-}
-
-
-void CTeam::AddEnergy(float amount, bool hc)
-{
-	if (hc) { amount *= handicap; }
-	energy += amount;
-	energyIncome += amount;
-	if (energy &gt; energyStorage) {
-		delayedEnergyShare += energy - energyStorage;
-		energy = energyStorage;
-	}
-}
-
-void CTeam::GiveEverythingTo(const unsigned toTeam)
-{
-	CTeam* target = gs-&gt;Team(toTeam);
-
-	if (!target) {
-		logOutput.Print(&quot;Team %i didn't exists, can't give units&quot;, toTeam);
-		return;
-	}
-
-	if (!luaRules || luaRules-&gt;AllowResourceTransfer(teamNum, toTeam, &quot;m&quot;, metal)) {
-		target-&gt;metal += metal;
-		metal = 0;
-	}
-	if (!luaRules || luaRules-&gt;AllowResourceTransfer(teamNum, toTeam, &quot;e&quot;, energy)) {
-		target-&gt;energy += energy;
-		energy = 0;
-	}
-
-	for (CUnitSet::iterator ui = units.begin(); ui != units.end(); ) {
-		// must pass the normal checks, isDead, unit count restrictions, luaRules, etc...
-		CUnitSet::iterator next = ui; ++next;
-		(*ui)-&gt;ChangeTeam(toTeam, CUnit::ChangeGiven);
-		ui = next;
-	}
-
-	Died();
-}
-
-
-void CTeam::Died()
-{
-	if (leader &gt;= 0) {
-		logOutput.Print(CMessages::Tr(&quot;Team%i(%s) is no more&quot;).c_str(),
-		                teamNum, gs-&gt;players[leader]-&gt;name.c_str());
-	} else {
-		logOutput.Print(CMessages::Tr(&quot;Team%i is no more&quot;).c_str(), teamNum);
-	}
-	isDead = true;
-
-	// this message is not relayed to clients, it's only for the server
-	net-&gt;Send(CBaseNetProtocol::Get().SendTeamDied(gu-&gt;myPlayerNum, teamNum));
-
-	for (int a = 0; a &lt; MAX_PLAYERS; ++a) {
-		if (gs-&gt;players[a]-&gt;active &amp;&amp; (gs-&gt;players[a]-&gt;team == teamNum)) {
-			gs-&gt;players[a]-&gt;StartSpectating();
-		}
-	}
-	if (globalAI-&gt;ais[teamNum]) {
-		delete globalAI-&gt;ais[teamNum];
-		globalAI-&gt;ais[teamNum] = NULL;
-	}
-
-	CLuaUI::UpdateTeams();
-  CPlayer::UpdateControlledTeams();
-	eventHandler.TeamDied(teamNum);
-}
-
-void CTeam::StartposMessage(const float3&amp; pos, const bool isReady)
-{
-	readyToStart = isReady;
-	startPos = pos;
-}
-
-void CTeam::StartposMessage(const float3&amp; pos)
-{
-	startPos = pos;
-}
-
-/** This has to be called for every team before SlowUpdates start,
-	otherwise values get overwritten. */
-void CTeam::ResetFrameVariables()
-{
-	prevMetalPull     = metalPull;
-	prevMetalIncome   = metalIncome;
-	prevMetalExpense  = metalExpense;
-	prevMetalUpkeep   = metalUpkeep;
-	prevEnergyPull    = energyPull;
-	prevEnergyIncome  = energyIncome;
-	prevEnergyExpense = energyExpense;
-	prevEnergyUpkeep  = energyUpkeep;
-
-	metalPull = 0;
-	metalIncome = 0;
-	metalExpense = 0;
-	metalUpkeep = 0;
-	energyPull = 0;
-	energyIncome = 0;
-	energyExpense = 0;
-	energyUpkeep = 0;
-
-	metalSent = 0;
-	energySent = 0;
-	metalReceived = 0;
-	energyReceived = 0;
-}
-
-void CTeam::SlowUpdate()
-{
-	currentStats.metalProduced  += prevMetalIncome;
-	currentStats.energyProduced += prevEnergyIncome;
-	currentStats.metalUsed  += prevMetalUpkeep + prevMetalExpense;
-	currentStats.energyUsed += prevEnergyUpkeep + prevEnergyExpense;
-
-	float eShare = 0.0f, mShare = 0.0f;
-	for (int a = 0; a &lt; gs-&gt;activeTeams; ++a) {
-		if ((a != teamNum) &amp;&amp; (gs-&gt;AllyTeam(teamNum) == gs-&gt;AllyTeam(a))) {
-			CTeam* team = gs-&gt;Team(a);
-			eShare += std::max(0.0f, (team-&gt;energyStorage * 0.99f) - team-&gt;energy);
-			mShare += std::max(0.0f, (team-&gt;metalStorage  * 0.99f) - team-&gt;metal);
-		}
-	}
-
-	metal += delayedMetalShare;
-	energy += delayedEnergyShare;
-	delayedMetalShare = 0;
-	delayedEnergyShare = 0;
-
-	const float eExcess = std::max(0.0f, energy - (energyStorage * energyShare));
-	const float mExcess = std::max(0.0f, metal  - (metalStorage  * metalShare));
-
-	float de = 0.0f, dm = 0.0f;
-	if (eShare &gt; 0.0f) {
-		de = std::min(1.0f, eExcess/eShare);
-	}
-	if (mShare &gt; 0.0f) {
-		dm = std::min(1.0f, mExcess/mShare);
-	}
-	for (int a = 0; a &lt; gs-&gt;activeTeams; ++a) {
-		if ((a != teamNum) &amp;&amp; (gs-&gt;AllyTeam(teamNum) == gs-&gt;AllyTeam(a))) {
-			CTeam* team = gs-&gt;Team(a);
-
-			const float edif = std::max(0.0f, (team-&gt;energyStorage * 0.99f) - team-&gt;energy) * de;
-			energy -= edif;
-			energySent += edif;
-			currentStats.energySent += edif;
-			team-&gt;energy += edif;
-			team-&gt;energyReceived += edif;
-			team-&gt;currentStats.energyReceived += edif;
-
-			const float mdif = std::max(0.0f, (team-&gt;metalStorage * 0.99f) - team-&gt;metal) * dm;
-			metal -= mdif;
-			metalSent += mdif;
-			currentStats.metalSent += mdif;
-			team-&gt;metal += mdif;
-			team-&gt;metalReceived += mdif;
-			team-&gt;currentStats.metalReceived += mdif;
-		}
-	}
-
-	if (metal &gt; metalStorage) {
-		currentStats.metalExcess += (metal - metalStorage);
-		metal = metalStorage;
-	}
-	if (energy &gt; energyStorage) {
-		currentStats.energyExcess += (energy - energyStorage);
-		energy = energyStorage;
-	}
-
-	const int statsFrames = (statsPeriod * GAME_SPEED);
-	if ((lastStatSave + statsFrames) &lt; gs-&gt;frameNum) {
-		lastStatSave += statsFrames;
-		statHistory.push_back(currentStats);
-	}
-
-	/* Kill the player on 'com dies = game ends' games.  This can't be done in
-	CTeam::CommanderDied anymore, because that function is called in
-	CUnit::ChangeTeam(), hence it'd cause a random amount of the shared units
-	to be killed if the commander is among them. Also, &quot;.take&quot; would kill all
-	units once it transfered the commander. */
-	if (gs-&gt;gameMode==1 &amp;&amp; numCommanders&lt;=0 &amp;&amp; !gaia){
-		for(std::list&lt;CUnit*&gt;::iterator ui=uh-&gt;activeUnits.begin();ui!=uh-&gt;activeUnits.end();++ui){
-			if ((*ui)-&gt;team==teamNum &amp;&amp; !(*ui)-&gt;unitDef-&gt;isCommander)
-				(*ui)-&gt;KillUnit(true,false,0);
-		}
-		// Set to 1 to prevent above loop from being done every update.
-		numCommanders = 1;
-	}
-}
-
-
-void CTeam::AddUnit(CUnit* unit,AddType type)
-{
-	units.insert(unit);
-	switch (type) {
-		case AddBuilt: {
-			currentStats.unitsProduced++;
-			break;
-		}
-		case AddGiven: {
-			currentStats.unitsReceived++;
-			break;
-		}
-		case AddCaptured: {
-			currentStats.unitsCaptured++;
-			break;
-		}
-	}
-	if (unit-&gt;unitDef-&gt;isCommander) {
-		numCommanders++;
-	}
-}
-
-
-void CTeam::RemoveUnit(CUnit* unit,RemoveType type)
-{
-	units.erase(unit);
-	switch (type) {
-		case RemoveDied: {
-			currentStats.unitsDied++;
-			break;
-		}
-		case RemoveGiven: {
-			currentStats.unitsSent++;
-			break;
-		}
-		case RemoveCaptured: {
-			currentStats.unitsOutCaptured++;
-			break;
-		}
-	}
-
-	if (units.empty() &amp;&amp; !gaia) {
-		Died();
-	}
-}
-
-
-void CTeam::CommanderDied(CUnit* commander)
-{
-	assert(commander-&gt;unitDef-&gt;isCommander);
-	--numCommanders;
-}
-
-
-void CTeam::LeftLineage(CUnit* unit)
-{
-	if (gs-&gt;gameMode == 2 &amp;&amp; unit-&gt;id == this-&gt;lineageRoot) {
-		for (std::list&lt;CUnit*&gt;::iterator ui = uh-&gt;activeUnits.begin(); ui != uh-&gt;activeUnits.end(); ++ui) {
-			if ((*ui)-&gt;lineage == this-&gt;teamNum)
-				(*ui)-&gt;KillUnit(true, false, 0);
-		}
-	}
-}
-

Deleted: trunk/rts/Game/Team.h
===================================================================
--- trunk/rts/Game/Team.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/Team.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,160 +0,0 @@
-#ifndef TEAM_H
-#define TEAM_H
-// Team.h: interface for the CTeam class.
-//
-//////////////////////////////////////////////////////////////////////
-
-#include &lt;string&gt;
-#include &lt;vector&gt;
-#include &lt;map&gt;
-#include &lt;list&gt;
-#include &quot;Platform/byteorder.h&quot;
-#include &quot;Sim/Units/UnitSet.h&quot;
-
-class CTeam
-{
-public:
-	CR_DECLARE(CTeam);
-	CR_DECLARE_SUB(Statistics);
-	CTeam();
-	~CTeam();
-	void ResetFrameVariables();
-	void SlowUpdate();
-
-
-	void AddMetal(float amount, bool handicap = true);
-	void AddEnergy(float amount, bool handicap = true);
-	bool UseEnergy(float amount);
-	bool UseMetal(float amount);
-	bool UseEnergyUpkeep(float amount);
-	bool UseMetalUpkeep(float amount);
-
-	void SetBaseMetalStorage(float storage) {metalStorage = storage;};
-	void SetBaseEnergyStorage(float storage) {energyStorage = storage;};
-
-	void GiveEverythingTo(const unsigned toTeam);
-
-	void Died();
-
-	void StartposMessage(const float3&amp; pos, const bool isReady);
-	void StartposMessage(const float3&amp; pos);
-
-	inline bool IsReadyToStart() const {return readyToStart;};
-	enum AddType{
-		AddBuilt,
-		AddCaptured,
-		AddGiven
-	};
-
-	enum RemoveType{
-		RemoveDied,
-		RemoveCaptured,
-		RemoveGiven
-	};
-
-	void AddUnit(CUnit* unit,AddType type);
-	void RemoveUnit(CUnit* unit,RemoveType type);
-
-	int teamNum;
-	bool isDead;
-	bool gaia;
-	int leader;
-	int lineageRoot;
-
-	float handicap;
-	std::string side;
-
-	bool isAI;
-	std::string luaAI;
-	std::string dllAI;
-
-	// color info is unsynced
-	unsigned char color[4];
-	unsigned char origColor[4];
-
-	CUnitSet units;
-
-	float3 startPos;
-
-	SyncedFloat metal;
-	SyncedFloat energy;
-
-	float metalPull,    prevMetalPull;
-	float metalIncome,  prevMetalIncome;
-	float metalExpense, prevMetalExpense;
-	float metalUpkeep,  prevMetalUpkeep;
-
-	float energyPull,    prevEnergyPull;
-	float energyIncome,  prevEnergyIncome;
-	float energyExpense, prevEnergyExpense;
-	float energyUpkeep,  prevEnergyUpkeep;
-
-	SyncedFloat metalStorage, energyStorage;
-
-	float metalShare, energyShare;
-	SyncedFloat delayedMetalShare, delayedEnergyShare; //excess that might be shared next SlowUpdate
-
-	float metalSent;
-	float metalReceived;
-	float energySent;
-	float energyReceived;
-
-
-	struct Statistics {
-		CR_DECLARE_STRUCT(Statistics);
-		float metalUsed,     energyUsed;
-		float metalProduced, energyProduced;
-		float metalExcess,   energyExcess;
-		float metalReceived, energyReceived; //received from allies
-		float metalSent,     energySent;     //sent to allies
-
-		float damageDealt,   damageReceived; // Damage taken and dealt to enemy units
-
-		int unitsProduced;
-		int unitsDied;
-		int unitsReceived;
-		int unitsSent;
-		int unitsCaptured;				//units captured from enemy by us
-		int unitsOutCaptured;			//units captured from us by enemy
-		int unitsKilled;	//how many enemy units have been killed by this teams units
-
-		/// Change structure from host endian to little endian or vice versa.
-		void swab() {
-			metalUsed        = swabfloat(metalUsed);
-			energyUsed       = swabfloat(energyUsed);
-			metalProduced    = swabfloat(metalProduced);
-			energyProduced   = swabfloat(energyProduced);
-			metalExcess      = swabfloat(metalExcess);
-			energyExcess     = swabfloat(energyExcess);
-			metalReceived    = swabfloat(metalReceived);
-			energyReceived   = swabfloat(energyReceived);
-			metalSent        = swabfloat(metalSent);
-			energySent       = swabfloat(energySent);
-			damageDealt      = swabfloat(damageDealt);
-			damageReceived   = swabfloat(damageReceived);
-			unitsProduced    = swabdword(unitsProduced);
-			unitsDied        = swabdword(unitsDied);
-			unitsReceived    = swabdword(unitsReceived);
-			unitsSent        = swabdword(unitsSent);
-			unitsCaptured    = swabdword(unitsCaptured);
-			unitsOutCaptured = swabdword(unitsOutCaptured);
-			unitsKilled      = swabdword(unitsKilled);
-		}
-	};
-	Statistics currentStats;
-	static const int statsPeriod = 15; // every 15th second
-
-	int lastStatSave;
-	int numCommanders;		//number of units with commander tag in team, if it reaches zero with cmd ends the team dies
-	std::list&lt;Statistics&gt; statHistory;
-	void CommanderDied(CUnit* commander);
-	void LeftLineage(CUnit* unit);
-
-	std::vector&lt;float&gt;         modParams;    // mod controlled parameters
-	std::map&lt;std::string, int&gt; modParamsMap; // name map for mod parameters
-
-private:
-	bool readyToStart;
-};
-
-#endif /* TEAM_H */

Modified: trunk/rts/Game/UI/CommandColors.cpp
===================================================================
--- trunk/rts/Game/UI/CommandColors.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/CommandColors.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,9 +12,9 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/SimpleParser.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/SimpleParser.h&quot;
+#include &quot;Util.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Game/UI/EndGameBox.cpp
===================================================================
--- trunk/rts/Game/UI/EndGameBox.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/EndGameBox.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,16 +5,16 @@
 #include &quot;EndGameBox.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/Player.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;NetProtocol.h&quot;
 #include &quot;Game/Game.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Exceptions.h&quot;
 
 
 extern bool globalQuit;

Modified: trunk/rts/Game/UI/EndGameBox.h
===================================================================
--- trunk/rts/Game/UI/EndGameBox.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/EndGameBox.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,7 +5,7 @@
 #include &lt;list&gt;
 #include &lt;vector&gt;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 
 

Modified: trunk/rts/Game/UI/GameInfo.cpp
===================================================================
--- trunk/rts/Game/UI/GameInfo.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/GameInfo.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,11 +11,11 @@
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Game/GameVersion.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 
 
 using namespace std;

Modified: trunk/rts/Game/UI/GameSetupDrawer.cpp
===================================================================
--- trunk/rts/Game/UI/GameSetupDrawer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/GameSetupDrawer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,14 +12,14 @@
 
 #include &quot;NetProtocol.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &quot;../CameraHandler.h&quot;
-#include &quot;../Player.h&quot;
-#include &quot;../Team.h&quot;
-#include &quot;../GameSetup.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Game/CameraHandler.h&quot;
+#include &quot;Game/Player.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
+#include &quot;Game/GameSetup.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;StartPosSelecter.h&quot;
 #include &quot;Rendering/glFont.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;EventHandler.h&quot;
 
 extern Uint8 *keys;
 

Modified: trunk/rts/Game/UI/GuiHandler.cpp
===================================================================
--- trunk/rts/Game/UI/GuiHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/GuiHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -50,12 +50,12 @@
 #include &quot;Sim/Units/UnitLoader.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/FileSystem/SimpleParser.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;FileSystem/SimpleParser.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;myMath.h&quot;
 
 extern Uint8 *keys;
 

Modified: trunk/rts/Game/UI/GuiHandler.h
===================================================================
--- trunk/rts/Game/UI/GuiHandler.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/GuiHandler.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #include &quot;KeyBindings.h&quot;
 #include &quot;InputReceiver.h&quot;
 #include &quot;Game/Camera.h&quot;
-#include &quot;Game/UI/MouseHandler.h&quot;
+#include &quot;MouseHandler.h&quot;
 
 class CUnit;
 class CglList;

Modified: trunk/rts/Game/UI/KeyAutoBinder.cpp
===================================================================
--- trunk/rts/Game/UI/KeyAutoBinder.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/KeyAutoBinder.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,7 +11,7 @@
 
 #include &quot;KeyBindings.h&quot;
 #include &quot;Game/GameSetup.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Lua/LuaConstGame.h&quot;
 #include &quot;Lua/LuaUnitDefs.h&quot;
 #include &quot;Lua/LuaWeaponDefs.h&quot;
@@ -19,14 +19,14 @@
 #include &quot;Sim/Misc/CategoryHandler.h&quot;
 #include &quot;Sim/Misc/DamageArrayHandler.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 #include &quot;Sim/Projectiles/Projectile.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/FileSystem/SimpleParser.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;FileSystem/SimpleParser.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Util.h&quot;
 
 
 #if (LUA_VERSION_NUM &lt; 500)

Modified: trunk/rts/Game/UI/KeyBindings.cpp
===================================================================
--- trunk/rts/Game/UI/KeyBindings.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/KeyBindings.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -16,11 +16,11 @@
 #include &quot;KeyAutoBinder.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
-#include &quot;System/Platform/errorhandler.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/SimpleParser.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Platform/errorhandler.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/SimpleParser.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Util.h&quot;
 
 
 CKeyBindings* keyBindings = NULL;

Modified: trunk/rts/Game/UI/KeyCodes.cpp
===================================================================
--- trunk/rts/Game/UI/KeyCodes.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/KeyCodes.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,8 +8,8 @@
 
 #include &quot;KeyCodes.h&quot;
 #include &quot;SDL_keysym.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Util.h&quot;
 
 
 CKeyCodes* keyCodes = NULL;

Modified: trunk/rts/Game/UI/KeySet.cpp
===================================================================
--- trunk/rts/Game/UI/KeySet.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/KeySet.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,8 +11,8 @@
 #include &quot;SDL_keysym.h&quot;
 #include &quot;SDL_types.h&quot;
 
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Util.h&quot;
 
 extern Uint8* keys; // from System/Main.cpp
 

Modified: trunk/rts/Game/UI/LuaUI.cpp
===================================================================
--- trunk/rts/Game/UI/LuaUI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/LuaUI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -46,16 +46,16 @@
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/PlayerRoster.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
-#include &quot;Game/UI/CommandColors.h&quot;
-#include &quot;Game/UI/CursorIcons.h&quot;
-#include &quot;Game/UI/GuiHandler.h&quot;
-#include &quot;Game/UI/InfoConsole.h&quot;
-#include &quot;Game/UI/KeyCodes.h&quot;
-#include &quot;Game/UI/KeySet.h&quot;
-#include &quot;Game/UI/KeyBindings.h&quot;
-#include &quot;Game/UI/MiniMap.h&quot;
-#include &quot;Game/UI/MouseHandler.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
+#include &quot;CommandColors.h&quot;
+#include &quot;CursorIcons.h&quot;
+#include &quot;GuiHandler.h&quot;
+#include &quot;InfoConsole.h&quot;
+#include &quot;KeyCodes.h&quot;
+#include &quot;KeySet.h&quot;
+#include &quot;KeyBindings.h&quot;
+#include &quot;MiniMap.h&quot;
+#include &quot;MouseHandler.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Map/BaseGroundDrawer.h&quot;
 #include &quot;Rendering/IconHandler.h&quot;
@@ -66,15 +66,15 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/NetProtocol.h&quot;
-#include &quot;System/SpringApp.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/VFSHandler.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;NetProtocol.h&quot;
+#include &quot;SpringApp.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/VFSHandler.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
+#include &quot;Util.h&quot;
 
 
 #if (LUA_VERSION_NUM &lt; 500)

Modified: trunk/rts/Game/UI/MiniMap.cpp
===================================================================
--- trunk/rts/Game/UI/MiniMap.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/MiniMap.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -18,7 +18,7 @@
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/Player.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;GuiHandler.h&quot;
 #include &quot;Lua/LuaUnsyncedCtrl.h&quot;
 #include &quot;Map/BaseGroundDrawer.h&quot;
@@ -53,10 +53,10 @@
 #include &quot;Sim/Units/UnitTracker.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/Sound.h&quot;
-#include &quot;System/FileSystem/SimpleParser.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;Sound.h&quot;
+#include &quot;FileSystem/SimpleParser.h&quot;
+#include &quot;Util.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;TooltipConsole.h&quot;
 

Modified: trunk/rts/Game/UI/MouseCursor.cpp
===================================================================
--- trunk/rts/Game/UI/MouseCursor.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/MouseCursor.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,8 +6,8 @@
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;FileSystem/SimpleParser.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;MouseCursor.h&quot;
 #include &quot;HwMouseCursor.h&quot;
 #include &quot;myMath.h&quot;

Modified: trunk/rts/Game/UI/MouseHandler.cpp
===================================================================
--- trunk/rts/Game/UI/MouseHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/MouseHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -20,7 +20,7 @@
 #include &quot;Game/Game.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/Player.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/MapDamage.h&quot;
@@ -38,7 +38,7 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitTracker.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;EventHandler.h&quot;
 #include &quot;Sound.h&quot;
 
 // can't be up there since those contain conflicting definitions

Modified: trunk/rts/Game/UI/QuitBox.cpp
===================================================================
--- trunk/rts/Game/UI/QuitBox.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/QuitBox.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,8 +2,8 @@
 #include &lt;SDL_keysym.h&gt;
 #include &quot;mmgr.h&quot;
 
-#include &quot;Game/Team.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;NetProtocol.h&quot;

Modified: trunk/rts/Game/UI/ResourceBar.cpp
===================================================================
--- trunk/rts/Game/UI/ResourceBar.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/ResourceBar.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,8 +4,8 @@
 #include &quot;ResourceBar.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Game/Team.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;NetProtocol.h&quot;
 #include &quot;TimeProfiler.h&quot;

Modified: trunk/rts/Game/UI/SelectionKeyHandler.cpp
===================================================================
--- trunk/rts/Game/UI/SelectionKeyHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/SelectionKeyHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/CameraHandler.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;MouseHandler.h&quot;
@@ -20,7 +20,7 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitTypes/Building.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;myMath.h&quot;
 
 CSelectionKeyHandler *selectionKeys;
 

Modified: trunk/rts/Game/UI/ShareBox.cpp
===================================================================
--- trunk/rts/Game/UI/ShareBox.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/ShareBox.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,9 +5,9 @@
 #include &quot;ShareBox.h&quot;
 #include &quot;MouseHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/Player.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;NetProtocol.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;

Modified: trunk/rts/Game/UI/StartPosSelecter.cpp
===================================================================
--- trunk/rts/Game/UI/StartPosSelecter.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/StartPosSelecter.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;Game/GameSetup.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;NetProtocol.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Game/Camera.h&quot;

Modified: trunk/rts/Game/UI/TooltipConsole.cpp
===================================================================
--- trunk/rts/Game/UI/TooltipConsole.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/UI/TooltipConsole.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;Game/Player.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/MapDamage.h&quot;
 #include &quot;Map/MapInfo.h&quot;
@@ -18,9 +18,9 @@
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
+#include &quot;Util.h&quot;
 
 CTooltipConsole* tooltip = 0;
 

Modified: trunk/rts/Game/WaitCommandsAI.cpp
===================================================================
--- trunk/rts/Game/WaitCommandsAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/WaitCommandsAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,8 +8,8 @@
 #include &lt;SDL_timer.h&gt;
 #include &quot;WaitCommandsAI.h&quot;
 #include &quot;SelectedUnits.h&quot;
-#include &quot;Team.h&quot;
-#include &quot;Game/GameHelper.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
+#include &quot;GameHelper.h&quot;
 #include &quot;Sim/Misc/QuadField.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
@@ -18,9 +18,9 @@
 #include &quot;Sim/Units/CommandAI/FactoryCAI.h&quot;
 #include &quot;Sim/Units/CommandAI/LineDrawer.h&quot;
 #include &quot;Sim/Units/UnitTypes/Factory.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Object.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Object.h&quot;
 #include &quot;UI/CommandColors.h&quot;
 #include &quot;UI/CursorIcons.h&quot;
 #include &quot;creg/STL_Map.h&quot;

Modified: trunk/rts/Game/WaitCommandsAI.h
===================================================================
--- trunk/rts/Game/WaitCommandsAI.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Game/WaitCommandsAI.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,7 +9,7 @@
 #include &lt;set&gt;
 #include &lt;deque&gt;
 #include &lt;string&gt;
-#include &quot;System/Object.h&quot;
+#include &quot;Object.h&quot;
 #include &quot;Sim/Units/UnitSet.h&quot;
 
 class float3;

Modified: trunk/rts/Lua/LuaCallInCheck.cpp
===================================================================
--- trunk/rts/Lua/LuaCallInCheck.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaCallInCheck.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 
 #include &quot;LuaCallInCheck.h&quot;
 #include &quot;LuaInclude.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaConstGame.cpp
===================================================================
--- trunk/rts/Lua/LuaConstGame.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaConstGame.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -16,14 +16,14 @@
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 #include &quot;Sim/Misc/CategoryHandler.h&quot;
 #include &quot;Sim/Misc/DamageArrayHandler.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot; // MAX_UNITS
 #include &quot;Sim/Units/CommandAI/Command.h&quot;
-#include &quot;System/FileSystem/ArchiveScanner.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;FileSystem/ArchiveScanner.h&quot;
+#include &quot;Util.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaFBOs.cpp
===================================================================
--- trunk/rts/Lua/LuaFBOs.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaFBOs.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -20,7 +20,7 @@
 #include &quot;LuaTextures.h&quot;
 
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaFeatureDefs.cpp
===================================================================
--- trunk/rts/Lua/LuaFeatureDefs.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaFeatureDefs.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -16,15 +16,15 @@
 
 #include &quot;LuaInclude.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;LuaDefs.h&quot;
 #include &quot;LuaHandle.h&quot;
 #include &quot;LuaUtils.h&quot;
 #include &quot;Sim/Features/Feature.h&quot;
 #include &quot;Sim/Features/FeatureHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Lua/LuaGaia.cpp
===================================================================
--- trunk/rts/Lua/LuaGaia.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaGaia.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -19,16 +19,16 @@
 #include &quot;LuaWeaponDefs.h&quot;
 #include &quot;LuaOpenGL.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Sim/Units/CommandAI/Command.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
+#include &quot;Util.h&quot;
 
 
 CLuaGaia* luaGaia = NULL;

Modified: trunk/rts/Lua/LuaHandle.cpp
===================================================================
--- trunk/rts/Lua/LuaHandle.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaHandle.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,8 +13,8 @@
 #include &quot;LuaHandle.h&quot;
 
 #include &quot;Game/UI/LuaUI.h&quot;
-#include &quot;Lua/LuaGaia.h&quot;
-#include &quot;Lua/LuaRules.h&quot;
+#include &quot;LuaGaia.h&quot;
+#include &quot;LuaRules.h&quot;
 
 #include &quot;LuaCallInCheck.h&quot;
 #include &quot;LuaHashString.h&quot;
@@ -26,7 +26,7 @@
 #include &quot;Game/UI/KeySet.h&quot;
 #include &quot;Game/UI/KeyBindings.h&quot;
 #include &quot;Game/UI/MiniMap.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Rendering/InMapDraw.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
@@ -34,10 +34,10 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/SpringApp.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;SpringApp.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
 
 #include &quot;LuaInclude.h&quot;
 

Modified: trunk/rts/Lua/LuaHandle.h
===================================================================
--- trunk/rts/Lua/LuaHandle.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaHandle.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,7 +11,7 @@
 using std::vector;
 using std::set;
 
-#include &quot;System/EventClient.h&quot;
+#include &quot;EventClient.h&quot;
 //FIXME#include &quot;LuaArrays.h&quot;
 #include &quot;LuaShaders.h&quot;
 #include &quot;LuaTextures.h&quot;

Modified: trunk/rts/Lua/LuaHandleSynced.cpp
===================================================================
--- trunk/rts/Lua/LuaHandleSynced.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaHandleSynced.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -35,15 +35,15 @@
 #include &quot;Sim/Units/CommandAI/Command.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Game/WordCompletion.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
 
 
 static const LuaHashString unsyncedStr(&quot;UNSYNCED&quot;);

Modified: trunk/rts/Lua/LuaIO.cpp
===================================================================
--- trunk/rts/Lua/LuaIO.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaIO.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -19,8 +19,8 @@
 
 #include &quot;LuaHandle.h&quot;
 #include &quot;LuaInclude.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
+#include &quot;Util.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaInputReceiver.cpp
===================================================================
--- trunk/rts/Lua/LuaInputReceiver.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaInputReceiver.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;LuaInputReceiver.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;EventHandler.h&quot;
 
 
 LuaInputReceiver* luaInputReceiver = NULL;

Modified: trunk/rts/Lua/LuaMaterial.cpp
===================================================================
--- trunk/rts/Lua/LuaMaterial.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaMaterial.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -23,8 +23,8 @@
 #include &quot;Rendering/ShadowHandler.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Util.h&quot;
 
 
 LuaMatHandler LuaMatHandler::handler;

Modified: trunk/rts/Lua/LuaOpenGL.cpp
===================================================================
--- trunk/rts/Lua/LuaOpenGL.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaOpenGL.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -60,9 +60,9 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitTypes/TransportUnit.h&quot;
 #include &quot;Sim/Units/CommandAI/LineDrawer.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Matrix44f.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Matrix44f.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
 
 using std::max;
 using std::string;

Modified: trunk/rts/Lua/LuaParser.cpp
===================================================================
--- trunk/rts/Lua/LuaParser.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaParser.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -19,12 +19,12 @@
 
 #include &quot;Game/GameSetup.h&quot;
 
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/VFSHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-#include &quot;System/Platform/errorhandler.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/VFSHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
+#include &quot;Platform/errorhandler.h&quot;
+#include &quot;Util.h&quot;
 
 
 #if (LUA_VERSION_NUM &lt; 500)

Modified: trunk/rts/Lua/LuaParser.h
===================================================================
--- trunk/rts/Lua/LuaParser.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaParser.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,8 +13,8 @@
 using std::map;
 using std::set;
 
-#include &quot;System/float3.h&quot;
-#include &quot;System/FileSystem/VFSModes.h&quot;
+#include &quot;float3.h&quot;
+#include &quot;FileSystem/VFSModes.h&quot;
 
 
 class LuaTable;

Modified: trunk/rts/Lua/LuaRBOs.cpp
===================================================================
--- trunk/rts/Lua/LuaRBOs.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaRBOs.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,7 +14,7 @@
 #include &quot;LuaUtils.h&quot;
 
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaRules.cpp
===================================================================
--- trunk/rts/Lua/LuaRules.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaRules.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -24,8 +24,8 @@
 
 #include &quot;Sim/Units/CommandAI/Command.h&quot;
 #include &quot;Game/Game.h&quot;
-#include &quot;Game/Team.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
 #include &quot;Rendering/UnitModels/3DModelParser.h&quot;
@@ -37,9 +37,9 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
 #include &lt;assert.h&gt;
 
 CLuaRules* luaRules = NULL;

Modified: trunk/rts/Lua/LuaScream.cpp
===================================================================
--- trunk/rts/Lua/LuaScream.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaScream.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,7 +11,7 @@
 
 #include &quot;LuaHashString.h&quot;
 
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaShaders.cpp
===================================================================
--- trunk/rts/Lua/LuaShaders.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaShaders.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -21,8 +21,8 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/ShadowHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Util.h&quot;
 
 
 int LuaShaders::activeShaderDepth = 0;

Modified: trunk/rts/Lua/LuaSyncedCall.cpp
===================================================================
--- trunk/rts/Lua/LuaSyncedCall.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaSyncedCall.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -20,7 +20,7 @@
 #include &quot;LuaRules.h&quot;
 #include &quot;LuaHashString.h&quot;
 #include &quot;LuaUtils.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaSyncedCtrl.cpp
===================================================================
--- trunk/rts/Lua/LuaSyncedCtrl.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaSyncedCtrl.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -25,7 +25,7 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/MapDamage.h&quot;
 #include &quot;Map/ReadMap.h&quot;
@@ -59,8 +59,8 @@
 #include &quot;Sim/Weapons/PlasmaRepulser.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/myMath.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;myMath.h&quot;
+#include &quot;LogOutput.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Lua/LuaSyncedMoveCtrl.cpp
===================================================================
--- trunk/rts/Lua/LuaSyncedMoveCtrl.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaSyncedMoveCtrl.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -19,8 +19,8 @@
 #include &quot;Sim/MoveTypes/ScriptMoveType.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
-#include &quot;System/myMath.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;myMath.h&quot;
+#include &quot;LogOutput.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Lua/LuaSyncedRead.cpp
===================================================================
--- trunk/rts/Lua/LuaSyncedRead.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaSyncedRead.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -25,7 +25,7 @@
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/Player.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/MapDamage.h&quot;
@@ -35,7 +35,7 @@
 #include &quot;Rendering/UnitModels/3DModelParser.h&quot;
 #include &quot;Rendering/UnitModels/3DOParser.h&quot;
 #include &quot;Rendering/UnitModels/s3oParser.h&quot;
-#include &quot;Sim/SideParser.h&quot;
+#include &quot;Sim/Misc/SideParser.h&quot;
 #include &quot;Sim/Features/Feature.h&quot;
 #include &quot;Sim/Features/FeatureHandler.h&quot;
 #include &quot;Sim/Misc/GroundBlockingObjectMap.h&quot;
@@ -63,12 +63,12 @@
 #include &quot;Sim/Weapons/PlasmaRepulser.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/myMath.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/VFSHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;myMath.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/VFSHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
+#include &quot;Util.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Lua/LuaTextures.cpp
===================================================================
--- trunk/rts/Lua/LuaTextures.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaTextures.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;LuaTextures.h&quot;
 
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaUnitDefs.cpp
===================================================================
--- trunk/rts/Lua/LuaUnitDefs.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaUnitDefs.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -21,7 +21,7 @@
 #include &quot;LuaUtils.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Game/GameHelper.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/MapDamage.h&quot;
 #include &quot;Map/MapInfo.h&quot;
@@ -48,11 +48,11 @@
 #include &quot;Sim/Units/CommandAI/LineDrawer.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/SimpleParser.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/SimpleParser.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
+#include &quot;Util.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Lua/LuaUnitRendering.cpp
===================================================================
--- trunk/rts/Lua/LuaUnitRendering.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaUnitRendering.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -25,7 +25,7 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 
 using std::min;

Modified: trunk/rts/Lua/LuaUnsyncedCall.cpp
===================================================================
--- trunk/rts/Lua/LuaUnsyncedCall.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaUnsyncedCall.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -20,7 +20,7 @@
 #include &quot;LuaRules.h&quot;
 #include &quot;LuaHashString.h&quot;
 #include &quot;LuaUtils.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaUnsyncedCtrl.cpp
===================================================================
--- trunk/rts/Lua/LuaUnsyncedCtrl.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaUnsyncedCtrl.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -32,7 +32,7 @@
 #include &quot;Game/Camera/CameraController.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/Player.h&quot;
 #include &quot;Game/UI/CommandColors.h&quot;
 #include &quot;Game/UI/CursorIcons.h&quot;
@@ -54,12 +54,12 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
 #include &quot;Sim/Units/CommandAI/LineDrawer.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/NetProtocol.h&quot;
-#include &quot;System/Sound.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;NetProtocol.h&quot;
+#include &quot;Sound.h&quot;
 
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Lua/LuaUnsyncedRead.cpp
===================================================================
--- trunk/rts/Lua/LuaUnsyncedRead.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaUnsyncedRead.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -33,7 +33,7 @@
 #include &quot;Game/PlayerRoster.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
 #include &quot;Game/CameraHandler.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/UI/GuiHandler.h&quot;
 #include &quot;Game/UI/InfoConsole.h&quot;
 #include &quot;Game/UI/KeyCodes.h&quot;
@@ -52,11 +52,11 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitTypes/TransportUnit.h&quot;
-#include &quot;System/NetProtocol.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/VFSHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-#include &quot;System/Sound.h&quot;
+#include &quot;NetProtocol.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/VFSHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
+#include &quot;Sound.h&quot;
 
 
 extern Uint8 *keys;

Modified: trunk/rts/Lua/LuaUtils.cpp
===================================================================
--- trunk/rts/Lua/LuaUtils.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaUtils.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,7 +11,7 @@
 #include &quot;LuaUtils.h&quot;
 
 #include &quot;LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 
 static       int depth = 0;

Modified: trunk/rts/Lua/LuaVFS.cpp
===================================================================
--- trunk/rts/Lua/LuaVFS.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaVFS.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -21,11 +21,11 @@
 #include &quot;LuaHashString.h&quot;
 #include &quot;LuaIO.h&quot;
 #include &quot;LuaUtils.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/VFSHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/VFSHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
+#include &quot;Util.h&quot;
 
 
 /******************************************************************************/

Modified: trunk/rts/Lua/LuaWeaponDefs.cpp
===================================================================
--- trunk/rts/Lua/LuaWeaponDefs.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Lua/LuaWeaponDefs.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -24,10 +24,10 @@
 #include &quot;Sim/Projectiles/Projectile.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/FileSystem/SimpleParser.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;FileSystem/SimpleParser.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Map/BaseGroundDrawer.cpp
===================================================================
--- trunk/rts/Map/BaseGroundDrawer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/BaseGroundDrawer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,9 +6,9 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
 #include &quot;Game/UI/GuiHandler.h&quot;
-#include &quot;Map/Ground.h&quot;
-#include &quot;Map/HeightLinePalette.h&quot;
-#include &quot;Map/ReadMap.h&quot;
+#include &quot;Ground.h&quot;
+#include &quot;HeightLinePalette.h&quot;
+#include &quot;ReadMap.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/GroundDecalHandler.h&quot;
 #include &quot;Sim/Misc/LosHandler.h&quot;
@@ -18,8 +18,8 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;System/FastMath.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
+#include &quot;FastMath.h&quot;
 
 CBaseGroundDrawer::CBaseGroundDrawer(void)
 {

Modified: trunk/rts/Map/Ground.h
===================================================================
--- trunk/rts/Map/Ground.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/Ground.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,8 +5,8 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;float3.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 
 class CProjectileHandler;
 class CProjectile;

Modified: trunk/rts/Map/HeightMapTexture.cpp
===================================================================
--- trunk/rts/Map/HeightMapTexture.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/HeightMapTexture.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,9 +6,9 @@
 
 #include &quot;HeightMapTexture.h&quot;
 
-#include &quot;Map/ReadMap.h&quot;
+#include &quot;ReadMap.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
 
 /******************************************************************************/
 /******************************************************************************/

Modified: trunk/rts/Map/MapInfo.cpp
===================================================================
--- trunk/rts/Map/MapInfo.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/MapInfo.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,12 +4,12 @@
 
 #include &quot;MapInfo.h&quot;
 
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;MapParser.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;Exceptions.h&quot;
 
 
 using namespace std;

Modified: trunk/rts/Map/MapParser.cpp
===================================================================
--- trunk/rts/Map/MapParser.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/MapParser.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 
 #include &quot;MapParser.h&quot;
 #include &quot;Lua/LuaSyncedRead.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
 
 
 string MapParser::GetMapConfigName(const string&amp; mapName)

Modified: trunk/rts/Map/MetalMap.h
===================================================================
--- trunk/rts/Map/MetalMap.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/MetalMap.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 #include &lt;vector&gt;
 
 #include &quot;creg/creg.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 
 // Each square on metalmap is a 2x2 square on normal map.
 const float METAL_MAP_SQUARE_SIZE = SQUARE_SIZE * 2;

Modified: trunk/rts/Map/ReadMap.cpp
===================================================================
--- trunk/rts/Map/ReadMap.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/ReadMap.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -20,12 +20,12 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;SM3/Sm3Map.h&quot;
 #include &quot;SMF/SmfReadMap.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/FileSystem/ArchiveScanner.h&quot;
-#include &quot;System/LoadSaveInterface.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Platform/errorhandler.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;FileSystem/ArchiveScanner.h&quot;
+#include &quot;LoadSaveInterface.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Platform/errorhandler.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Map/ReadMap.h
===================================================================
--- trunk/rts/Map/ReadMap.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/ReadMap.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,8 +7,8 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;creg/creg.h&quot;
 #include &quot;float3.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 
 class CMetalMap;
 class CCamera;

Modified: trunk/rts/Map/SM3/Sm3GroundDrawer.cpp
===================================================================
--- trunk/rts/Map/SM3/Sm3GroundDrawer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SM3/Sm3GroundDrawer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 #include &quot;Rendering/GroundDecalHandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Map/MapInfo.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 
 #include &lt;SDL_keysym.h&gt;

Modified: trunk/rts/Map/SM3/Sm3Map.cpp
===================================================================
--- trunk/rts/Map/SM3/Sm3Map.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SM3/Sm3Map.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -15,7 +15,7 @@
 #include &quot;Platform/byteorder.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;TdfParser.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 #include &quot;terrain/TerrainNode.h&quot;
 #include &quot;Game/Camera.h&quot;

Modified: trunk/rts/Map/SM3/terrain/Lightcalc.cpp
===================================================================
--- trunk/rts/Map/SM3/terrain/Lightcalc.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SM3/terrain/Lightcalc.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -35,7 +35,7 @@
 #include &quot;Lightcalc.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 #include &lt;SDL.h&gt;
 #include &lt;IL/il.h&gt;

Modified: trunk/rts/Map/SM3/terrain/Terrain.cpp
===================================================================
--- trunk/rts/Map/SM3/terrain/Terrain.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SM3/terrain/Terrain.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -44,7 +44,7 @@
 #include &quot;TerrainTexture.h&quot;
 #include &quot;TerrainNode.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 #include &lt;assert.h&gt;
 
 // define this for big endian machines

Modified: trunk/rts/Map/SM3/terrain/TerrainBase.h
===================================================================
--- trunk/rts/Map/SM3/terrain/TerrainBase.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SM3/terrain/TerrainBase.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -31,7 +31,7 @@
 
 #include &quot;Rendering/GL/myGL.h&quot;
 
-#include &quot;../Frustum.h&quot;
+#include &quot;Map/SM3/Frustum.h&quot;
 #include &quot;Matrix44f.h&quot;
 
 #include &quot;LogOutput.h&quot;

Modified: trunk/rts/Map/SM3/terrain/TerrainTexture.cpp
===================================================================
--- trunk/rts/Map/SM3/terrain/TerrainTexture.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SM3/terrain/TerrainTexture.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -42,7 +42,7 @@
 #include &quot;TerrainTexEnvCombine.h&quot;
 #include &quot;TerrainTextureGLSL.h&quot;
 #include &quot;Lightcalc.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 #include &lt;SDL_keysym.h&gt;
 extern unsigned char *keys;

Modified: trunk/rts/Map/SM3/terrain/TerrainTextureGLSL.cpp
===================================================================
--- trunk/rts/Map/SM3/terrain/TerrainTextureGLSL.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SM3/terrain/TerrainTextureGLSL.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -37,9 +37,9 @@
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;Platform/FileSystem.h&quot;
 #include &quot;bitops.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Exceptions.h&quot;
 
 #include &lt;fstream&gt;
 #include &lt;list&gt;

Modified: trunk/rts/Map/SM3/terrain/Textures.cpp
===================================================================
--- trunk/rts/Map/SM3/terrain/Textures.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SM3/terrain/Textures.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -39,7 +39,7 @@
 #include &quot;Textures.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;Platform/FileSystem.h&quot;
-#include &quot;System/float3.h&quot;
+#include &quot;float3.h&quot;
 
 
 namespace terrain {

Modified: trunk/rts/Map/SMF/BFGroundDrawer.cpp
===================================================================
--- trunk/rts/Map/SMF/BFGroundDrawer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SMF/BFGroundDrawer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,8 +12,8 @@
 #include &quot;Rendering/ShadowHandler.h&quot;
 #include &quot;Rendering/GroundDecalHandler.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &quot;System/FastMath.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;FastMath.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;mmgr.h&quot;
 
 #ifdef USE_GML

Modified: trunk/rts/Map/SMF/SmfMapFile.cpp
===================================================================
--- trunk/rts/Map/SMF/SmfMapFile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SMF/SmfMapFile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,7 +5,7 @@
 #include &quot;SmfMapFile.h&quot;
 #include &quot;mapfile.h&quot;
 #include &quot;mmgr.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using std::string;
 

Modified: trunk/rts/Map/SMF/SmfReadMap.cpp
===================================================================
--- trunk/rts/Map/SMF/SmfReadMap.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Map/SMF/SmfReadMap.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -15,8 +15,8 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;bitops.h&quot;
 #include &quot;mmgr.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Rendering/Env/AdvSky.cpp
===================================================================
--- trunk/rts/Rendering/Env/AdvSky.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/AdvSky.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -17,7 +17,7 @@
 #include &quot;TimeProfiler.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;Matrix44f.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 #define Y_PART 10.0
 #define X_PART 10.0

Modified: trunk/rts/Rendering/Env/AdvTreeGenerator.cpp
===================================================================
--- trunk/rts/Rendering/Env/AdvTreeGenerator.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/AdvTreeGenerator.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,9 +14,9 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using std::max;
 using std::min;

Modified: trunk/rts/Rendering/Env/AdvWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/AdvWater.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/AdvWater.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -17,8 +17,8 @@
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Features/FeatureHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;EventHandler.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Rendering/Env/BaseTreeDrawer.cpp
===================================================================
--- trunk/rts/Rendering/Env/BaseTreeDrawer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/BaseTreeDrawer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,7 +7,7 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;Game/Camera.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 
 CBaseTreeDrawer* treeDrawer=0;
 

Modified: trunk/rts/Rendering/Env/BaseWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/BaseWater.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/BaseWater.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;DynWater.h&quot;
 #include &quot;RefractWater.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Exceptions.h&quot;
 
 CBaseWater* water=0;
 

Modified: trunk/rts/Rendering/Env/BasicSky.cpp
===================================================================
--- trunk/rts/Rendering/Env/BasicSky.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/BasicSky.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -18,7 +18,7 @@
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Matrix44f.h&quot;
 #include &quot;LogOutput.h&quot;
 

Modified: trunk/rts/Rendering/Env/BasicTreeDrawer.cpp
===================================================================
--- trunk/rts/Rendering/Env/BasicTreeDrawer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/BasicTreeDrawer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,8 +13,8 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Exceptions.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/Env/BasicWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/BasicWater.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/BasicWater.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Exceptions.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/Env/BumpWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/BumpWater.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/BumpWater.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -27,13 +27,13 @@
 #include &quot;Sim/Features/FeatureHandler.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
-#include &quot;System/FastMath.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
+#include &quot;FastMath.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;TimeProfiler.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using std::string;
 using std::vector;

Modified: trunk/rts/Rendering/Env/DynWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/DynWater.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/DynWater.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,7 +11,7 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;bitops.h&quot;
 #include &quot;Map/BaseGroundDrawer.h&quot;
-#include &quot;Rendering/Env/BaseSky.h&quot;
+#include &quot;BaseSky.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Features/FeatureHandler.h&quot;
@@ -22,9 +22,9 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;Exceptions.h&quot;
 
 #define W_SIZE 5
 #define WF_SIZE 5120

Modified: trunk/rts/Rendering/Env/GrassDrawer.cpp
===================================================================
--- trunk/rts/Rendering/Env/GrassDrawer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/GrassDrawer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -18,9 +18,9 @@
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Rendering/ShadowHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 //#include &quot;TimeProfiler.h&quot;
 
 static const float turfSize=20;				//single turf size

Modified: trunk/rts/Rendering/Env/RefractWater.cpp
===================================================================
--- trunk/rts/Rendering/Env/RefractWater.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/RefractWater.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,7 +7,7 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;bitops.h&quot;
 
 CRefractWater::CRefractWater() : CAdvWater(false)

Modified: trunk/rts/Rendering/Env/SkyBox.cpp
===================================================================
--- trunk/rts/Rendering/Env/SkyBox.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Env/SkyBox.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,11 +6,11 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;Game/Camera.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Exceptions.h&quot;
 
 CSkyBox::CSkyBox(std::string texture)
 {

Modified: trunk/rts/Rendering/FartextureHandler.cpp
===================================================================
--- trunk/rts/Rendering/FartextureHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/FartextureHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,5 +1,5 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;Rendering/GL/myGL.h&quot;
+#include &quot;GL/myGL.h&quot;
 #include &quot;mmgr.h&quot;
 
 #include &quot;FartextureHandler.h&quot;
@@ -7,7 +7,7 @@
 #include &quot;GL/myGL.h&quot;
 #include &quot;GlobalUnsynced.h&quot;
 #include &quot;UnitModels/UnitDrawer.h&quot;
-#include &quot;Rendering/Textures/Bitmap.h&quot;
+#include &quot;Textures/Bitmap.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 
 CFartextureHandler* fartextureHandler = NULL;

Modified: trunk/rts/Rendering/FartextureHandler.h
===================================================================
--- trunk/rts/Rendering/FartextureHandler.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/FartextureHandler.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,7 +2,7 @@
 #define __FARTEXTURE_HANDLER_H__
 
 #include &lt;vector&gt;
-#include &quot;Rendering/GL/myGL.h&quot;
+#include &quot;GL/myGL.h&quot;
 
 struct S3DOModel;
 

Modified: trunk/rts/Rendering/GL/FBO.h
===================================================================
--- trunk/rts/Rendering/GL/FBO.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/GL/FBO.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #ifndef FBO_H
 #define FBO_H
 
-#include &quot;Rendering/GL/myGL.h&quot;
+#include &quot;myGL.h&quot;
 
 /**
  * @brief FBO

Modified: trunk/rts/Rendering/GL/IFramebuffer.h
===================================================================
--- trunk/rts/Rendering/GL/IFramebuffer.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/GL/IFramebuffer.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 #ifndef _IFRAMEBUFFER_H
 #define _IFRAMEBUFFER_H
 
-#include &quot;Rendering/GL/myGL.h&quot;
+#include &quot;myGL.h&quot;
 
 enum FramebufferAttachType
 {

Modified: trunk/rts/Rendering/GL/VertexArray.h
===================================================================
--- trunk/rts/Rendering/GL/VertexArray.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/GL/VertexArray.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,7 +1,7 @@
 #ifndef VERTEXARRAY_H
 #define VERTEXARRAY_H
 #include &quot;myGL.h&quot;
-#include &quot;System/Platform/errorhandler.h&quot;
+#include &quot;Platform/errorhandler.h&quot;
 // VertexArray.h: interface for the CVertexArray class.
 //
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Rendering/GL/glList.cpp
===================================================================
--- trunk/rts/Rendering/GL/glList.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/GL/glList.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #include &quot;Game/UI/MouseHandler.h&quot;
 #include &quot;Rendering/glFont.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 const float itemFontScale = 1.5f;
 const float itemXMargin = 0.02f;

Modified: trunk/rts/Rendering/GL/myGL.cpp
===================================================================
--- trunk/rts/Rendering/GL/myGL.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/GL/myGL.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -15,9 +15,9 @@
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;FPUCheck.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 #include &quot;IFramebuffer.h&quot;
 

Modified: trunk/rts/Rendering/GroundDecalHandler.cpp
===================================================================
--- trunk/rts/Rendering/GroundDecalHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/GroundDecalHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,17 +11,17 @@
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &quot;Rendering/ShadowHandler.h&quot;
-#include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Rendering/GL/VertexArray.h&quot;
-#include &quot;Rendering/Textures/Bitmap.h&quot;
+#include &quot;ShadowHandler.h&quot;
+#include &quot;GL/myGL.h&quot;
+#include &quot;GL/VertexArray.h&quot;
+#include &quot;Textures/Bitmap.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitTypes/Building.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using std::list;
 using std::min;

Modified: trunk/rts/Rendering/GroundDecalHandler.h
===================================================================
--- trunk/rts/Rendering/GroundDecalHandler.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/GroundDecalHandler.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,9 +5,9 @@
 #include &lt;list&gt;
 #include &lt;vector&gt;
 #include &lt;string&gt;
-#include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
-#include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Rendering/GL/VertexArray.h&quot;
+#include &quot;UnitModels/UnitDrawer.h&quot;
+#include &quot;GL/myGL.h&quot;
+#include &quot;GL/VertexArray.h&quot;
 #include &quot;Util.h&quot;
 
 class CUnit;

Modified: trunk/rts/Rendering/GroundFlash.cpp
===================================================================
--- trunk/rts/Rendering/GroundFlash.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/GroundFlash.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,8 +7,8 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;GL/VertexArray.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;Rendering/Textures/ColorMap.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;Textures/ColorMap.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CGroundFlash, CExpGenSpawnable, );
 

Modified: trunk/rts/Rendering/GroundFlash.h
===================================================================
--- trunk/rts/Rendering/GroundFlash.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/GroundFlash.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,7 +1,7 @@
 #ifndef GROUNDFLASH_H
 #define GROUNDFLASH_H
 
-#include &quot;Rendering/Textures/TextureAtlas.h&quot;
+#include &quot;Textures/TextureAtlas.h&quot;
 #include &quot;Sim/Projectiles/ExplosionGenerator.h&quot;
 
 class CVertexArray;

Modified: trunk/rts/Rendering/IconHandler.cpp
===================================================================
--- trunk/rts/Rendering/IconHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/IconHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,8 +12,8 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;IconHandler.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
-#include &quot;Rendering/Textures/Bitmap.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Textures/Bitmap.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using std::string;
 

Modified: trunk/rts/Rendering/InMapDraw.cpp
===================================================================
--- trunk/rts/Rendering/InMapDraw.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/InMapDraw.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,19 +7,19 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Game/Player.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/UI/MiniMap.h&quot;
 #include &quot;Game/UI/MouseHandler.h&quot;
 #include &quot;Map/BaseGroundDrawer.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;Rendering/glFont.h&quot;
-#include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Rendering/GL/VertexArray.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/NetProtocol.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Sound.h&quot;
+#include &quot;glFont.h&quot;
+#include &quot;GL/myGL.h&quot;
+#include &quot;GL/VertexArray.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;NetProtocol.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Sound.h&quot;
 #include &quot;creg/STL_List.h&quot;
 
 

Modified: trunk/rts/Rendering/InMapDraw.h
===================================================================
--- trunk/rts/Rendering/InMapDraw.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/InMapDraw.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,7 +3,7 @@
 
 #include &lt;string&gt;
 #include &lt;list&gt;
-#include &quot;Rendering/GL/myGL.h&quot;
+#include &quot;GL/myGL.h&quot;
 
 
 class CInMapDraw

Modified: trunk/rts/Rendering/ShadowHandler.cpp
===================================================================
--- trunk/rts/Rendering/ShadowHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/ShadowHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,10 +13,10 @@
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Game/UI/MiniMap.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Rendering/GL/IFramebuffer.h&quot;
+#include &quot;GL/myGL.h&quot;
+#include &quot;GL/IFramebuffer.h&quot;
 #include &quot;Sim/Features/FeatureHandler.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;EventHandler.h&quot;
 
 CShadowHandler* shadowHandler=0;
 

Modified: trunk/rts/Rendering/Textures/Bitmap.cpp
===================================================================
--- trunk/rts/Rendering/Textures/Bitmap.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Textures/Bitmap.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -25,7 +25,7 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;Platform/FileSystem.h&quot;
-#include &quot;Rendering/Textures/Bitmap.h&quot;
+#include &quot;Bitmap.h&quot;
 #include &quot;bitops.h&quot;
 
 //////////////////////////////////////////////////////////////////////

Modified: trunk/rts/Rendering/Textures/Bitmap.h
===================================================================
--- trunk/rts/Rendering/Textures/Bitmap.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Textures/Bitmap.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &lt;string&gt;
 
 #include &quot;Platform/Win/win32.h&quot;
-#include &quot;Rendering/Textures/nv_dds.h&quot;
+#include &quot;nv_dds.h&quot;
 
 using std::string;
 

Modified: trunk/rts/Rendering/Textures/ColorMap.cpp
===================================================================
--- trunk/rts/Rendering/Textures/ColorMap.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Textures/ColorMap.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,10 +4,10 @@
 
 #include &quot;ColorMap.h&quot;
 #include &quot;Bitmap.h&quot;
-#include &quot;Rendering/Textures/Bitmap.h&quot;
+#include &quot;Bitmap.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 std::vector&lt;CColorMap *&gt; CColorMap::colorMaps;
 std::map&lt;std::string, CColorMap *&gt; CColorMap::colorMapsMap;

Modified: trunk/rts/Rendering/Textures/NamedTextures.cpp
===================================================================
--- trunk/rts/Rendering/Textures/NamedTextures.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Textures/NamedTextures.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,8 +8,8 @@
 #include &quot;bitops.h&quot;
 #include &quot;NamedTextures.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;Rendering/Textures/Bitmap.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;Bitmap.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 
 map&lt;string, CNamedTextures::TexInfo&gt; CNamedTextures::texMap;

Modified: trunk/rts/Rendering/Textures/TextureAtlas.cpp
===================================================================
--- trunk/rts/Rendering/Textures/TextureAtlas.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Textures/TextureAtlas.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,13 +3,13 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;TextureAtlas.h&quot;
-#include &quot;Rendering/Textures/Bitmap.h&quot;
+#include &quot;Bitmap.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
-#include &quot;System/Vec2.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
+#include &quot;Vec2.h&quot;
 
 CR_BIND(AtlasedTexture, );
 CR_BIND_DERIVED(GroundFXTexture, AtlasedTexture, );

Modified: trunk/rts/Rendering/Textures/TextureHandler.cpp
===================================================================
--- trunk/rts/Rendering/Textures/TextureHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/Textures/TextureHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,18 +13,18 @@
 #include &quot;TextureHandler.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;FileSystem/SimpleParser.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;Platform/errorhandler.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/ShadowHandler.h&quot;
-#include &quot;Rendering/Textures/Bitmap.h&quot;
+#include &quot;Bitmap.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
 #include &quot;TAPalette.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 //////////////////////////////////////////////////////////////////////
 // Construction/Destruction

Modified: trunk/rts/Rendering/UnitModels/3DModelParser.cpp
===================================================================
--- trunk/rts/Rendering/UnitModels/3DModelParser.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/UnitModels/3DModelParser.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;3DOParser.h&quot;
 #include &quot;s3oParser.h&quot;
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 C3DModelParser* modelParser=0;
 

Modified: trunk/rts/Rendering/UnitModels/3DOParser.cpp
===================================================================
--- trunk/rts/Rendering/UnitModels/3DOParser.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/UnitModels/3DOParser.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -22,14 +22,14 @@
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
 #include &quot;Rendering/Textures/TAPalette.h&quot;
 #include &quot;Matrix44f.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/Player.h&quot;
 #include &quot;Platform/errorhandler.h&quot;
 #include &quot;Platform/byteorder.h&quot;
 #include &quot;SDL_types.h&quot;
 #include &quot;s3oParser.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Rendering/UnitModels/UnitDrawer.cpp
===================================================================
--- trunk/rts/Rendering/UnitModels/UnitDrawer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/UnitModels/UnitDrawer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,7 +9,7 @@
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Lua/LuaMaterial.h&quot;
 #include &quot;Lua/LuaUnitMaterial.h&quot;
 #include &quot;Lua/LuaRules.h&quot;
@@ -42,7 +42,7 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitTypes/TransportUnit.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;mmgr.h&quot;
 
 #ifdef USE_GML

Modified: trunk/rts/Rendering/UnitModels/s3oParser.cpp
===================================================================
--- trunk/rts/Rendering/UnitModels/s3oParser.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/UnitModels/s3oParser.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -18,8 +18,8 @@
 #include &quot;Rendering/Textures/TextureHandler.h&quot;
 #include &quot;Platform/byteorder.h&quot;
 #include &quot;Platform/errorhandler.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 void SS3O::DrawStatic()
 {

Modified: trunk/rts/Rendering/VerticalSync.cpp
===================================================================
--- trunk/rts/Rendering/VerticalSync.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/VerticalSync.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,9 +11,9 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;VerticalSync.h&quot;
-#include &quot;Rendering/GL/myGL.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
+#include &quot;GL/myGL.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
 
 
 CVerticalSync VSync;

Modified: trunk/rts/Rendering/glFont.cpp
===================================================================
--- trunk/rts/Rendering/glFont.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Rendering/glFont.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,9 +14,9 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;myMath.h&quot;
 #include &quot;Platform/FileSystem.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 #include &quot;mmgr.h&quot;
 
 using std::string;

Modified: trunk/rts/Sim/Features/Feature.cpp
===================================================================
--- trunk/rts/Sim/Features/Feature.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Features/Feature.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,7 +3,7 @@
 
 #include &quot;Feature.h&quot;
 #include &quot;FeatureHandler.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Lua/LuaRules.h&quot;
 #include &quot;Map/Ground.h&quot;
@@ -16,7 +16,7 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/UnitModels/3DOParser.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 #include &quot;Sim/Misc/CollisionVolume.h&quot;
 #include &quot;Sim/Projectiles/FireProjectile.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
@@ -24,7 +24,7 @@
 #include &quot;Sim/Projectiles/Unsynced/SmokeProjectile.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &lt;assert.h&gt;
 
 CR_BIND_DERIVED(CFeature, CSolidObject, )

Modified: trunk/rts/Sim/Features/FeatureHandler.cpp
===================================================================
--- trunk/rts/Sim/Features/FeatureHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Features/FeatureHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -25,13 +25,13 @@
 #include &quot;Sim/Misc/CollisionVolume.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/CommandAI/BuilderCAI.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/TimeProfiler.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;TimeProfiler.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;creg/STL_List.h&quot;
 #include &quot;creg/STL_Set.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using namespace std;
 

Modified: trunk/rts/Sim/Misc/AirBaseHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/AirBaseHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/AirBaseHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,7 +2,7 @@
 #include &quot;mmgr.h&quot;
 #include &quot;AirBaseHandler.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;GlobalSynced.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;

Modified: trunk/rts/Sim/Misc/AirBaseHandler.h
===================================================================
--- trunk/rts/Sim/Misc/AirBaseHandler.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/AirBaseHandler.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,8 +5,8 @@
 #include &lt;boost/noncopyable.hpp&gt;
 
 #include &quot;Object.h&quot;
-#include &quot;System/float3.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;float3.h&quot;
+#include &quot;GlobalConstants.h&quot;
 
 class CUnit;
 

Modified: trunk/rts/Sim/Misc/CategoryHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/CategoryHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/CategoryHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 #include &quot;CategoryHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;creg/STL_Map.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 CR_BIND(CCategoryHandler, );
 

Modified: trunk/rts/Sim/Misc/CollisionHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/CollisionHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/CollisionHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,15 +1,15 @@
 #include &quot;StdAfx.h&quot;
 #include &quot;mmgr.h&quot;
 
-#include &quot;System/FastMath.h&quot;
-#include &quot;System/float3.h&quot;
-#include &quot;System/Matrix44f.h&quot;
+#include &quot;FastMath.h&quot;
+#include &quot;float3.h&quot;
+#include &quot;Matrix44f.h&quot;
 
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Features/Feature.h&quot;
 #include &quot;GroundBlockingObjectMap.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;GlobalSynced.h&quot;
 
 #include &quot;CollisionHandler.h&quot;
 #include &quot;CollisionVolume.h&quot;

Modified: trunk/rts/Sim/Misc/DamageArrayHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/DamageArrayHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/DamageArrayHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,8 +10,8 @@
 #include &quot;Game/Game.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;creg/STL_Map.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using namespace std;
 

Copied: trunk/rts/Sim/Misc/GlobalConstants.h (from rev 7001, trunk/rts/Game/GlobalConstants.h)
===================================================================
--- trunk/rts/Sim/Misc/GlobalConstants.h	                        (rev 0)
+++ trunk/rts/Sim/Misc/GlobalConstants.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -0,0 +1,62 @@
+#ifndef GLOBAL_CONSTANTS_H
+#define GLOBAL_CONSTANTS_H
+
+/**
+ * @brief maximum world size
+ *
+ * Defines the maximum world size as 1000000
+ */
+const int MAX_WORLD_SIZE = 1000000;
+
+/**
+ * @brief square size
+ *
+ * Defines the size of 1 square as 8
+ */
+const int  SQUARE_SIZE = 8;
+
+/**
+ * @brief game speed
+ *
+ * Defines the game speed as 30
+ */
+const int GAME_SPEED = 30;
+
+/**
+ * @brief max view range
+ *
+ * Defines the maximum view range as 8000
+ */
+const int MAX_VIEW_RANGE = 8000;
+
+/**
+ * @brief max teams
+ *
+ * Defines the maximum number of teams
+ * as 17 (16 real teams, and an extra slot for the GAIA team)
+ */
+const int MAX_TEAMS = 17;
+
+/**
+ * @brief max players
+ *
+ * Defines the maximum number of players as 32
+ */
+const int MAX_PLAYERS = 32;
+
+/**
+ * @brief near plane
+ *
+ * Defines the near plane as 2.8f
+ */
+const float NEAR_PLANE = 2.8f;
+
+/**
+ * @brief randint max
+ *
+ * Defines the maximum random integer as 0x7fff
+ */
+const int RANDINT_MAX = 0x7fff;
+
+
+#endif


Property changes on: trunk/rts/Sim/Misc/GlobalConstants.h
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/rts/Sim/Misc/GlobalSynced.cpp (from rev 7001, trunk/rts/Game/GlobalSynced.cpp)
===================================================================
--- trunk/rts/Sim/Misc/GlobalSynced.cpp	                        (rev 0)
+++ trunk/rts/Sim/Misc/GlobalSynced.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -0,0 +1,242 @@
+#include &quot;StdAfx.h&quot;
+#include &quot;GlobalSynced.h&quot;
+
+#include &lt;assert.h&gt;
+#include &lt;cstring&gt;
+
+#include &quot;Game/GameSetup.h&quot;
+#include &quot;Team.h&quot;
+#include &quot;Game/Player.h&quot;
+#include &quot;Lua/LuaGaia.h&quot;
+#include &quot;Lua/LuaRules.h&quot;
+
+/**
+ * @brief global synced
+ *
+ * Global instance of CGlobalSyncedStuff
+ */
+CGlobalSyncedStuff* gs;
+
+
+
+CR_BIND(CGlobalSyncedStuff,);
+
+CR_REG_METADATA(CGlobalSyncedStuff, (
+	CR_MEMBER(randSeed),
+	CR_MEMBER(initRandSeed),
+	CR_MEMBER(frameNum),
+	CR_MEMBER(speedFactor),
+	CR_MEMBER(userSpeedFactor),
+	CR_MEMBER(paused),
+	CR_MEMBER(tempNum),
+	CR_MEMBER(godMode),
+	CR_MEMBER(globalLOS),
+	CR_MEMBER(cheatEnabled),
+	CR_MEMBER(noHelperAIs),
+	CR_MEMBER(editDefsEnabled),
+	CR_MEMBER(useLuaRules),
+	CR_MEMBER(useLuaGaia),
+	CR_MEMBER(gaiaTeamID),
+	CR_MEMBER(gaiaAllyTeamID),
+	CR_MEMBER(gameMode),
+	CR_MEMBER(players),
+	CR_MEMBER(activeTeams),
+	CR_MEMBER(activeAllyTeams),
+	CR_MEMBER(activePlayers),
+	CR_MEMBER(allies),
+	CR_MEMBER(team2allyteam),
+	CR_MEMBER(teams),
+	CR_RESERVED(64)
+));
+
+
+/**
+ * Initializes variables in CGlobalSyncedStuff
+ */
+CGlobalSyncedStuff::CGlobalSyncedStuff()
+{
+	hmapx = 256;
+	hmapy = 256;
+	randSeed = 18655;
+	initRandSeed = randSeed;
+	frameNum = 0;
+	speedFactor = 1;
+	userSpeedFactor = 1;
+	paused = false;
+	godMode = false;
+	globalLOS = false;
+	cheatEnabled = false;
+	noHelperAIs = false;
+	editDefsEnabled = false;
+	tempNum = 2;
+	gameMode = 0;
+	useLuaGaia = true;
+	gaiaTeamID = -1;
+	gaiaAllyTeamID = -1;
+	useLuaRules = true;
+	
+	for(int a = 0; a &lt; MAX_TEAMS; ++a) {
+		teams[a] = SAFE_NEW CTeam();
+		teams[a]-&gt;teamNum = a;
+		team2allyteam[a] = a;
+	}
+	for(int a = 0; a &lt; MAX_PLAYERS; ++a) {
+		players[a] = SAFE_NEW CPlayer();
+		players[a]-&gt;playerNum = a;
+	}
+
+	for (int a = 0; a &lt; MAX_TEAMS; ++a) {
+		for (int b = 0; b &lt; MAX_TEAMS; ++b) {
+			allies[a][b] = false;
+		}
+		allies[a][a] = true;
+	}
+
+	activeTeams = 2;
+	activeAllyTeams = 2;
+	activePlayers = MAX_PLAYERS;
+}
+
+/**
+ * Destroys data inside CGlobalSyncedStuff
+ */
+CGlobalSyncedStuff::~CGlobalSyncedStuff()
+{
+	for(int a = 0; a &lt; MAX_TEAMS; a++) {
+		delete teams[a];
+	}
+	for(int a = 0; a &lt; MAX_PLAYERS; a++) {
+		delete players[a];
+	}
+}
+
+void CGlobalSyncedStuff::LoadFromSetup(const CGameSetup* setup)
+{
+	gameMode = setup-&gt;gameMode;
+	noHelperAIs = !!setup-&gt;noHelperAIs;
+
+	useLuaGaia  = CLuaGaia::SetConfigString(setup-&gt;luaGaiaStr);
+	useLuaRules = CLuaRules::SetConfigString(setup-&gt;luaRulesStr);
+
+	activePlayers = setup-&gt;numPlayers;
+	activeTeams = setup-&gt;numTeams;
+	activeAllyTeams = setup-&gt;numAllyTeams;
+	
+	assert(activeTeams &lt;= MAX_TEAMS);
+	assert(activeAllyTeams &lt;= MAX_TEAMS);
+
+	for (int i = 0; i &lt; activePlayers; ++i)
+	{
+		// TODO: refactor
+		*static_cast&lt;PlayerBase*&gt;(players[i]) = setup-&gt;playerStartingData[i];
+	}
+
+	for (int i = 0; i &lt; activeTeams; ++i)
+	{
+		teams[i]-&gt;metal = setup-&gt;startMetal;
+		teams[i]-&gt;metalIncome = setup-&gt;startMetal; // for the endgame statistics
+
+		teams[i]-&gt;energy = setup-&gt;startEnergy;
+		teams[i]-&gt;energyIncome = setup-&gt;startEnergy;
+
+		float3 start(setup-&gt;teamStartingData[i].startPos.x, setup-&gt;teamStartingData[i].startPos.y, setup-&gt;teamStartingData[i].startPos.z);
+		teams[i]-&gt;StartposMessage(start, (setup-&gt;startPosType != CGameSetup::StartPos_ChooseInGame));
+		std::memcpy(teams[i]-&gt;color, setup-&gt;teamStartingData[i].color, 4);
+		teams[i]-&gt;handicap = setup-&gt;teamStartingData[i].handicap;
+		teams[i]-&gt;leader = setup-&gt;teamStartingData[i].leader;
+		teams[i]-&gt;side = setup-&gt;teamStartingData[i].side;
+		SetAllyTeam(i, setup-&gt;teamStartingData[i].teamAllyteam);
+		if (!setup-&gt;teamStartingData[i].aiDll.empty())
+		{
+			if (setup-&gt;teamStartingData[i].aiDll.substr(0, 6) == &quot;LuaAI:&quot;) // its a LuaAI
+			{
+				teams[i]-&gt;luaAI = setup-&gt;teamStartingData[i].aiDll.substr(6);
+				teams[i]-&gt;isAI = true;
+			}
+			else // no LuaAI
+			{
+				if (setup-&gt;hostDemo) // in demo replay, we don't need AI's to load again
+					teams[i]-&gt;dllAI = &quot;&quot;;
+				else
+				{
+					teams[i]-&gt;dllAI = setup-&gt;teamStartingData[i].aiDll;
+					teams[i]-&gt;isAI = true;
+				}
+			}
+		}
+	}
+
+	for (int allyTeam1 = 0; allyTeam1 &lt; activeAllyTeams; ++allyTeam1)
+	{
+		for (int allyTeam2 = 0; allyTeam2 &lt; activeAllyTeams; ++allyTeam2)
+			allies[allyTeam1][allyTeam2] = setup-&gt;allyStartingData[allyTeam1].allies[allyTeam2];
+	}
+
+	if (useLuaGaia) {
+		// Gaia adjustments
+		gaiaTeamID = activeTeams;
+		gaiaAllyTeamID = activeAllyTeams;
+		activeTeams++;
+		activeAllyTeams++;
+
+		// Setup the gaia team
+		CTeam* team = gs-&gt;Team(gs-&gt;gaiaTeamID);
+		team-&gt;color[0] = 255;
+		team-&gt;color[1] = 255;
+		team-&gt;color[2] = 255;
+		team-&gt;color[3] = 255;
+		team-&gt;gaia = true;
+		team-&gt;StartposMessage(float3(0.0, 0.0, 0.0), true);
+		//players[setup-&gt;numPlayers]-&gt;team = gaiaTeamID;
+		SetAllyTeam(gaiaTeamID, gaiaAllyTeamID);
+	}
+}
+
+/**
+ * @return synced random integer
+ *
+ * returns a synced random integer
+ */
+int CGlobalSyncedStuff::randInt()
+{
+	randSeed = (randSeed * 214013L + 2531011L);
+	return randSeed &amp; RANDINT_MAX;
+}
+
+/**
+ * @return synced random float
+ *
+ * returns a synced random float
+ */
+float CGlobalSyncedStuff::randFloat()
+{
+	randSeed = (randSeed * 214013L + 2531011L);
+	return float(randSeed &amp; RANDINT_MAX)/RANDINT_MAX;
+}
+
+/**
+ * @return synced random vector
+ *
+ * returns a synced random vector
+ */
+float3 CGlobalSyncedStuff::randVector()
+{
+	float3 ret;
+	do {
+		ret.x = randFloat()*2-1;
+		ret.y = randFloat()*2-1;
+		ret.z = randFloat()*2-1;
+	} while(ret.SqLength()&gt;1);
+
+	return ret;
+}
+
+int CGlobalSyncedStuff::Player(const std::string&amp; name)
+{
+	for (int i = 0; i &lt; MAX_PLAYERS; ++i) {
+		if (players[i] &amp;&amp; players[i]-&gt;name == name) {
+			return i;
+		}
+	}
+	return -1;
+}


Property changes on: trunk/rts/Sim/Misc/GlobalSynced.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/rts/Sim/Misc/GlobalSynced.h (from rev 7001, trunk/rts/Game/GlobalSynced.h)
===================================================================
--- trunk/rts/Sim/Misc/GlobalSynced.h	                        (rev 0)
+++ trunk/rts/Sim/Misc/GlobalSynced.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -0,0 +1,341 @@
+#ifndef GLOBAL_UNSYNCED_H
+#define GLOBAL_UNSYNCED_H
+
+#include &lt;string&gt;
+
+#include &quot;float3.h&quot;
+#include &quot;GlobalConstants.h&quot;
+#include &quot;creg/creg.h&quot;
+
+
+class CGameSetup;
+class CTeam;
+class CPlayer;
+
+/**
+ * @brief Global synced stuff
+ *
+ * Class contains globally accessible
+ * stuff that remains synced.
+ */
+class CGlobalSyncedStuff
+{
+public:
+	CR_DECLARE(CGlobalSyncedStuff);
+	CGlobalSyncedStuff();  //!&lt; Constructor
+	~CGlobalSyncedStuff(); //!&lt; Destructor
+	void LoadFromSetup(const CGameSetup*);
+
+	int    randInt();    //!&lt; synced random int
+	float  randFloat();  //!&lt; synced random float
+	float3 randVector(); //!&lt; synced random vector
+
+	void SetRandSeed(unsigned int seed, bool init = false) {
+		randSeed = seed;
+		if (init) { initRandSeed = randSeed; }
+	}
+	unsigned int GetRandSeed()     const { return randSeed; }
+	unsigned int GetInitRandSeed() const { return initRandSeed; }
+
+	/**
+	* @brief frame number
+	*
+	* Stores the current frame number
+	*/
+	int frameNum;
+
+	/**
+	* @brief speed factor
+	*
+	* Contains the actual gamespeed used by the game
+	*/
+	float speedFactor;
+
+	/**
+	* @brief user speed factor
+	*
+	* Contains the user's speed factor.
+	* The real gamespeed can be up to this
+	* but is lowered if a computer can't keep up
+	*/
+	float userSpeedFactor;
+
+	/**
+	* @brief paused
+	*
+	* Holds whether the game is paused
+	*/
+	bool paused;
+
+	/**
+	* @brief map x
+	*
+	* The map's number of squares in the x direction
+	* (note that the number of vertices is one more)
+	*/
+	int mapx;
+
+	/**
+	* @brief map y
+	*
+	* The map's number of squares in the y direction
+	*/
+	int mapy;
+
+	/**
+	* @brief map squares
+	*
+	* Total number of squares on the map
+	*/
+	int mapSquares;
+
+	/**
+	* @brief half map x
+	*
+	* Contains half of the number of squares in the x direction
+	*/
+	int hmapx;
+
+	/**
+	* @brief half map y
+	*
+	* Contains half of the number of squares in the y direction
+	*/
+	int hmapy;
+
+	/**
+	* @brief map x power of 2
+	*
+	* Map's size in the x direction rounded
+	* up to the next power of 2
+	*/
+	int pwr2mapx;
+
+	/**
+	* @brief map y power of 2
+	*
+	* Map's size in the y direction rounded
+	* up to the next power of 2
+	*/
+	int pwr2mapy;
+
+	/**
+	* @brief temp num
+	*
+	* Used for getting temporary but unique numbers
+	* (increase after each use)
+	*/
+	int tempNum;
+
+	/**
+	* @brief god mode
+	*
+	* Whether god mode is enabled, allows all players to control all units (even specs)
+	*/
+	bool godMode;
+
+	/**
+	* @brief global line-of-sight
+	*
+	* Whether everything on the map is visible at all times
+	*/
+	bool globalLOS;
+
+	/**
+	* @brief cheat enabled
+	*
+	* Whether cheating is enabled
+	*/
+	bool cheatEnabled;
+
+	/**
+	* @brief disable helper AIs
+	*
+	* Whether helper AIs are allowed, including GroupAI and LuaUI control widgets
+	*/
+	bool noHelperAIs;
+
+	/**
+	* @brief definition editing enabled
+	*
+	* Whether definition editing is enabled
+	*/
+	bool editDefsEnabled;
+
+	/**
+	* @brief LuaRules control
+	*
+	* Whether or not LuaRules is enabled
+	*/
+	bool useLuaRules;
+
+	/**
+	* @brief LuaGaia control
+	*
+	* Whether or not LuaGaia is enabled
+	*/
+	bool useLuaGaia;
+
+	/**
+	* @brief gaia team
+	*
+	* gaia's team id
+	*/
+	int gaiaTeamID;
+
+	/**
+	* @brief gaia team
+	*
+	* gaia's team id
+	*/
+	int gaiaAllyTeamID;
+
+	/**
+	* @brief game mode
+	*
+	* Determines the commander mode of this game
+	*   0: game continues after commander dies
+	*   1: game ends when commander dies
+	*   2: lineage mode (all descendants die when a commander dies)
+	*/
+	int gameMode;
+
+	/**
+	* @brief players
+	*
+	* Array of CPlayer pointers, for all the
+	* players in the game
+	* (size MAX_PLAYERS)
+	*/
+	CPlayer* players[MAX_PLAYERS];
+
+	/**
+	* @brief active teams
+	*
+	* The number of active teams
+	* (don't change during play)
+	*/
+	int activeTeams;
+
+	/**
+	* @brief active ally teams
+	*
+	* The number of active ally teams
+	*/
+	int activeAllyTeams;
+
+	/**
+	* @brief active players
+	*
+	* The number of active players
+	*/
+	int activePlayers;
+
+	/**
+	* @brief Player
+	* @param name name of the player
+	* @return his playernumber of -1 if not found
+	*
+	* Search a player by name.
+	*/
+	int Player(const std::string&amp; name);
+
+	/**
+	* @brief Team
+	* @param i index to fetch
+	* @return CTeam pointer
+	*
+	* Accesses a CTeam pointer at a given index
+	*/
+	CTeam *Team(int i) { return teams[i]; }
+
+	/**
+	* @brief ally
+	* @param a first index
+	* @param b second index
+	* @return allies[a][b]
+	*
+	* Returns ally at [a][b]
+	*/
+	bool Ally(int a,int b) { return allies[a][b]; }
+
+	/**
+	* @brief ally team
+	* @param team team to find
+	* @return the ally team
+	*
+	* returns the team2ally at given index
+	*/
+	int AllyTeam(int team) { return team2allyteam[team]; }
+
+	/**
+	* @brief allied teams
+	* @param a first team
+	* @param b second team
+	* @return whether teams are allied
+	*
+	* Tests whether teams are allied
+	*/
+	bool AlliedTeams(int a,int b) { return allies[team2allyteam[a]][team2allyteam[b]]; }
+
+	/**
+	* @brief set ally team
+	* @param team team to set
+	* @param allyteam allyteam to set
+	*
+	* Sets team's ally team
+	*/
+	void SetAllyTeam(int team, int allyteam) { team2allyteam[team]=allyteam; }
+
+	/**
+	* @brief set ally
+	* @param allyteamA first allyteam
+	* @param allyteamB second allyteam
+	* @param allied whether or not these two teams are allied
+	*
+	* Sets two allyteams to be allied or not
+	*/
+	void SetAlly(int allyteamA,int allyteamB, bool allied) { allies[allyteamA][allyteamB]=allied; }
+
+private:
+	/**
+	* @brief random seed
+	*
+	* Holds the synced random seed
+	*/
+	int randSeed;
+
+	/**
+	* @brief initial random seed
+	*
+	* Holds the synced initial random seed
+	*/
+	int initRandSeed;
+
+	/**
+	* @brief allies array
+	*
+	* Array indicates whether teams are allied,
+	* allies[a][b] means allyteam a is allied with
+	* allyteam b, NOT the other way around
+	*/
+	bool allies[MAX_TEAMS][MAX_TEAMS];
+
+	/**
+	* @brief team to ally team
+	*
+	* Array stores what ally team a specific team is part of
+	*/
+	int team2allyteam[MAX_TEAMS];
+
+	/**
+	* @brief teams
+	*
+	* Array of CTeam pointers for teams in game
+	*/
+	CTeam* teams[MAX_TEAMS];
+};
+
+extern CGlobalSyncedStuff* gs;
+
+#endif //GLOBAL_UNSYNCED_H


Property changes on: trunk/rts/Sim/Misc/GlobalSynced.h
___________________________________________________________________
Name: svn:mergeinfo
   + 

Modified: trunk/rts/Sim/Misc/GroundBlockingObjectMap.cpp
===================================================================
--- trunk/rts/Sim/Misc/GroundBlockingObjectMap.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/GroundBlockingObjectMap.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 
 #include &quot;GroundBlockingObjectMap.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;GlobalSynced.h&quot;
 #include &quot;Sim/Objects/SolidObject.h&quot;
 #include &quot;Sim/Path/PathManager.h&quot;
 #include &quot;creg/STL_Map.h&quot;

Modified: trunk/rts/Sim/Misc/InterceptHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/InterceptHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/InterceptHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,14 +3,14 @@
 
 #include &quot;InterceptHandler.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;GlobalSynced.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Projectiles/WeaponProjectiles/WeaponProjectile.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sim/Weapons/PlasmaRepulser.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;myMath.h&quot;
 #include &quot;creg/STL_List.h&quot;
 
 CR_BIND(CInterceptHandler, )

Modified: trunk/rts/Sim/Misc/LosHandler.cpp
===================================================================
--- trunk/rts/Sim/Misc/LosHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/LosHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,7 +9,7 @@
 
 #include &quot;LosHandler.h&quot;
 
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;ModInfo.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Map/ReadMap.h&quot;
 #include &quot;TimeProfiler.h&quot;

Copied: trunk/rts/Sim/Misc/ModInfo.cpp (from rev 7004, trunk/rts/Sim/ModInfo.cpp)
===================================================================
--- trunk/rts/Sim/Misc/ModInfo.cpp	                        (rev 0)
+++ trunk/rts/Sim/Misc/ModInfo.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -0,0 +1,129 @@
+
+#include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;ModInfo.h&quot;
+#include &quot;Game/GameSetup.h&quot;
+#include &quot;Lua/LuaParser.h&quot;
+#include &quot;Lua/LuaSyncedRead.h&quot;
+#include &quot;Sim/Units/Unit.h&quot;
+#include &quot;Sim/Units/UnitTypes/Builder.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
+#include &quot;FileSystem/ArchiveScanner.h&quot;
+#include &quot;Exceptions.h&quot;
+
+
+CModInfo modInfo;
+
+
+void CModInfo::Init(const char* modname)
+{
+	filename = modname;
+
+	humanName = archiveScanner-&gt;ModArchiveToModName(modname);
+
+	const CArchiveScanner::ModData md = archiveScanner-&gt;ModArchiveToModData(modname);
+
+	shortName   = md.shortName;
+	version     = md.version;
+	mutator     = md.mutator;
+	description = md.description;
+
+	// initialize the parser
+	LuaParser parser(&quot;gamedata/modrules.lua&quot;,
+	                 SPRING_VFS_MOD_BASE, SPRING_VFS_ZIP);
+	// customize the defs environment
+	parser.GetTable(&quot;Spring&quot;);
+	parser.AddFunc(&quot;GetModOptions&quot;, LuaSyncedRead::GetModOptions);
+	parser.EndTable();
+	parser.Execute();
+	if (!parser.IsValid()) {
+		logOutput.Print(&quot;Error loading modrules, using defaults&quot;);
+		logOutput.Print(parser.GetErrorLog());
+	}
+	const LuaTable root = parser.GetRoot();
+
+	// determine whether the modder allows the user to use team coloured nanospray
+	const LuaTable nanosprayTbl = root.SubTable(&quot;nanospray&quot;);
+	allowTeamColors = nanosprayTbl.GetBool(&quot;allow_team_colors&quot;, true);
+	if (allowTeamColors) {
+		// Load the users preference for team coloured nanospray
+		gu-&gt;teamNanospray = !!configHandler.GetInt(&quot;TeamNanoSpray&quot;, 0);
+	}
+
+	// constructions
+	const LuaTable constructionTbl = root.SubTable(&quot;construction&quot;);
+	constructionDecay = constructionTbl.GetBool(&quot;constructionDecay&quot;, true);
+	constructionDecayTime = (int)(constructionTbl.GetFloat(&quot;constructionDecayTime&quot;, 6.66) * 30);
+	constructionDecaySpeed = constructionTbl.GetFloat(&quot;constructionDecaySpeed&quot;, 0.03);
+
+	// reclaim
+	const LuaTable reclaimTbl = root.SubTable(&quot;reclaim&quot;);
+	multiReclaim  = reclaimTbl.GetInt(&quot;multiReclaim&quot;,  0);
+	reclaimMethod = reclaimTbl.GetInt(&quot;reclaimMethod&quot;, 1);
+	reclaimUnitMethod = reclaimTbl.GetInt(&quot;unitMethod&quot;, 1);
+	reclaimUnitEnergyCostFactor = reclaimTbl.GetFloat(&quot;unitEnergyCostFactor&quot;, 0.0);
+	reclaimUnitEfficiency = reclaimTbl.GetFloat(&quot;unitEfficiency&quot;, 1.0);
+	reclaimFeatureEnergyCostFactor = reclaimTbl.GetFloat(&quot;featureEnergyCostFactor&quot;, 0.0);
+	reclaimAllowEnemies = reclaimTbl.GetBool(&quot;allowEnemies&quot;, true);
+	reclaimAllowAllies = reclaimTbl.GetBool(&quot;allowAllies&quot;, true);
+
+	// repair
+	const LuaTable repairTbl = root.SubTable(&quot;repair&quot;);
+	repairEnergyCostFactor = repairTbl.GetFloat(&quot;energyCostFactor&quot;, 0.0);
+
+	// resurrect
+	const LuaTable resurrectTbl = root.SubTable(&quot;resurrect&quot;);
+	resurrectEnergyCostFactor  = resurrectTbl.GetFloat(&quot;energyCostFactor&quot;,  0.5);
+
+	// capture
+	const LuaTable captureTbl = root.SubTable(&quot;capture&quot;);
+	captureEnergyCostFactor = captureTbl.GetFloat(&quot;energyCostFactor&quot;, 0.0);
+
+	// fire-at-dead-units
+	const LuaTable fireAtDeadTbl = root.SubTable(&quot;fireAtDead&quot;);
+	fireAtKilled   = fireAtDeadTbl.GetBool(&quot;fireAtKilled&quot;, false);
+	fireAtCrashing = fireAtDeadTbl.GetBool(&quot;fireAtCrashing&quot;, false);
+
+	// transportability
+	const LuaTable transportTbl = root.SubTable(&quot;transportability&quot;);
+	transportAir    = transportTbl.GetInt(&quot;transportAir&quot;,   false);
+	transportShip   = transportTbl.GetInt(&quot;transportShip&quot;,  false);
+	transportHover  = transportTbl.GetInt(&quot;transportHover&quot;, false);
+	transportGround = transportTbl.GetInt(&quot;transportGround&quot;, true);
+
+	// experience
+	const LuaTable experienceTbl = root.SubTable(&quot;experience&quot;);
+	CUnit::SetExpMultiplier (experienceTbl.GetFloat(&quot;experienceMult&quot;, 1.0f));
+	CUnit::SetExpPowerScale (experienceTbl.GetFloat(&quot;powerScale&quot;,  1.0f));		
+	CUnit::SetExpHealthScale(experienceTbl.GetFloat(&quot;healthScale&quot;, 0.7f));		
+	CUnit::SetExpReloadScale(experienceTbl.GetFloat(&quot;reloadScale&quot;, 0.4f));
+
+	// flanking bonus
+	const LuaTable flankingBonusTbl = root.SubTable(&quot;flankingBonus&quot;);
+	flankingBonusModeDefault = flankingBonusTbl.GetInt(&quot;defaultMode&quot;, 1);
+	
+	// sensors
+	const LuaTable sensors = root.SubTable(&quot;sensors&quot;);
+	requireSonarUnderWater = sensors.GetBool(&quot;requireSonarUnderWater&quot;, true);
+	/// LoS
+	const LuaTable los = sensors.SubTable(&quot;los&quot;);
+	// losMipLevel is used as index to readmap-&gt;mipHeightmap,
+	// so the max value is CReadMap::numHeightMipMaps - 1
+	losMipLevel = los.GetInt(&quot;losMipLevel&quot;, 1);
+	losMul = los.GetFloat(&quot;losMul&quot;, 1.0f);
+	if ((losMipLevel &lt; 0) || (losMipLevel &gt; 6)) {
+		throw content_error(&quot;Sensors\\Los\\LosMipLevel out of bounds. &quot;
+		                    &quot;The minimum value is 0. The maximum value is 6.&quot;);
+	}
+	// airLosMipLevel doesn't have such restrictions, it's just used in various
+	// bitshifts with signed integers
+	airMipLevel = los.GetInt(&quot;airMipLevel&quot;, 2);
+	if ((airMipLevel &lt; 0) || (airMipLevel &gt; 30)) {
+		throw content_error(&quot;Sensors\\Los\\AirLosMipLevel out of bounds. &quot;
+		                    &quot;The minimum value is 0. The maximum value is 30.&quot;);
+	}
+	airLosMul = los.GetFloat(&quot;airLosMul&quot;, 1.0f);
+}


Property changes on: trunk/rts/Sim/Misc/ModInfo.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/rts/Sim/Misc/ModInfo.h (from rev 7004, trunk/rts/Sim/ModInfo.h)
===================================================================
--- trunk/rts/Sim/Misc/ModInfo.h	                        (rev 0)
+++ trunk/rts/Sim/Misc/ModInfo.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -0,0 +1,75 @@
+
+#ifndef MOD_INFO_H
+#define MOD_INFO_H
+
+class CModInfo
+{
+public:
+	CModInfo() {};
+	~CModInfo() {};
+
+	void Init(const char* modname);
+
+	std::string filename; // archive filename
+
+	std::string humanName;
+	std::string shortName;
+	std::string version;
+	std::string mutator;
+	std::string description;
+
+	bool allowTeamColors;
+	
+	// Build behaviour
+	bool constructionDecay;               // Should constructions without builders decay?
+	int constructionDecayTime;            // How long until they start decaying?
+	float constructionDecaySpeed;         // How fast do they decay?
+
+	// Reclaim behaviour
+	int multiReclaim;	                  // 0 = 1 reclaimer per feature max, otherwise unlimited
+	int reclaimMethod;	                  // 0 = gradual reclaim, 1 = all reclaimed at end, otherwise reclaim in reclaimMethod chunks
+	int reclaimUnitMethod;                // 0 = Revert to wireframe, gradual reclaim, 1 = Subtract HP, give full metal at end, default 1
+	float reclaimUnitEnergyCostFactor;    // How much energy should reclaiming a unit cost, default 0.0
+	float reclaimUnitEfficiency;          // How much metal should reclaim return, default 1.0
+	float reclaimFeatureEnergyCostFactor; // How much should energy should reclaiming a feature cost, default 0.0
+	bool reclaimAllowEnemies;             // Allow reclaiming enemies? default true
+	bool reclaimAllowAllies;              // Allow reclaiming allies? default true
+
+	// Repair behaviour
+	float repairEnergyCostFactor;         // How much should energy should repair cost, default 0.0
+
+	// Resurrect behaviour
+	float resurrectEnergyCostFactor;      // How much should energy should resurrect cost, default 0.5
+
+	// Capture behaviour
+	float captureEnergyCostFactor;        // How much should energy should capture cost, default 0.0
+
+	// Transportation behaviour
+	int transportGround;                  // 0 = all ground units cannot be transported, 1 = all ground units can be transported (mass and size restrictions still apply). Defaults to 1.
+	int transportHover;                   // 0 = all hover units cannot be transported, 1 = all hover units can be transported (mass and size restrictions still apply). Defaults to 0.
+	int transportShip;                    // 0 = all naval units cannot be transported, 1 = all naval units can be transported (mass and size restrictions still apply). Defaults to 0.
+	int transportAir;                     // 0 = all air units cannot be transported, 1 = all air units can be transported (mass and size restrictions still apply). Defaults to 0.
+
+	// Fire-on-dying-units behaviour
+	int fireAtKilled;                     // 1 = units fire at enemies running Killed() script, 0 = units ignore such enemies
+	int fireAtCrashing;                   // 1 = units fire at crashing aircrafts, 0 = units ignore crashing aircrafts
+
+	int flankingBonusModeDefault;         // 0=no flanking bonus;  1=global coords, mobile;  2=unit coords, mobile;  3=unit coords, locked
+	
+	// Sensor behaviour
+	/// miplevel for los
+	int losMipLevel;
+	/// miplevel to use for airlos
+	int airMipLevel;
+	/// units sightdistance will be multiplied with this, for testing purposes
+	float losMul;
+	/// units airsightdistance will be multiplied with this, for testing purposes
+	float airLosMul;
+	/// when underwater, units are not in LOS unless also in sonar
+	bool requireSonarUnderWater;
+};
+
+extern CModInfo modInfo;
+
+
+#endif


Property changes on: trunk/rts/Sim/Misc/ModInfo.h
___________________________________________________________________
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/rts/Sim/Misc/QuadField.cpp
===================================================================
--- trunk/rts/Sim/Misc/QuadField.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/QuadField.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 
 #include &quot;QuadField.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;GlobalSynced.h&quot;
 #include &quot;Sim/Features/Feature.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;LogOutput.h&quot;

Modified: trunk/rts/Sim/Misc/QuadField.h
===================================================================
--- trunk/rts/Sim/Misc/QuadField.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/QuadField.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,7 +11,7 @@
 
 #include &quot;creg/creg.h&quot;
 #include &quot;float3.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;GlobalConstants.h&quot;
 
 class CUnit;
 class CWorldObject;

Copied: trunk/rts/Sim/Misc/SideParser.cpp (from rev 7004, trunk/rts/Sim/SideParser.cpp)
===================================================================
--- trunk/rts/Sim/Misc/SideParser.cpp	                        (rev 0)
+++ trunk/rts/Sim/Misc/SideParser.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -0,0 +1,155 @@
+
+#include &quot;StdAfx.h&quot;
+
+#include &lt;string&gt;
+#include &lt;set&gt;
+using std::string;
+using std::set;
+
+#include &quot;mmgr.h&quot;
+
+#include &quot;SideParser.h&quot;
+#include &quot;Lua/LuaParser.h&quot;
+#include &quot;Lua/LuaSyncedRead.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Util.h&quot;
+
+
+SideParser sideParser;
+
+
+/******************************************************************************/
+
+SideParser::SideParser()
+{
+}
+
+
+SideParser::~SideParser()
+{
+}
+
+
+bool SideParser::Load()
+{
+	dataVec.clear();
+	errorLog.clear();
+
+	LuaParser parser(&quot;gamedata/sidedata.lua&quot;,
+	                 SPRING_VFS_MOD_BASE, SPRING_VFS_MOD_BASE);
+#if !defined UNITSYNC &amp;&amp; !defined DEDICATED
+	// this should not be included with unitsync:
+	// 1. avoids linkage with LuaSyncedRead
+	// 2. ModOptions are not valid during unitsync mod parsing
+	parser.GetTable(&quot;Spring&quot;);
+	parser.AddFunc(&quot;GetModOptions&quot;, LuaSyncedRead::GetModOptions);
+	parser.EndTable();
+#endif
+	if (!parser.Execute()) {
+		errorLog = parser.GetErrorLog();
+		return false;
+	}
+
+	set&lt;string&gt; sideSet;
+
+	const LuaTable root = parser.GetRoot();
+	for (int i = 1; /* no-op */; i++) {
+		const LuaTable sideTable = root.SubTable(i);
+		if (!sideTable.IsValid()) {
+			break;
+		}
+
+		Data data;
+		data.caseName  = sideTable.GetString(&quot;name&quot;, &quot;&quot;);
+		data.sideName  = StringToLower(data.caseName);
+		data.startUnit = sideTable.GetString(&quot;startUnit&quot;, &quot;&quot;);
+		data.startUnit = StringToLower(data.startUnit);
+
+		if (data.sideName.empty()) {
+			logOutput.Print(&quot;Missing side name: %i&quot;, i);
+		}
+		else if (data.startUnit.empty()) {
+			logOutput.Print(&quot;Missing side start unit: &quot; + data.sideName);
+		}
+		else {
+			if (sideSet.find(data.sideName) != sideSet.end()) {
+				logOutput.Print(&quot;Duplicate side name: &quot; + data.sideName);
+			}
+			else {
+				sideSet.insert(data.sideName);
+				dataVec.push_back(data);
+			}
+		}
+	}
+	return true;
+}
+
+ 
+/******************************************************************************/
+
+const SideParser::Data* SideParser::FindSide(const string&amp; sideName) const
+{
+	const string name = StringToLower(sideName);
+	for (unsigned int i = 0; i &lt; dataVec.size(); i++) {
+		const Data&amp; data = dataVec[i];
+		if (name == data.sideName) {
+			return &data;
+		}
+	}
+	return NULL;
+}
+
+
+const string&amp; SideParser::GetSideName(unsigned int index,
+                                      const string&amp; def) const
+{
+	if (!ValidSide(index)) {
+		return def;
+	}
+	return dataVec[index].sideName;
+}
+
+
+const string&amp; SideParser::GetCaseName(unsigned int index,
+                                      const string&amp; def) const
+{
+	if (!ValidSide(index)) {
+		return def;
+	}
+	return dataVec[index].caseName;
+}
+
+
+const string&amp; SideParser::GetCaseName(const string&amp; name,
+                                      const string&amp; def) const
+{
+	const Data* data = FindSide(name);
+	if (data == NULL) {
+		return def;
+	}
+	return data-&gt;caseName;
+}
+
+
+const string&amp; SideParser::GetStartUnit(unsigned int index,
+                                       const string&amp; def) const
+{
+	if (!ValidSide(index)) {
+		return def;
+	}
+	return dataVec[index].startUnit;
+}
+
+
+const string&amp; SideParser::GetStartUnit(const string&amp; name,
+                                       const string&amp; def) const
+{
+	const Data* data = FindSide(name);
+	if (data == NULL) {
+		return def;
+	}
+	return data-&gt;startUnit;
+}
+
+
+/******************************************************************************/


Property changes on: trunk/rts/Sim/Misc/SideParser.cpp
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/rts/Sim/Misc/SideParser.h (from rev 7004, trunk/rts/Sim/SideParser.h)
===================================================================
--- trunk/rts/Sim/Misc/SideParser.h	                        (rev 0)
+++ trunk/rts/Sim/Misc/SideParser.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -0,0 +1,54 @@
+
+#ifndef SIDE_PARSER_H
+#define SIDE_PARSER_H
+
+#include &lt;string&gt;
+#include &lt;vector&gt;
+
+
+class SideParser
+{
+	public:
+		SideParser();
+		~SideParser();
+
+		bool Load();
+		const std::string&amp; GetErrorLog() const { return errorLog; }
+
+		const unsigned int GetCount() const { return dataVec.size(); }
+
+		const std::string&amp; GetSideName(unsigned int index,
+		                               const std::string&amp; def = &quot;&quot;) const;
+		const std::string&amp; GetCaseName(unsigned int index,
+		                               const std::string&amp; def = &quot;&quot;) const;
+		const std::string&amp; GetCaseName(const std::string&amp; name,
+		                               const std::string&amp; def = &quot;&quot;) const;
+		const std::string&amp; GetStartUnit(unsigned int index,
+		                                const std::string&amp; def = &quot;&quot;) const;
+		const std::string&amp; GetStartUnit(const std::string&amp; name,
+		                                const std::string&amp; def = &quot;&quot;) const;
+
+		bool ValidSide(unsigned int index) const {
+			return (index &lt; dataVec.size());
+		}
+
+	private:
+		struct Data {
+			std::string caseName;  // full  case
+			std::string sideName;  // lower case
+			std::string startUnit; // lower case
+		};
+		typedef std::vector&lt;Data&gt; DataVec;
+
+		const Data* FindSide(const std::string&amp; sideName) const;
+
+	private:
+		DataVec dataVec;
+		std::string errorLog;
+};
+
+
+extern SideParser sideParser;
+
+
+#endif // SIDE_PARSER_H


Property changes on: trunk/rts/Sim/Misc/SideParser.h
___________________________________________________________________
Name: svn:mergeinfo
   + 

Copied: trunk/rts/Sim/Misc/Team.cpp (from rev 7001, trunk/rts/Game/Team.cpp)
===================================================================
--- trunk/rts/Sim/Misc/Team.cpp	                        (rev 0)
+++ trunk/rts/Sim/Misc/Team.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -0,0 +1,468 @@
+// Team.cpp: implementation of the CTeam class.
+//
+//////////////////////////////////////////////////////////////////////
+
+#include &quot;StdAfx.h&quot;
+#include &quot;mmgr.h&quot;
+
+#include &quot;Team.h&quot;
+
+#include &quot;Messages.h&quot;
+#include &quot;GlobalSynced.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Game/Player.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Game/UI/LuaUI.h&quot;
+#include &quot;Lua/LuaRules.h&quot;
+#include &quot;Sim/Units/Unit.h&quot;
+#include &quot;Sim/Units/UnitHandler.h&quot;
+#include &quot;Sim/Units/UnitDef.h&quot;
+#include &quot;ExternalAI/GlobalAI.h&quot;
+#include &quot;ExternalAI/GlobalAIHandler.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;creg/STL_List.h&quot;
+#include &quot;creg/STL_Map.h&quot;
+#include &quot;creg/STL_Set.h&quot;
+#include &quot;NetProtocol.h&quot;
+
+CR_BIND(CTeam,);
+
+CR_REG_METADATA(CTeam, (
+				CR_MEMBER(teamNum),
+				CR_RESERVED(1),
+				CR_MEMBER(isDead),
+				CR_MEMBER(gaia),
+				CR_MEMBER(color),
+				CR_MEMBER(leader),
+				CR_MEMBER(lineageRoot),
+				CR_MEMBER(handicap),
+				CR_MEMBER(side),
+				CR_MEMBER(isAI),
+				CR_MEMBER(luaAI),
+				CR_MEMBER(dllAI),
+				CR_MEMBER(units),
+				CR_MEMBER(startPos),
+				CR_MEMBER(metal),
+				CR_MEMBER(energy),
+				CR_MEMBER(metalPull),
+				CR_MEMBER(prevMetalPull),
+				CR_MEMBER(metalIncome),
+				CR_MEMBER(prevMetalIncome),
+				CR_MEMBER(metalExpense),
+				CR_MEMBER(prevMetalExpense),
+				CR_MEMBER(metalUpkeep),
+				CR_MEMBER(prevMetalUpkeep),
+				CR_MEMBER(energyPull),
+				CR_MEMBER(prevEnergyPull),
+				CR_MEMBER(energyIncome),
+				CR_MEMBER(prevEnergyIncome),
+				CR_MEMBER(energyExpense),
+				CR_MEMBER(prevEnergyExpense),
+				CR_MEMBER(energyUpkeep),
+				CR_MEMBER(prevEnergyUpkeep),
+				CR_MEMBER(metalStorage),
+				CR_MEMBER(energyStorage),
+				CR_MEMBER(metalShare),
+				CR_MEMBER(energyShare),
+				CR_MEMBER(delayedMetalShare),
+				CR_MEMBER(delayedEnergyShare),
+				CR_MEMBER(metalSent),
+				CR_MEMBER(metalReceived),
+				CR_MEMBER(energySent),
+				CR_MEMBER(energyReceived),
+				CR_MEMBER(currentStats),
+				CR_MEMBER(lastStatSave),
+				CR_MEMBER(numCommanders),
+				CR_MEMBER(statHistory),
+				CR_MEMBER(modParams),
+				CR_MEMBER(modParamsMap),
+				CR_RESERVED(64)
+				));
+
+CR_BIND(CTeam::Statistics,);
+
+CR_REG_METADATA_SUB(CTeam, Statistics, (
+					CR_MEMBER(metalUsed),
+					CR_MEMBER(energyUsed),
+					CR_MEMBER(metalProduced),
+					CR_MEMBER(energyProduced),
+					CR_MEMBER(metalExcess),
+					CR_MEMBER(energyExcess),
+					CR_MEMBER(metalReceived),
+					CR_MEMBER(energyReceived),
+					CR_MEMBER(metalSent),
+					CR_MEMBER(energySent),
+					CR_MEMBER(damageDealt),
+					CR_MEMBER(damageReceived),
+					CR_MEMBER(unitsProduced),
+					CR_MEMBER(unitsDied),
+					CR_MEMBER(unitsReceived),
+					CR_MEMBER(unitsSent),
+					CR_MEMBER(unitsCaptured),
+					CR_MEMBER(unitsOutCaptured),
+					CR_MEMBER(unitsKilled),
+					CR_RESERVED(16)
+					));
+
+//////////////////////////////////////////////////////////////////////
+// Construction/Destruction
+//////////////////////////////////////////////////////////////////////
+
+CTeam::CTeam()
+: gaia(false),
+  metal(200000),
+  energy(900000),
+  metalPull(0),     prevMetalPull(0),
+  metalIncome(0),   prevMetalIncome(0),
+  metalExpense(0),  prevMetalExpense(0),
+  metalUpkeep(0),   prevMetalUpkeep(0),
+  energyPull(0),    prevEnergyPull(0),
+  energyIncome(0),  prevEnergyIncome(0),
+  energyExpense(0), prevEnergyExpense(0),
+  energyUpkeep(0),  prevEnergyUpkeep(0),
+  metalStorage(1000000),
+  energyStorage(1000000),
+  metalShare(0.99f),
+  energyShare(0.95f),
+  delayedMetalShare(0),
+  delayedEnergyShare(0),
+  metalSent(0),
+  metalReceived(0),
+  energySent(0),
+  energyReceived(0),
+  side(&quot;arm&quot;),
+  isAI(false),
+  luaAI(&quot;&quot;),
+  dllAI(&quot;&quot;),
+  startPos(100,100,100),
+  handicap(1),
+  leader(-1),
+  lineageRoot(-1),
+  isDead(false),
+  lastStatSave(0),
+  numCommanders(0)
+{
+	memset(&amp;currentStats,0,sizeof(currentStats));
+	statHistory.push_back(currentStats);
+}
+
+
+CTeam::~CTeam()
+{
+}
+
+
+bool CTeam::UseMetal(float amount)
+{
+	if ((metal - (prevMetalUpkeep * 10)) &gt;= amount) {
+		metal -= amount;
+		metalExpense += amount;
+		return true;
+	}
+	return false;
+}
+
+
+bool CTeam::UseEnergy(float amount)
+{
+	if ((energy - (prevEnergyUpkeep * 10)) &gt;= amount) {
+		energy -= amount;
+		energyExpense += amount;
+		return true;
+	}
+	return false;
+}
+
+
+bool CTeam::UseMetalUpkeep(float amount)
+{
+	if (metal &gt;= amount) {
+		metal -= amount;
+		metalExpense += amount;
+		metalUpkeep += amount;
+		return true;
+	}
+	return false;
+}
+
+
+bool CTeam::UseEnergyUpkeep(float amount)
+{
+	if (energy &gt;= amount) {
+		energy -= amount;
+		energyExpense += amount;
+		energyUpkeep += amount;
+		return true;
+	}
+	return false;
+}
+
+
+void CTeam::AddMetal(float amount, bool hc)
+{
+	if (hc) { amount *= handicap; }
+	metal += amount;
+	metalIncome += amount;
+	if (metal &gt; metalStorage) {
+		delayedMetalShare += metal - metalStorage;
+		metal = metalStorage;
+	}
+}
+
+
+void CTeam::AddEnergy(float amount, bool hc)
+{
+	if (hc) { amount *= handicap; }
+	energy += amount;
+	energyIncome += amount;
+	if (energy &gt; energyStorage) {
+		delayedEnergyShare += energy - energyStorage;
+		energy = energyStorage;
+	}
+}
+
+void CTeam::GiveEverythingTo(const unsigned toTeam)
+{
+	CTeam* target = gs-&gt;Team(toTeam);
+
+	if (!target) {
+		logOutput.Print(&quot;Team %i didn't exists, can't give units&quot;, toTeam);
+		return;
+	}
+
+	if (!luaRules || luaRules-&gt;AllowResourceTransfer(teamNum, toTeam, &quot;m&quot;, metal)) {
+		target-&gt;metal += metal;
+		metal = 0;
+	}
+	if (!luaRules || luaRules-&gt;AllowResourceTransfer(teamNum, toTeam, &quot;e&quot;, energy)) {
+		target-&gt;energy += energy;
+		energy = 0;
+	}
+
+	for (CUnitSet::iterator ui = units.begin(); ui != units.end(); ) {
+		// must pass the normal checks, isDead, unit count restrictions, luaRules, etc...
+		CUnitSet::iterator next = ui; ++next;
+		(*ui)-&gt;ChangeTeam(toTeam, CUnit::ChangeGiven);
+		ui = next;
+	}
+
+	Died();
+}
+
+
+void CTeam::Died()
+{
+	if (leader &gt;= 0) {
+		logOutput.Print(CMessages::Tr(&quot;Team%i(%s) is no more&quot;).c_str(),
+		                teamNum, gs-&gt;players[leader]-&gt;name.c_str());
+	} else {
+		logOutput.Print(CMessages::Tr(&quot;Team%i is no more&quot;).c_str(), teamNum);
+	}
+	isDead = true;
+
+	// this message is not relayed to clients, it's only for the server
+	net-&gt;Send(CBaseNetProtocol::Get().SendTeamDied(gu-&gt;myPlayerNum, teamNum));
+
+	for (int a = 0; a &lt; MAX_PLAYERS; ++a) {
+		if (gs-&gt;players[a]-&gt;active &amp;&amp; (gs-&gt;players[a]-&gt;team == teamNum)) {
+			gs-&gt;players[a]-&gt;StartSpectating();
+		}
+	}
+	if (globalAI-&gt;ais[teamNum]) {
+		delete globalAI-&gt;ais[teamNum];
+		globalAI-&gt;ais[teamNum] = NULL;
+	}
+
+	CLuaUI::UpdateTeams();
+  CPlayer::UpdateControlledTeams();
+	eventHandler.TeamDied(teamNum);
+}
+
+void CTeam::StartposMessage(const float3&amp; pos, const bool isReady)
+{
+	readyToStart = isReady;
+	startPos = pos;
+}
+
+void CTeam::StartposMessage(const float3&amp; pos)
+{
+	startPos = pos;
+}
+
+/** This has to be called for every team before SlowUpdates start,
+	otherwise values get overwritten. */
+void CTeam::ResetFrameVariables()
+{
+	prevMetalPull     = metalPull;
+	prevMetalIncome   = metalIncome;
+	prevMetalExpense  = metalExpense;
+	prevMetalUpkeep   = metalUpkeep;
+	prevEnergyPull    = energyPull;
+	prevEnergyIncome  = energyIncome;
+	prevEnergyExpense = energyExpense;
+	prevEnergyUpkeep  = energyUpkeep;
+
+	metalPull = 0;
+	metalIncome = 0;
+	metalExpense = 0;
+	metalUpkeep = 0;
+	energyPull = 0;
+	energyIncome = 0;
+	energyExpense = 0;
+	energyUpkeep = 0;
+
+	metalSent = 0;
+	energySent = 0;
+	metalReceived = 0;
+	energyReceived = 0;
+}
+
+void CTeam::SlowUpdate()
+{
+	currentStats.metalProduced  += prevMetalIncome;
+	currentStats.energyProduced += prevEnergyIncome;
+	currentStats.metalUsed  += prevMetalUpkeep + prevMetalExpense;
+	currentStats.energyUsed += prevEnergyUpkeep + prevEnergyExpense;
+
+	float eShare = 0.0f, mShare = 0.0f;
+	for (int a = 0; a &lt; gs-&gt;activeTeams; ++a) {
+		if ((a != teamNum) &amp;&amp; (gs-&gt;AllyTeam(teamNum) == gs-&gt;AllyTeam(a))) {
+			CTeam* team = gs-&gt;Team(a);
+			eShare += std::max(0.0f, (team-&gt;energyStorage * 0.99f) - team-&gt;energy);
+			mShare += std::max(0.0f, (team-&gt;metalStorage  * 0.99f) - team-&gt;metal);
+		}
+	}
+
+	metal += delayedMetalShare;
+	energy += delayedEnergyShare;
+	delayedMetalShare = 0;
+	delayedEnergyShare = 0;
+
+	const float eExcess = std::max(0.0f, energy - (energyStorage * energyShare));
+	const float mExcess = std::max(0.0f, metal  - (metalStorage  * metalShare));
+
+	float de = 0.0f, dm = 0.0f;
+	if (eShare &gt; 0.0f) {
+		de = std::min(1.0f, eExcess/eShare);
+	}
+	if (mShare &gt; 0.0f) {
+		dm = std::min(1.0f, mExcess/mShare);
+	}
+	for (int a = 0; a &lt; gs-&gt;activeTeams; ++a) {
+		if ((a != teamNum) &amp;&amp; (gs-&gt;AllyTeam(teamNum) == gs-&gt;AllyTeam(a))) {
+			CTeam* team = gs-&gt;Team(a);
+
+			const float edif = std::max(0.0f, (team-&gt;energyStorage * 0.99f) - team-&gt;energy) * de;
+			energy -= edif;
+			energySent += edif;
+			currentStats.energySent += edif;
+			team-&gt;energy += edif;
+			team-&gt;energyReceived += edif;
+			team-&gt;currentStats.energyReceived += edif;
+
+			const float mdif = std::max(0.0f, (team-&gt;metalStorage * 0.99f) - team-&gt;metal) * dm;
+			metal -= mdif;
+			metalSent += mdif;
+			currentStats.metalSent += mdif;
+			team-&gt;metal += mdif;
+			team-&gt;metalReceived += mdif;
+			team-&gt;currentStats.metalReceived += mdif;
+		}
+	}
+
+	if (metal &gt; metalStorage) {
+		currentStats.metalExcess += (metal - metalStorage);
+		metal = metalStorage;
+	}
+	if (energy &gt; energyStorage) {
+		currentStats.energyExcess += (energy - energyStorage);
+		energy = energyStorage;
+	}
+
+	const int statsFrames = (statsPeriod * GAME_SPEED);
+	if ((lastStatSave + statsFrames) &lt; gs-&gt;frameNum) {
+		lastStatSave += statsFrames;
+		statHistory.push_back(currentStats);
+	}
+
+	/* Kill the player on 'com dies = game ends' games.  This can't be done in
+	CTeam::CommanderDied anymore, because that function is called in
+	CUnit::ChangeTeam(), hence it'd cause a random amount of the shared units
+	to be killed if the commander is among them. Also, &quot;.take&quot; would kill all
+	units once it transfered the commander. */
+	if (gs-&gt;gameMode==1 &amp;&amp; numCommanders&lt;=0 &amp;&amp; !gaia){
+		for(std::list&lt;CUnit*&gt;::iterator ui=uh-&gt;activeUnits.begin();ui!=uh-&gt;activeUnits.end();++ui){
+			if ((*ui)-&gt;team==teamNum &amp;&amp; !(*ui)-&gt;unitDef-&gt;isCommander)
+				(*ui)-&gt;KillUnit(true,false,0);
+		}
+		// Set to 1 to prevent above loop from being done every update.
+		numCommanders = 1;
+	}
+}
+
+
+void CTeam::AddUnit(CUnit* unit,AddType type)
+{
+	units.insert(unit);
+	switch (type) {
+		case AddBuilt: {
+			currentStats.unitsProduced++;
+			break;
+		}
+		case AddGiven: {
+			currentStats.unitsReceived++;
+			break;
+		}
+		case AddCaptured: {
+			currentStats.unitsCaptured++;
+			break;
+		}
+	}
+	if (unit-&gt;unitDef-&gt;isCommander) {
+		numCommanders++;
+	}
+}
+
+
+void CTeam::RemoveUnit(CUnit* unit,RemoveType type)
+{
+	units.erase(unit);
+	switch (type) {
+		case RemoveDied: {
+			currentStats.unitsDied++;
+			break;
+		}
+		case RemoveGiven: {
+			currentStats.unitsSent++;
+			break;
+		}
+		case RemoveCaptured: {
+			currentStats.unitsOutCaptured++;
+			break;
+		}
+	}
+
+	if (units.empty() &amp;&amp; !gaia) {
+		Died();
+	}
+}
+
+
+void CTeam::CommanderDied(CUnit* commander)
+{
+	assert(commander-&gt;unitDef-&gt;isCommander);
+	--numCommanders;
+}
+
+
+void CTeam::LeftLineage(CUnit* unit)
+{
+	if (gs-&gt;gameMode == 2 &amp;&amp; unit-&gt;id == this-&gt;lineageRoot) {
+		for (std::list&lt;CUnit*&gt;::iterator ui = uh-&gt;activeUnits.begin(); ui != uh-&gt;activeUnits.end(); ++ui) {
+			if ((*ui)-&gt;lineage == this-&gt;teamNum)
+				(*ui)-&gt;KillUnit(true, false, 0);
+		}
+	}
+}
+


Property changes on: trunk/rts/Sim/Misc/Team.cpp
___________________________________________________________________
Name: svn:mime-type
   + text/cpp
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Copied: trunk/rts/Sim/Misc/Team.h (from rev 7001, trunk/rts/Game/Team.h)
===================================================================
--- trunk/rts/Sim/Misc/Team.h	                        (rev 0)
+++ trunk/rts/Sim/Misc/Team.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -0,0 +1,160 @@
+#ifndef TEAM_H
+#define TEAM_H
+// Team.h: interface for the CTeam class.
+//
+//////////////////////////////////////////////////////////////////////
+
+#include &lt;string&gt;
+#include &lt;vector&gt;
+#include &lt;map&gt;
+#include &lt;list&gt;
+#include &quot;Platform/byteorder.h&quot;
+#include &quot;Sim/Units/UnitSet.h&quot;
+
+class CTeam
+{
+public:
+	CR_DECLARE(CTeam);
+	CR_DECLARE_SUB(Statistics);
+	CTeam();
+	~CTeam();
+	void ResetFrameVariables();
+	void SlowUpdate();
+
+
+	void AddMetal(float amount, bool handicap = true);
+	void AddEnergy(float amount, bool handicap = true);
+	bool UseEnergy(float amount);
+	bool UseMetal(float amount);
+	bool UseEnergyUpkeep(float amount);
+	bool UseMetalUpkeep(float amount);
+
+	void SetBaseMetalStorage(float storage) {metalStorage = storage;};
+	void SetBaseEnergyStorage(float storage) {energyStorage = storage;};
+
+	void GiveEverythingTo(const unsigned toTeam);
+
+	void Died();
+
+	void StartposMessage(const float3&amp; pos, const bool isReady);
+	void StartposMessage(const float3&amp; pos);
+
+	inline bool IsReadyToStart() const {return readyToStart;};
+	enum AddType{
+		AddBuilt,
+		AddCaptured,
+		AddGiven
+	};
+
+	enum RemoveType{
+		RemoveDied,
+		RemoveCaptured,
+		RemoveGiven
+	};
+
+	void AddUnit(CUnit* unit,AddType type);
+	void RemoveUnit(CUnit* unit,RemoveType type);
+
+	int teamNum;
+	bool isDead;
+	bool gaia;
+	int leader;
+	int lineageRoot;
+
+	float handicap;
+	std::string side;
+
+	bool isAI;
+	std::string luaAI;
+	std::string dllAI;
+
+	// color info is unsynced
+	unsigned char color[4];
+	unsigned char origColor[4];
+
+	CUnitSet units;
+
+	float3 startPos;
+
+	SyncedFloat metal;
+	SyncedFloat energy;
+
+	float metalPull,    prevMetalPull;
+	float metalIncome,  prevMetalIncome;
+	float metalExpense, prevMetalExpense;
+	float metalUpkeep,  prevMetalUpkeep;
+
+	float energyPull,    prevEnergyPull;
+	float energyIncome,  prevEnergyIncome;
+	float energyExpense, prevEnergyExpense;
+	float energyUpkeep,  prevEnergyUpkeep;
+
+	SyncedFloat metalStorage, energyStorage;
+
+	float metalShare, energyShare;
+	SyncedFloat delayedMetalShare, delayedEnergyShare; //excess that might be shared next SlowUpdate
+
+	float metalSent;
+	float metalReceived;
+	float energySent;
+	float energyReceived;
+
+
+	struct Statistics {
+		CR_DECLARE_STRUCT(Statistics);
+		float metalUsed,     energyUsed;
+		float metalProduced, energyProduced;
+		float metalExcess,   energyExcess;
+		float metalReceived, energyReceived; //received from allies
+		float metalSent,     energySent;     //sent to allies
+
+		float damageDealt,   damageReceived; // Damage taken and dealt to enemy units
+
+		int unitsProduced;
+		int unitsDied;
+		int unitsReceived;
+		int unitsSent;
+		int unitsCaptured;				//units captured from enemy by us
+		int unitsOutCaptured;			//units captured from us by enemy
+		int unitsKilled;	//how many enemy units have been killed by this teams units
+
+		/// Change structure from host endian to little endian or vice versa.
+		void swab() {
+			metalUsed        = swabfloat(metalUsed);
+			energyUsed       = swabfloat(energyUsed);
+			metalProduced    = swabfloat(metalProduced);
+			energyProduced   = swabfloat(energyProduced);
+			metalExcess      = swabfloat(metalExcess);
+			energyExcess     = swabfloat(energyExcess);
+			metalReceived    = swabfloat(metalReceived);
+			energyReceived   = swabfloat(energyReceived);
+			metalSent        = swabfloat(metalSent);
+			energySent       = swabfloat(energySent);
+			damageDealt      = swabfloat(damageDealt);
+			damageReceived   = swabfloat(damageReceived);
+			unitsProduced    = swabdword(unitsProduced);
+			unitsDied        = swabdword(unitsDied);
+			unitsReceived    = swabdword(unitsReceived);
+			unitsSent        = swabdword(unitsSent);
+			unitsCaptured    = swabdword(unitsCaptured);
+			unitsOutCaptured = swabdword(unitsOutCaptured);
+			unitsKilled      = swabdword(unitsKilled);
+		}
+	};
+	Statistics currentStats;
+	static const int statsPeriod = 15; // every 15th second
+
+	int lastStatSave;
+	int numCommanders;		//number of units with commander tag in team, if it reaches zero with cmd ends the team dies
+	std::list&lt;Statistics&gt; statHistory;
+	void CommanderDied(CUnit* commander);
+	void LeftLineage(CUnit* unit);
+
+	std::vector&lt;float&gt;         modParams;    // mod controlled parameters
+	std::map&lt;std::string, int&gt; modParamsMap; // name map for mod parameters
+
+private:
+	bool readyToStart;
+};
+
+#endif /* TEAM_H */


Property changes on: trunk/rts/Sim/Misc/Team.h
___________________________________________________________________
Name: svn:mime-type
   + text/cpp
Name: svn:mergeinfo
   + 
Name: svn:eol-style
   + native

Modified: trunk/rts/Sim/Misc/Wind.cpp
===================================================================
--- trunk/rts/Sim/Misc/Wind.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Misc/Wind.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,7 +2,7 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;Wind.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;GlobalSynced.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 

Deleted: trunk/rts/Sim/ModInfo.cpp
===================================================================
--- trunk/rts/Sim/ModInfo.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/ModInfo.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,129 +0,0 @@
-
-#include &quot;StdAfx.h&quot;
-#include &quot;mmgr.h&quot;
-
-#include &quot;GlobalUnsynced.h&quot;
-#include &quot;ModInfo.h&quot;
-#include &quot;Game/GameSetup.h&quot;
-#include &quot;Lua/LuaParser.h&quot;
-#include &quot;Lua/LuaSyncedRead.h&quot;
-#include &quot;Sim/Units/Unit.h&quot;
-#include &quot;Sim/Units/UnitTypes/Builder.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;System/FileSystem/ArchiveScanner.h&quot;
-#include &quot;System/Exceptions.h&quot;
-
-
-CModInfo modInfo;
-
-
-void CModInfo::Init(const char* modname)
-{
-	filename = modname;
-
-	humanName = archiveScanner-&gt;ModArchiveToModName(modname);
-
-	const CArchiveScanner::ModData md = archiveScanner-&gt;ModArchiveToModData(modname);
-
-	shortName   = md.shortName;
-	version     = md.version;
-	mutator     = md.mutator;
-	description = md.description;
-
-	// initialize the parser
-	LuaParser parser(&quot;gamedata/modrules.lua&quot;,
-	                 SPRING_VFS_MOD_BASE, SPRING_VFS_ZIP);
-	// customize the defs environment
-	parser.GetTable(&quot;Spring&quot;);
-	parser.AddFunc(&quot;GetModOptions&quot;, LuaSyncedRead::GetModOptions);
-	parser.EndTable();
-	parser.Execute();
-	if (!parser.IsValid()) {
-		logOutput.Print(&quot;Error loading modrules, using defaults&quot;);
-		logOutput.Print(parser.GetErrorLog());
-	}
-	const LuaTable root = parser.GetRoot();
-
-	// determine whether the modder allows the user to use team coloured nanospray
-	const LuaTable nanosprayTbl = root.SubTable(&quot;nanospray&quot;);
-	allowTeamColors = nanosprayTbl.GetBool(&quot;allow_team_colors&quot;, true);
-	if (allowTeamColors) {
-		// Load the users preference for team coloured nanospray
-		gu-&gt;teamNanospray = !!configHandler.GetInt(&quot;TeamNanoSpray&quot;, 0);
-	}
-
-	// constructions
-	const LuaTable constructionTbl = root.SubTable(&quot;construction&quot;);
-	constructionDecay = constructionTbl.GetBool(&quot;constructionDecay&quot;, true);
-	constructionDecayTime = (int)(constructionTbl.GetFloat(&quot;constructionDecayTime&quot;, 6.66) * 30);
-	constructionDecaySpeed = constructionTbl.GetFloat(&quot;constructionDecaySpeed&quot;, 0.03);
-
-	// reclaim
-	const LuaTable reclaimTbl = root.SubTable(&quot;reclaim&quot;);
-	multiReclaim  = reclaimTbl.GetInt(&quot;multiReclaim&quot;,  0);
-	reclaimMethod = reclaimTbl.GetInt(&quot;reclaimMethod&quot;, 1);
-	reclaimUnitMethod = reclaimTbl.GetInt(&quot;unitMethod&quot;, 1);
-	reclaimUnitEnergyCostFactor = reclaimTbl.GetFloat(&quot;unitEnergyCostFactor&quot;, 0.0);
-	reclaimUnitEfficiency = reclaimTbl.GetFloat(&quot;unitEfficiency&quot;, 1.0);
-	reclaimFeatureEnergyCostFactor = reclaimTbl.GetFloat(&quot;featureEnergyCostFactor&quot;, 0.0);
-	reclaimAllowEnemies = reclaimTbl.GetBool(&quot;allowEnemies&quot;, true);
-	reclaimAllowAllies = reclaimTbl.GetBool(&quot;allowAllies&quot;, true);
-
-	// repair
-	const LuaTable repairTbl = root.SubTable(&quot;repair&quot;);
-	repairEnergyCostFactor = repairTbl.GetFloat(&quot;energyCostFactor&quot;, 0.0);
-
-	// resurrect
-	const LuaTable resurrectTbl = root.SubTable(&quot;resurrect&quot;);
-	resurrectEnergyCostFactor  = resurrectTbl.GetFloat(&quot;energyCostFactor&quot;,  0.5);
-
-	// capture
-	const LuaTable captureTbl = root.SubTable(&quot;capture&quot;);
-	captureEnergyCostFactor = captureTbl.GetFloat(&quot;energyCostFactor&quot;, 0.0);
-
-	// fire-at-dead-units
-	const LuaTable fireAtDeadTbl = root.SubTable(&quot;fireAtDead&quot;);
-	fireAtKilled   = fireAtDeadTbl.GetBool(&quot;fireAtKilled&quot;, false);
-	fireAtCrashing = fireAtDeadTbl.GetBool(&quot;fireAtCrashing&quot;, false);
-
-	// transportability
-	const LuaTable transportTbl = root.SubTable(&quot;transportability&quot;);
-	transportAir    = transportTbl.GetInt(&quot;transportAir&quot;,   false);
-	transportShip   = transportTbl.GetInt(&quot;transportShip&quot;,  false);
-	transportHover  = transportTbl.GetInt(&quot;transportHover&quot;, false);
-	transportGround = transportTbl.GetInt(&quot;transportGround&quot;, true);
-
-	// experience
-	const LuaTable experienceTbl = root.SubTable(&quot;experience&quot;);
-	CUnit::SetExpMultiplier (experienceTbl.GetFloat(&quot;experienceMult&quot;, 1.0f));
-	CUnit::SetExpPowerScale (experienceTbl.GetFloat(&quot;powerScale&quot;,  1.0f));		
-	CUnit::SetExpHealthScale(experienceTbl.GetFloat(&quot;healthScale&quot;, 0.7f));		
-	CUnit::SetExpReloadScale(experienceTbl.GetFloat(&quot;reloadScale&quot;, 0.4f));
-
-	// flanking bonus
-	const LuaTable flankingBonusTbl = root.SubTable(&quot;flankingBonus&quot;);
-	flankingBonusModeDefault = flankingBonusTbl.GetInt(&quot;defaultMode&quot;, 1);
-	
-	// sensors
-	const LuaTable sensors = root.SubTable(&quot;sensors&quot;);
-	requireSonarUnderWater = sensors.GetBool(&quot;requireSonarUnderWater&quot;, true);
-	/// LoS
-	const LuaTable los = sensors.SubTable(&quot;los&quot;);
-	// losMipLevel is used as index to readmap-&gt;mipHeightmap,
-	// so the max value is CReadMap::numHeightMipMaps - 1
-	losMipLevel = los.GetInt(&quot;losMipLevel&quot;, 1);
-	losMul = los.GetFloat(&quot;losMul&quot;, 1.0f);
-	if ((losMipLevel &lt; 0) || (losMipLevel &gt; 6)) {
-		throw content_error(&quot;Sensors\\Los\\LosMipLevel out of bounds. &quot;
-		                    &quot;The minimum value is 0. The maximum value is 6.&quot;);
-	}
-	// airLosMipLevel doesn't have such restrictions, it's just used in various
-	// bitshifts with signed integers
-	airMipLevel = los.GetInt(&quot;airMipLevel&quot;, 2);
-	if ((airMipLevel &lt; 0) || (airMipLevel &gt; 30)) {
-		throw content_error(&quot;Sensors\\Los\\AirLosMipLevel out of bounds. &quot;
-		                    &quot;The minimum value is 0. The maximum value is 30.&quot;);
-	}
-	airLosMul = los.GetFloat(&quot;airLosMul&quot;, 1.0f);
-}

Deleted: trunk/rts/Sim/ModInfo.h
===================================================================
--- trunk/rts/Sim/ModInfo.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/ModInfo.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,75 +0,0 @@
-
-#ifndef MOD_INFO_H
-#define MOD_INFO_H
-
-class CModInfo
-{
-public:
-	CModInfo() {};
-	~CModInfo() {};
-
-	void Init(const char* modname);
-
-	std::string filename; // archive filename
-
-	std::string humanName;
-	std::string shortName;
-	std::string version;
-	std::string mutator;
-	std::string description;
-
-	bool allowTeamColors;
-	
-	// Build behaviour
-	bool constructionDecay;               // Should constructions without builders decay?
-	int constructionDecayTime;            // How long until they start decaying?
-	float constructionDecaySpeed;         // How fast do they decay?
-
-	// Reclaim behaviour
-	int multiReclaim;	                  // 0 = 1 reclaimer per feature max, otherwise unlimited
-	int reclaimMethod;	                  // 0 = gradual reclaim, 1 = all reclaimed at end, otherwise reclaim in reclaimMethod chunks
-	int reclaimUnitMethod;                // 0 = Revert to wireframe, gradual reclaim, 1 = Subtract HP, give full metal at end, default 1
-	float reclaimUnitEnergyCostFactor;    // How much energy should reclaiming a unit cost, default 0.0
-	float reclaimUnitEfficiency;          // How much metal should reclaim return, default 1.0
-	float reclaimFeatureEnergyCostFactor; // How much should energy should reclaiming a feature cost, default 0.0
-	bool reclaimAllowEnemies;             // Allow reclaiming enemies? default true
-	bool reclaimAllowAllies;              // Allow reclaiming allies? default true
-
-	// Repair behaviour
-	float repairEnergyCostFactor;         // How much should energy should repair cost, default 0.0
-
-	// Resurrect behaviour
-	float resurrectEnergyCostFactor;      // How much should energy should resurrect cost, default 0.5
-
-	// Capture behaviour
-	float captureEnergyCostFactor;        // How much should energy should capture cost, default 0.0
-
-	// Transportation behaviour
-	int transportGround;                  // 0 = all ground units cannot be transported, 1 = all ground units can be transported (mass and size restrictions still apply). Defaults to 1.
-	int transportHover;                   // 0 = all hover units cannot be transported, 1 = all hover units can be transported (mass and size restrictions still apply). Defaults to 0.
-	int transportShip;                    // 0 = all naval units cannot be transported, 1 = all naval units can be transported (mass and size restrictions still apply). Defaults to 0.
-	int transportAir;                     // 0 = all air units cannot be transported, 1 = all air units can be transported (mass and size restrictions still apply). Defaults to 0.
-
-	// Fire-on-dying-units behaviour
-	int fireAtKilled;                     // 1 = units fire at enemies running Killed() script, 0 = units ignore such enemies
-	int fireAtCrashing;                   // 1 = units fire at crashing aircrafts, 0 = units ignore crashing aircrafts
-
-	int flankingBonusModeDefault;         // 0=no flanking bonus;  1=global coords, mobile;  2=unit coords, mobile;  3=unit coords, locked
-	
-	// Sensor behaviour
-	/// miplevel for los
-	int losMipLevel;
-	/// miplevel to use for airlos
-	int airMipLevel;
-	/// units sightdistance will be multiplied with this, for testing purposes
-	float losMul;
-	/// units airsightdistance will be multiplied with this, for testing purposes
-	float airLosMul;
-	/// when underwater, units are not in LOS unless also in sonar
-	bool requireSonarUnderWater;
-};
-
-extern CModInfo modInfo;
-
-
-#endif

Modified: trunk/rts/Sim/MoveTypes/GroundMoveType.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/GroundMoveType.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/MoveTypes/GroundMoveType.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -30,11 +30,11 @@
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Sound.h&quot;
-#include &quot;System/FastMath.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Sound.h&quot;
+#include &quot;FastMath.h&quot;
 #include &quot;myMath.h&quot;
 
 CR_BIND_DERIVED(CGroundMoveType, AMoveType, (NULL));

Modified: trunk/rts/Sim/MoveTypes/MoveInfo.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/MoveInfo.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/MoveTypes/MoveInfo.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #include &quot;MoveMath/MoveMath.h&quot;
 #include &quot;creg/STL_Deque.h&quot;
 #include &quot;creg/STL_Map.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using std::min;
 using std::max;

Modified: trunk/rts/Sim/MoveTypes/MoveType.h
===================================================================
--- trunk/rts/Sim/MoveTypes/MoveType.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/MoveTypes/MoveType.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 #include &quot;creg/creg.h&quot;
 #include &quot;Object.h&quot;
 #include &quot;Sim/Misc/AirBaseHandler.h&quot;
-#include &quot;System/float3.h&quot;
+#include &quot;float3.h&quot;
 
 class CUnit;
 

Modified: trunk/rts/Sim/MoveTypes/ScriptMoveType.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/ScriptMoveType.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/MoveTypes/ScriptMoveType.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,5 +1,5 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;System/mmgr.h&quot;
+#include &quot;mmgr.h&quot;
 
 #include &quot;ScriptMoveType.h&quot;
 
@@ -15,9 +15,9 @@
 #include &quot;Sim/Misc/RadarHandler.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/UnitTypes/Building.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Matrix44f.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Matrix44f.h&quot;
+#include &quot;myMath.h&quot;
 
 CR_BIND_DERIVED(CScriptMoveType, AMoveType, (NULL));
 

Modified: trunk/rts/Sim/MoveTypes/TAAirMoveType.cpp
===================================================================
--- trunk/rts/Sim/MoveTypes/TAAirMoveType.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/MoveTypes/TAAirMoveType.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -16,9 +16,9 @@
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
 #include &quot;Sim/Units/COB/CobFile.h&quot;
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/myMath.h&quot;
-#include &quot;System/Matrix44f.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;myMath.h&quot;
+#include &quot;Matrix44f.h&quot;
 
 
 CR_BIND_DERIVED(CTAAirMoveType, AAirMoveType, (NULL));

Modified: trunk/rts/Sim/Path/PathCache.cpp
===================================================================
--- trunk/rts/Sim/Path/PathCache.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Path/PathCache.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 
 #include &quot;PathCache.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;LogOutput.h&quot;
 
 using namespace std;

Modified: trunk/rts/Sim/Path/PathCache.h
===================================================================
--- trunk/rts/Sim/Path/PathCache.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Path/PathCache.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,7 +5,7 @@
 #include &lt;list&gt;
 
 #include &quot;IPath.h&quot;
-#include &quot;System/Vec2.h&quot;
+#include &quot;Vec2.h&quot;
 
 class CPathCache
 {

Modified: trunk/rts/Sim/Path/PathManager.cpp
===================================================================
--- trunk/rts/Sim/Path/PathManager.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Path/PathManager.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 
 #include &quot;PathManager.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;myMath.h&quot;
 #include &quot;Sim/MoveTypes/MoveInfo.h&quot;
 #include &quot;Sim/MoveTypes/MoveMath/GroundMoveMath.h&quot;
 #include &quot;Sim/MoveTypes/MoveMath/HoverMoveMath.h&quot;

Modified: trunk/rts/Sim/Projectiles/ExpGenSpawner.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/ExpGenSpawner.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/ExpGenSpawner.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,6 +1,6 @@
 #include &quot;StdAfx.h&quot;
 #include &quot;ExpGenSpawner.h&quot;
-#include &quot;Sim/Projectiles/ExplosionGenerator.h&quot;
+#include &quot;ExplosionGenerator.h&quot;
 
 CR_BIND_DERIVED(CExpGenSpawner, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/ExplosionGenerator.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/ExplosionGenerator.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/ExplosionGenerator.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,18 +14,18 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/GroundFlash.h&quot;
 #include &quot;Rendering/Textures/ColorMap.h&quot;
-#include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;Sim/Projectiles/Unsynced/BubbleProjectile.h&quot;
-#include &quot;Sim/Projectiles/Unsynced/DirtProjectile.h&quot;
-#include &quot;Sim/Projectiles/Unsynced/ExploSpikeProjectile.h&quot;
-#include &quot;Sim/Projectiles/Unsynced/HeatCloudProjectile.h&quot;
-#include &quot;Sim/Projectiles/Unsynced/SmokeProjectile2.h&quot;
-#include &quot;Sim/Projectiles/Unsynced/SpherePartProjectile.h&quot;
-#include &quot;Sim/Projectiles/Unsynced/WakeProjectile.h&quot;
-#include &quot;Sim/Projectiles/Unsynced/WreckProjectile.h&quot;
+#include &quot;ProjectileHandler.h&quot;
+#include &quot;Unsynced/BubbleProjectile.h&quot;
+#include &quot;Unsynced/DirtProjectile.h&quot;
+#include &quot;Unsynced/ExploSpikeProjectile.h&quot;
+#include &quot;Unsynced/HeatCloudProjectile.h&quot;
+#include &quot;Unsynced/SmokeProjectile2.h&quot;
+#include &quot;Unsynced/SpherePartProjectile.h&quot;
+#include &quot;Unsynced/WakeProjectile.h&quot;
+#include &quot;Unsynced/WreckProjectile.h&quot;
 #include &lt;assert.h&gt;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using std::min;
 using std::max;

Modified: trunk/rts/Sim/Projectiles/FireProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/FireProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/FireProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,12 +5,12 @@
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Game/Camera.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Sim/Misc/QuadField.h&quot;
 #include &quot;Sim/Features/Feature.h&quot;
 #include &quot;ProjectileHandler.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;creg/STL_List.h&quot;
 
 CR_BIND_DERIVED(CFireProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),NULL,0,0,0,0));

Modified: trunk/rts/Sim/Projectiles/FlareProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/FlareProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/FlareProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,7 +2,7 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;FlareProjectile.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/MapInfo.h&quot;
@@ -12,7 +12,7 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;WeaponProjectiles/MissileProjectile.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CFlareProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),0,0));
 

Modified: trunk/rts/Sim/Projectiles/PieceProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/PieceProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/PieceProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;GlobalUnsynced.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/MapInfo.h&quot;
@@ -22,7 +22,7 @@
 #include &quot;Sync/SyncTracer.h&quot;
 #include &quot;Unsynced/SmokeProjectile.h&quot;
 #include &quot;Unsynced/SmokeTrailProjectile.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 static const float Smoke_Time = 40;
 

Modified: trunk/rts/Sim/Projectiles/Projectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Projectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Projectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,7 +13,7 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;Rendering/UnitModels/3DModelParser.h&quot;
 #include &quot;Map/MapInfo.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CProjectile, CExpGenSpawnable, );
 

Modified: trunk/rts/Sim/Projectiles/ProjectileHandler.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/ProjectileHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/ProjectileHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -30,16 +30,16 @@
 #include &quot;Sim/Misc/CollisionVolume.h&quot;
 #include &quot;Sim/Misc/LosHandler.h&quot;
 #include &quot;Sim/Misc/QuadField.h&quot;
-#include &quot;Sim/Projectiles/Unsynced/ShieldPartProjectile.h&quot;
+#include &quot;Unsynced/ShieldPartProjectile.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitDef.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/TimeProfiler.h&quot;
-#include &quot;System/creg/STL_Map.h&quot;
-#include &quot;System/creg/STL_List.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;TimeProfiler.h&quot;
+#include &quot;creg/STL_Map.h&quot;
+#include &quot;creg/STL_List.h&quot;
+#include &quot;Exceptions.h&quot;
 
 CProjectileHandler* ph;
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/BitmapMuzzleFlame.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/BitmapMuzzleFlame.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/BitmapMuzzleFlame.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,12 +2,12 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;BitmapMuzzleFlame.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Rendering/Textures/ColorMap.h&quot;
 #include &quot;Rendering/Textures/TextureAtlas.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CBitmapMuzzleFlame, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/BubbleProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/BubbleProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/BubbleProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,7 +5,7 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CBubbleProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),0,0,0,NULL,0));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/DirtProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/DirtProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/DirtProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CDirtProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/ExploSpikeProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/ExploSpikeProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/ExploSpikeProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,7 +5,7 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CExploSpikeProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/GenericParticleProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/GenericParticleProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/GenericParticleProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,7 +3,7 @@
 
 #include &quot;Game/Camera.h&quot;
 #include &quot;GenericParticleProjectile.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Rendering/Textures/ColorMap.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;

Modified: trunk/rts/Sim/Projectiles/Unsynced/GeoSquareProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/GeoSquareProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/GeoSquareProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,7 +5,7 @@
 #include &quot;GeoSquareProjectile.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CGeoSquareProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),float3(0,0,0),0,0));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/GfxProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/GfxProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/GfxProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,12 +4,12 @@
 //////////////////////////////////////////////////////////////////////
 #include &quot;mmgr.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;GfxProjectile.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CGfxProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/HeatCloudProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/HeatCloudProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/HeatCloudProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;HeatCloudProjectile.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CHeatCloudProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/MuzzleFlame.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/MuzzleFlame.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/MuzzleFlame.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,7 +5,7 @@
 #include &quot;MuzzleFlame.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 
 CR_BIND_DERIVED(CMuzzleFlame, CProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),0));

Modified: trunk/rts/Sim/Projectiles/Unsynced/RepulseGfx.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/RepulseGfx.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/RepulseGfx.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CRepulseGfx, CProjectile, (NULL,NULL,0,float3(0,0,0)));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/ShieldPartProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/ShieldPartProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/ShieldPartProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Rendering/Textures/TextureAtlas.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CShieldPartProjectile, CProjectile, (float3(0,0,0),0,0,0,float3(0,0,0),0,NULL,NULL));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/SimpleParticleSystem.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SimpleParticleSystem.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/SimpleParticleSystem.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,9 +2,9 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;Game/Camera.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;GenericParticleProjectile.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Rendering/Textures/ColorMap.h&quot;
 #include &quot;SimpleParticleSystem.h&quot;

Modified: trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CSmokeProjectile, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile2.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile2.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/SmokeProjectile2.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CSmokeProjectile2, CProjectile, );
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/SmokeTrailProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SmokeTrailProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/SmokeTrailProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -15,7 +15,7 @@
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CSmokeTrailProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),float3(0,0,0),NULL,0,0,0,0,0,0,NULL,NULL));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/SpherePartProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/SpherePartProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/SpherePartProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,12 +2,12 @@
 #include &lt;algorithm&gt;
 #include &quot;mmgr.h&quot;
 
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;SpherePartProjectile.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 using std::min;
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/TracerProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/TracerProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/TracerProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,7 +7,7 @@
 
 #include &quot;TracerProjectile.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;			// Header File For The OpenGL32 Library
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CTracerProjectile, CProjectile, )
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/WakeProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/WakeProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/WakeProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -2,13 +2,13 @@
 #include &quot;mmgr.h&quot;
 
 #include &quot;Game/Camera.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;Rendering/Env/BaseWater.h&quot;
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;WakeProjectile.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CWakeProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),0,0,NULL,0,0,0));
 

Modified: trunk/rts/Sim/Projectiles/Unsynced/WreckProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/Unsynced/WreckProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/Unsynced/WreckProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,7 +13,7 @@
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;SmokeProjectile.h&quot;
 #include &quot;WreckProjectile.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CWreckProjectile, CProjectile, (float3(0,0,0),float3(0,0,0),0,0));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/EmgProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/EmgProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/EmgProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CEmgProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),NULL,float3(0,0,0),0,0,NULL));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/ExplosiveProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/ExplosiveProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/ExplosiveProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,7 +14,7 @@
 #include &quot;Sim/Misc/InterceptHandler.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 #ifdef TRACE_SYNC
 	#include &quot;Sync/SyncTracer.h&quot;

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/FireBallProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/FireBallProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/FireBallProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,7 +9,7 @@
 #include &quot;Rendering/GL/VertexArray.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CFireBallProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),NULL,NULL,float3(0,0,0),NULL));
 CR_BIND(CFireBallProjectile::Spark, );

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/FlameProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/FlameProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/FlameProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;Rendering/Textures/ColorMap.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CFlameProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),NULL,NULL,0));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/LargeBeamLaserProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/LargeBeamLaserProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/LargeBeamLaserProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CLargeBeamLaserProjectile, CWeaponProjectile, (float3(0,0,0),float3(0,0,0),float3(0,0,0),float3(0,0,0),NULL,NULL));
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/LaserProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/LaserProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/LaserProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,7 +9,7 @@
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Projectiles/Unsynced/SimpleParticleSystem.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 #ifdef TRACE_SYNC
 	#include &quot;Sync/SyncTracer.h&quot;

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/LightningProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/LightningProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/LightningProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,7 +7,7 @@
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 
 #ifdef TRACE_SYNC
 	#include &quot;Sync/SyncTracer.h&quot;

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/MissileProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/MissileProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/MissileProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -21,7 +21,7 @@
 #include &quot;Sync/SyncTracer.h&quot;
 #include &quot;Rendering/UnitModels/s3oParser.h&quot;
 #include &quot;Rendering/UnitModels/3DOParser.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 static const float Smoke_Time=60;
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/StarburstProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/StarburstProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/StarburstProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -18,7 +18,7 @@
 #include &quot;StarburstProjectile.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
 #include &quot;Rendering/UnitModels/s3oParser.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 static const float Smoke_Time=70;
 

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/TorpedoProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/TorpedoProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/TorpedoProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,7 +13,7 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;TorpedoProjectile.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 #ifdef TRACE_SYNC
 	#include &quot;Sync/SyncTracer.h&quot;

Modified: trunk/rts/Sim/Projectiles/WeaponProjectiles/WeaponProjectile.cpp
===================================================================
--- trunk/rts/Sim/Projectiles/WeaponProjectiles/WeaponProjectile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Projectiles/WeaponProjectiles/WeaponProjectile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -18,8 +18,8 @@
 #include &quot;Sim/Features/Feature.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Misc/InterceptHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;LogOutput.h&quot;
 #ifdef TRACE_SYNC
 	#include &quot;Sync/SyncTracer.h&quot;
 #endif

Deleted: trunk/rts/Sim/SideParser.cpp
===================================================================
--- trunk/rts/Sim/SideParser.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/SideParser.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,155 +0,0 @@
-
-#include &quot;StdAfx.h&quot;
-
-#include &lt;string&gt;
-#include &lt;set&gt;
-using std::string;
-using std::set;
-
-#include &quot;mmgr.h&quot;
-
-#include &quot;SideParser.h&quot;
-#include &quot;Lua/LuaParser.h&quot;
-#include &quot;Lua/LuaSyncedRead.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Util.h&quot;
-
-
-SideParser sideParser;
-
-
-/******************************************************************************/
-
-SideParser::SideParser()
-{
-}
-
-
-SideParser::~SideParser()
-{
-}
-
-
-bool SideParser::Load()
-{
-	dataVec.clear();
-	errorLog.clear();
-
-	LuaParser parser(&quot;gamedata/sidedata.lua&quot;,
-	                 SPRING_VFS_MOD_BASE, SPRING_VFS_MOD_BASE);
-#if !defined UNITSYNC &amp;&amp; !defined DEDICATED
-	// this should not be included with unitsync:
-	// 1. avoids linkage with LuaSyncedRead
-	// 2. ModOptions are not valid during unitsync mod parsing
-	parser.GetTable(&quot;Spring&quot;);
-	parser.AddFunc(&quot;GetModOptions&quot;, LuaSyncedRead::GetModOptions);
-	parser.EndTable();
-#endif
-	if (!parser.Execute()) {
-		errorLog = parser.GetErrorLog();
-		return false;
-	}
-
-	set&lt;string&gt; sideSet;
-
-	const LuaTable root = parser.GetRoot();
-	for (int i = 1; /* no-op */; i++) {
-		const LuaTable sideTable = root.SubTable(i);
-		if (!sideTable.IsValid()) {
-			break;
-		}
-
-		Data data;
-		data.caseName  = sideTable.GetString(&quot;name&quot;, &quot;&quot;);
-		data.sideName  = StringToLower(data.caseName);
-		data.startUnit = sideTable.GetString(&quot;startUnit&quot;, &quot;&quot;);
-		data.startUnit = StringToLower(data.startUnit);
-
-		if (data.sideName.empty()) {
-			logOutput.Print(&quot;Missing side name: %i&quot;, i);
-		}
-		else if (data.startUnit.empty()) {
-			logOutput.Print(&quot;Missing side start unit: &quot; + data.sideName);
-		}
-		else {
-			if (sideSet.find(data.sideName) != sideSet.end()) {
-				logOutput.Print(&quot;Duplicate side name: &quot; + data.sideName);
-			}
-			else {
-				sideSet.insert(data.sideName);
-				dataVec.push_back(data);
-			}
-		}
-	}
-	return true;
-}
-
- 
-/******************************************************************************/
-
-const SideParser::Data* SideParser::FindSide(const string&amp; sideName) const
-{
-	const string name = StringToLower(sideName);
-	for (unsigned int i = 0; i &lt; dataVec.size(); i++) {
-		const Data&amp; data = dataVec[i];
-		if (name == data.sideName) {
-			return &data;
-		}
-	}
-	return NULL;
-}
-
-
-const string&amp; SideParser::GetSideName(unsigned int index,
-                                      const string&amp; def) const
-{
-	if (!ValidSide(index)) {
-		return def;
-	}
-	return dataVec[index].sideName;
-}
-
-
-const string&amp; SideParser::GetCaseName(unsigned int index,
-                                      const string&amp; def) const
-{
-	if (!ValidSide(index)) {
-		return def;
-	}
-	return dataVec[index].caseName;
-}
-
-
-const string&amp; SideParser::GetCaseName(const string&amp; name,
-                                      const string&amp; def) const
-{
-	const Data* data = FindSide(name);
-	if (data == NULL) {
-		return def;
-	}
-	return data-&gt;caseName;
-}
-
-
-const string&amp; SideParser::GetStartUnit(unsigned int index,
-                                       const string&amp; def) const
-{
-	if (!ValidSide(index)) {
-		return def;
-	}
-	return dataVec[index].startUnit;
-}
-
-
-const string&amp; SideParser::GetStartUnit(const string&amp; name,
-                                       const string&amp; def) const
-{
-	const Data* data = FindSide(name);
-	if (data == NULL) {
-		return def;
-	}
-	return data-&gt;startUnit;
-}
-
-
-/******************************************************************************/

Deleted: trunk/rts/Sim/SideParser.h
===================================================================
--- trunk/rts/Sim/SideParser.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/SideParser.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,54 +0,0 @@
-
-#ifndef SIDE_PARSER_H
-#define SIDE_PARSER_H
-
-#include &lt;string&gt;
-#include &lt;vector&gt;
-
-
-class SideParser
-{
-	public:
-		SideParser();
-		~SideParser();
-
-		bool Load();
-		const std::string&amp; GetErrorLog() const { return errorLog; }
-
-		const unsigned int GetCount() const { return dataVec.size(); }
-
-		const std::string&amp; GetSideName(unsigned int index,
-		                               const std::string&amp; def = &quot;&quot;) const;
-		const std::string&amp; GetCaseName(unsigned int index,
-		                               const std::string&amp; def = &quot;&quot;) const;
-		const std::string&amp; GetCaseName(const std::string&amp; name,
-		                               const std::string&amp; def = &quot;&quot;) const;
-		const std::string&amp; GetStartUnit(unsigned int index,
-		                                const std::string&amp; def = &quot;&quot;) const;
-		const std::string&amp; GetStartUnit(const std::string&amp; name,
-		                                const std::string&amp; def = &quot;&quot;) const;
-
-		bool ValidSide(unsigned int index) const {
-			return (index &lt; dataVec.size());
-		}
-
-	private:
-		struct Data {
-			std::string caseName;  // full  case
-			std::string sideName;  // lower case
-			std::string startUnit; // lower case
-		};
-		typedef std::vector&lt;Data&gt; DataVec;
-
-		const Data* FindSide(const std::string&amp; sideName) const;
-
-	private:
-		DataVec dataVec;
-		std::string errorLog;
-};
-
-
-extern SideParser sideParser;
-
-
-#endif // SIDE_PARSER_H

Modified: trunk/rts/Sim/Units/COB/CobFile.cpp
===================================================================
--- trunk/rts/Sim/Units/COB/CobFile.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/COB/CobFile.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;Platform/byteorder.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 //The following structure is taken from <A HREF="http://visualta.tauniverse.com/Downloads/ta-cob-fmt.txt">http://visualta.tauniverse.com/Downloads/ta-cob-fmt.txt</A>
 //Information on missing fields from Format_Cob.pas

Modified: trunk/rts/Sim/Units/COB/CobInstance.cpp
===================================================================
--- trunk/rts/Sim/Units/COB/CobInstance.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/COB/CobInstance.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -38,7 +38,7 @@
 #include &quot;Sim/Weapons/PlasmaRepulser.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
 

Modified: trunk/rts/Sim/Units/COB/CobInstance.h
===================================================================
--- trunk/rts/Sim/Units/COB/CobInstance.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/COB/CobInstance.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 const float  RAD2TAANG = 9.587526207370107576104371709781e-5f;
 
 #include &quot;Object.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 
 
 #define PACKXZ(x,z) (((int)(x) &lt;&lt; 16)+((int)(z) &amp; 0xffff))

Modified: trunk/rts/Sim/Units/COB/CobThread.cpp
===================================================================
--- trunk/rts/Sim/Units/COB/CobThread.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/COB/CobThread.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 
 #include &quot;LogOutput.h&quot;
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 
 CCobThread::CCobThread(CCobFile &amp;script, CCobInstance *owner)
 : owner(owner), script(script)

Modified: trunk/rts/Sim/Units/CommandAI/AirCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/AirCAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/CommandAI/AirCAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -15,11 +15,11 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/myMath.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;myMath.h&quot;
+#include &quot;LogOutput.h&quot;
 #include &lt;assert.h&gt;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
 
 
 CR_BIND_DERIVED(CAirCAI,CMobileCAI , );

Modified: trunk/rts/Sim/Units/CommandAI/BuilderCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/BuilderCAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/CommandAI/BuilderCAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 #include &quot;ExternalAI/Group.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/UI/CommandColors.h&quot;
 #include &quot;Game/UI/CursorIcons.h&quot;
 #include &quot;LogOutput.h&quot;
@@ -36,9 +36,9 @@
 #include &quot;Sim/Units/UnitTypes/TransportUnit.h&quot;
 #include &quot;myMath.h&quot;
 #include &quot;creg/STL_Map.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 
 CR_BIND_DERIVED(CBuilderCAI ,CMobileCAI , );

Modified: trunk/rts/Sim/Units/CommandAI/BuilderCAI.h
===================================================================
--- trunk/rts/Sim/Units/CommandAI/BuilderCAI.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/CommandAI/BuilderCAI.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,8 +3,8 @@
 
 #include &lt;map&gt;
 #include &quot;MobileCAI.h&quot;
-#include &quot;../UnitDef.h&quot;
-#include &quot;../../Objects/SolidObject.h&quot;
+#include &quot;Sim/Units/UnitDef.h&quot;
+#include &quot;Sim/Objects/SolidObject.h&quot;
 
 class CUnitSet;
 

Modified: trunk/rts/Sim/Units/CommandAI/CommandAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/CommandAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/CommandAI/CommandAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;ExternalAI/Group.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/WaitCommandsAI.h&quot;
 #include &quot;Game/UI/CommandColors.h&quot;
 #include &quot;Game/UI/CursorIcons.h&quot;
@@ -26,15 +26,15 @@
 #include &quot;Sim/Units/UnitTypes/Factory.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sim/Weapons/Weapon.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;EventHandler.h&quot;
 #include &quot;LoadSaveInterface.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;myMath.h&quot;
 #include &quot;creg/STL_Set.h&quot;
 #include &quot;creg/STL_Deque.h&quot;
 #include &lt;assert.h&gt;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
 
 const int TARGET_LOST_TIMER =120;	// in calls to SlowUpdate() (approx. once every second)
 

Modified: trunk/rts/Sim/Units/CommandAI/CommandAI.h
===================================================================
--- trunk/rts/Sim/Units/CommandAI/CommandAI.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/CommandAI/CommandAI.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 #include &lt;set&gt;
 
 #include &quot;Object.h&quot;
-#include &quot;Sim/Units/CommandAI/Command.h&quot;
+#include &quot;Command.h&quot;
 #include &quot;CommandQueue.h&quot;
 #include &quot;float3.h&quot;
 

Modified: trunk/rts/Sim/Units/CommandAI/CommandQueue.h
===================================================================
--- trunk/rts/Sim/Units/CommandAI/CommandQueue.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/CommandAI/CommandQueue.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,7 +3,7 @@
 
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &lt;deque&gt;
-#include &quot;Sim/Units/CommandAI/Command.h&quot;
+#include &quot;Command.h&quot;
 
 // A wrapper class for  std::deque&lt;Command&gt;  to keep track of commands
 

Modified: trunk/rts/Sim/Units/CommandAI/FactoryCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/FactoryCAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/CommandAI/FactoryCAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,10 +4,10 @@
 #include &quot;FactoryCAI.h&quot;
 #include &quot;LineDrawer.h&quot;
 #include &quot;ExternalAI/Group.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/WaitCommandsAI.h&quot;
 #include &quot;Game/UI/CommandColors.h&quot;
 #include &quot;Game/UI/CursorIcons.h&quot;
@@ -21,9 +21,9 @@
 #include &quot;Sim/Units/UnitTypes/Factory.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;creg/STL_Map.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 CR_BIND_DERIVED(CFactoryCAI ,CCommandAI , );
 

Modified: trunk/rts/Sim/Units/CommandAI/MobileCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/MobileCAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/CommandAI/MobileCAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,7 +7,7 @@
 #include &quot;ExternalAI/Group.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/UI/CommandColors.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
@@ -21,11 +21,11 @@
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
 #include &quot;Sim/Weapons/DGunWeapon.h&quot;
-#include &quot;System/LogOutput.h&quot;
+#include &quot;LogOutput.h&quot;
 #include &quot;myMath.h&quot;
 #include &lt;assert.h&gt;
-#include &quot;System/Util.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 CR_BIND_DERIVED(CMobileCAI ,CCommandAI , );
 

Modified: trunk/rts/Sim/Units/CommandAI/TransportCAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/TransportCAI.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/CommandAI/TransportCAI.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -16,11 +16,11 @@
 #include &quot;Rendering/GL/glExtra.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Sim/MoveTypes/TAAirMoveType.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 #include &quot;Rendering/UnitModels/3DOParser.h&quot;
 #include &quot;creg/STL_List.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;myMath.h&quot;
 
 #define AIRTRANSPORT_DOCKING_RADIUS 16
 #define AIRTRANSPORT_DOCKING_ANGLE 50

Modified: trunk/rts/Sim/Units/Unit.cpp
===================================================================
--- trunk/rts/Sim/Units/Unit.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/Unit.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -17,7 +17,7 @@
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Game/Player.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/UI/MiniMap.h&quot;
 #include &quot;Lua/LuaRules.h&quot;
 #include &quot;Map/Ground.h&quot;
@@ -37,7 +37,7 @@
 #include &quot;Sim/Misc/QuadField.h&quot;
 #include &quot;Sim/Misc/RadarHandler.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 #include &quot;Sim/MoveTypes/AirMoveType.h&quot;
 #include &quot;Sim/MoveTypes/MoveType.h&quot;
 #include &quot;Sim/MoveTypes/ScriptMoveType.h&quot;
@@ -49,12 +49,12 @@
 #include &quot;Sim/Weapons/Weapon.h&quot;
 #include &quot;Sync/SyncedPrimitive.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;System/EventHandler.h&quot;
-#include &quot;System/LoadSaveInterface.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Matrix44f.h&quot;
-#include &quot;System/myMath.h&quot;
-#include &quot;System/Sound.h&quot;
+#include &quot;EventHandler.h&quot;
+#include &quot;LoadSaveInterface.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Matrix44f.h&quot;
+#include &quot;myMath.h&quot;
+#include &quot;Sound.h&quot;
 #include &quot;UnitDef.h&quot;
 #include &quot;Unit.h&quot;
 #include &quot;UnitHandler.h&quot;

Modified: trunk/rts/Sim/Units/Unit.h
===================================================================
--- trunk/rts/Sim/Units/Unit.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/Unit.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,8 +10,8 @@
 
 #include &quot;Lua/LuaUnitMaterial.h&quot;
 #include &quot;Sim/Objects/SolidObject.h&quot;
-#include &quot;System/Matrix44f.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Matrix44f.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;Vec2.h&quot;
 
 class CCobInstance;

Modified: trunk/rts/Sim/Units/UnitDefHandler.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitDefHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/UnitDefHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,7 +13,7 @@
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Game/GameSetup.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
@@ -22,17 +22,17 @@
 #include &quot;Rendering/IconHandler.h&quot;
 #include &quot;Rendering/Textures/Bitmap.h&quot;
 #include &quot;Rendering/UnitModels/3DModelParser.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
-#include &quot;Sim/SideParser.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
+#include &quot;Sim/Misc/SideParser.h&quot;
 #include &quot;Sim/Misc/CategoryHandler.h&quot;
 #include &quot;Sim/Misc/CollisionVolume.h&quot;
 #include &quot;Sim/Misc/DamageArrayHandler.h&quot;
 #include &quot;Sim/Projectiles/ExplosionGenerator.h&quot;
-#include &quot;Sim/Units/COB/CobFile.h&quot;
+#include &quot;COB/CobFile.h&quot;
 #include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Sound.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Sound.h&quot;
+#include &quot;Exceptions.h&quot;
 
 const char YARDMAP_CHAR = 'c';		//Need to be low case.
 

Modified: trunk/rts/Sim/Units/UnitHandler.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/UnitHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 
 #include &quot;StdAfx.h&quot;
 #include &lt;assert.h&gt;
-#include &quot;System/mmgr.h&quot;
+#include &quot;mmgr.h&quot;
 
 #include &quot;UnitHandler.h&quot;
 #include &quot;Unit.h&quot;
@@ -14,7 +14,7 @@
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
 #include &quot;Game/SelectedUnits.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Map/ReadMap.h&quot;
@@ -25,19 +25,19 @@
 #include &quot;Sim/Misc/AirBaseHandler.h&quot;
 #include &quot;Sim/Misc/GroundBlockingObjectMap.h&quot;
 #include &quot;Sim/Misc/QuadField.h&quot;
-#include &quot;Sim/Units/CommandAI/Command.h&quot;
-#include &quot;Sim/Units/Unit.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/LoadSaveInterface.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/TimeProfiler.h&quot;
-#include &quot;System/myMath.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;System/Sync/SyncTracer.h&quot;
-#include &quot;System/creg/STL_Deque.h&quot;
-#include &quot;System/creg/STL_List.h&quot;
-#include &quot;System/creg/STL_Set.h&quot;
+#include &quot;CommandAI/Command.h&quot;
+#include &quot;Unit.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;FileSystem/FileHandler.h&quot;
+#include &quot;LoadSaveInterface.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;TimeProfiler.h&quot;
+#include &quot;myMath.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
+#include &quot;Sync/SyncTracer.h&quot;
+#include &quot;creg/STL_Deque.h&quot;
+#include &quot;creg/STL_List.h&quot;
+#include &quot;creg/STL_Set.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
 
 using std::min;

Modified: trunk/rts/Sim/Units/UnitHandler.h
===================================================================
--- trunk/rts/Sim/Units/UnitHandler.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/UnitHandler.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -13,7 +13,7 @@
 
 #include &quot;UnitDef.h&quot;
 #include &quot;UnitSet.h&quot;
-#include &quot;Sim/Units/CommandAI/Command.h&quot;
+#include &quot;CommandAI/Command.h&quot;
 
 class CBuilderCAI;
 class CFeature;

Modified: trunk/rts/Sim/Units/UnitTracker.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitTracker.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/UnitTracker.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 #include &quot;Game/SelectedUnits.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;LogOutput.h&quot;
 
 

Modified: trunk/rts/Sim/Units/UnitTypes/Builder.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitTypes/Builder.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/UnitTypes/Builder.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;Builder.h&quot;
 #include &quot;Building.h&quot;
 #include &quot;Game/GameHelper.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Lua/LuaRules.h&quot;
 #include &quot;Map/Ground.h&quot;
@@ -18,7 +18,7 @@
 #include &quot;Rendering/UnitModels/3DOParser.h&quot;
 #include &quot;Sim/Features/Feature.h&quot;
 #include &quot;Sim/Features/FeatureHandler.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Projectiles/Unsynced/GfxProjectile.h&quot;
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
@@ -26,8 +26,8 @@
 #include &quot;Sim/Units/UnitDefHandler.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;EventHandler.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;mmgr.h&quot;
 

Modified: trunk/rts/Sim/Units/UnitTypes/Building.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitTypes/Building.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/UnitTypes/Building.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,7 +14,7 @@
 #include &quot;Rendering/GroundDecalHandler.h&quot;
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Rendering/UnitModels/UnitDrawer.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 #include &quot;mmgr.h&quot;
 

Modified: trunk/rts/Sim/Units/UnitTypes/ExtractorBuilding.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitTypes/ExtractorBuilding.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/UnitTypes/ExtractorBuilding.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -18,7 +18,7 @@
 #include &quot;Sim/Misc/QuadField.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
 #include &quot;creg/STL_List.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;myMath.h&quot;
 #include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CExtractorBuilding, CBuilding, );

Modified: trunk/rts/Sim/Units/UnitTypes/Factory.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitTypes/Factory.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/UnitTypes/Factory.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,10 +4,10 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;Factory.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/WaitCommandsAI.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/ReadMap.h&quot;
@@ -25,8 +25,8 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;EventHandler.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Matrix44f.h&quot;

Modified: trunk/rts/Sim/Units/UnitTypes/TransportUnit.cpp
===================================================================
--- trunk/rts/Sim/Units/UnitTypes/TransportUnit.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Units/UnitTypes/TransportUnit.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;Sim/Units/UnitDef.h&quot;
 #include &quot;Sim/Misc/DamageArray.h&quot;
 #include &quot;Sim/Misc/LosHandler.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;EventHandler.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;creg/STL_List.h&quot;
 #include &quot;mmgr.h&quot;

Modified: trunk/rts/Sim/Weapons/BeamLaser.cpp
===================================================================
--- trunk/rts/Sim/Weapons/BeamLaser.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Weapons/BeamLaser.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,7 +1,7 @@
 #include &quot;StdAfx.h&quot;
 #include &quot;BeamLaser.h&quot;
 #include &quot;Game/GameHelper.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Matrix44f.h&quot;
@@ -15,7 +15,7 @@
 #include &quot;Sim/Units/COB/CobInstance.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitTypes/Building.h&quot;
-#include &quot;Sim/Weapons/PlasmaRepulser.h&quot;
+#include &quot;PlasmaRepulser.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;WeaponDefHandler.h&quot;
 #include &quot;mmgr.h&quot;

Modified: trunk/rts/Sim/Weapons/DGunWeapon.cpp
===================================================================
--- trunk/rts/Sim/Weapons/DGunWeapon.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Weapons/DGunWeapon.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,13 +1,13 @@
 #include &quot;StdAfx.h&quot;
 #include &quot;DGunWeapon.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Sim/Projectiles/WeaponProjectiles/FireBallProjectile.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;WeaponDefHandler.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;myMath.h&quot;
 #include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CDGunWeapon, CWeapon, (NULL));

Modified: trunk/rts/Sim/Weapons/EmgCannon.cpp
===================================================================
--- trunk/rts/Sim/Weapons/EmgCannon.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Weapons/EmgCannon.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,7 +1,7 @@
 #include &quot;StdAfx.h&quot;
 #include &quot;EmgCannon.h&quot;
 #include &quot;Game/GameHelper.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Sim/MoveTypes/AirMoveType.h&quot;
 #include &quot;Sim/Projectiles/WeaponProjectiles/EmgProjectile.h&quot;

Modified: trunk/rts/Sim/Weapons/MeleeWeapon.cpp
===================================================================
--- trunk/rts/Sim/Weapons/MeleeWeapon.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Weapons/MeleeWeapon.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 #include &quot;MeleeWeapon.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sound.h&quot;
-#include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
+#include &quot;WeaponDefHandler.h&quot;
 #include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CMeleeWeapon, CWeapon, (NULL));

Modified: trunk/rts/Sim/Weapons/PlasmaRepulser.cpp
===================================================================
--- trunk/rts/Sim/Weapons/PlasmaRepulser.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Weapons/PlasmaRepulser.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,8 +1,8 @@
 #include &quot;StdAfx.h&quot;
 #include &quot;creg/STL_List.h&quot;
 #include &quot;creg/STL_Set.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;PlasmaRepulser.h&quot;
 #include &quot;Rendering/UnitModels/3DOParser.h&quot;
@@ -17,7 +17,7 @@
 #include &quot;WeaponDefHandler.h&quot;
 #include &quot;Weapon.h&quot;
 #include &quot;mmgr.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;myMath.h&quot;
 
 CR_BIND_DERIVED(CPlasmaRepulser, CWeapon, (NULL));
 

Modified: trunk/rts/Sim/Weapons/Rifle.cpp
===================================================================
--- trunk/rts/Sim/Weapons/Rifle.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Weapons/Rifle.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,7 +12,7 @@
 #include &quot;Sim/Projectiles/Unsynced/SmokeProjectile.h&quot;
 #include &quot;Sim/Projectiles/Unsynced/TracerProjectile.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
-#include &quot;Sim/Weapons/WeaponDefHandler.h&quot;
+#include &quot;WeaponDefHandler.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
 #include &quot;mmgr.h&quot;

Modified: trunk/rts/Sim/Weapons/Weapon.cpp
===================================================================
--- trunk/rts/Sim/Weapons/Weapon.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Weapons/Weapon.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -8,7 +8,7 @@
 #include &quot;Game/Camera.h&quot;
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/Player.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;myMath.h&quot;
@@ -16,7 +16,7 @@
 #include &quot;Sim/Misc/GeometricObjects.h&quot;
 #include &quot;Sim/Misc/InterceptHandler.h&quot;
 #include &quot;Sim/Misc/LosHandler.h&quot;
-#include &quot;Sim/ModInfo.h&quot;
+#include &quot;Sim/Misc/ModInfo.h&quot;
 #include &quot;Sim/MoveTypes/TAAirMoveType.h&quot;
 #include &quot;Sim/Projectiles/WeaponProjectiles/WeaponProjectile.h&quot;
 #include &quot;Sim/Units/COB/CobFile.h&quot;
@@ -24,7 +24,7 @@
 #include &quot;Sim/Units/CommandAI/CommandAI.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;EventHandler.h&quot;
 #include &quot;WeaponDefHandler.h&quot;
 #include &quot;Weapon.h&quot;
 #include &quot;mmgr.h&quot;

Modified: trunk/rts/Sim/Weapons/WeaponDefHandler.cpp
===================================================================
--- trunk/rts/Sim/Weapons/WeaponDefHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Weapons/WeaponDefHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 #include &lt;iostream&gt;
 #include &lt;stdexcept&gt;
 #include &quot;WeaponDefHandler.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;Game/Game.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
 #include &quot;FileSystem/FileHandler.h&quot;
@@ -16,11 +16,11 @@
 #include &quot;Sim/Projectiles/ExplosionGenerator.h&quot;
 #include &quot;Sim/Projectiles/ProjectileHandler.h&quot;
 #include &quot;Sim/Projectiles/Projectile.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Sound.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Sound.h&quot;
 #include &quot;mmgr.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 using std::min;
 using std::max;

Modified: trunk/rts/Sim/Weapons/bombdropper.cpp
===================================================================
--- trunk/rts/Sim/Weapons/bombdropper.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/Sim/Weapons/bombdropper.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,8 +5,8 @@
 #include &quot;StdAfx.h&quot;
 #include &quot;bombdropper.h&quot;
 #include &quot;Game/GameHelper.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Map/MapInfo.h&quot;
 #include &quot;Sim/MoveTypes/TAAirMoveType.h&quot;
@@ -16,7 +16,7 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sound.h&quot;
 #include &quot;WeaponDefHandler.h&quot;
-#include &quot;System/myMath.h&quot;
+#include &quot;myMath.h&quot;
 #include &quot;mmgr.h&quot;
 
 CR_BIND_DERIVED(CBombDropper, CWeapon, (NULL, false));

Modified: trunk/rts/System/DemoRecorder.cpp
===================================================================
--- trunk/rts/System/DemoRecorder.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/DemoRecorder.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -12,9 +12,9 @@
 #include &quot;FileSystem/FileHandler.h&quot;
 #include &quot;Game/GameVersion.h&quot;
 #include &quot;Game/GameSetup.h&quot;
-#include &quot;System/Exceptions.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;Exceptions.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 
 #include &quot;LogOutput.h&quot;
 

Modified: trunk/rts/System/DemoRecorder.h
===================================================================
--- trunk/rts/System/DemoRecorder.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/DemoRecorder.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -6,7 +6,7 @@
 
 #include &quot;Demo.h&quot;
 #include &quot;Game/Player.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 
 /**
 @brief Used to record demos

Modified: trunk/rts/System/FileSystem/ArchiveScanner.cpp
===================================================================
--- trunk/rts/System/FileSystem/ArchiveScanner.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/FileSystem/ArchiveScanner.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,13 +11,13 @@
 #include &quot;ArchiveScanner.h&quot;
 
 #include &quot;Lua/LuaParser.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/FileSystem/ArchiveFactory.h&quot;
-#include &quot;System/FileSystem/ArchiveBuffered.h&quot;
-#include &quot;System/FileSystem/CRC.h&quot;
-#include &quot;System/FileSystem/FileFilter.h&quot;
-#include &quot;System/FileSystem/FileHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;ArchiveFactory.h&quot;
+#include &quot;ArchiveBuffered.h&quot;
+#include &quot;CRC.h&quot;
+#include &quot;FileFilter.h&quot;
+#include &quot;FileHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
 #include &quot;Util.h&quot;
 #include &quot;Exceptions.h&quot;
 

Modified: trunk/rts/System/FileSystem/SimpleParser.h
===================================================================
--- trunk/rts/System/FileSystem/SimpleParser.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/FileSystem/SimpleParser.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,7 +7,7 @@
 #include &lt;string&gt;
 #include &lt;vector&gt;
 
-#include &quot;System/FileSystem/FileHandler.h&quot;
+#include &quot;FileHandler.h&quot;
 
 
 class CSimpleParser

Modified: trunk/rts/System/GlobalUnsynced.cpp
===================================================================
--- trunk/rts/System/GlobalUnsynced.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/GlobalUnsynced.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -17,9 +17,9 @@
 #include &quot;Game/GameHelper.h&quot;
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Sync/SyncTracer.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/Player.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;Rendering/Textures/TAPalette.h&quot;
 #include &quot;Lua/LuaGaia.h&quot;
 #include &quot;Lua/LuaRules.h&quot;

Modified: trunk/rts/System/LoadSaveHandler.cpp
===================================================================
--- trunk/rts/System/LoadSaveHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/LoadSaveHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -23,15 +23,15 @@
 #include &quot;Game/Game.h&quot;
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Game/GameServer.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Game/WaitCommandsAI.h&quot;
 #include &quot;Sim/Misc/Wind.h&quot;
 #include &quot;Sim/Units/CommandAI/BuilderCAI.h&quot;
 #include &quot;Game/GameServer.h&quot;
 #include &quot;Rendering/InMapDraw.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Exceptions.h&quot;
 
 extern std::string stupidGlobalMapname;
 

Modified: trunk/rts/System/LogOutput.cpp
===================================================================
--- trunk/rts/System/LogOutput.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/LogOutput.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,7 +14,7 @@
 
 #include &quot;Util.h&quot;
 #include &quot;float3.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;mmgr.h&quot;
 

Modified: trunk/rts/System/Messages.cpp
===================================================================
--- trunk/rts/System/Messages.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Messages.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,7 +14,7 @@
 #include &quot;LogOutput.h&quot;
 #include &quot;Messages.h&quot;
 #include &quot;Lua/LuaParser.h&quot;
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 
 using std::string;
 using std::vector;

Modified: trunk/rts/System/MouseInput.cpp
===================================================================
--- trunk/rts/System/MouseInput.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/MouseInput.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -17,7 +17,7 @@
 #include &lt;SDL_events.h&gt;
 #include &lt;SDL_syswm.h&gt;
 
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Platform/Win/win32.h&quot;
 #include &quot;MouseInput.h&quot;
 #include &quot;LogOutput.h&quot;

Modified: trunk/rts/System/Platform/Linux/DataDirLocater.cpp
===================================================================
--- trunk/rts/System/Platform/Linux/DataDirLocater.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/Linux/DataDirLocater.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -22,10 +22,10 @@
 #endif
 #include &lt;sstream&gt;
 #include &lt;string.h&gt;
-#include &quot;System/FileSystem/VFSHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
+#include &quot;FileSystem/VFSHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
 #include &quot;mmgr.h&quot;
 #include &quot;Exceptions.h&quot;
 

Modified: trunk/rts/System/Platform/Linux/OpenALSound.cpp
===================================================================
--- trunk/rts/System/Platform/Linux/OpenALSound.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/Linux/OpenALSound.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -18,7 +18,7 @@
 #include &quot;OpenALSound.h&quot;
 #include &quot;OggStream.h&quot;
 #include &quot;mmgr.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Exceptions.h&quot;
 
 // Ogg-Vorbis audio stream object
 COggStream oggStream;

Modified: trunk/rts/System/Platform/Linux/UnixFileSystemHandler.cpp
===================================================================
--- trunk/rts/System/Platform/Linux/UnixFileSystemHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/Linux/UnixFileSystemHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -23,10 +23,10 @@
 #include &lt;io.h&gt;
 #include &lt;direct.h&gt;
 #endif
-#include &quot;System/FileSystem/ArchiveScanner.h&quot;
-#include &quot;System/FileSystem/VFSHandler.h&quot;
-#include &quot;System/LogOutput.h&quot;
-#include &quot;System/Platform/ConfigHandler.h&quot;
+#include &quot;FileSystem/ArchiveScanner.h&quot;
+#include &quot;FileSystem/VFSHandler.h&quot;
+#include &quot;LogOutput.h&quot;
+#include &quot;Platform/ConfigHandler.h&quot;
 #include &quot;mmgr.h&quot;
 
 /**

Modified: trunk/rts/System/Platform/Linux/UnixFileSystemHandler.h
===================================================================
--- trunk/rts/System/Platform/Linux/UnixFileSystemHandler.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/Linux/UnixFileSystemHandler.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -15,7 +15,7 @@
 #include &lt;string&gt;
 #include &lt;vector&gt;
 #include &quot;DataDirLocater.h&quot;
-#include &quot;System/Platform/FileSystem.h&quot;
+#include &quot;Platform/FileSystem.h&quot;
 
 /**
  * @brief Unix file system / data directory handler

Modified: trunk/rts/System/Platform/Mac/MacFileSystemHandler.cpp
===================================================================
--- trunk/rts/System/Platform/Mac/MacFileSystemHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/Mac/MacFileSystemHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,7 +9,7 @@
 #include &lt;CoreFoundation/CoreFoundation.h&gt;
 #include &quot;StdAfx.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;Platform/Mac/MacFileSystemHandler.h&quot;
+#include &quot;MacFileSystemHandler.h&quot;
 
 /**
  * This does exactly the same as the constructor of UnixFileSystemHandler, but unfortunately

Modified: trunk/rts/System/Platform/NullSound.h
===================================================================
--- trunk/rts/System/Platform/NullSound.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/NullSound.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,7 +1,7 @@
 #ifndef NULL_SOUND_H
 #define NULL_SOUND_H
 
-#include &quot;../Sound.h&quot;
+#include &quot;Sound.h&quot;
 
 // Null sound system
 class CNullSound: public CSound

Modified: trunk/rts/System/Platform/Win/DataDirLocater.cpp
===================================================================
--- trunk/rts/System/Platform/Win/DataDirLocater.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/Win/DataDirLocater.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1 +1 @@
-#include &quot;Platform/Linux/DataDirLocater.cpp&quot;
+#include &quot;DataDirLocater.cpp&quot;

Modified: trunk/rts/System/Platform/Win/DxSound.h
===================================================================
--- trunk/rts/System/Platform/Win/DxSound.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/Win/DxSound.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -18,7 +18,7 @@
 #include &lt;list&gt;
 #include &lt;SDL_types.h&gt;
 
-#include &quot;OggStream.h&quot;
+#include &quot;Platform/Linux/OggStream.h&quot;
 
 class CWorldObject;
 

Modified: trunk/rts/System/Platform/Win/OggStream.cpp
===================================================================
--- trunk/rts/System/Platform/Win/OggStream.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/Win/OggStream.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,6 +1,6 @@
 #include &lt;SDL.h&gt;
 
-#include &quot;OggStream.h&quot;
+#include &quot;Platform/Linux/OggStream.h&quot;
 #include &quot;LogOutput.h&quot;
 
 

Modified: trunk/rts/System/Platform/Win/WinFileSystemHandler.cpp
===================================================================
--- trunk/rts/System/Platform/Win/WinFileSystemHandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/Win/WinFileSystemHandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,2 +1,2 @@
 #include &quot;StdAfx.h&quot;
-#include &quot;Platform/Linux/UnixFileSystemHandler.cpp&quot;
+#include &quot;UnixFileSystemHandler.cpp&quot;

Modified: trunk/rts/System/Platform/byteorder.h
===================================================================
--- trunk/rts/System/Platform/byteorder.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/byteorder.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -78,7 +78,7 @@
 #elif defined(__APPLE__)
 // Should work for both x86 and ppc
 
-#include &quot;CoreFoundation/CFByteOrder.h&quot;
+#include &quot;CFByteOrder.h&quot;
 
 #define swabword(w) (CFSwapInt16LittleToHost((uint32_t)w))
 #define swabdword(w) (CFSwapInt32LittleToHost((uint32_t)w))

Modified: trunk/rts/System/Platform/errorhandler.cpp
===================================================================
--- trunk/rts/System/Platform/errorhandler.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Platform/errorhandler.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -9,7 +9,7 @@
  * GNU GPL, v2 or later.
  */
 #include &lt;StdAfx.h&gt;
-#include &quot;Platform/errorhandler.h&quot;
+#include &quot;errorhandler.h&quot;
 
 #include &lt;SDL.h&gt;
 #ifdef _WIN32

Modified: trunk/rts/System/Script/LuaBinder.cpp
===================================================================
--- trunk/rts/System/Script/LuaBinder.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Script/LuaBinder.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,8 +3,8 @@
 #include &quot;Game/StartScripts/Script.h&quot;
 #include &quot;float3.h&quot;
 #include &quot;LogOutput.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;Sim/Units/UnitTypes/TransportUnit.h&quot;
 #include &quot;TdfParser.h&quot;

Modified: trunk/rts/System/Script/LuaFunctions.cpp
===================================================================
--- trunk/rts/System/Script/LuaFunctions.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Script/LuaFunctions.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -5,7 +5,7 @@
 #include &quot;StdAfx.h&quot;
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;LuaFunctions.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;float3.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;ExternalAI/GlobalAIHandler.h&quot;
@@ -25,7 +25,7 @@
 #include &quot;Sim/Units/UnitHandler.h&quot;
 #include &quot;Sim/Units/UnitLoader.h&quot;
 #include &quot;Sim/Units/UnitTypes/TransportUnit.h&quot;
-#include &quot;System/EventHandler.h&quot;
+#include &quot;EventHandler.h&quot;
 
 using namespace std;
 using namespace luabind;

Modified: trunk/rts/System/Sound.cpp
===================================================================
--- trunk/rts/System/Sound.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Sound.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 #include &quot;Sim/Units/Unit.h&quot;
 #include &quot;LogOutput.h&quot;
 #include &quot;Platform/ConfigHandler.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;Exceptions.h&quot;
 
 #ifdef _WIN32
 #include &quot;Platform/Win/DxSound.h&quot;

Modified: trunk/rts/System/Sound.h
===================================================================
--- trunk/rts/System/Sound.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Sound.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -4,7 +4,7 @@
 #include &lt;set&gt;
 #include &lt;string&gt;
 
-#include &quot;System/float3.h&quot; // for zerovector
+#include &quot;float3.h&quot; // for zerovector
 
 class CWorldObject;
 class CUnit;

Modified: trunk/rts/System/SpringApp.cpp
===================================================================
--- trunk/rts/System/SpringApp.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/SpringApp.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -14,14 +14,14 @@
 #undef KeyPress
 #undef KeyRelease
 
-#include &quot;Game/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
 #include &quot;Game/GameVersion.h&quot;
 #include &quot;Game/GameSetup.h&quot;
 #include &quot;Game/GameController.h&quot;
 #include &quot;Game/SelectMenu.h&quot;
 #include &quot;Game/PreGame.h&quot;
 #include &quot;Game/Game.h&quot;
-#include &quot;Game/Team.h&quot;
+#include &quot;Sim/Misc/Team.h&quot;
 #include &quot;Game/UI/KeyBindings.h&quot;
 #include &quot;Lua/LuaOpenGL.h&quot;
 #include &quot;Platform/BaseCmd.h&quot;
@@ -40,9 +40,9 @@
 #include &quot;MouseInput.h&quot;
 #include &quot;bitops.h&quot;
 #include &quot;Sync/Syncify.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/Exceptions.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;Exceptions.h&quot;
 
 #include &quot;mmgr.h&quot;
 

Modified: trunk/rts/System/StdAfx.h
===================================================================
--- trunk/rts/System/StdAfx.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/StdAfx.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -32,7 +32,7 @@
 #include &lt;assert.h&gt;
 
 // do not include &lt;cmath&gt; or &lt;math.h&gt; before this, it'll cause ambiguous call er
-#include &quot;streflop_cond.h&quot;
+#include &quot;lib/streflop/streflop_cond.h&quot;
 #endif
 
 // maybe we should remove syncify altogether?
@@ -56,12 +56,12 @@
 // also, they shouldn't get in the way of mmgr
 #include &quot;Rendering/GL/myGL.h&quot;
 #include &quot;float3.h&quot;
-#include &quot;System/Util.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
+#include &quot;Util.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
 #include &quot;Map/Ground.h&quot;
 #include &quot;Map/ReadMap.h&quot;
-#include &quot;Game/GlobalSynced.h&quot;
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;Game/Camera.h&quot;
 #endif // USE_PRECOMPILED_HEADER
 

Modified: trunk/rts/System/Sync/SyncChecker.h
===================================================================
--- trunk/rts/System/Sync/SyncChecker.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Sync/SyncChecker.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -11,7 +11,7 @@
 #include &lt;SDL_types.h&gt;
 
 #ifdef TRACE_SYNC
-#include &quot;Sync/SyncTracer.h&quot;
+#include &quot;SyncTracer.h&quot;
 #endif
 
 #include &lt;boost/cstdint.hpp&gt; /* Replace with &lt;stdint.h&gt; if appropriate */

Modified: trunk/rts/System/Sync/SyncDebugger.cpp
===================================================================
--- trunk/rts/System/Sync/SyncDebugger.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Sync/SyncDebugger.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -7,10 +7,10 @@
 #include &lt;boost/format.hpp&gt;
 
 #include &quot;LogOutput.h&quot;
-#include &quot;System/GlobalUnsynced.h&quot;
-#include &quot;GlobalSynced.h&quot;
-#include &quot;System/BaseNetProtocol.h&quot;
-#include &quot;System/NetProtocol.h&quot;
+#include &quot;GlobalUnsynced.h&quot;
+#include &quot;Sim/Misc/GlobalSynced.h&quot;
+#include &quot;BaseNetProtocol.h&quot;
+#include &quot;NetProtocol.h&quot;
 #include &quot;SyncDebugger.h&quot;
 #include &quot;SyncChecker.h&quot;
 #include &quot;SyncTracer.h&quot;

Modified: trunk/rts/System/Sync/SyncDebugger.h
===================================================================
--- trunk/rts/System/Sync/SyncDebugger.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Sync/SyncDebugger.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -10,7 +10,7 @@
 #include &lt;vector&gt;
 #include &lt;SDL_types.h&gt;
 
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 
 /**
  * @brief sync debugger class

Modified: trunk/rts/System/Sync/SyncTracer.cpp
===================================================================
--- trunk/rts/System/Sync/SyncTracer.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/Sync/SyncTracer.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -3,7 +3,7 @@
 //////////////////////////////////////////////////////////////////////
 
 #include &quot;StdAfx.h&quot;
-#include &quot;Sync/SyncTracer.h&quot;
+#include &quot;SyncTracer.h&quot;
 #include &lt;stdio.h&gt;
 #include &quot;LogOutput.h&quot;
 #include &quot;mmgr.h&quot;

Modified: trunk/rts/System/creg/creg.cpp
===================================================================
--- trunk/rts/System/creg/creg.cpp	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/creg/creg.cpp	2008-11-09 19:35:51 UTC (rev 7005)
@@ -20,7 +20,7 @@
 # define	operator_delete		::operator delete
 #endif
 
-#include &quot;System/Util.h&quot;
+#include &quot;Util.h&quot;
 #include &quot;creg.h&quot;
 
 using namespace creg;

Modified: trunk/rts/System/myMath.h
===================================================================
--- trunk/rts/System/myMath.h	2008-11-09 13:27:27 UTC (rev 7004)
+++ trunk/rts/System/myMath.h	2008-11-09 19:35:51 UTC (rev 7005)
@@ -1,7 +1,7 @@
 #ifndef MYMATH_H
 #define MYMATH_H
 
-#include &quot;Game/GlobalConstants.h&quot;
+#include &quot;Sim/Misc/GlobalConstants.h&quot;
 #include &quot;Vec2.h&quot;
 #include &quot;float3.h&quot;
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001773.html">[Taspring-linux-commit] r7004 - in trunk/rts: Game Game/UI Lua	build/vstudio8
</A></li>
	<LI>Next message: <A HREF="001775.html">[Taspring-linux-commit] r7006 - trunk/tools/unitsync
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1774">[ date ]</a>
              <a href="thread.html#1774">[ thread ]</a>
              <a href="subject.html#1774">[ subject ]</a>
              <a href="author.html#1774">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
