<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r7230 - in Lobby/TASClient: . Python	Python/scripts Python/scripts/layouts
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7230%20-%20in%20Lobby/TASClient%3A%20.%20Python%0A%09Python/scripts%20Python/scripts/layouts&In-Reply-To=%3C20090128200852.ABDDB487FB%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001998.html">
   <LINK REL="Next"  HREF="002000.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r7230 - in Lobby/TASClient: . Python	Python/scripts Python/scripts/layouts</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r7230%20-%20in%20Lobby/TASClient%3A%20.%20Python%0A%09Python/scripts%20Python/scripts/layouts&In-Reply-To=%3C20090128200852.ABDDB487FB%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r7230 - in Lobby/TASClient: . Python	Python/scripts Python/scripts/layouts">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Wed Jan 28 21:08:52 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001998.html">[Taspring-linux-commit] r7229 - Lobby/TASClient
</A></li>
        <LI>Next message: <A HREF="002000.html">[Taspring-linux-commit] r7231 - in Lobby/TASClient: . Python	Python/scripts Python/scripts/subf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1999">[ date ]</a>
              <a href="thread.html#1999">[ thread ]</a>
              <a href="subject.html#1999">[ subject ]</a>
              <a href="author.html#1999">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: satirik
Date: 2009-01-28 21:08:51 +0100 (Wed, 28 Jan 2009)
New Revision: 7230

Added:
   Lobby/TASClient/Python/scripts/layouts/
   Lobby/TASClient/Python/scripts/layouts/BattleForm Compact.py
   Lobby/TASClient/Python/scripts/layouts/BattleForm WideScreen.py
   Lobby/TASClient/Python/scripts/layouts/BattleList in BattleForm.py
   Lobby/TASClient/Python/scripts/layouts/MainForm Tabbed including BattleForm.py
   Lobby/TASClient/Python/scripts/layouts/MainForm Tabbed.py
   Lobby/TASClient/Python/scripts/layouts/Old Style Player List.py
Removed:
   Lobby/TASClient/Python/scripts/layoutProfiles/
Modified:
   Lobby/TASClient/MainUnit.dfm
   Lobby/TASClient/Python/api.txt
   Lobby/TASClient/Python/scripts/layoutProfileManager.py
   Lobby/TASClient/TASClient.dof
   Lobby/TASClient/TASClient.res
Log:
* layout manager updated to allow more than one layout at a time
* layouts reorganized
* old player list layout added

Modified: Lobby/TASClient/MainUnit.dfm
===================================================================
--- Lobby/TASClient/MainUnit.dfm	2009-01-27 19:17:23 UTC (rev 7229)
+++ Lobby/TASClient/MainUnit.dfm	2009-01-28 20:08:51 UTC (rev 7230)
@@ -1,6 +1,6 @@
 object MainForm: TMainForm
-  Left = 883
-  Top = 274
+  Left = 786
+  Top = 309
   Width = 776
   Height = 548
   Caption = '.'

Modified: Lobby/TASClient/Python/api.txt
===================================================================
--- Lobby/TASClient/Python/api.txt	2009-01-27 19:17:23 UTC (rev 7229)
+++ Lobby/TASClient/Python/api.txt	2009-01-28 20:08:51 UTC (rev 7230)
@@ -69,7 +69,7 @@
 - AddItemToMenu(menuName/SubmenuId,caption,callbackModuleName,callbackFunctionName,argsTuple,name) return itemId
 	The selected item id is returned as first argument added to the argsTuple.
 	
-- AddSubmenuToMenu(menuName/SubmenuId,caption,name) return SubmenuId
+- AddSubmenuToMenu(menuName/SubmenuId,caption) return SubmenuId
 - AddSeparatorToMenu(menuName/SubmenuId) return SeparatorId
 - SetMenuItemState(id,checked,enabled)
 - RemoveFromMenu(id)

Modified: Lobby/TASClient/Python/scripts/layoutProfileManager.py
===================================================================
--- Lobby/TASClient/Python/scripts/layoutProfileManager.py	2009-01-27 19:17:23 UTC (rev 7229)
+++ Lobby/TASClient/Python/scripts/layoutProfileManager.py	2009-01-28 20:08:51 UTC (rev 7230)
@@ -2,36 +2,44 @@
 import sys, os
 
 basepath = sys.path[1]
-sys.path.insert(1, os.path.join(basepath, 'layoutProfiles'))
+layoutsDirectory = 'layouts'
+sys.path.insert(1, os.path.join(basepath, layoutsDirectory))
 
 api = lobbyscript.Callback()
 gui = lobbyscript.GUI()
 
 layoutProfiles = {}
 
-menuIdList = []
+menuIdList = dict()
+stackMenuIdList = dict()
 
-loadedLayout = ''
+defaultLayoutItemId = 0
+loadedLayout = []
 
 settingsFile = 'layoutSettings.txt'
 
 def saveSettings():
 	file = open(os.path.join(sys.path[0],'..','scripts',settingsFile), 'w')
-	file.write(loadedLayout) 
+	for layoutName in loadedLayout:
+		file.write(layoutName+'\n')
 	file.close()
 	
 def readSettings():
 	global loadedLayout
 	if os.path.isfile(os.path.join(sys.path[0],'..','scripts',settingsFile)):
+		loadedLayout = []
 		file = open(os.path.join(sys.path[0],'..','scripts',settingsFile), 'r')
-		loadedLayout = file.readline()
+		for line in file.readlines():
+			line = line.replace('\n','')
+			if line != '':
+				loadedLayout.append(line)
 		file.close()
 
 
 def _loadprofiles():
 	print 'Loading layout profiles:',
 	new = []
-	for s in os.listdir(os.path.join(basepath, 'layoutProfiles')):
+	for s in os.listdir(os.path.join(basepath, layoutsDirectory)):
 		if not s.endswith('.py'): continue
 		s = os.path.split(s)[-1].rsplit('.py',1)[0]
 		if not s in layoutProfiles:
@@ -71,6 +79,10 @@
 	return gui.SetControlProperties(comp,prop,p)
 
 def _init():
+	global menuIdList
+	global stackMenuIdList
+	global defaultLayoutItemId
+	
 	_loadprofiles()
 	readSettings()
 	
@@ -87,58 +99,100 @@
 	
 	#add the refresh list button to the menu
 	gui.AddItemToMenu('MainForm.Panel4.LayoutMenu','Refresh list',(),'layoutProfileManager','onRefreshList')
+	StackLayoutMenu = gui.AddSubmenuToMenu('MainForm.Panel4.LayoutMenu','Stack layout')
 	gui.AddSeparatorToMenu('MainForm.Panel4.LayoutMenu')
 	
 	#add the default layout to the menu
-	gui.AddItemToMenu('MainForm.Panel4.LayoutMenu','default',(),'layoutProfileManager','onDefaultClick')
+	defaultLayoutItemId = gui.AddItemToMenu('MainForm.Panel4.LayoutMenu','default',(),'layoutProfileManager','onDefaultClick')
+	if len(loadedLayout) == 0:
+		gui.SetMenuItemState(defaultLayoutItemId,True,True)
 	
-	#add the layout to the menu
+	#add the layout to the menus
 	for name in layoutProfiles:
-		menuIdList.append(gui.AddItemToMenu('MainForm.Panel4.LayoutMenu',name,(name,),'layoutProfileManager','onLayoutClick'))
+		menuIdList[name] = gui.AddItemToMenu('MainForm.Panel4.LayoutMenu',name,(name,),'layoutProfileManager','onLayoutClick')
+		stackMenuIdList[name] = gui.AddItemToMenu(StackLayoutMenu,name,(name,),'layoutProfileManager','onStackLayoutClick')
+		if len(loadedLayout) &gt; 0 and name in loadedLayout:
+			gui.SetMenuItemState(menuIdList[name],True,True)
 		
 	#load the settings' layout
-	if loadedLayout != '':
-		layout = layoutProfiles[loadedLayout]
-		layout.loadLayout()
+	if len(loadedLayout) &gt; 0:
+		for layoutName in loadedLayout:
+			layout = layoutProfiles[layoutName]
+			layout.loadLayout()
 
+def UnloadLayouts():
+	global loadedLayout
+	for layoutName in loadedLayout:
+		layout = layoutProfiles[layoutName]
+		layout.unloadLayout()
+	loadedLayout = []
+	
 def onRefreshList(id):
 	global loadedLayout
+	global menuIdList
+	global defaultLayoutItemId
 	
-	if loadedLayout != '':
-		layout = layoutProfiles[loadedLayout]
-		layout.unloadLayout()
-		loadedLayout = ''
+	UnloadLayouts()
+	gui.SetMenuItemState(defaultLayoutItemId,True,True)
+	for menuName in menuIdList:
+		gui.SetMenuItemState(menuIdList[menuName],False,True)
 		
 	_reloadallprofiles()
 	_loadprofiles()
 	
 	# clear the menu list
-	global menuIdList
-	for id in menuIdList:
-		gui.RemoveFromMenu(id)
+	for name in menuIdList:
+		gui.RemoveFromMenu(menuIdList[name])
+		
+	menuIdList = dict()
 	
 	# reload the menu list
 	for name in layoutProfiles:
-		menuIdList.append(gui.AddItemToMenu('MainForm.Panel4.LayoutMenu',name,(name,),'layoutProfileManager','onLayoutClick'))
+		menuIdList[name] = gui.AddItemToMenu('MainForm.Panel4.LayoutMenu',name,(name,),'layoutProfileManager','onLayoutClick')
+		
+
+
+def onClose():
+	for layoutName in layoutProfiles:
+		layout = layoutProfiles[layoutName]
+		if 'saveLayoutSettings' in dir(layout):
+			function = layout.saveLayoutSettings
+			if type(function) == type(onClose):
+				layoutProfiles[layoutName].saveLayoutSettings()
 	
 def onDefaultClick(id):
 	global loadedLayout
 	
 	if loadedLayout != '':
-		layout = layoutProfiles[loadedLayout]
-		layout.unloadLayout()
-		loadedLayout = ''
+		UnloadLayouts()
 		saveSettings()
+		for menuName in menuIdList:
+			gui.SetMenuItemState(menuIdList[menuName],False,True)
+		gui.SetMenuItemState(defaultLayoutItemId,True,True)
+		
   
 def onLayoutClick(id,name):
 	global loadedLayout
 	
-	if loadedLayout != '':
-		layout = layoutProfiles[loadedLayout]
-		layout.unloadLayout()
+	if len(loadedLayout) &gt; 0:
+		UnloadLayouts()
 	
 	layout = layoutProfiles[name]
 	layout.loadLayout()
-	loadedLayout = name
+	loadedLayout.append(name)
 	saveSettings()
+	for menuName in menuIdList:
+		gui.SetMenuItemState(menuIdList[menuName],False,True)
+	gui.SetMenuItemState(menuIdList[name],True,True)
+	gui.SetMenuItemState(defaultLayoutItemId,False,True)
+	
+def onStackLayoutClick(id,name):
+	global loadedLayout
+	
+	layout = layoutProfiles[name]
+	layout.loadLayout()
+	loadedLayout.append(name)
+	gui.SetMenuItemState(menuIdList[name],True,True)
+	saveSettings()
+
   
\ No newline at end of file

Added: Lobby/TASClient/Python/scripts/layouts/BattleForm Compact.py
===================================================================
--- Lobby/TASClient/Python/scripts/layouts/BattleForm Compact.py	                        (rev 0)
+++ Lobby/TASClient/Python/scripts/layouts/BattleForm Compact.py	2009-01-28 20:08:51 UTC (rev 7230)
@@ -0,0 +1,125 @@
+import lobbyscript
+
+api = lobbyscript.Callback()
+gui = lobbyscript.GUI()
+
+opList = []
+newControlList = []
+
+def addOperationToList(control,property,subprop,oldValue):
+	op = dict()
+	op['Control'] = control
+	op['Property'] = property
+	op['SubProperty'] = subprop
+	op['OldValue'] = oldValue
+	opList.append(op)
+
+def changeControlProp(control,prop,subProp,value, undo = True):
+	p = gui.GetControlProperties(control,prop)
+	
+	if p == None:
+		print &quot;error : changeControlProp(&quot;+control+&quot;,&quot;+prop+&quot;,&quot;+subProp+&quot;,&quot;+str(value)+&quot;,&quot;+str(undo)+&quot;) failed.&quot;
+		
+	if undo:
+		if subProp == 'Align':
+			#  if the align changes we must save the previous pos and size
+			addOperationToList(control,prop,'Top',p['Top'])
+			addOperationToList(control,prop,'Left',p['Left'])
+			addOperationToList(control,prop,'Width',p['Width'])
+			addOperationToList(control,prop,'Height',p['Height'])
+		
+		addOperationToList(control,prop,subProp,p[subProp])
+
+	p[subProp] = value
+	return gui.SetControlProperties(control,prop,p)
+
+def loadLayout():
+	gui.StackLayoutChanges(False)
+	changeControlProp(&quot;BattleForm&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;True&quot;)
+	
+	gui.StackLayoutChanges(True)
+	gui.AddTab(&quot;New tab&quot;,&quot;MapOptionsTab&quot;,&quot;BattleForm.SpTBXTabControl1&quot;)
+	newControlList.append(&quot;BattleForm.MapOptionsTab&quot;)
+	changeControlProp(&quot;BattleForm.MapOptionsTab&quot;,&quot;&quot;,&quot;Caption&quot;,&quot;Map&quot;)
+	changeControlProp(&quot;BattleForm.Panel6&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.MapOptionsTab&quot;)
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;BevelOuter&quot;,&quot;bvNone&quot;)
+	changeControlProp(&quot;BattleForm.Panel5&quot;,&quot;&quot;,&quot;Height&quot;,&quot;355&quot;)
+	changeControlProp(&quot;BattleForm.Panel5&quot;,&quot;&quot;,&quot;Left&quot;,&quot;329&quot;)
+	changeControlProp(&quot;BattleForm.Panel5&quot;,&quot;&quot;,&quot;Top&quot;,&quot;0&quot;)
+	changeControlProp(&quot;BattleForm.Panel5&quot;,&quot;&quot;,&quot;Width&quot;,&quot;419&quot;)
+	changeControlProp(&quot;BattleForm.Panel5&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;)
+	gui.AddTab(&quot;New tab&quot;,&quot;BattleTab&quot;,&quot;BattleForm.SpTBXTabControl1&quot;)
+	newControlList.append(&quot;BattleForm.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.Panel2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;Height&quot;,&quot;355&quot;)
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;Left&quot;,&quot;0&quot;)
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;Top&quot;,&quot;0&quot;)
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;Width&quot;,&quot;748&quot;)
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;)
+	changeControlProp(&quot;BattleForm.Panel3&quot;,&quot;&quot;,&quot;Borders&quot;,&quot;False&quot;)
+	changeControlProp(&quot;BattleForm.BattleTab&quot;,&quot;&quot;,&quot;Caption&quot;,&quot;Battle&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXTabControl1&quot;,&quot;&quot;,&quot;ActiveTabIndex&quot;,&quot;5&quot;)
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Height&quot;,&quot;92&quot;)
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Left&quot;,&quot;486&quot;)
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Top&quot;,&quot;5&quot;)
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Width&quot;,&quot;242&quot;)
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Height&quot;,&quot;0&quot;)
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Left&quot;,&quot;439&quot;)
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Top&quot;,&quot;8&quot;)
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Width&quot;,&quot;44&quot;)
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alRight&quot;)
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Height&quot;,&quot;197&quot;)
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Left&quot;,&quot;8&quot;)
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Top&quot;,&quot;8&quot;)
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Width&quot;,&quot;426&quot;)
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;)
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;)
+	changeControlProp(&quot;BattleForm.Label12&quot;,&quot;&quot;,&quot;Left&quot;,&quot;115&quot;)
+	changeControlProp(&quot;BattleForm.Label12&quot;,&quot;&quot;,&quot;Top&quot;,&quot;20&quot;)
+	changeControlProp(&quot;BattleForm.MyAllyNoButton&quot;,&quot;&quot;,&quot;Left&quot;,&quot;175&quot;)
+	changeControlProp(&quot;BattleForm.MyAllyNoButton&quot;,&quot;&quot;,&quot;Top&quot;,&quot;18&quot;)
+	changeControlProp(&quot;BattleForm.MySideButton&quot;,&quot;&quot;,&quot;Left&quot;,&quot;225&quot;)
+	changeControlProp(&quot;BattleForm.MySideButton&quot;,&quot;&quot;,&quot;Top&quot;,&quot;18&quot;)
+	changeControlProp(&quot;BattleForm.MySideButton&quot;,&quot;&quot;,&quot;Height&quot;,&quot;20&quot;)
+	changeControlProp(&quot;BattleForm.TeamColorSpeedButton&quot;,&quot;&quot;,&quot;Height&quot;,&quot;20&quot;)
+	changeControlProp(&quot;BattleForm.TeamColorSpeedButton&quot;,&quot;&quot;,&quot;Top&quot;,&quot;18&quot;)
+	changeControlProp(&quot;BattleForm.TeamColorSpeedButton&quot;,&quot;&quot;,&quot;Left&quot;,&quot;345&quot;)
+	changeControlProp(&quot;BattleForm.SpectateCheckBox&quot;,&quot;&quot;,&quot;Left&quot;,&quot;465&quot;)
+	changeControlProp(&quot;BattleForm.SpectateCheckBox&quot;,&quot;&quot;,&quot;Top&quot;,&quot;21&quot;)
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Height&quot;,&quot;50&quot;)
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Borders&quot;,&quot;False&quot;)
+	changeControlProp(&quot;BattleForm.Panel2&quot;,&quot;&quot;,&quot;BevelOuter&quot;,&quot;bvNone&quot;)
+
+	gui.StackLayoutChanges(False)
+	
+	changeControlProp(&quot;BattleForm&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;)
+	
+def unloadLayout():
+	global opList
+	global newControlList
+	
+	for i in range(len(opList)):
+		op = opList.pop()
+		changeControlProp(op['Control'],op['Property'],op['SubProperty'],op['OldValue'],False)
+	
+	for controlName in newControlList:
+		gui.DeleteControl(controlName)
+
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;)
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;)
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;)
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Anchors&quot;,&quot;akTop,akRight&quot;)
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Anchors&quot;,&quot;akLeft,akTop,akRight,akBottom&quot;)
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Anchors&quot;,&quot;akTop,akRight&quot;)
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Anchors&quot;,&quot;akLeft,akTop,akRight,akBottom&quot;)
+	
+	opList = []
+	newControlList = []

Added: Lobby/TASClient/Python/scripts/layouts/BattleForm WideScreen.py
===================================================================
--- Lobby/TASClient/Python/scripts/layouts/BattleForm WideScreen.py	                        (rev 0)
+++ Lobby/TASClient/Python/scripts/layouts/BattleForm WideScreen.py	2009-01-28 20:08:51 UTC (rev 7230)
@@ -0,0 +1,160 @@
+import lobbyscript
+import sys, os
+
+api = lobbyscript.Callback()
+gui = lobbyscript.GUI()
+
+opList = []
+newControlList = []
+
+PlayerListWidth = &quot;361&quot;
+settingsFile = 'BattleForm_WideScreen_Settings.txt'
+
+def saveSettings():
+	file = open(os.path.join(sys.path[0],'..','scripts','layoutProfiles',settingsFile), 'w')
+	file.write(PlayerListWidth) 
+	file.close()
+	
+def readSettings():
+	global PlayerListWidth
+	if os.path.isfile(os.path.join(sys.path[0],'..','scripts','layoutProfiles',settingsFile)):
+		file = open(os.path.join(sys.path[0],'..','scripts','layoutProfiles',settingsFile), 'r')
+		PlayerListWidth = file.readline()
+		file.close()
+		
+def saveLayoutSettings():
+	global PlayerListWidth
+	print gui.GetControlProperties(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;)
+	PlayerListWidth = str(gui.GetControlProperties(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;)['Width'])
+	saveSettings()
+
+def addOperationToList(control,property,subprop,oldValue):
+	op = dict()
+	op['Control'] = control
+	op['Property'] = property
+	op['SubProperty'] = subprop
+	op['OldValue'] = oldValue
+	opList.append(op)
+
+def changeControlProp(control,prop,subProp,value, undo = True):
+	p = gui.GetControlProperties(control,prop)
+	
+	if p == None:
+		print &quot;error : changeControlProp(&quot;+control+&quot;,&quot;+prop+&quot;,&quot;+subProp+&quot;,&quot;+str(value)+&quot;,&quot;+str(undo)+&quot;) failed.&quot;
+		
+	if undo:
+		if subProp == 'Align':
+			#  if the align changes we must save the previous pos and size
+			addOperationToList(control,prop,'Top',p['Top'])
+			addOperationToList(control,prop,'Left',p['Left'])
+			addOperationToList(control,prop,'Width',p['Width'])
+			addOperationToList(control,prop,'Height',p['Height'])
+		
+		addOperationToList(control,prop,subProp,p[subProp])
+
+	p[subProp] = value
+	return gui.SetControlProperties(control,prop,p)
+
+def loadLayout():
+	readSettings()
+	
+	gui.StackLayoutChanges(False)
+	changeControlProp(&quot;BattleForm&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;True&quot;)
+	
+	gui.StackLayoutChanges(True)
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Height&quot;,&quot;129&quot;);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Top&quot;,&quot;124&quot;);
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Height&quot;,&quot;92&quot;);
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Left&quot;,&quot;617&quot;);
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Top&quot;,&quot;5&quot;);
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Width&quot;,&quot;242&quot;);
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;);
+	changeControlProp(&quot;BattleForm.Label12&quot;,&quot;&quot;,&quot;Top&quot;,&quot;20&quot;);
+	changeControlProp(&quot;BattleForm.MyTeamNoButton&quot;,&quot;&quot;,&quot;Height&quot;,&quot;21&quot;);
+	changeControlProp(&quot;BattleForm.MyTeamNoButton&quot;,&quot;&quot;,&quot;Left&quot;,&quot;60&quot;);
+	changeControlProp(&quot;BattleForm.MyTeamNoButton&quot;,&quot;&quot;,&quot;Top&quot;,&quot;16&quot;);
+	changeControlProp(&quot;BattleForm.MyAllyNoButton&quot;,&quot;&quot;,&quot;Height&quot;,&quot;21&quot;);
+	changeControlProp(&quot;BattleForm.MyAllyNoButton&quot;,&quot;&quot;,&quot;Top&quot;,&quot;16&quot;);
+	changeControlProp(&quot;BattleForm.TeamColorSpeedButton&quot;,&quot;&quot;,&quot;Top&quot;,&quot;16&quot;);
+	changeControlProp(&quot;BattleForm.MySideButton&quot;,&quot;&quot;,&quot;Top&quot;,&quot;16&quot;);
+	changeControlProp(&quot;BattleForm.SpectateCheckBox&quot;,&quot;&quot;,&quot;Top&quot;,&quot;20&quot;);
+	changeControlProp(&quot;BattleForm.Label12&quot;,&quot;&quot;,&quot;Left&quot;,&quot;112&quot;);
+	changeControlProp(&quot;BattleForm.MyAllyNoButton&quot;,&quot;&quot;,&quot;Left&quot;,&quot;168&quot;);
+	changeControlProp(&quot;BattleForm.TeamColorSpeedButton&quot;,&quot;&quot;,&quot;Left&quot;,&quot;216&quot;);
+	changeControlProp(&quot;BattleForm.MySideButton&quot;,&quot;&quot;,&quot;Left&quot;,&quot;336&quot;);
+	changeControlProp(&quot;BattleForm.SpectateCheckBox&quot;,&quot;&quot;,&quot;Left&quot;,&quot;460&quot;);
+	changeControlProp(&quot;BattleForm.TeamColorSpeedButton&quot;,&quot;&quot;,&quot;Height&quot;,&quot;21&quot;);
+	changeControlProp(&quot;BattleForm.MySideButton&quot;,&quot;&quot;,&quot;Height&quot;,&quot;21&quot;);
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Height&quot;,&quot;48&quot;);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Width&quot;,&quot;361&quot;);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alLeft&quot;);
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Height&quot;,&quot;39&quot;);
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Left&quot;,&quot;570&quot;);
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Top&quot;,&quot;8&quot;);
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Width&quot;,&quot;44&quot;);
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alRight&quot;);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Height&quot;,&quot;129&quot;);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Left&quot;,&quot;8&quot;);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Top&quot;,&quot;124&quot;);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Width&quot;,PlayerListWidth);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alRight&quot;);
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.Panel4&quot;);
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;6&quot;);
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Left&quot;,&quot;2&quot;);
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Top&quot;,&quot;50&quot;);
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Width&quot;,&quot;863&quot;);
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alRight&quot;);
+	changeControlProp(&quot;BattleForm.ChatRichEdit&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.Panel4&quot;);
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Height&quot;,&quot;261&quot;);
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Left&quot;,&quot;4&quot;);
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Top&quot;,&quot;396&quot;);
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Width&quot;,&quot;867&quot;);
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;);	
+	gui.AddControl(&quot;ChatPanel&quot;,&quot;BattleForm.Panel4&quot;,&quot;TSpTBXPanel&quot;)
+	newControlList.append(&quot;BattleForm.Panel4.ChatPanel&quot;)
+	changeControlProp(&quot;BattleForm.Panel4.ChatPanel&quot;,&quot;&quot;,&quot;Height&quot;,&quot;0&quot;);
+	changeControlProp(&quot;BattleForm.Panel4.ChatPanel&quot;,&quot;&quot;,&quot;Left&quot;,&quot;0&quot;);
+	changeControlProp(&quot;BattleForm.Panel4.ChatPanel&quot;,&quot;&quot;,&quot;Top&quot;,&quot;0&quot;);
+	changeControlProp(&quot;BattleForm.Panel4.ChatPanel&quot;,&quot;&quot;,&quot;Width&quot;,&quot;0&quot;);
+	changeControlProp(&quot;BattleForm.Panel4.ChatPanel&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;);
+	changeControlProp(&quot;BattleForm.ChatRichEdit&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.Panel4.ChatPanel&quot;);
+	changeControlProp(&quot;BattleForm.InputEdit&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.Panel4.ChatPanel&quot;);
+	changeControlProp(&quot;BattleForm.ChatRichEdit&quot;,&quot;&quot;,&quot;Height&quot;,&quot;193&quot;);
+	changeControlProp(&quot;BattleForm.ChatRichEdit&quot;,&quot;&quot;,&quot;Left&quot;,&quot;0&quot;);
+	changeControlProp(&quot;BattleForm.ChatRichEdit&quot;,&quot;&quot;,&quot;Top&quot;,&quot;48&quot;);
+	changeControlProp(&quot;BattleForm.ChatRichEdit&quot;,&quot;&quot;,&quot;Width&quot;,&quot;321&quot;);
+	changeControlProp(&quot;BattleForm.ChatRichEdit&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;);
+	changeControlProp(&quot;BattleForm.Panel2&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;);
+
+	gui.StackLayoutChanges(False)
+	changeControlProp(&quot;BattleForm&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;)
+	
+def unloadLayout():
+	global opList
+	global newControlList
+	
+	for i in range(len(opList)):
+		op = opList.pop()
+		changeControlProp(op['Control'],op['Property'],op['SubProperty'],op['OldValue'],False)
+	
+	for controlName in newControlList:
+		gui.DeleteControl(controlName)
+
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;6&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Left&quot;,&quot;4&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Top&quot;,&quot;396&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Width&quot;,&quot;869&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;6&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Left&quot;,&quot;4&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Top&quot;,&quot;396&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Width&quot;,&quot;869&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;);
+	changeControlProp(&quot;BattleForm.MyOptionsGroupBox&quot;,&quot;&quot;,&quot;Anchors&quot;,&quot;akTop,akRight&quot;);
+	changeControlProp(&quot;BattleForm.lblTeamNbr&quot;,&quot;&quot;,&quot;Anchors&quot;,&quot;akTop,akRight&quot;);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alLeft&quot;);
+	changeControlProp(&quot;BattleForm.VDTBattleClients&quot;,&quot;&quot;,&quot;Anchors&quot;,&quot;akLeft,akTop,akRight,akBottom&quot;);
+
+	
+	opList = []
+	newControlList = []

Added: Lobby/TASClient/Python/scripts/layouts/BattleList in BattleForm.py
===================================================================
--- Lobby/TASClient/Python/scripts/layouts/BattleList in BattleForm.py	                        (rev 0)
+++ Lobby/TASClient/Python/scripts/layouts/BattleList in BattleForm.py	2009-01-28 20:08:51 UTC (rev 7230)
@@ -0,0 +1,111 @@
+import lobbyscript
+
+api = lobbyscript.Callback()
+gui = lobbyscript.GUI()
+
+opList = []
+newControlList = []
+
+def addOperationToList(control,property,subprop,oldValue):
+	op = dict()
+	op['Control'] = control
+	op['Property'] = property
+	op['SubProperty'] = subprop
+	op['OldValue'] = oldValue
+	opList.append(op)
+
+def changeControlProp(control,prop,subProp,value, undo = True):
+	p = gui.GetControlProperties(control,prop)
+	
+	if p == None:
+		print &quot;error : changeControlProp(&quot;+control+&quot;,&quot;+prop+&quot;,&quot;+subProp+&quot;,&quot;+str(value)+&quot;,&quot;+str(undo)+&quot;) failed.&quot;
+		
+	if undo:
+		if subProp == 'Align':
+			#  if the align changes we must save the previous pos and size
+			addOperationToList(control,prop,'Top',p['Top'])
+			addOperationToList(control,prop,'Left',p['Left'])
+			addOperationToList(control,prop,'Width',p['Width'])
+			addOperationToList(control,prop,'Height',p['Height'])
+		
+		addOperationToList(control,prop,subProp,p[subProp])
+
+	p[subProp] = value
+	return gui.SetControlProperties(control,prop,p)
+
+def loadLayout():
+	gui.StackLayoutChanges(True)
+	gui.AddControl(&quot;MainTab&quot;,&quot;BattleForm.SpTBXTitleBar1&quot;,&quot;TSpTBXTabControl&quot;)
+	newControlList.append(&quot;BattleForm.SpTBXTitleBar1.MainTab&quot;)
+	gui.AddTab(&quot;New tab&quot;,&quot;BattleListTab&quot;,&quot;BattleForm.SpTBXTitleBar1.MainTab&quot;)
+	newControlList.append(&quot;BattleForm.SpTBXTitleBar1.BattleListTab&quot;)
+	gui.AddTab(&quot;New tab&quot;,&quot;BattleTab&quot;,&quot;BattleForm.SpTBXTitleBar1.MainTab&quot;)
+	newControlList.append(&quot;BattleForm.SpTBXTitleBar1.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXTitleBar1.BattleTab&quot;,&quot;&quot;,&quot;Caption&quot;,&quot;Battle&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXTitleBar1.BattleListTab&quot;,&quot;&quot;,&quot;Caption&quot;,&quot;Battle list&quot;)
+	changeControlProp(&quot;BattleForm.Panel3&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.SpTBXTitleBar1.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.Panel2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.SpTBXTitleBar1.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.SpTBXTitleBar1.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.SpTBXTitleBar1.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.SpTBXTitleBar1.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.SpTBXTitleBar1.BattleTab&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXTitleBar1.MainTab&quot;,&quot;&quot;,&quot;Height&quot;,&quot;193&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXTitleBar1.MainTab&quot;,&quot;&quot;,&quot;Left&quot;,&quot;0&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXTitleBar1.MainTab&quot;,&quot;&quot;,&quot;Top&quot;,&quot;0&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXTitleBar1.MainTab&quot;,&quot;&quot;,&quot;Width&quot;,&quot;289&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXTitleBar1.MainTab&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;6&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Left&quot;,&quot;2&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Top&quot;,&quot;383&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1036&quot;)
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;MainForm.BattlesPanel&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;BattleForm.SpTBXTitleBar1.BattleListTab&quot;)
+	changeControlProp(&quot;MainForm.FiltersButton&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;)
+	changeControlProp(&quot;MainForm.FilterGroup&quot;,&quot;&quot;,&quot;Height&quot;,&quot;174&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;True&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;)
+
+	gui.StackLayoutChanges(False)
+	
+def unloadLayout():
+	global opList
+	global newControlList
+	
+	for i in range(len(opList)):
+		op = opList.pop()
+		changeControlProp(op['Control'],op['Property'],op['SubProperty'],op['OldValue'],False)
+	
+	for controlName in newControlList:
+		gui.DeleteControl(controlName)
+
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Height&quot;,&quot;443&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Left&quot;,&quot;2&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Top&quot;,&quot;295&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1064&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;6&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Left&quot;,&quot;2&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Top&quot;,&quot;738&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1064&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;True&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alNone&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Height&quot;,&quot;300&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Left&quot;,&quot;2&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Top&quot;,&quot;47&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1064&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;)
+	changeControlProp(&quot;MainForm.SpTBXTabSheet2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;147&quot;)
+	changeControlProp(&quot;MainForm.FilterGroup&quot;,&quot;&quot;,&quot;Height&quot;,&quot;0&quot;)
+
+	
+	opList = []
+	newControlList = []

Added: Lobby/TASClient/Python/scripts/layouts/MainForm Tabbed including BattleForm.py
===================================================================
--- Lobby/TASClient/Python/scripts/layouts/MainForm Tabbed including BattleForm.py	                        (rev 0)
+++ Lobby/TASClient/Python/scripts/layouts/MainForm Tabbed including BattleForm.py	2009-01-28 20:08:51 UTC (rev 7230)
@@ -0,0 +1,112 @@
+import lobbyscript
+
+api = lobbyscript.Callback()
+gui = lobbyscript.GUI()
+
+opList = []
+newControlList = []
+
+def addOperationToList(control,property,subprop,oldValue):
+	op = dict()
+	op['Control'] = control
+	op['Property'] = property
+	op['SubProperty'] = subprop
+	op['OldValue'] = oldValue
+	opList.append(op)
+
+def changeControlProp(control,prop,subProp,value, undo = True):
+	p = gui.GetControlProperties(control,prop)
+	
+	if p == None:
+		print &quot;error : changeControlProp(&quot;+control+&quot;,&quot;+prop+&quot;,&quot;+subProp+&quot;,&quot;+str(value)+&quot;,&quot;+str(undo)+&quot;) failed.&quot;
+
+	if undo:
+		if subProp == 'Align':
+			#  if the align changes we must save the previous pos and size
+			addOperationToList(control,prop,'Top',p['Top'])
+			addOperationToList(control,prop,'Left',p['Left'])
+			addOperationToList(control,prop,'Width',p['Width'])
+			addOperationToList(control,prop,'Height',p['Height'])
+		
+		addOperationToList(control,prop,subProp,p[subProp])
+
+	p[subProp] = value
+	return gui.SetControlProperties(control,prop,p)
+
+def loadLayout():
+	gui.StackLayoutChanges(False)
+	changeControlProp(&quot;BattleForm&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;True&quot;)
+	changeControlProp(&quot;MainForm&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;True&quot;)
+	
+	
+	gui.StackLayoutChanges(True)
+	gui.AddControl(&quot;MainPanel&quot;,&quot;MainForm.Panel1&quot;,&quot;TSpTBXPanel&quot;)
+	newControlList.append(&quot;MainForm.Panel1.MainPanel&quot;)
+	gui.AddControl(&quot;MainTabs&quot;,&quot;MainForm.Panel1.MainPanel&quot;,&quot;TSpTBXTabControl&quot;)
+	newControlList.append(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;)
+	gui.AddTab(&quot;New tab&quot;,&quot;ChatTab&quot;,&quot;MainForm.Panel1.MainPanel.MainTabs&quot;)
+	newControlList.append(&quot;MainForm.Panel1.MainPanel.ChatTab&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.ChatTab&quot;,&quot;&quot;,&quot;Caption&quot;,&quot;Chat&quot;);
+	gui.AddTab(&quot;New tab&quot;,&quot;BattlesTab&quot;,&quot;MainForm.Panel1.MainPanel.MainTabs&quot;)
+	newControlList.append(&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;,&quot;&quot;,&quot;Caption&quot;,&quot;Battle list&quot;);
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.ChatTab&quot;);
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;);
+	changeControlProp(&quot;MainForm.Panel2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.ChatTab&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;);
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.ChatTab&quot;);
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alLeft&quot;);
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Height&quot;,&quot;636&quot;);
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Left&quot;,&quot;1147&quot;);
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alRight&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;Margins&quot;,&quot;Bottom&quot;,&quot;5&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;Margins&quot;,&quot;Left&quot;,&quot;5&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;Margins&quot;,&quot;Right&quot;,&quot;5&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;Margins&quot;,&quot;Top&quot;,&quot;5&quot;);
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Left&quot;,&quot;7&quot;);
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Top&quot;,&quot;283&quot;);
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1135&quot;);
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;);
+	changeControlProp(&quot;MainForm.FiltersButton&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;);
+	changeControlProp(&quot;MainForm.FilterGroup&quot;,&quot;&quot;,&quot;Height&quot;,&quot;173&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel&quot;,&quot;&quot;,&quot;Borders&quot;,&quot;False&quot;);
+	gui.AddTab(&quot;New tab&quot;,&quot;BattleTab&quot;,&quot;MainForm.Panel1.MainPanel.MainTabs&quot;)
+	newControlList.append(&quot;MainForm.Panel1.MainPanel.BattleTab&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattleTab&quot;,&quot;Item&quot;,&quot;CustomHeight&quot;,&quot;30&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattleTab&quot;,&quot;Item.FontSettings&quot;,&quot;Bold&quot;,&quot;tsTrue&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;,&quot;Item.FontSettings&quot;,&quot;Bold&quot;,&quot;tsTrue&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;,&quot;Item.FontSettings&quot;,&quot;Size&quot;,&quot;120&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattleTab&quot;,&quot;Item.FontSettings&quot;,&quot;Size&quot;,&quot;120&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.ChatTab&quot;,&quot;Item.FontSettings&quot;,&quot;Size&quot;,&quot;120&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.ChatTab&quot;,&quot;Item.FontSettings&quot;,&quot;Bold&quot;,&quot;tsTrue&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattleTab&quot;,&quot;&quot;,&quot;Caption&quot;,&quot;Battle&quot;);
+	changeControlProp(&quot;BattleForm.Panel1&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.BattleTab&quot;);
+	changeControlProp(&quot;BattleForm.Splitter2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.BattleTab&quot;);
+	changeControlProp(&quot;BattleForm.Panel2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.BattleTab&quot;);
+	changeControlProp(&quot;BattleForm.Panel3&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.BattleTab&quot;);
+	changeControlProp(&quot;BattleForm.Panel4&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.BattleTab&quot;);
+	changeControlProp(&quot;BattleForm.SpTBXSplitter2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.BattleTab&quot;);
+
+	gui.StackLayoutChanges(False)
+	changeControlProp(&quot;BattleForm&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;)
+	
+def unloadLayout():
+	global opList
+	global newControlList
+	
+	for i in range(len(opList)):
+		op = opList.pop()
+		changeControlProp(op['Control'],op['Property'],op['SubProperty'],op['OldValue'],False)
+	
+	for controlName in newControlList:
+		gui.DeleteControl(controlName)
+
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alLeft&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alRight&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;)
+	
+	opList = []
+	newControlList = []

Added: Lobby/TASClient/Python/scripts/layouts/MainForm Tabbed.py
===================================================================
--- Lobby/TASClient/Python/scripts/layouts/MainForm Tabbed.py	                        (rev 0)
+++ Lobby/TASClient/Python/scripts/layouts/MainForm Tabbed.py	2009-01-28 20:08:51 UTC (rev 7230)
@@ -0,0 +1,108 @@
+import lobbyscript
+
+api = lobbyscript.Callback()
+gui = lobbyscript.GUI()
+
+opList = []
+newControlList = []
+
+def addOperationToList(control,property,subprop,oldValue):
+	op = dict()
+	op['Control'] = control
+	op['Property'] = property
+	op['SubProperty'] = subprop
+	op['OldValue'] = oldValue
+	opList.append(op)
+
+def changeControlProp(control,prop,subProp,value, undo = True):
+	p = gui.GetControlProperties(control,prop)
+	
+	if p == None:
+		print &quot;error : changeControlProp(&quot;+control+&quot;,&quot;+prop+&quot;,&quot;+subProp+&quot;,&quot;+str(value)+&quot;,&quot;+str(undo)+&quot;) failed.&quot;
+		
+	if undo:
+		if subProp == 'Align':
+			#  if the align changes we must save the previous pos and size
+			addOperationToList(control,prop,'Top',p['Top'])
+			addOperationToList(control,prop,'Left',p['Left'])
+			addOperationToList(control,prop,'Width',p['Width'])
+			addOperationToList(control,prop,'Height',p['Height'])
+		
+		addOperationToList(control,prop,subProp,p[subProp])
+
+	p[subProp] = value
+	return gui.SetControlProperties(control,prop,p)
+
+def loadLayout():
+	changeControlProp(&quot;MainForm&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;True&quot;)
+	
+	gui.StackLayoutChanges(True)
+	gui.AddControl(&quot;MainPanel&quot;,&quot;MainForm.Panel1&quot;,&quot;TSpTBXPanel&quot;)
+	newControlList.append(&quot;MainForm.Panel1.MainPanel&quot;)
+	gui.AddControl(&quot;MainTabs&quot;,&quot;MainForm.Panel1.MainPanel&quot;,&quot;TSpTBXTabControl&quot;)
+	newControlList.append(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;)
+	gui.AddTab(&quot;New tab&quot;,&quot;ChatTab&quot;,&quot;MainForm.Panel1.MainPanel.MainTabs&quot;)
+	newControlList.append(&quot;MainForm.Panel1.MainPanel.ChatTab&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.ChatTab&quot;,&quot;&quot;,&quot;Caption&quot;,&quot;Chat&quot;)
+	gui.AddTab(&quot;New tab&quot;,&quot;BattlesTab&quot;,&quot;MainForm.Panel1.MainPanel.MainTabs&quot;)
+	newControlList.append(&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;,&quot;Item&quot;,&quot;CustomHeight&quot;,&quot;30&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;,&quot;Item.FontSettings&quot;,&quot;Bold&quot;,&quot;tsTrue&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;,&quot;Item.FontSettings&quot;,&quot;Size&quot;,&quot;120&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.ChatTab&quot;,&quot;Item.FontSettings&quot;,&quot;Size&quot;,&quot;120&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.ChatTab&quot;,&quot;Item.FontSettings&quot;,&quot;Bold&quot;,&quot;tsTrue&quot;);
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;,&quot;&quot;,&quot;Caption&quot;,&quot;Battle list&quot;)
+	changeControlProp(&quot;MainForm.PageControl1&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.ChatTab&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.BattlesTab&quot;)
+	changeControlProp(&quot;MainForm.Panel2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.ChatTab&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel&quot;,&quot;&quot;,&quot;Height&quot;,&quot;0&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel&quot;,&quot;&quot;,&quot;Left&quot;,&quot;0&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel&quot;,&quot;&quot;,&quot;Top&quot;,&quot;0&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel&quot;,&quot;&quot;,&quot;Width&quot;,&quot;0&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;&quot;,&quot;Height&quot;,&quot;193&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;&quot;,&quot;Left&quot;,&quot;0&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;&quot;,&quot;Top&quot;,&quot;0&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;&quot;,&quot;Width&quot;,&quot;289&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1.MainPanel.ChatTab&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alLeft&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Height&quot;,&quot;636&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Left&quot;,&quot;1147&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Top&quot;,&quot;0&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Width&quot;,&quot;10&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alRight&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;Margins&quot;,&quot;Bottom&quot;,&quot;5&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;Margins&quot;,&quot;Left&quot;,&quot;5&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;Margins&quot;,&quot;Right&quot;,&quot;5&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel.MainTabs&quot;,&quot;Margins&quot;,&quot;Top&quot;,&quot;5&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Height&quot;,&quot;270&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Left&quot;,&quot;7&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Top&quot;,&quot;283&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1135&quot;)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alClient&quot;)
+	changeControlProp(&quot;MainForm.FiltersButton&quot;,&quot;&quot;,&quot;Visible&quot;,&quot;False&quot;)
+	changeControlProp(&quot;MainForm.FilterGroup&quot;,&quot;&quot;,&quot;Height&quot;,&quot;173&quot;)
+	changeControlProp(&quot;MainForm.Panel1.MainPanel&quot;,&quot;&quot;,&quot;Borders&quot;,&quot;False&quot;)
+
+	gui.StackLayoutChanges(False)
+	
+def unloadLayout():
+	global opList
+	global newControlList
+	
+	for i in range(len(opList)):
+		op = opList.pop()
+		changeControlProp(op['Control'],op['Property'],op['SubProperty'],op['OldValue'],False)
+	
+	for controlName in newControlList:
+		gui.DeleteControl(controlName)
+		
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;)
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alLeft&quot;)
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alRight&quot;)
+
+	opList = []
+	newControlList = []

Added: Lobby/TASClient/Python/scripts/layouts/Old Style Player List.py
===================================================================
--- Lobby/TASClient/Python/scripts/layouts/Old Style Player List.py	                        (rev 0)
+++ Lobby/TASClient/Python/scripts/layouts/Old Style Player List.py	2009-01-28 20:08:51 UTC (rev 7230)
@@ -0,0 +1,76 @@
+import lobbyscript
+
+api = lobbyscript.Callback()
+gui = lobbyscript.GUI()
+
+opList = []
+newControlList = []
+
+def addOperationToList(control,property,subprop,oldValue):
+	op = dict()
+	op['Control'] = control
+	op['Property'] = property
+	op['SubProperty'] = subprop
+	op['OldValue'] = oldValue
+	opList.append(op)
+
+def changeControlProp(control,prop,subProp,value, undo = True):
+	p = gui.GetControlProperties(control,prop)
+
+	if undo:
+		if subProp == 'Align':
+			#  if the align changes we must save the previous pos and size
+			addOperationToList(control,prop,'Top',p['Top'])
+			addOperationToList(control,prop,'Left',p['Left'])
+			addOperationToList(control,prop,'Width',p['Width'])
+			addOperationToList(control,prop,'Height',p['Height'])
+		
+		addOperationToList(control,prop,subProp,p[subProp])
+
+	p[subProp] = value
+	return gui.SetControlProperties(control,prop,p)
+
+def loadLayout():
+	gui.StackLayoutChanges(True)
+	changeControlProp(&quot;MainForm.Panel3&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.MainPanel&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.MainPanel&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;6&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Left&quot;,&quot;2&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Top&quot;,&quot;683&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1175&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;6&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Left&quot;,&quot;2&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Top&quot;,&quot;683&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1175&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;);
+	changeControlProp(&quot;MainForm.Panel2&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1&quot;);
+	changeControlProp(&quot;MainForm.Splitter1&quot;,&quot;&quot;,&quot;Parent&quot;,&quot;MainForm.Panel1&quot;);
+
+	gui.StackLayoutChanges(False)
+	
+def unloadLayout():
+	global opList
+	global newControlList
+	
+	for i in range(len(opList)):
+		op = opList.pop()
+		changeControlProp(op['Control'],op['Property'],op['SubProperty'],op['OldValue'],False)
+	
+	for controlName in newControlList:
+		gui.DeleteControl(controlName)
+
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;6&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Left&quot;,&quot;2&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Top&quot;,&quot;683&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1175&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alTop&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Height&quot;,&quot;6&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Left&quot;,&quot;2&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Top&quot;,&quot;683&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Width&quot;,&quot;1175&quot;);
+	changeControlProp(&quot;MainForm.Splitter2&quot;,&quot;&quot;,&quot;Align&quot;,&quot;alBottom&quot;);
+
+	
+	opList = []
+	newControlList = []

Modified: Lobby/TASClient/TASClient.dof
===================================================================
--- Lobby/TASClient/TASClient.dof	2009-01-27 19:17:23 UTC (rev 7229)
+++ Lobby/TASClient/TASClient.dof	2009-01-28 20:08:51 UTC (rev 7230)
@@ -115,7 +115,7 @@
 MajorVer=0
 MinorVer=3
 Release=0
-Build=563
+Build=565
 Debug=0
 PreRelease=0
 Special=0
@@ -126,7 +126,7 @@
 [Version Info Keys]
 CompanyName=
 FileDescription=TA Spring lobby client
-FileVersion=0.3.0.563
+FileVersion=0.3.0.565
 InternalName=
 LegalCopyright=
 LegalTrademarks=

Modified: Lobby/TASClient/TASClient.res
===================================================================
(Binary files differ)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001998.html">[Taspring-linux-commit] r7229 - Lobby/TASClient
</A></li>
	<LI>Next message: <A HREF="002000.html">[Taspring-linux-commit] r7231 - in Lobby/TASClient: . Python	Python/scripts Python/scripts/subf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1999">[ date ]</a>
              <a href="thread.html#1999">[ thread ]</a>
              <a href="subject.html#1999">[ subject ]</a>
              <a href="author.html#1999">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
