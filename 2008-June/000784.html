<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r6005 - in trunk/Lobby: .	BattleHubFramework BattleHubFramework/build	BattleHubFramework/nbproject	BattleHubFramework/nbproject/private BattleHubFramework/src	BattleHubFramework/src/org BattleHubFramework/src/org/darkstars	BattleHubFramework/src/org/darkstars/battlehub	BattleHubFramework/src/org/darkstars/battlehub/framework	BattleHubFramework/src/org/darkstars/battlehub/framework/protocol	BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6005%20-%20in%20trunk/Lobby%3A%20.%0A%09BattleHubFramework%20BattleHubFramework/build%0A%09BattleHubFramework/nbproject%0A%09BattleHubFramework/nbproject/private%20BattleHubFramework/src%0A%09BattleHubFramework/src/org%20BattleHubFramework/src/org/darkstars%0A%09BattleHubFramework/src/org/darkstars/battlehub%0A%09BattleHubFramework/src/org/darkstars/battlehub/framework%0A%09BattleHubFramework/src/org/darkstars/battlehub/framework/protocol%0A%09BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver&In-Reply-To=%3C20080609014023.4E26447CD%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000785.html">
   <LINK REL="Next"  HREF="000786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r6005 - in trunk/Lobby: .	BattleHubFramework BattleHubFramework/build	BattleHubFramework/nbproject	BattleHubFramework/nbproject/private BattleHubFramework/src	BattleHubFramework/src/org BattleHubFramework/src/org/darkstars	BattleHubFramework/src/org/darkstars/battlehub	BattleHubFramework/src/org/darkstars/battlehub/framework	BattleHubFramework/src/org/darkstars/battlehub/framework/protocol	BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6005%20-%20in%20trunk/Lobby%3A%20.%0A%09BattleHubFramework%20BattleHubFramework/build%0A%09BattleHubFramework/nbproject%0A%09BattleHubFramework/nbproject/private%20BattleHubFramework/src%0A%09BattleHubFramework/src/org%20BattleHubFramework/src/org/darkstars%0A%09BattleHubFramework/src/org/darkstars/battlehub%0A%09BattleHubFramework/src/org/darkstars/battlehub/framework%0A%09BattleHubFramework/src/org/darkstars/battlehub/framework/protocol%0A%09BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver&In-Reply-To=%3C20080609014023.4E26447CD%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r6005 - in trunk/Lobby: .	BattleHubFramework BattleHubFramework/build	BattleHubFramework/nbproject	BattleHubFramework/nbproject/private BattleHubFramework/src	BattleHubFramework/src/org BattleHubFramework/src/org/darkstars	BattleHubFramework/src/org/darkstars/battlehub	BattleHubFramework/src/org/darkstars/battlehub/framework	BattleHubFramework/src/org/darkstars/battlehub/framework/protocol	BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Mon Jun  9 03:40:22 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000785.html">[Taspring-linux-commit] r6004 - trunk
</A></li>
        <LI>Next message: <A HREF="000786.html">[Taspring-linux-commit] r6006 - in trunk/Lobby/BattleHubFramework:	. src src/aflobby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#784">[ date ]</a>
              <a href="thread.html#784">[ thread ]</a>
              <a href="subject.html#784">[ subject ]</a>
              <a href="author.html#784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tnowell
Date: 2008-06-09 03:40:21 +0200 (Mon, 09 Jun 2008)
New Revision: 6005

Added:
   trunk/Lobby/BattleHubFramework/
   trunk/Lobby/BattleHubFramework/build.xml
   trunk/Lobby/BattleHubFramework/build/
   trunk/Lobby/BattleHubFramework/build/classes/
   trunk/Lobby/BattleHubFramework/dist/
   trunk/Lobby/BattleHubFramework/nbproject/
   trunk/Lobby/BattleHubFramework/nbproject/build-impl.xml
   trunk/Lobby/BattleHubFramework/nbproject/genfiles.properties
   trunk/Lobby/BattleHubFramework/nbproject/private/
   trunk/Lobby/BattleHubFramework/nbproject/private/private.properties
   trunk/Lobby/BattleHubFramework/nbproject/project.properties
   trunk/Lobby/BattleHubFramework/nbproject/project.xml
   trunk/Lobby/BattleHubFramework/src/
   trunk/Lobby/BattleHubFramework/src/org/
   trunk/Lobby/BattleHubFramework/src/org/darkstars/
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CBase64Coder.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CConnection.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CCore.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CEvent.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CHolePuncher.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CPlayer.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CStringHelper.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/IBattleInfo.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/ICentralClass.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/IModule.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/ITrafficListener.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/Misc.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/IChannelModel.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/IProtocol.java
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver/
   trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver/CBasicTASServerProtocol.java
   trunk/Lobby/BattleHubFramework/test/
Log:
Added BattleHub framework (really should write the name change blog post)

Basically I separated out the core classes of BattleHub/AFLobby into a separate library that battlehub now depend son. This is also useful as a bot sdk.

Contains various refactors and fixes. The BattleHub project itself will be committed at a later date, btu for now this library is self contained.

Added: trunk/Lobby/BattleHubFramework/build.xml
===================================================================
--- trunk/Lobby/BattleHubFramework/build.xml	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/build.xml	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,69 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;!-- You may freely edit this file. See commented blocks below for --&gt;
+&lt;!-- some examples of how to customize the build. --&gt;
+&lt;!-- (If you delete it and reopen the project it will be recreated.) --&gt;
+&lt;project name=&quot;BattleHubFramework&quot; default=&quot;default&quot; basedir=&quot;.&quot;&gt;
+    &lt;description&gt;Builds, tests, and runs the project BattleHubFramework.&lt;/description&gt;
+    &lt;import file=&quot;nbproject/build-impl.xml&quot;/&gt;
+    &lt;!--
+
+    There exist several targets which are by default empty and which can be 
+    used for execution of your tasks. These targets are usually executed 
+    before and after some main targets. They are: 
+
+      -pre-init:                 called before initialization of project properties
+      -post-init:                called after initialization of project properties
+      -pre-compile:              called before javac compilation
+      -post-compile:             called after javac compilation
+      -pre-compile-single:       called before javac compilation of single file
+      -post-compile-single:      called after javac compilation of single file
+      -pre-compile-test:         called before javac compilation of JUnit tests
+      -post-compile-test:        called after javac compilation of JUnit tests
+      -pre-compile-test-single:  called before javac compilation of single JUnit test
+      -post-compile-test-single: called after javac compilation of single JUunit test
+      -pre-jar:                  called before JAR building
+      -post-jar:                 called after JAR building
+      -post-clean:               called after cleaning build products
+
+    (Targets beginning with '-' are not intended to be called on their own.)
+
+    Example of inserting an obfuscator after compilation could look like this:
+
+        &lt;target name=&quot;-post-compile&quot;&gt;
+            &lt;obfuscate&gt;
+                &lt;fileset dir=&quot;${build.classes.dir}&quot;/&gt;
+            &lt;/obfuscate&gt;
+        &lt;/target&gt;
+
+    For list of available properties check the imported 
+    nbproject/build-impl.xml file. 
+
+
+    Another way to customize the build is by overriding existing main targets.
+    The targets of interest are: 
+
+      -init-macrodef-javac:     defines macro for javac compilation
+      -init-macrodef-junit:     defines macro for junit execution
+      -init-macrodef-debug:     defines macro for class debugging
+      -init-macrodef-java:      defines macro for class execution
+      -do-jar-with-manifest:    JAR building (if you are using a manifest)
+      -do-jar-without-manifest: JAR building (if you are not using a manifest)
+      run:                      execution of project 
+      -javadoc-build:           Javadoc generation
+      test-report:              JUnit report generation
+
+    An example of overriding the target for project execution could look like this:
+
+        &lt;target name=&quot;run&quot; depends=&quot;BattleHubFramework-impl.jar&quot;&gt;
+            &lt;exec dir=&quot;bin&quot; executable=&quot;launcher.exe&quot;&gt;
+                &lt;arg file=&quot;${dist.jar}&quot;/&gt;
+            &lt;/exec&gt;
+        &lt;/target&gt;
+
+    Notice that the overridden target depends on the jar target and not only on 
+    the compile target as the regular run target does. Again, for a list of available 
+    properties which you can use, check the target you are overriding in the
+    nbproject/build-impl.xml file. 
+
+    --&gt;
+&lt;/project&gt;

Added: trunk/Lobby/BattleHubFramework/nbproject/build-impl.xml
===================================================================
--- trunk/Lobby/BattleHubFramework/nbproject/build-impl.xml	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/nbproject/build-impl.xml	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,629 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;!--
+*** GENERATED FROM project.xml - DO NOT EDIT  ***
+***         EDIT ../build.xml INSTEAD         ***
+
+For the purpose of easier reading the script
+is divided into following sections:
+
+  - initialization
+  - compilation
+  - jar
+  - execution
+  - debugging
+  - javadoc
+  - junit compilation
+  - junit execution
+  - junit debugging
+  - applet
+  - cleanup
+
+        --&gt;
+&lt;project xmlns:j2seproject1=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/1">http://www.netbeans.org/ns/j2se-project/1</A>&quot; xmlns:j2seproject3=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/3">http://www.netbeans.org/ns/j2se-project/3</A>&quot; xmlns:jaxrpc=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/jax-rpc">http://www.netbeans.org/ns/j2se-project/jax-rpc</A>&quot; basedir=&quot;..&quot; default=&quot;default&quot; name=&quot;BattleHubFramework-impl&quot;&gt;
+    &lt;target depends=&quot;test,jar,javadoc&quot; description=&quot;Build and test whole project.&quot; name=&quot;default&quot;/&gt;
+    &lt;!-- 
+                ======================
+                INITIALIZATION SECTION 
+                ======================
+            --&gt;
+    &lt;target name=&quot;-pre-init&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;-pre-init&quot; name=&quot;-init-private&quot;&gt;
+        &lt;property file=&quot;nbproject/private/config.properties&quot;/&gt;
+        &lt;property file=&quot;nbproject/private/configs/${config}.properties&quot;/&gt;
+        &lt;property file=&quot;nbproject/private/private.properties&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;-pre-init,-init-private&quot; name=&quot;-init-user&quot;&gt;
+        &lt;property file=&quot;${user.properties.file}&quot;/&gt;
+        &lt;!-- The two properties below are usually overridden --&gt;
+        &lt;!-- by the active platform. Just a fallback. --&gt;
+        &lt;property name=&quot;default.javac.source&quot; value=&quot;1.4&quot;/&gt;
+        &lt;property name=&quot;default.javac.target&quot; value=&quot;1.4&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;-pre-init,-init-private,-init-user&quot; name=&quot;-init-project&quot;&gt;
+        &lt;property file=&quot;nbproject/configs/${config}.properties&quot;/&gt;
+        &lt;property file=&quot;nbproject/project.properties&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;-pre-init,-init-private,-init-user,-init-project,-init-macrodef-property&quot; name=&quot;-do-init&quot;&gt;
+        &lt;available file=&quot;${manifest.file}&quot; property=&quot;manifest.available&quot;/&gt;
+        &lt;condition property=&quot;manifest.available+main.class&quot;&gt;
+            &lt;and&gt;
+                &lt;isset property=&quot;manifest.available&quot;/&gt;
+                &lt;isset property=&quot;main.class&quot;/&gt;
+                &lt;not&gt;
+                    &lt;equals arg1=&quot;${main.class}&quot; arg2=&quot;&quot; trim=&quot;true&quot;/&gt;
+                &lt;/not&gt;
+            &lt;/and&gt;
+        &lt;/condition&gt;
+        &lt;condition property=&quot;manifest.available+main.class+mkdist.available&quot;&gt;
+            &lt;and&gt;
+                &lt;istrue value=&quot;${manifest.available+main.class}&quot;/&gt;
+                &lt;isset property=&quot;libs.CopyLibs.classpath&quot;/&gt;
+            &lt;/and&gt;
+        &lt;/condition&gt;
+        &lt;condition property=&quot;have.tests&quot;&gt;
+            &lt;or&gt;
+                &lt;available file=&quot;${test.src.dir}&quot;/&gt;
+            &lt;/or&gt;
+        &lt;/condition&gt;
+        &lt;condition property=&quot;have.sources&quot;&gt;
+            &lt;or&gt;
+                &lt;available file=&quot;${src.dir}&quot;/&gt;
+            &lt;/or&gt;
+        &lt;/condition&gt;
+        &lt;condition property=&quot;netbeans.home+have.tests&quot;&gt;
+            &lt;and&gt;
+                &lt;isset property=&quot;netbeans.home&quot;/&gt;
+                &lt;isset property=&quot;have.tests&quot;/&gt;
+            &lt;/and&gt;
+        &lt;/condition&gt;
+        &lt;condition property=&quot;no.javadoc.preview&quot;&gt;
+            &lt;and&gt;
+                &lt;isset property=&quot;javadoc.preview&quot;/&gt;
+                &lt;isfalse value=&quot;${javadoc.preview}&quot;/&gt;
+            &lt;/and&gt;
+        &lt;/condition&gt;
+        &lt;property name=&quot;run.jvmargs&quot; value=&quot;&quot;/&gt;
+        &lt;property name=&quot;javac.compilerargs&quot; value=&quot;&quot;/&gt;
+        &lt;property name=&quot;work.dir&quot; value=&quot;${basedir}&quot;/&gt;
+        &lt;condition property=&quot;no.deps&quot;&gt;
+            &lt;and&gt;
+                &lt;istrue value=&quot;${no.dependencies}&quot;/&gt;
+            &lt;/and&gt;
+        &lt;/condition&gt;
+        &lt;property name=&quot;javac.debug&quot; value=&quot;true&quot;/&gt;
+        &lt;property name=&quot;javadoc.preview&quot; value=&quot;true&quot;/&gt;
+        &lt;property name=&quot;application.args&quot; value=&quot;&quot;/&gt;
+        &lt;property name=&quot;source.encoding&quot; value=&quot;${file.encoding}&quot;/&gt;
+        &lt;condition property=&quot;javadoc.encoding.used&quot; value=&quot;${javadoc.encoding}&quot;&gt;
+            &lt;and&gt;
+                &lt;isset property=&quot;javadoc.encoding&quot;/&gt;
+                &lt;not&gt;
+                    &lt;equals arg1=&quot;${javadoc.encoding}&quot; arg2=&quot;&quot;/&gt;
+                &lt;/not&gt;
+            &lt;/and&gt;
+        &lt;/condition&gt;
+        &lt;property name=&quot;javadoc.encoding.used&quot; value=&quot;${source.encoding}&quot;/&gt;
+        &lt;property name=&quot;includes&quot; value=&quot;**&quot;/&gt;
+        &lt;property name=&quot;excludes&quot; value=&quot;&quot;/&gt;
+        &lt;property name=&quot;do.depend&quot; value=&quot;false&quot;/&gt;
+        &lt;condition property=&quot;do.depend.true&quot;&gt;
+            &lt;istrue value=&quot;${do.depend}&quot;/&gt;
+        &lt;/condition&gt;
+        &lt;condition else=&quot;&quot; property=&quot;javac.compilerargs.jaxws&quot; value=&quot;-Djava.endorsed.dirs='${jaxws.endorsed.dir}'&quot;&gt;
+            &lt;and&gt;
+                &lt;isset property=&quot;jaxws.endorsed.dir&quot;/&gt;
+                &lt;available file=&quot;nbproject/jaxws-build.xml&quot;/&gt;
+            &lt;/and&gt;
+        &lt;/condition&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-post-init&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;-pre-init,-init-private,-init-user,-init-project,-do-init&quot; name=&quot;-init-check&quot;&gt;
+        &lt;fail unless=&quot;src.dir&quot;&gt;Must set src.dir&lt;/fail&gt;
+        &lt;fail unless=&quot;test.src.dir&quot;&gt;Must set test.src.dir&lt;/fail&gt;
+        &lt;fail unless=&quot;build.dir&quot;&gt;Must set build.dir&lt;/fail&gt;
+        &lt;fail unless=&quot;dist.dir&quot;&gt;Must set dist.dir&lt;/fail&gt;
+        &lt;fail unless=&quot;build.classes.dir&quot;&gt;Must set build.classes.dir&lt;/fail&gt;
+        &lt;fail unless=&quot;dist.javadoc.dir&quot;&gt;Must set dist.javadoc.dir&lt;/fail&gt;
+        &lt;fail unless=&quot;build.test.classes.dir&quot;&gt;Must set build.test.classes.dir&lt;/fail&gt;
+        &lt;fail unless=&quot;build.test.results.dir&quot;&gt;Must set build.test.results.dir&lt;/fail&gt;
+        &lt;fail unless=&quot;build.classes.excludes&quot;&gt;Must set build.classes.excludes&lt;/fail&gt;
+        &lt;fail unless=&quot;dist.jar&quot;&gt;Must set dist.jar&lt;/fail&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-init-macrodef-property&quot;&gt;
+        &lt;macrodef name=&quot;property&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/1">http://www.netbeans.org/ns/j2se-project/1</A>&quot;&gt;
+            &lt;attribute name=&quot;name&quot;/&gt;
+            &lt;attribute name=&quot;value&quot;/&gt;
+            &lt;sequential&gt;
+                &lt;property name=&quot;@{name}&quot; value=&quot;${@{value}}&quot;/&gt;
+            &lt;/sequential&gt;
+        &lt;/macrodef&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-init-macrodef-javac&quot;&gt;
+        &lt;macrodef name=&quot;javac&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/3">http://www.netbeans.org/ns/j2se-project/3</A>&quot;&gt;
+            &lt;attribute default=&quot;${src.dir}&quot; name=&quot;srcdir&quot;/&gt;
+            &lt;attribute default=&quot;${build.classes.dir}&quot; name=&quot;destdir&quot;/&gt;
+            &lt;attribute default=&quot;${javac.classpath}&quot; name=&quot;classpath&quot;/&gt;
+            &lt;attribute default=&quot;${includes}&quot; name=&quot;includes&quot;/&gt;
+            &lt;attribute default=&quot;${excludes}&quot; name=&quot;excludes&quot;/&gt;
+            &lt;attribute default=&quot;${javac.debug}&quot; name=&quot;debug&quot;/&gt;
+            &lt;attribute default=&quot;&quot; name=&quot;sourcepath&quot;/&gt;
+            &lt;element name=&quot;customize&quot; optional=&quot;true&quot;/&gt;
+            &lt;sequential&gt;
+                &lt;javac debug=&quot;@{debug}&quot; deprecation=&quot;${javac.deprecation}&quot; destdir=&quot;@{destdir}&quot; encoding=&quot;${source.encoding}&quot; excludes=&quot;@{excludes}&quot; includeantruntime=&quot;false&quot; includes=&quot;@{includes}&quot; source=&quot;${javac.source}&quot; sourcepath=&quot;@{sourcepath}&quot; srcdir=&quot;@{srcdir}&quot; target=&quot;${javac.target}&quot;&gt;
+                    &lt;classpath&gt;
+                        &lt;path path=&quot;@{classpath}&quot;/&gt;
+                    &lt;/classpath&gt;
+                    &lt;compilerarg line=&quot;${javac.compilerargs} ${javac.compilerargs.jaxws}&quot;/&gt;
+                    &lt;customize/&gt;
+                &lt;/javac&gt;
+            &lt;/sequential&gt;
+        &lt;/macrodef&gt;
+        &lt;macrodef name=&quot;depend&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/3">http://www.netbeans.org/ns/j2se-project/3</A>&quot;&gt;
+            &lt;attribute default=&quot;${src.dir}&quot; name=&quot;srcdir&quot;/&gt;
+            &lt;attribute default=&quot;${build.classes.dir}&quot; name=&quot;destdir&quot;/&gt;
+            &lt;attribute default=&quot;${javac.classpath}&quot; name=&quot;classpath&quot;/&gt;
+            &lt;sequential&gt;
+                &lt;depend cache=&quot;${build.dir}/depcache&quot; destdir=&quot;@{destdir}&quot; excludes=&quot;${excludes}&quot; includes=&quot;${includes}&quot; srcdir=&quot;@{srcdir}&quot;&gt;
+                    &lt;classpath&gt;
+                        &lt;path path=&quot;@{classpath}&quot;/&gt;
+                    &lt;/classpath&gt;
+                &lt;/depend&gt;
+            &lt;/sequential&gt;
+        &lt;/macrodef&gt;
+        &lt;macrodef name=&quot;force-recompile&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/3">http://www.netbeans.org/ns/j2se-project/3</A>&quot;&gt;
+            &lt;attribute default=&quot;${build.classes.dir}&quot; name=&quot;destdir&quot;/&gt;
+            &lt;sequential&gt;
+                &lt;fail unless=&quot;javac.includes&quot;&gt;Must set javac.includes&lt;/fail&gt;
+                &lt;pathconvert pathsep=&quot;,&quot; property=&quot;javac.includes.binary&quot;&gt;
+                    &lt;path&gt;
+                        &lt;filelist dir=&quot;@{destdir}&quot; files=&quot;${javac.includes}&quot;/&gt;
+                    &lt;/path&gt;
+                    &lt;globmapper from=&quot;*.java&quot; to=&quot;*.class&quot;/&gt;
+                &lt;/pathconvert&gt;
+                &lt;delete&gt;
+                    &lt;files includes=&quot;${javac.includes.binary}&quot;/&gt;
+                &lt;/delete&gt;
+            &lt;/sequential&gt;
+        &lt;/macrodef&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-init-macrodef-junit&quot;&gt;
+        &lt;macrodef name=&quot;junit&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/3">http://www.netbeans.org/ns/j2se-project/3</A>&quot;&gt;
+            &lt;attribute default=&quot;${includes}&quot; name=&quot;includes&quot;/&gt;
+            &lt;attribute default=&quot;${excludes}&quot; name=&quot;excludes&quot;/&gt;
+            &lt;attribute default=&quot;**&quot; name=&quot;testincludes&quot;/&gt;
+            &lt;sequential&gt;
+                &lt;junit dir=&quot;${work.dir}&quot; errorproperty=&quot;tests.failed&quot; failureproperty=&quot;tests.failed&quot; fork=&quot;true&quot; showoutput=&quot;true&quot;&gt;
+                    &lt;batchtest todir=&quot;${build.test.results.dir}&quot;&gt;
+                        &lt;fileset dir=&quot;${test.src.dir}&quot; excludes=&quot;@{excludes},${excludes}&quot; includes=&quot;@{includes}&quot;&gt;
+                            &lt;filename name=&quot;@{testincludes}&quot;/&gt;
+                        &lt;/fileset&gt;
+                    &lt;/batchtest&gt;
+                    &lt;classpath&gt;
+                        &lt;path path=&quot;${run.test.classpath}&quot;/&gt;
+                    &lt;/classpath&gt;
+                    &lt;syspropertyset&gt;
+                        &lt;propertyref prefix=&quot;test-sys-prop.&quot;/&gt;
+                        &lt;mapper from=&quot;test-sys-prop.*&quot; to=&quot;*&quot; type=&quot;glob&quot;/&gt;
+                    &lt;/syspropertyset&gt;
+                    &lt;formatter type=&quot;brief&quot; usefile=&quot;false&quot;/&gt;
+                    &lt;formatter type=&quot;xml&quot;/&gt;
+                    &lt;jvmarg line=&quot;${run.jvmargs}&quot;/&gt;
+                &lt;/junit&gt;
+            &lt;/sequential&gt;
+        &lt;/macrodef&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-init-macrodef-nbjpda&quot;&gt;
+        &lt;macrodef name=&quot;nbjpdastart&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/1">http://www.netbeans.org/ns/j2se-project/1</A>&quot;&gt;
+            &lt;attribute default=&quot;${main.class}&quot; name=&quot;name&quot;/&gt;
+            &lt;attribute default=&quot;${debug.classpath}&quot; name=&quot;classpath&quot;/&gt;
+            &lt;attribute default=&quot;&quot; name=&quot;stopclassname&quot;/&gt;
+            &lt;sequential&gt;
+                &lt;nbjpdastart addressproperty=&quot;jpda.address&quot; name=&quot;@{name}&quot; stopclassname=&quot;@{stopclassname}&quot; transport=&quot;dt_socket&quot;&gt;
+                    &lt;classpath&gt;
+                        &lt;path path=&quot;@{classpath}&quot;/&gt;
+                    &lt;/classpath&gt;
+                &lt;/nbjpdastart&gt;
+            &lt;/sequential&gt;
+        &lt;/macrodef&gt;
+        &lt;macrodef name=&quot;nbjpdareload&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/1">http://www.netbeans.org/ns/j2se-project/1</A>&quot;&gt;
+            &lt;attribute default=&quot;${build.classes.dir}&quot; name=&quot;dir&quot;/&gt;
+            &lt;sequential&gt;
+                &lt;nbjpdareload&gt;
+                    &lt;fileset dir=&quot;@{dir}&quot; includes=&quot;${fix.classes}&quot;&gt;
+                        &lt;include name=&quot;${fix.includes}*.class&quot;/&gt;
+                    &lt;/fileset&gt;
+                &lt;/nbjpdareload&gt;
+            &lt;/sequential&gt;
+        &lt;/macrodef&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-init-debug-args&quot;&gt;
+        &lt;property name=&quot;version-output&quot; value=&quot;java version &quot;${ant.java.version}&quot;/&gt;
+        &lt;condition property=&quot;have-jdk-older-than-1.4&quot;&gt;
+            &lt;or&gt;
+                &lt;contains string=&quot;${version-output}&quot; substring=&quot;java version &quot;1.0&quot;/&gt;
+                &lt;contains string=&quot;${version-output}&quot; substring=&quot;java version &quot;1.1&quot;/&gt;
+                &lt;contains string=&quot;${version-output}&quot; substring=&quot;java version &quot;1.2&quot;/&gt;
+                &lt;contains string=&quot;${version-output}&quot; substring=&quot;java version &quot;1.3&quot;/&gt;
+            &lt;/or&gt;
+        &lt;/condition&gt;
+        &lt;condition else=&quot;-Xdebug&quot; property=&quot;debug-args-line&quot; value=&quot;-Xdebug -Xnoagent -Djava.compiler=none&quot;&gt;
+            &lt;istrue value=&quot;${have-jdk-older-than-1.4}&quot;/&gt;
+        &lt;/condition&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;-init-debug-args&quot; name=&quot;-init-macrodef-debug&quot;&gt;
+        &lt;macrodef name=&quot;debug&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/3">http://www.netbeans.org/ns/j2se-project/3</A>&quot;&gt;
+            &lt;attribute default=&quot;${main.class}&quot; name=&quot;classname&quot;/&gt;
+            &lt;attribute default=&quot;${debug.classpath}&quot; name=&quot;classpath&quot;/&gt;
+            &lt;element name=&quot;customize&quot; optional=&quot;true&quot;/&gt;
+            &lt;sequential&gt;
+                &lt;java classname=&quot;@{classname}&quot; dir=&quot;${work.dir}&quot; fork=&quot;true&quot;&gt;
+                    &lt;jvmarg line=&quot;${debug-args-line}&quot;/&gt;
+                    &lt;jvmarg value=&quot;-Xrunjdwp:transport=dt_socket,address=${jpda.address}&quot;/&gt;
+                    &lt;jvmarg line=&quot;${run.jvmargs}&quot;/&gt;
+                    &lt;classpath&gt;
+                        &lt;path path=&quot;@{classpath}&quot;/&gt;
+                    &lt;/classpath&gt;
+                    &lt;syspropertyset&gt;
+                        &lt;propertyref prefix=&quot;run-sys-prop.&quot;/&gt;
+                        &lt;mapper from=&quot;run-sys-prop.*&quot; to=&quot;*&quot; type=&quot;glob&quot;/&gt;
+                    &lt;/syspropertyset&gt;
+                    &lt;customize/&gt;
+                &lt;/java&gt;
+            &lt;/sequential&gt;
+        &lt;/macrodef&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-init-macrodef-java&quot;&gt;
+        &lt;macrodef name=&quot;java&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/1">http://www.netbeans.org/ns/j2se-project/1</A>&quot;&gt;
+            &lt;attribute default=&quot;${main.class}&quot; name=&quot;classname&quot;/&gt;
+            &lt;element name=&quot;customize&quot; optional=&quot;true&quot;/&gt;
+            &lt;sequential&gt;
+                &lt;java classname=&quot;@{classname}&quot; dir=&quot;${work.dir}&quot; fork=&quot;true&quot;&gt;
+                    &lt;jvmarg line=&quot;${run.jvmargs}&quot;/&gt;
+                    &lt;classpath&gt;
+                        &lt;path path=&quot;${run.classpath}&quot;/&gt;
+                    &lt;/classpath&gt;
+                    &lt;syspropertyset&gt;
+                        &lt;propertyref prefix=&quot;run-sys-prop.&quot;/&gt;
+                        &lt;mapper from=&quot;run-sys-prop.*&quot; to=&quot;*&quot; type=&quot;glob&quot;/&gt;
+                    &lt;/syspropertyset&gt;
+                    &lt;customize/&gt;
+                &lt;/java&gt;
+            &lt;/sequential&gt;
+        &lt;/macrodef&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-init-presetdef-jar&quot;&gt;
+        &lt;presetdef name=&quot;jar&quot; uri=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/1">http://www.netbeans.org/ns/j2se-project/1</A>&quot;&gt;
+            &lt;jar compress=&quot;${jar.compress}&quot; jarfile=&quot;${dist.jar}&quot;&gt;
+                &lt;j2seproject1:fileset dir=&quot;${build.classes.dir}&quot;/&gt;
+            &lt;/jar&gt;
+        &lt;/presetdef&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;-pre-init,-init-private,-init-user,-init-project,-do-init,-post-init,-init-check,-init-macrodef-property,-init-macrodef-javac,-init-macrodef-junit,-init-macrodef-nbjpda,-init-macrodef-debug,-init-macrodef-java,-init-presetdef-jar&quot; name=&quot;init&quot;/&gt;
+    &lt;!--
+                ===================
+                COMPILATION SECTION
+                ===================
+            --&gt;
+    &lt;target depends=&quot;init&quot; name=&quot;deps-jar&quot; unless=&quot;no.deps&quot;/&gt;
+    &lt;target depends=&quot;init,deps-jar&quot; name=&quot;-pre-pre-compile&quot;&gt;
+        &lt;mkdir dir=&quot;${build.classes.dir}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-pre-compile&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target if=&quot;do.depend.true&quot; name=&quot;-compile-depend&quot;&gt;
+        &lt;j2seproject3:depend/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,deps-jar,-pre-pre-compile,-pre-compile,-compile-depend&quot; if=&quot;have.sources&quot; name=&quot;-do-compile&quot;&gt;
+        &lt;j2seproject3:javac/&gt;
+        &lt;copy todir=&quot;${build.classes.dir}&quot;&gt;
+            &lt;fileset dir=&quot;${src.dir}&quot; excludes=&quot;${build.classes.excludes},${excludes}&quot; includes=&quot;${includes}&quot;/&gt;
+        &lt;/copy&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-post-compile&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,deps-jar,-pre-pre-compile,-pre-compile,-do-compile,-post-compile&quot; description=&quot;Compile project.&quot; name=&quot;compile&quot;/&gt;
+    &lt;target name=&quot;-pre-compile-single&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,deps-jar,-pre-pre-compile&quot; name=&quot;-do-compile-single&quot;&gt;
+        &lt;fail unless=&quot;javac.includes&quot;&gt;Must select some files in the IDE or set javac.includes&lt;/fail&gt;
+        &lt;j2seproject3:force-recompile/&gt;
+        &lt;j2seproject3:javac excludes=&quot;&quot; includes=&quot;${javac.includes}&quot; sourcepath=&quot;${src.dir}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-post-compile-single&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,deps-jar,-pre-pre-compile,-pre-compile-single,-do-compile-single,-post-compile-single&quot; name=&quot;compile-single&quot;/&gt;
+    &lt;!--
+                ====================
+                JAR BUILDING SECTION
+                ====================
+            --&gt;
+    &lt;target depends=&quot;init&quot; name=&quot;-pre-pre-jar&quot;&gt;
+        &lt;dirname file=&quot;${dist.jar}&quot; property=&quot;dist.jar.dir&quot;/&gt;
+        &lt;mkdir dir=&quot;${dist.jar.dir}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-pre-jar&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-pre-pre-jar,-pre-jar&quot; name=&quot;-do-jar-without-manifest&quot; unless=&quot;manifest.available&quot;&gt;
+        &lt;j2seproject1:jar/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-pre-pre-jar,-pre-jar&quot; if=&quot;manifest.available&quot; name=&quot;-do-jar-with-manifest&quot; unless=&quot;manifest.available+main.class&quot;&gt;
+        &lt;j2seproject1:jar manifest=&quot;${manifest.file}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-pre-pre-jar,-pre-jar&quot; if=&quot;manifest.available+main.class&quot; name=&quot;-do-jar-with-mainclass&quot; unless=&quot;manifest.available+main.class+mkdist.available&quot;&gt;
+        &lt;j2seproject1:jar manifest=&quot;${manifest.file}&quot;&gt;
+            &lt;j2seproject1:manifest&gt;
+                &lt;j2seproject1:attribute name=&quot;Main-Class&quot; value=&quot;${main.class}&quot;/&gt;
+            &lt;/j2seproject1:manifest&gt;
+        &lt;/j2seproject1:jar&gt;
+        &lt;echo&gt;To run this application from the command line without Ant, try:&lt;/echo&gt;
+        &lt;property location=&quot;${build.classes.dir}&quot; name=&quot;build.classes.dir.resolved&quot;/&gt;
+        &lt;property location=&quot;${dist.jar}&quot; name=&quot;dist.jar.resolved&quot;/&gt;
+        &lt;pathconvert property=&quot;run.classpath.with.dist.jar&quot;&gt;
+            &lt;path path=&quot;${run.classpath}&quot;/&gt;
+            &lt;map from=&quot;${build.classes.dir.resolved}&quot; to=&quot;${dist.jar.resolved}&quot;/&gt;
+        &lt;/pathconvert&gt;
+        &lt;echo&gt;java -cp &quot;${run.classpath.with.dist.jar}&quot; ${main.class}&lt;/echo&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-pre-pre-jar,-pre-jar&quot; if=&quot;manifest.available+main.class+mkdist.available&quot; name=&quot;-do-jar-with-libraries&quot;&gt;
+        &lt;property location=&quot;${build.classes.dir}&quot; name=&quot;build.classes.dir.resolved&quot;/&gt;
+        &lt;pathconvert property=&quot;run.classpath.without.build.classes.dir&quot;&gt;
+            &lt;path path=&quot;${run.classpath}&quot;/&gt;
+            &lt;map from=&quot;${build.classes.dir.resolved}&quot; to=&quot;&quot;/&gt;
+        &lt;/pathconvert&gt;
+        &lt;pathconvert pathsep=&quot; &quot; property=&quot;jar.classpath&quot;&gt;
+            &lt;path path=&quot;${run.classpath.without.build.classes.dir}&quot;/&gt;
+            &lt;chainedmapper&gt;
+                &lt;flattenmapper/&gt;
+                &lt;globmapper from=&quot;*&quot; to=&quot;lib/*&quot;/&gt;
+            &lt;/chainedmapper&gt;
+        &lt;/pathconvert&gt;
+        &lt;taskdef classname=&quot;org.netbeans.modules.java.j2seproject.copylibstask.CopyLibs&quot; classpath=&quot;${libs.CopyLibs.classpath}&quot; name=&quot;copylibs&quot;/&gt;
+        &lt;copylibs compress=&quot;${jar.compress}&quot; jarfile=&quot;${dist.jar}&quot; manifest=&quot;${manifest.file}&quot; runtimeclasspath=&quot;${run.classpath.without.build.classes.dir}&quot;&gt;
+            &lt;fileset dir=&quot;${build.classes.dir}&quot;/&gt;
+            &lt;manifest&gt;
+                &lt;attribute name=&quot;Main-Class&quot; value=&quot;${main.class}&quot;/&gt;
+                &lt;attribute name=&quot;Class-Path&quot; value=&quot;${jar.classpath}&quot;/&gt;
+            &lt;/manifest&gt;
+        &lt;/copylibs&gt;
+        &lt;echo&gt;To run this application from the command line without Ant, try:&lt;/echo&gt;
+        &lt;property location=&quot;${dist.jar}&quot; name=&quot;dist.jar.resolved&quot;/&gt;
+        &lt;echo&gt;java -jar &quot;${dist.jar.resolved}&quot;&lt;/echo&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-post-jar&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-pre-jar,-do-jar-with-manifest,-do-jar-without-manifest,-do-jar-with-mainclass,-do-jar-with-libraries,-post-jar&quot; description=&quot;Build JAR.&quot; name=&quot;jar&quot;/&gt;
+    &lt;!--
+                =================
+                EXECUTION SECTION
+                =================
+            --&gt;
+    &lt;target depends=&quot;init,compile&quot; description=&quot;Run a main class.&quot; name=&quot;run&quot;&gt;
+        &lt;j2seproject1:java&gt;
+            &lt;customize&gt;
+                &lt;arg line=&quot;${application.args}&quot;/&gt;
+            &lt;/customize&gt;
+        &lt;/j2seproject1:java&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-do-not-recompile&quot;&gt;
+        &lt;property name=&quot;javac.includes.binary&quot; value=&quot;&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,-do-not-recompile,compile-single&quot; name=&quot;run-single&quot;&gt;
+        &lt;fail unless=&quot;run.class&quot;&gt;Must select one file in the IDE or set run.class&lt;/fail&gt;
+        &lt;j2seproject1:java classname=&quot;${run.class}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;!--
+                =================
+                DEBUGGING SECTION
+                =================
+            --&gt;
+    &lt;target depends=&quot;init&quot; if=&quot;netbeans.home&quot; name=&quot;-debug-start-debugger&quot;&gt;
+        &lt;j2seproject1:nbjpdastart name=&quot;${debug.class}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile&quot; name=&quot;-debug-start-debuggee&quot;&gt;
+        &lt;j2seproject3:debug&gt;
+            &lt;customize&gt;
+                &lt;arg line=&quot;${application.args}&quot;/&gt;
+            &lt;/customize&gt;
+        &lt;/j2seproject3:debug&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-debug-start-debugger,-debug-start-debuggee&quot; description=&quot;Debug project in IDE.&quot; if=&quot;netbeans.home&quot; name=&quot;debug&quot;/&gt;
+    &lt;target depends=&quot;init&quot; if=&quot;netbeans.home&quot; name=&quot;-debug-start-debugger-stepinto&quot;&gt;
+        &lt;j2seproject1:nbjpdastart stopclassname=&quot;${main.class}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-debug-start-debugger-stepinto,-debug-start-debuggee&quot; if=&quot;netbeans.home&quot; name=&quot;debug-stepinto&quot;/&gt;
+    &lt;target depends=&quot;init,compile-single&quot; if=&quot;netbeans.home&quot; name=&quot;-debug-start-debuggee-single&quot;&gt;
+        &lt;fail unless=&quot;debug.class&quot;&gt;Must select one file in the IDE or set debug.class&lt;/fail&gt;
+        &lt;j2seproject3:debug classname=&quot;${debug.class}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,-do-not-recompile,compile-single,-debug-start-debugger,-debug-start-debuggee-single&quot; if=&quot;netbeans.home&quot; name=&quot;debug-single&quot;/&gt;
+    &lt;target depends=&quot;init&quot; name=&quot;-pre-debug-fix&quot;&gt;
+        &lt;fail unless=&quot;fix.includes&quot;&gt;Must set fix.includes&lt;/fail&gt;
+        &lt;property name=&quot;javac.includes&quot; value=&quot;${fix.includes}.java&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,-pre-debug-fix,compile-single&quot; if=&quot;netbeans.home&quot; name=&quot;-do-debug-fix&quot;&gt;
+        &lt;j2seproject1:nbjpdareload/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,-pre-debug-fix,-do-debug-fix&quot; if=&quot;netbeans.home&quot; name=&quot;debug-fix&quot;/&gt;
+    &lt;!--
+                ===============
+                JAVADOC SECTION
+                ===============
+            --&gt;
+    &lt;target depends=&quot;init&quot; name=&quot;-javadoc-build&quot;&gt;
+        &lt;mkdir dir=&quot;${dist.javadoc.dir}&quot;/&gt;
+        &lt;javadoc additionalparam=&quot;${javadoc.additionalparam}&quot; author=&quot;${javadoc.author}&quot; charset=&quot;UTF-8&quot; destdir=&quot;${dist.javadoc.dir}&quot; docencoding=&quot;UTF-8&quot; encoding=&quot;${javadoc.encoding.used}&quot; failonerror=&quot;true&quot; noindex=&quot;${javadoc.noindex}&quot; nonavbar=&quot;${javadoc.nonavbar}&quot; notree=&quot;${javadoc.notree}&quot; private=&quot;${javadoc.private}&quot; source=&quot;${javac.source}&quot; splitindex=&quot;${javadoc.splitindex}&quot; use=&quot;${javadoc.use}&quot; useexternalfile=&quot;true&quot; version=&quot;${javadoc.version}&quot; windowtitle=&quot;${javadoc.windowtitle}&quot;&gt;
+            &lt;classpath&gt;
+                &lt;path path=&quot;${javac.classpath}&quot;/&gt;
+            &lt;/classpath&gt;
+            &lt;fileset dir=&quot;${src.dir}&quot; excludes=&quot;${excludes}&quot; includes=&quot;${includes}&quot;&gt;
+                &lt;filename name=&quot;**/*.java&quot;/&gt;
+            &lt;/fileset&gt;
+        &lt;/javadoc&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,-javadoc-build&quot; if=&quot;netbeans.home&quot; name=&quot;-javadoc-browse&quot; unless=&quot;no.javadoc.preview&quot;&gt;
+        &lt;nbbrowse file=&quot;${dist.javadoc.dir}/index.html&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,-javadoc-build,-javadoc-browse&quot; description=&quot;Build Javadoc.&quot; name=&quot;javadoc&quot;/&gt;
+    &lt;!--
+                =========================
+                JUNIT COMPILATION SECTION
+                =========================
+            --&gt;
+    &lt;target depends=&quot;init,compile&quot; if=&quot;have.tests&quot; name=&quot;-pre-pre-compile-test&quot;&gt;
+        &lt;mkdir dir=&quot;${build.test.classes.dir}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-pre-compile-test&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target if=&quot;do.depend.true&quot; name=&quot;-compile-test-depend&quot;&gt;
+        &lt;j2seproject3:depend classpath=&quot;${javac.test.classpath}&quot; destdir=&quot;${build.test.classes.dir}&quot; srcdir=&quot;${test.src.dir}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-pre-pre-compile-test,-pre-compile-test,-compile-test-depend&quot; if=&quot;have.tests&quot; name=&quot;-do-compile-test&quot;&gt;
+        &lt;j2seproject3:javac classpath=&quot;${javac.test.classpath}&quot; debug=&quot;true&quot; destdir=&quot;${build.test.classes.dir}&quot; srcdir=&quot;${test.src.dir}&quot;/&gt;
+        &lt;copy todir=&quot;${build.test.classes.dir}&quot;&gt;
+            &lt;fileset dir=&quot;${test.src.dir}&quot; excludes=&quot;${build.classes.excludes},${excludes}&quot; includes=&quot;${includes}&quot;/&gt;
+        &lt;/copy&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-post-compile-test&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-pre-pre-compile-test,-pre-compile-test,-do-compile-test,-post-compile-test&quot; name=&quot;compile-test&quot;/&gt;
+    &lt;target name=&quot;-pre-compile-test-single&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-pre-pre-compile-test,-pre-compile-test-single&quot; if=&quot;have.tests&quot; name=&quot;-do-compile-test-single&quot;&gt;
+        &lt;fail unless=&quot;javac.includes&quot;&gt;Must select some files in the IDE or set javac.includes&lt;/fail&gt;
+        &lt;j2seproject3:force-recompile destdir=&quot;${build.test.classes.dir}&quot;/&gt;
+        &lt;j2seproject3:javac classpath=&quot;${javac.test.classpath}&quot; debug=&quot;true&quot; destdir=&quot;${build.test.classes.dir}&quot; excludes=&quot;&quot; includes=&quot;${javac.includes}&quot; sourcepath=&quot;${test.src.dir}&quot; srcdir=&quot;${test.src.dir}&quot;/&gt;
+        &lt;copy todir=&quot;${build.test.classes.dir}&quot;&gt;
+            &lt;fileset dir=&quot;${test.src.dir}&quot; excludes=&quot;${build.classes.excludes},${excludes}&quot; includes=&quot;${includes}&quot;/&gt;
+        &lt;/copy&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-post-compile-test-single&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile,-pre-pre-compile-test,-pre-compile-test-single,-do-compile-test-single,-post-compile-test-single&quot; name=&quot;compile-test-single&quot;/&gt;
+    &lt;!--
+                =======================
+                JUNIT EXECUTION SECTION
+                =======================
+            --&gt;
+    &lt;target depends=&quot;init&quot; if=&quot;have.tests&quot; name=&quot;-pre-test-run&quot;&gt;
+        &lt;mkdir dir=&quot;${build.test.results.dir}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile-test,-pre-test-run&quot; if=&quot;have.tests&quot; name=&quot;-do-test-run&quot;&gt;
+        &lt;j2seproject3:junit testincludes=&quot;**/*Test.java&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile-test,-pre-test-run,-do-test-run&quot; if=&quot;have.tests&quot; name=&quot;-post-test-run&quot;&gt;
+        &lt;fail if=&quot;tests.failed&quot;&gt;Some tests failed; see details above.&lt;/fail&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init&quot; if=&quot;have.tests&quot; name=&quot;test-report&quot;/&gt;
+    &lt;target depends=&quot;init&quot; if=&quot;netbeans.home+have.tests&quot; name=&quot;-test-browse&quot;/&gt;
+    &lt;target depends=&quot;init,compile-test,-pre-test-run,-do-test-run,test-report,-post-test-run,-test-browse&quot; description=&quot;Run unit tests.&quot; name=&quot;test&quot;/&gt;
+    &lt;target depends=&quot;init&quot; if=&quot;have.tests&quot; name=&quot;-pre-test-run-single&quot;&gt;
+        &lt;mkdir dir=&quot;${build.test.results.dir}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile-test-single,-pre-test-run-single&quot; if=&quot;have.tests&quot; name=&quot;-do-test-run-single&quot;&gt;
+        &lt;fail unless=&quot;test.includes&quot;&gt;Must select some files in the IDE or set test.includes&lt;/fail&gt;
+        &lt;j2seproject3:junit excludes=&quot;&quot; includes=&quot;${test.includes}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile-test-single,-pre-test-run-single,-do-test-run-single&quot; if=&quot;have.tests&quot; name=&quot;-post-test-run-single&quot;&gt;
+        &lt;fail if=&quot;tests.failed&quot;&gt;Some tests failed; see details above.&lt;/fail&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,-do-not-recompile,compile-test-single,-pre-test-run-single,-do-test-run-single,-post-test-run-single&quot; description=&quot;Run single unit test.&quot; name=&quot;test-single&quot;/&gt;
+    &lt;!--
+                =======================
+                JUNIT DEBUGGING SECTION
+                =======================
+            --&gt;
+    &lt;target depends=&quot;init,compile-test&quot; if=&quot;have.tests&quot; name=&quot;-debug-start-debuggee-test&quot;&gt;
+        &lt;fail unless=&quot;test.class&quot;&gt;Must select one file in the IDE or set test.class&lt;/fail&gt;
+        &lt;property location=&quot;${build.test.results.dir}/TEST-${test.class}.xml&quot; name=&quot;test.report.file&quot;/&gt;
+        &lt;delete file=&quot;${test.report.file}&quot;/&gt;
+        &lt;mkdir dir=&quot;${build.test.results.dir}&quot;/&gt;
+        &lt;j2seproject3:debug classname=&quot;org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner&quot; classpath=&quot;${ant.home}/lib/ant.jar:${ant.home}/lib/ant-junit.jar:${debug.test.classpath}&quot;&gt;
+            &lt;customize&gt;
+                &lt;syspropertyset&gt;
+                    &lt;propertyref prefix=&quot;test-sys-prop.&quot;/&gt;
+                    &lt;mapper from=&quot;test-sys-prop.*&quot; to=&quot;*&quot; type=&quot;glob&quot;/&gt;
+                &lt;/syspropertyset&gt;
+                &lt;arg value=&quot;${test.class}&quot;/&gt;
+                &lt;arg value=&quot;showoutput=true&quot;/&gt;
+                &lt;arg value=&quot;formatter=org.apache.tools.ant.taskdefs.optional.junit.BriefJUnitResultFormatter&quot;/&gt;
+                &lt;arg value=&quot;formatter=org.apache.tools.ant.taskdefs.optional.junit.XMLJUnitResultFormatter,${test.report.file}&quot;/&gt;
+            &lt;/customize&gt;
+        &lt;/j2seproject3:debug&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile-test&quot; if=&quot;netbeans.home+have.tests&quot; name=&quot;-debug-start-debugger-test&quot;&gt;
+        &lt;j2seproject1:nbjpdastart classpath=&quot;${debug.test.classpath}&quot; name=&quot;${test.class}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,-do-not-recompile,compile-test-single,-debug-start-debugger-test,-debug-start-debuggee-test&quot; name=&quot;debug-test&quot;/&gt;
+    &lt;target depends=&quot;init,-pre-debug-fix,compile-test-single&quot; if=&quot;netbeans.home&quot; name=&quot;-do-debug-fix-test&quot;&gt;
+        &lt;j2seproject1:nbjpdareload dir=&quot;${build.test.classes.dir}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,-pre-debug-fix,-do-debug-fix-test&quot; if=&quot;netbeans.home&quot; name=&quot;debug-fix-test&quot;/&gt;
+    &lt;!--
+                =========================
+                APPLET EXECUTION SECTION
+                =========================
+            --&gt;
+    &lt;target depends=&quot;init,compile-single&quot; name=&quot;run-applet&quot;&gt;
+        &lt;fail unless=&quot;applet.url&quot;&gt;Must select one file in the IDE or set applet.url&lt;/fail&gt;
+        &lt;j2seproject1:java classname=&quot;sun.applet.AppletViewer&quot;&gt;
+            &lt;customize&gt;
+                &lt;arg value=&quot;${applet.url}&quot;/&gt;
+            &lt;/customize&gt;
+        &lt;/j2seproject1:java&gt;
+    &lt;/target&gt;
+    &lt;!--
+                =========================
+                APPLET DEBUGGING  SECTION
+                =========================
+            --&gt;
+    &lt;target depends=&quot;init,compile-single&quot; if=&quot;netbeans.home&quot; name=&quot;-debug-start-debuggee-applet&quot;&gt;
+        &lt;fail unless=&quot;applet.url&quot;&gt;Must select one file in the IDE or set applet.url&lt;/fail&gt;
+        &lt;j2seproject3:debug classname=&quot;sun.applet.AppletViewer&quot;&gt;
+            &lt;customize&gt;
+                &lt;arg value=&quot;${applet.url}&quot;/&gt;
+            &lt;/customize&gt;
+        &lt;/j2seproject3:debug&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,compile-single,-debug-start-debugger,-debug-start-debuggee-applet&quot; if=&quot;netbeans.home&quot; name=&quot;debug-applet&quot;/&gt;
+    &lt;!--
+                ===============
+                CLEANUP SECTION
+                ===============
+            --&gt;
+    &lt;target depends=&quot;init&quot; name=&quot;deps-clean&quot; unless=&quot;no.deps&quot;/&gt;
+    &lt;target depends=&quot;init&quot; name=&quot;-do-clean&quot;&gt;
+        &lt;delete dir=&quot;${build.dir}&quot;/&gt;
+        &lt;delete dir=&quot;${dist.dir}&quot;/&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-post-clean&quot;&gt;
+        &lt;!-- Empty placeholder for easier customization. --&gt;
+        &lt;!-- You can override this target in the ../build.xml file. --&gt;
+    &lt;/target&gt;
+    &lt;target depends=&quot;init,deps-clean,-do-clean,-post-clean&quot; description=&quot;Clean build products.&quot; name=&quot;clean&quot;/&gt;
+&lt;/project&gt;

Added: trunk/Lobby/BattleHubFramework/nbproject/genfiles.properties
===================================================================
--- trunk/Lobby/BattleHubFramework/nbproject/genfiles.properties	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/nbproject/genfiles.properties	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,8 @@
+build.xml.data.CRC32=b9936c08
+build.xml.script.CRC32=baa70c3a
+build.xml.stylesheet.CRC32=be360661
+# This file is used by a NetBeans-based IDE to track changes in generated files such as build-impl.xml.
+# Do not edit this file. You may delete it but then the IDE will never regenerate such files for you.
+nbproject/build-impl.xml.data.CRC32=b9936c08
+nbproject/build-impl.xml.script.CRC32=39020141
+nbproject/build-impl.xml.stylesheet.CRC32=487672f9

Added: trunk/Lobby/BattleHubFramework/nbproject/private/private.properties
===================================================================
--- trunk/Lobby/BattleHubFramework/nbproject/private/private.properties	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/nbproject/private/private.properties	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,2 @@
+jaxws.endorsed.dir=C:\\Program Files (x86)\\NetBeans 6.1\\java2\\modules\\ext\\jaxws21\\api
+user.properties.file=C:\\Users\\AF-Standard\\.netbeans\\6.1\\build.properties

Added: trunk/Lobby/BattleHubFramework/nbproject/project.properties
===================================================================
--- trunk/Lobby/BattleHubFramework/nbproject/project.properties	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/nbproject/project.properties	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,57 @@
+build.classes.dir=${build.dir}/classes
+build.classes.excludes=**/*.java,**/*.form
+# This directory is removed when the project is cleaned:
+build.dir=build
+build.generated.dir=${build.dir}/generated
+# Only compile against the classpath explicitly listed here:
+build.sysclasspath=ignore
+build.test.classes.dir=${build.dir}/test/classes
+build.test.results.dir=${build.dir}/test/results
+debug.classpath=\
+    ${run.classpath}
+debug.test.classpath=\
+    ${run.test.classpath}
+# This directory is removed when the project is cleaned:
+dist.dir=dist
+dist.jar=${dist.dir}/BattleHubFramework.jar
+dist.javadoc.dir=${dist.dir}/javadoc
+excludes=
+includes=**
+jar.compress=false
+javac.classpath=
+# Space-separated list of extra javac options
+javac.compilerargs=
+javac.deprecation=false
+javac.source=1.5
+javac.target=1.5
+javac.test.classpath=\
+    ${javac.classpath}:\
+    ${build.classes.dir}:\
+    ${libs.junit.classpath}:\
+    ${libs.junit_4.classpath}
+javadoc.additionalparam=
+javadoc.author=false
+javadoc.encoding=${source.encoding}
+javadoc.noindex=false
+javadoc.nonavbar=false
+javadoc.notree=false
+javadoc.private=false
+javadoc.splitindex=true
+javadoc.use=true
+javadoc.version=false
+javadoc.windowtitle=
+meta.inf.dir=${src.dir}/META-INF
+platform.active=default_platform
+run.classpath=\
+    ${javac.classpath}:\
+    ${build.classes.dir}
+# Space-separated list of JVM arguments used when running the project
+# (you may also define separate properties like run-sys-prop.name=value instead of -Dname=value
+# or test-sys-prop.name=value to set system properties for unit tests):
+run.jvmargs=
+run.test.classpath=\
+    ${javac.test.classpath}:\
+    ${build.test.classes.dir}
+source.encoding=UTF-8
+src.dir=src
+test.src.dir=test

Added: trunk/Lobby/BattleHubFramework/nbproject/project.xml
===================================================================
--- trunk/Lobby/BattleHubFramework/nbproject/project.xml	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/nbproject/project.xml	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,16 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;project xmlns=&quot;<A HREF="http://www.netbeans.org/ns/project/1">http://www.netbeans.org/ns/project/1</A>&quot;&gt;
+    &lt;type&gt;org.netbeans.modules.java.j2seproject&lt;/type&gt;
+    &lt;configuration&gt;
+        &lt;data xmlns=&quot;<A HREF="http://www.netbeans.org/ns/j2se-project/3">http://www.netbeans.org/ns/j2se-project/3</A>&quot;&gt;
+            &lt;name&gt;BattleHubFramework&lt;/name&gt;
+            &lt;minimum-ant-version&gt;1.6.5&lt;/minimum-ant-version&gt;
+            &lt;source-roots&gt;
+                &lt;root id=&quot;src.dir&quot;/&gt;
+            &lt;/source-roots&gt;
+            &lt;test-roots&gt;
+                &lt;root id=&quot;test.src.dir&quot;/&gt;
+            &lt;/test-roots&gt;
+        &lt;/data&gt;
+    &lt;/configuration&gt;
+&lt;/project&gt;

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CBase64Coder.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CBase64Coder.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CBase64Coder.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,154 @@
+/*
+ * CBase64Coder.java
+ *
+ * Created on 03 May 2007, 23:19
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework;
+
+/**
+ * A Base64 Encoder/Decoder.
+ *
+ * &lt;p&gt;
+ * This class is used to encode and decode data in Base64 format as described in RFC 1521.
+ *
+ * &lt;p&gt;
+ * This is &quot;Open Source&quot; software and released under the &lt;a href=&quot;<A HREF="http://www.gnu.org/licenses/lgpl.html">http://www.gnu.org/licenses/lgpl.html</A>&quot;&gt;GNU/LGPL&lt;/a&gt; license.&lt;br&gt;
+ * It is provided &quot;as is&quot; without warranty of any kind.&lt;br&gt;
+ * Copyright 2003: Christian d'Heureuse, Inventec Informatik AG, Switzerland.&lt;br&gt;
+ * Home page: &lt;a href=&quot;<A HREF="http://www.source-code.biz">http://www.source-code.biz</A>&quot;&gt;www.source-code.biz&lt;/a&gt;&lt;br&gt;
+ *
+ * &lt;p&gt;
+ * Version history:&lt;br&gt;
+ * 2003-07-22 Christian d'Heureuse (chdh): Module created.&lt;br&gt;
+ * 2005-08-11 chdh: Lincense changed from GPL to LGPL.&lt;br&gt;
+ * 2006-11-21 chdh:&lt;br&gt;
+ *  &nbsp; Method encode(String) renamed to encodeString(String).&lt;br&gt;
+ *  &nbsp; Method decode(String) renamed to decodeString(String).&lt;br&gt;
+ *  &nbsp; New method encode(byte[],int) added.&lt;br&gt;
+ *  &nbsp; New method decode(String) added.&lt;br&gt;
+ */
+
+public class CBase64Coder {
+    
+// Mapping table from 6-bit nibbles to Base64 characters.
+    private static char[]    map1 = new char[64];
+    static {
+        int i=0;
+        for (char c='A'; c&lt;='Z'; c++) map1[i++] = c;
+        for (char c='a'; c&lt;='z'; c++) map1[i++] = c;
+        for (char c='0'; c&lt;='9'; c++) map1[i++] = c;
+        map1[i++] = '+'; map1[i++] = '/'; }
+    
+// Mapping table from Base64 characters to 6-bit nibbles.
+    private static byte[]    map2 = new byte[128];
+    static {
+        for (int i=0; i&lt;map2.length; i++) map2[i] = -1;
+        for (int i=0; i&lt;64; i++) map2[map1[i]] = (byte)i; }
+    
+    /**
+     * Encodes a string into Base64 format.
+     * No blanks or line breaks are inserted.
+     * @param s  a String to be encoded.
+     * @return   A String with the Base64 encoded data.
+     */
+    public static String encodeString (String s) {
+        return new String (encode (s.getBytes ())); }
+    
+    /**
+     * Encodes a byte array into Base64 format.
+     * No blanks or line breaks are inserted.
+     * @param in  an array containing the data bytes to be encoded.
+     * @return    A character array with the Base64 encoded data.
+     */
+    public static char[] encode (byte[] in) {
+        return encode (in,in.length); }
+    
+    /**
+     * Encodes a byte array into Base64 format.
+     * No blanks or line breaks are inserted.
+     * @param in   an array containing the data bytes to be encoded.
+     * @param iLen number of bytes to process in &lt;code&gt;in&lt;/code&gt;.
+     * @return     A character array with the Base64 encoded data.
+     */
+    public static char[] encode (byte[] in, int iLen) {
+        int oDataLen = (iLen*4+2)/3;       // output length without padding
+        int oLen = ((iLen+2)/3)*4;         // output length including padding
+        char[] out = new char[oLen];
+        int ip = 0;
+        int op = 0;
+        while (ip &lt; iLen) {
+            int i0 = in[ip++] &amp; 0xff;
+            int i1 = ip &lt; iLen ? in[ip++] &amp; 0xff : 0;
+            int i2 = ip &lt; iLen ? in[ip++] &amp; 0xff : 0;
+            int o0 = i0 &gt;&gt;&gt; 2;
+            int o1 = ((i0 &amp;   3) &lt;&lt; 4) | (i1 &gt;&gt;&gt; 4);
+            int o2 = ((i1 &amp; 0xf) &lt;&lt; 2) | (i2 &gt;&gt;&gt; 6);
+            int o3 = i2 &amp; 0x3F;
+            out[op++] = map1[o0];
+            out[op++] = map1[o1];
+            out[op] = op &lt; oDataLen ? map1[o2] : '='; op++;
+            out[op] = op &lt; oDataLen ? map1[o3] : '='; op++; }
+        return out; }
+    
+    /**
+     * Decodes a string from Base64 format.
+     * @param s  a Base64 String to be decoded.
+     * @return   A String containing the decoded data.
+     * @throws   IllegalArgumentException if the input is not valid Base64 encoded data.
+     */
+    public static String decodeString (String s) {
+        return new String (decode (s)); }
+    
+    /**
+     * Decodes a byte array from Base64 format.
+     * @param s  a Base64 String to be decoded.
+     * @return   An array containing the decoded data bytes.
+     * @throws   IllegalArgumentException if the input is not valid Base64 encoded data.
+     */
+    public static byte[] decode (String s) {
+        return decode (s.toCharArray ()); }
+    
+    /**
+     * Decodes a byte array from Base64 format.
+     * No blanks or line breaks are allowed within the Base64 encoded data.
+     * @param in  a character array containing the Base64 encoded data.
+     * @return    An array containing the decoded data bytes.
+     * @throws    IllegalArgumentException if the input is not valid Base64 encoded data.
+     */
+    public static byte[] decode (char[] in) {
+        int iLen = in.length;
+        if (iLen%4 != 0) throw new IllegalArgumentException (&quot;Length of Base64 encoded input string is not a multiple of 4.&quot;);
+        while (iLen &gt; 0 &amp;&amp; in[iLen-1] == '=') iLen--;
+        int oLen = (iLen*3) / 4;
+        byte[] out = new byte[oLen];
+        int ip = 0;
+        int op = 0;
+        while (ip &lt; iLen) {
+            int i0 = in[ip++];
+            int i1 = in[ip++];
+            int i2 = ip &lt; iLen ? in[ip++] : 'A';
+            int i3 = ip &lt; iLen ? in[ip++] : 'A';
+            if (i0 &gt; 127 || i1 &gt; 127 || i2 &gt; 127 || i3 &gt; 127)
+                throw new IllegalArgumentException (&quot;Illegal character in Base64 encoded data.&quot;);
+            int b0 = map2[i0];
+            int b1 = map2[i1];
+            int b2 = map2[i2];
+            int b3 = map2[i3];
+            if (b0 &lt; 0 || b1 &lt; 0 || b2 &lt; 0 || b3 &lt; 0)
+                throw new IllegalArgumentException (&quot;Illegal character in Base64 encoded data.&quot;);
+            int o0 = ( b0       &lt;&lt;2) | (b1&gt;&gt;&gt;4);
+            int o1 = ((b1 &amp; 0xf)&lt;&lt;4) | (b2&gt;&gt;&gt;2);
+            int o2 = ((b2 &amp;   3)&lt;&lt;6) |  b3;
+            out[op++] = (byte)o0;
+            if (op&lt;oLen) out[op++] = (byte)o1;
+            if (op&lt;oLen) out[op++] = (byte)o2; }
+        return out; }
+    
+// Dummy constructor.
+    private CBase64Coder () {}
+    
+} // end class Base64Coder
\ No newline at end of file

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CConnection.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CConnection.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CConnection.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,412 @@
+/*
+ * CConnection.java
+ *
+ * Created on 27 May 2006, 20:51
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+package org.darkstars.battlehub.framework;
+
+import java.io.BufferedReader;
+import java.io.DataOutputStream;
+import java.io.IOException;
+import java.io.InputStreamReader;
+import java.net.Socket;
+import java.net.UnknownHostException;
+import java.util.ArrayList;
+import java.util.Timer;
+import java.util.TimerTask;
+import java.util.logging.Level;
+import java.util.logging.Logger;
+
+
+/**
+ *
+ * @author AF
+ */
+class JCUpdateTask extends TimerTask {
+
+    public CConnection c;
+    public static boolean b = false;
+
+    JCUpdateTask(CConnection jc) {
+        c = jc;
+        if (b) {
+            int a = 4;
+        }
+        b = true;
+    }
+
+    @Override
+    public void run() {
+        if (c.updatedone) {
+            c.Update();
+        }
+    }
+}
+
+class JCPingTask extends TimerTask {
+
+    public CConnection c;
+
+    JCPingTask(CConnection jc) {
+        c = jc;
+    }
+
+    @Override
+    public void run() {
+        if (c.IsConnected() == true) {
+            c.SendLine(&quot;PING&quot;);
+        }
+    }
+}
+
+public class CConnection extends Thread {
+
+    public static ITrafficListener getTraffic() {
+        return trafficListener;
+    }
+
+    public static void setTraffic(ITrafficListener aTraffic) {
+        trafficListener = aTraffic;
+    }
+
+    boolean connected = false;
+    
+    public CCore distributor;
+    private int port = 8200;
+    private String server = &quot;&quot;;
+    public String name = &quot;New Connection&quot;;
+    public String ip = &quot;&quot;;
+    private boolean logged_in = false;
+    private static ITrafficListener trafficListener = null;
+    public int counter = 1;
+    private int max_traffic = 1000;
+    public boolean updatedone = true;
+    public int UDPSourcePort;
+    public ArrayList&lt;String&gt; messages = new ArrayList&lt;String&gt;();
+    Socket socket = null;
+    BufferedReader sockin = null;
+    DataOutputStream sockout = null;
+    int second_interim = 0;
+    Timer updates = null;
+    Timer pingtask = null;
+
+    public CConnection(CCore distributor) {
+        //
+        
+        this.distributor = distributor;
+        if(trafficListener != null){
+            trafficListener.Init(this);
+        }
+
+    }
+
+    String GetNextLine() {
+        String s = null;
+        if (messages.isEmpty() == false) {
+            synchronized (messages) {
+                s = messages.remove(0);
+            }
+        } /*else{
+        traffic.add(&quot;messages.isEmpty()==true&quot;);
+        }*/
+        return s;
+    }
+
+    /**
+     *
+     * @return boolean a
+     */
+    public boolean IsConnected() {
+        if (socket == null) {
+            return false;
+        }
+        if (sockout == null) {
+            return false;
+        }
+        return socket.isConnected();
+    }
+
+    public boolean IsLoggedIn() {
+        if (!IsConnected()) {
+            return false;
+        }
+        return logged_in;
+    }
+    ArrayList&lt;CEvent&gt; events = new ArrayList&lt;CEvent&gt;();
+
+    public void NewEvent(final CEvent e) {
+        if (e.IsEvent(&quot;ACCEPTED&quot;)) {
+            logged_in = true;
+        }
+    }
+
+    public void NewGUIEvent(final CEvent e) {
+        
+    }
+
+    /**
+     * Connects to the server
+     * 
+     * @param pserver 
+     * @param pport 
+     * @return 
+     * @throws java.lang.RuntimeException 
+     * @throws java.net.UnknownHostException 
+     * @throws java.io.IOException 
+     */
+    public boolean Connect(String pserver, int pport) throws UnknownHostException, UnknownHostException, IOException {
+        //try {
+        traffic_cache_out.clear();
+        server = pserver;
+        port = pport;
+        
+        if(getTraffic() != null){
+                getTraffic().Add(&quot;Connecting to &quot; + server + &quot;:&quot; + port + &quot; ...&quot;);
+        }
+        socket = new Socket(server, port);
+        sockout = new DataOutputStream(socket.getOutputStream());
+        sockin = new BufferedReader(new InputStreamReader(socket.getInputStream()));
+
+        if (sockin == null) {
+            if(getTraffic() != null){
+                getTraffic().Add(&quot;sockin==null!!!!!&quot;);
+            }
+        }
+        if (sockin == null) {
+            if(getTraffic() != null){
+                getTraffic().Add(&quot;sockin==null!!!!!&quot;);
+            }
+        }
+        ip = socket.getLocalAddress().toString();
+        String[] jp = ip.split(&quot;/&quot;);
+        if (jp.length == 2) {
+            ip = jp[1];
+        } else {
+            ip = jp[0];
+        }
+        if (IsConnected() == true) {
+            connected = true;
+            if(getTraffic() != null){
+                getTraffic().Add(&quot;socket succesfully opened&quot;);
+            }
+            CHolePuncher.server = server;
+            updates = new Timer();
+            updates.schedule(new JCUpdateTask(this), 5, 10); //subsequent rate
+            pingtask = new Timer();
+            pingtask.schedule(new JCPingTask(this), 500, 8000); //subsequent rate
+            socket.setSoTimeout(5000);
+            return true;
+        }
+        /*} catch (UnknownHostException e) {
+            //Log.error();
+            //closeAndExit(1);
+            traffic.add(e.toString());
+            traffic.add(&quot;Unknown host error: &quot; + server);
+//            StackTraceElement[] si = e.getStackTrace();
+//            for (int i = 0; i &lt; si.length; i++) {
+//                traffic.add(si[i].toString());
+//            }
+            
+            throw new RuntimeException(e);
+        } catch (IOException e) {
+            //Log.error( + serverAddress);
+            traffic.add(e.toString());
+//            StackTraceElement[] si = e.getStackTrace();
+//            for (int i = 0; i &lt; si.length; i++) {
+//                traffic.add(si[i].toString());
+//            }
+            
+            throw new RuntimeException(e);
+        } catch (Exception e) {
+            traffic.add(e.toString());
+            /*StackTraceElement[] si = e.getStackTrace();
+            for (int i = 0; i &lt; si.length; i++) {
+                traffic.add(si[i].toString());
+            }*/
+        /*    throw new RuntimeException(e);
+        }*/
+        return false;
+    }
+
+
+    /**
+     * Disconnects the connection to the server
+     */
+    public void Disconnect() {
+        if (IsConnected()) {
+            try {
+                traffic_cache_out.clear();
+                sockout.flush();
+                socket.close();
+                
+                if(updates != null){
+                    updates.cancel();
+                    updates = null;
+                }
+                
+                if(pingtask != null){
+                    pingtask.cancel();
+                    pingtask = null;
+                }
+                
+                logged_in = false;
+                CEvent e2 = new CEvent(CEvent.DISCONNECT);
+                distributor.NewGUIEvent(e2);
+            } catch (IOException ex) {
+                if(getTraffic() != null){
+                    getTraffic().Add(ex.toString());
+                }
+                StackTraceElement[] si = ex.getStackTrace();
+                if(getTraffic() != null){
+                    for (int i = 0; i &lt; si.length; i++) {
+                        getTraffic().Add(si[i].toString());
+                    }
+                }
+            //traffic.add()
+                //ex.printStackTrace();
+            }
+        }
+    }
+
+    //boolean available2=true;
+
+    public void Update() {
+        updatedone = false;
+        second_interim++;
+        if (this.second_interim == 101) {
+            second_interim = 0;
+        }
+
+        for (int i = 0; i &lt; 20; i++) {
+            String s = GetNextLine();
+            if (s != null) {
+                if(getTraffic() != null){
+                    getTraffic().Add(&quot;&lt;&lt;&quot; + s);
+                }
+                CEvent e = new CEvent(s);
+                distributor.NewEvent(e);
+            }
+        }
+        if (!IsConnected()) {
+            if (connected) {
+                // DISCONNECTED!!!!!!!!!! AHK AHK AHK AHK
+                CEvent e2 = new CEvent(CEvent.DISCONNECTED);
+                distributor.NewGUIEvent(e2);
+                logged_in = false;
+            }
+            //available2=true;
+            // notifyAll();
+            updatedone = true;
+            return;
+        } else {
+            if (sockin != null) {
+                try {
+                    while (sockin.ready()) {
+                        String s;
+                        s = sockin.readLine();
+                        if (s != null) {
+                            messages.add(s);
+                        //traffic.add(&quot;traffic recieved sent for processing:: &quot; + s);
+                            // here would usually be the whoel redirect code but
+                            // I think it's best that be doen in the NewEvent
+                            // function
+                        } else {
+                            break;
+                        }
+                    }
+                } catch (IOException ex) {
+                    if(getTraffic() != null){
+                        getTraffic().Add(ex.toString());
+                        StackTraceElement[] si = ex.getStackTrace();
+                        for (int i = 0; i &lt; si.length; i++) {
+                            getTraffic().Add(si[i].toString());
+                        }
+                    }
+                    
+                }
+                if (second_interim == 0) {
+                    traffic_out_sent = 0;
+                } else {
+                    if (traffic_out_sent &gt; max_traffic) {
+                        updatedone = true;
+                        return;
+                    }
+                }
+                //synchronized(sockout){
+                int i = 0;
+
+                if(!socket.isClosed()){
+                    try {
+                        while (traffic_cache_out.isEmpty() == false) {
+
+
+                            if (i &gt; 4) {
+                                break;
+                            }
+                            i++;
+                            String msg = traffic_cache_out.get(0);
+                            traffic_out_sent += msg.length();
+                            if (traffic_out_sent + msg.length() &gt; max_traffic) {
+                                break;
+                            }
+                            //synchronized (sockout) {
+                            
+                            // recheck the socket to see if it hasnt closed while the loops active
+                            if(socket.isConnected()){
+                                sockout.writeBytes(msg + &quot;\n&quot;); //println(msg);
+                            }else{
+                                break;
+                            }
+                            //}
+    //                    if(sockout.checkError()){
+    //                        int a = 5;
+    //                    }
+                            traffic_cache_out.remove(0);
+                            if(getTraffic() != null){
+                                getTraffic().Add(&quot;&gt;&gt;&quot; + msg);
+                            }
+
+                        }
+                        sockout.flush();
+                    } catch (java.net.SocketException e){
+                        //
+                        CEvent e2 = new CEvent(CEvent.DISCONNECTED);
+                        distributor.NewGUIEvent(e2);
+                        logged_in = false;
+                    }catch (IOException ex) {
+                        Logger.getLogger(CConnection.class.getName()).log(Level.SEVERE, null, ex);
+                    }
+                }
+
+            //}
+            }
+        }
+        updatedone = true;
+
+    // available2=true;
+        // notifyAll();
+    }
+    ArrayList&lt;String&gt; traffic_cache_out = new ArrayList&lt;String&gt;();
+    int traffic_out_sent = 0;
+    //boolean available3 = true;
+
+    public void SendLine(String message) {
+        //        while (available3 == false) {
+//            try {
+//                wait();
+//            } catch (InterruptedException e) { }
+//        }
+//        available3 = false;
+        if (IsConnected()) {
+            traffic_cache_out.add(message);
+        } else {
+            if(getTraffic() != null){
+                getTraffic().Add(&quot;Not connected could not send :: &quot; + message);
+            }
+        }
+    //        available3 = true;
+    }
+}
\ No newline at end of file

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CCore.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CCore.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CCore.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,178 @@
+/*
+ * To change this template, choose Tools | Templates
+ * and open the template in the editor.
+ */
+package org.darkstars.battlehub.framework;
+
+import java.util.ArrayList;
+import javax.swing.event.EventListenerList;
+
+/**
+ *
+ * @author tarendai
+ */
+public class CCore implements IModule {
+
+    private EventListenerList modules = new EventListenerList();
+    private ArrayList&lt;CEvent&gt; GUIeventqueue = new ArrayList&lt;CEvent&gt;();
+    private ArrayList&lt;CEvent&gt; eventqueue = new ArrayList&lt;CEvent&gt;();
+
+    /**
+     * 
+     * @param L
+     */
+    @Override
+    public void Init(final ICentralClass LM){
+        //
+    }
+
+    /**
+     * Calls the update method of registered event handlers and dispatches
+     * events.
+     */
+    @Override
+    public void Update() {
+
+        // check if a previous Update call is still running
+        //if(isUpdating){
+        // we're already running an update!
+        //    return;
+        //}
+
+        // specify that the update method is now running
+        /*isUpdating = true;
+
+
+        if (eventqueue.isEmpty() == false) {
+            Object[] queue = eventqueue.toArray();
+            eventqueue.clear();
+            
+            int eCount = queue.length;
+
+            for (int ie = 0; ie &lt; eCount; ie++) {
+                CEvent e = (CEvent) queue[ie];
+
+                if (e == null) {
+                    continue;
+                }
+                
+
+
+                fireEvent(e, 1);
+            }
+
+            eventqueue.clear();
+        }
+
+        if (GUIeventqueue.isEmpty() == false) {
+
+            Object[] queue = GUIeventqueue.toArray();
+            GUIeventqueue.clear();
+            
+            int eCount = queue.length;
+
+            for (int ie = 0; ie &lt; eCount; ie++) {
+                CEvent e = (CEvent) queue[ie];
+
+                if (e == null) {
+                    continue;
+                }
+                
+
+                fireEvent(e, 0);
+            }
+        }*/
+
+        //synchronized(modules)
+
+        /*ArrayList&lt;IModule&gt; tm = new ArrayList&lt;IModule&gt;();
+        synchronized(modules){
+        tm.addAll(modules);
+        }*/
+
+
+        fireEvent(null,2);
+    //
+
+    // specify that the update method is no longer running
+    //isUpdating = false;
+    }
+    //public boolean isUpdating = false;
+
+    /**
+     * 
+     * @param e
+     */
+    @Override
+    public void NewEvent(CEvent e) {
+        fireEvent(e, 1);
+/*        synchronized (eventqueue) {
+            eventqueue.add(e);
+        }
+*/    }
+
+    /**
+     * 
+     * @param e
+     */
+    @Override
+    public void NewGUIEvent(CEvent e) {
+        fireEvent(e, 0);
+//        synchronized (GUIeventqueue) {
+//            GUIeventqueue.add(e);
+  //      }
+    }
+
+    /**
+     * Adds a new module to the event system.
+     * 
+     * @param module the module to be added
+     */
+    public void AddModule(IModule module) {
+        //
+        //synchronized(modules){
+        modules.add(IModule.class, module);
+    //if(modules.contains(module)==false){
+    //    modules.add(module);
+    //}
+    //}
+    }
+
+    /**
+     * Removes a module from the event system.
+     * 
+     * @param module the module to be removed
+     */
+    public void RemoveModule(IModule module) {
+        assert(module != null);
+        //synchronized(modules){
+        module.OnRemove();
+        modules.remove(IModule.class, module);
+    //}
+    }
+
+    @Override
+    public void OnRemove() {
+
+    }
+
+    private synchronized void fireEvent(final CEvent e, int type) {
+        Object[] listeners = modules.getListenerList();
+        // loop through each listener and pass on the event if needed
+        int numListeners = listeners.length;
+        for (int i = 0; i &lt; numListeners; i += 2) {
+            if (listeners[i] == IModule.class) {
+                // pass the event to the listeners event dispatch method
+                if (type == 0) {
+                    ((IModule) listeners[i + 1]).NewGUIEvent(e);
+                } else if (type == 1) {
+                    ((IModule) listeners[i + 1]).NewEvent(e);
+                } else if (type == 2) {
+                    ((IModule) listeners[i + 1]).Update();
+                }
+
+            }
+        }
+    }
+}
+

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CEvent.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CEvent.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CEvent.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,79 @@
+/*
+ * CEvent.java
+ *
+ * Created on 27 May 2006, 21:20
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework;
+
+/**
+ *
+ * @author AF
+ */
+
+public class CEvent {
+    public final static String DISCONNECT = &quot;DISCONNECT&quot;;
+    public final static String FAILEDCONNECTION = &quot;FAILEDCONNECTION&quot;;
+    
+    public final static String CONNECTED = &quot;connected&quot;;
+    public final static String DISCONNECTED = &quot;DISCONNECTED&quot;;
+    public final static String DISCONNECTUNKNOWNHOST = &quot;UNKNOWN_HOST&quot;;
+    
+    public final static String LOGOUT = &quot;LOGOUT&quot;;
+    public final static String LOGGEDOUT = &quot;LOGGEDOUT&quot;;
+    public final static String LOGINPROGRESS = &quot;PROGRESS&quot;;
+    
+    public final static String OPENPRIVATEMSG = &quot;OPENPRIV&quot;;
+    
+    public final static String TOGGLERAWTRAFFIC =&quot;TOGGLETRAFFIC&quot;;
+    
+    public final static String TIMER =&quot;TIMER&quot;;
+    
+    
+    public final static String NEWUSRADDED = &quot;NEWUSRADDED&quot;;
+    
+    
+    
+    public final static String CHANNELCLOSED =&quot;channelclose&quot;;
+    public final static String CHANNELREAD =&quot;channeltabread&quot;;
+    public final static String CHANNELUNREAD =&quot;channeltabunread&quot;;
+    
+    public final static String LOGONSCRIPTCHANGE =&quot;logonscriptchange&quot;;
+    
+    public final static String CONTENTREFRESH = &quot;contentrefresh&quot;;
+    
+    public final static String EXITEDBATTLE = &quot;exitedbattle&quot;;
+    public final static String ADDEDBATTLE = &quot;addedbattle&quot;;
+    
+    public final static String BATTLEINFO_CHANGED =&quot;battleinfo_changed&quot;;
+    
+    
+    //public final static String HIDERAWTRAFFIC =&quot;HIDETRAFFIC&quot;;
+    
+    public String[] data;
+    public String parameters=&quot;&quot;; // Misc.makesentence(data,1);
+    public Object a;
+    /**
+     * Creates a new instance of CEvent
+     *
+     * @param s 
+     */
+    public CEvent (final String s) {
+        data = s.split (&quot; &quot;);
+        
+        if(data.length &gt;1){
+            parameters = s.substring(data[0].length()+1);
+        }
+    }
+    
+    public boolean IsEvent (String s){
+        if(data == null){
+            return false;
+        }
+        return s.equalsIgnoreCase (data[0]);
+    }
+    
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CHolePuncher.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CHolePuncher.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CHolePuncher.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,54 @@
+package org.darkstars.battlehub.framework;
+
+import java.io.IOException;
+import java.net.DatagramPacket;
+import java.net.DatagramSocket;
+import java.net.InetAddress;
+
+/*
+ * CHolePuncher.java
+ *
+ * Created on 27 April 2007, 01:52
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+/**
+ *
+ * @author Tom
+ */
+public class CHolePuncher {
+    public static String server=&quot;&quot;;
+    public static int port=8452;
+    
+    /** Creates a new instance of CHolePuncher */
+    public CHolePuncher () {
+    }
+    
+    public static boolean SendRequest (String username){
+        return SendRequest(server, port, username);
+    }
+    
+    public static boolean SendRequest (int myport, String username){
+        return SendRequest(server, myport, username);
+    }
+    
+    public static boolean SendRequest (String myServer, int myport, String username){
+        try{
+            DatagramSocket socket;
+            DatagramPacket packet;
+            InetAddress address;
+            socket = new DatagramSocket ();
+            address = InetAddress.getByName (myServer);
+            byte message[] = username.getBytes ();
+            packet = new DatagramPacket (message, message.length, address, myport);
+            socket.send (packet);
+            socket.close ();
+        } catch(IOException io){
+            return false;
+        }
+        return true;
+    }
+    
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CPlayer.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CPlayer.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CPlayer.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,141 @@
+/*
+ * CPlayer.java
+ *
+ * Created on 28 May 2006, 12:12
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework;
+
+
+/**
+ *
+ * @author AF
+ */
+public class CPlayer {
+
+    //extends Thread
+    public  String  name;
+    public  boolean hasIP       = false;
+    private String  ip          = &quot;?&quot;;
+    public  boolean logged_in;
+    private int     status      = 0;
+    private String  statString  = &quot;unknown&quot;;
+    private String  cpu         = &quot;?Mhz&quot;;
+    private String  country     = &quot;??&quot;;
+    public  int     battleID    = 0;
+    public  int     rank        = 0;
+
+    /**
+     * Creates a new instance of CPlayer
+     * @param L 
+     * @param pname 
+     */
+    public CPlayer(String pname) {
+        name = pname;
+        logged_in = true;
+    }
+
+    public void Update() {
+    }
+
+    public String GetStatushtml() {
+        return statString;
+    }
+
+    public String GetRankHTML() {
+        return &quot;&lt;img src = \&quot;file:/&quot;+ Misc.GetAbsoluteLobbyFolderPath() + &quot;images/ranks_small/&quot; + rank + &quot;.png\&quot;&gt;&lt;/img&gt;&quot;;
+    }
+
+    public String GetSmallRankHTML() {
+        return &quot;&lt;img src = \&quot;file:/&quot;+ Misc.GetAbsoluteLobbyFolderPath() + &quot;images/ranks_small/&quot; + rank + &quot;.png\&quot;&gt;&lt;/img&gt;&quot;;
+    }
+
+    public String GetNormalRankHTML() {
+        return &quot;&lt;img src = \&quot;file:/&quot;+ Misc.GetAbsoluteLobbyFolderPath() + &quot;images/ranks/&quot; + rank + &quot;.png\&quot;&gt;&lt;/img&gt;&quot;;
+    }
+
+    public String GetFlagHTML() {
+        return &quot;&lt;img src = \&quot;file:/&quot;+ Misc.GetAbsoluteLobbyFolderPath() + &quot;images/flags/&quot; + getCountry() + &quot;.png\&quot;&gt;&lt;/img&gt;&quot;;
+//        return &quot;&lt;img src=\&quot;\&quot;&gt;&lt;/img&gt;&quot;;
+    }
+
+    public String GetSmallFlagHTML() {
+        return &quot;&lt;img src = \&quot;file:/&quot;+ Misc.GetAbsoluteLobbyFolderPath() + &quot;images/flags/&quot; + getCountry() + &quot;.png\&quot;&gt;&lt;/img&gt;&quot;;
+//        return &quot;&lt;img src=\&quot;\&quot;&gt;&lt;/img&gt;&quot;;
+    }
+
+    public String GetNormalFlagHTML() {
+        return &quot;&lt;img src = \&quot;file:/&quot;+ Misc.GetAbsoluteLobbyFolderPath() + &quot;images/flags/&quot; + getCountry() + &quot;.png\&quot;&gt;&lt;/img&gt;&quot;;
+//        return &quot;&lt;img src=\&quot;\&quot;&gt;&lt;/img&gt;&quot;;
+    }
+
+    public boolean IsIngame(){
+        return (Misc.getInGameFromStatus(getStatus())==1);
+    }
+    
+    
+    public void NewEvent(final CEvent e) {
+        //privmsg.NewEvent(e);
+        if (e.data[0].equalsIgnoreCase(&quot;CLIENTSTATUS&quot;)) {
+            if (e.data[1].equalsIgnoreCase(name)) {
+                setStatus(Integer.parseInt(e.data[2]));
+                
+            }
+        } else if (e.data[0].equalsIgnoreCase(&quot;CLIENTIPPORT&quot;)) {
+            //  * CLIENTIPPORT username ip port
+            setIp(e.data[2]);
+        }
+    }
+
+    public void NewGUIEvent(final CEvent e) {
+    }
+
+    public String getIp() {
+        return ip;
+    }
+
+    public void setIp(String ip) {
+        hasIP=true;
+        this.ip = ip;
+    }
+
+    public String getCpu() {
+        return cpu;
+    }
+
+    public void setCpu(String cpu) {
+        this.cpu = cpu;
+    }
+
+    public String getCountry() {
+        return country;
+    }
+
+    public void setCountry(String country) {
+        this.country = country;
+    }
+
+    public boolean isBot(){
+        //
+        return Misc.getBotModeFromStatus(getStatus());
+    }
+    
+    public int getStatus() {
+        return status;
+    }
+
+    public void setStatus(int status) {
+        this.status = status;
+        rank = Misc.getRankFromStatus(status);
+        if ((Misc.getAwayBitFromStatus(status) == 1) &amp;&amp; (Misc.getInGameFromStatus(status) == 0)) {
+            statString = &quot;Away&quot;;
+        } else if ((Misc.getAwayBitFromStatus(status) == 0) &amp;&amp; (Misc.getInGameFromStatus(status) == 0)) {
+            statString = &quot;Online&quot;;
+        } else {
+            statString = &quot;Ingame&quot;;
+        }
+    }
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CStringHelper.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CStringHelper.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/CStringHelper.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,43 @@
+/*
+ * To change this template, choose Tools | Templates | Licenses | Default License
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework;
+
+
+import java.security.MessageDigest;
+import java.security.NoSuchAlgorithmException;
+import java.util.logging.Level;
+import java.util.logging.Logger;
+
+/**
+ *
+ * @author tarendai
+ */
+public class CStringHelper {
+    
+    public static String getTimestamp(){
+        return &quot;[&quot; + Misc.easyDateFormat(&quot;hh:mm:ss&quot;) + &quot;] &quot;;
+    }
+    
+    
+
+    public static String getSHA1Hash(String password){
+        try {
+            return new String(CBase64Coder.encode(getHash(password)));
+        } catch (NoSuchAlgorithmException ex) {
+            Logger.getLogger(CStringHelper.class.getName()).log(Level.SEVERE, null, ex);
+        }
+        return &quot;&quot;;
+    }
+
+    public static byte[] getHash(String password) throws NoSuchAlgorithmException {
+        MessageDigest digest = MessageDigest.getInstance(&quot;SHA-1&quot;);
+        digest.reset();
+        byte[] input = digest.digest(password.getBytes());
+        return input;
+    }
+
+
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/IBattleInfo.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/IBattleInfo.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/IBattleInfo.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,69 @@
+/*
+ * To change this template, choose Tools | Templates
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework;
+
+import java.util.ArrayList;
+
+/**
+ *
+ * @author AF-Standard
+ */
+public interface IBattleInfo {
+
+    int GetPort();
+    
+    void SetPort(int port);
+    
+    boolean Active();
+
+    void AddPlayer(CPlayer p);
+
+    String GetDescription();
+
+    CPlayer GetHost();
+
+    int GetID();
+
+    String GetMap();
+
+    String GetMod();
+
+    String GetPlayerNames();
+
+    ArrayList&lt;CPlayer&gt; GetPlayers();
+
+    boolean IsIngame();
+
+    boolean IsPassworded();
+
+    void RemovePlayer(CPlayer p);
+
+    void SetActive(boolean isactive);
+
+    void SetDescription(String desc);
+
+    void SetHost(CPlayer host);
+
+    void SetID(int i);
+
+    void SetIngame(boolean ingame);
+
+    void SetMap(String map);
+
+    void SetMod(String mod);
+
+    void SetPassworded(boolean pass);
+
+    String getEngine();
+
+    boolean isJoinable();
+
+    void setEngine(String engine);
+
+    @Override
+    String toString();
+
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/ICentralClass.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/ICentralClass.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/ICentralClass.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,15 @@
+/*
+ * To change this template, choose Tools | Templates
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework;
+
+/**
+ *
+ * @author AF-Standard
+ */
+public interface ICentralClass {
+
+    public CCore core=null;
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/IModule.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/IModule.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/IModule.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,25 @@
+/*
+ * IModule.java
+ *
+ * Created on 30 June 2007, 08:19
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework;
+
+import java.util.EventListener;
+
+
+/**
+ *
+ * @author Tom
+ */
+public interface IModule extends EventListener {
+    public void Init(ICentralClass L);
+    public void Update();
+    public void NewEvent(final CEvent e);
+    public void NewGUIEvent(final CEvent e);
+    public void OnRemove();
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/ITrafficListener.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/ITrafficListener.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/ITrafficListener.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,15 @@
+/*
+ * To change this template, choose Tools | Templates
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework;
+
+/**
+ *
+ * @author AF-Standard
+ */
+public interface ITrafficListener {
+    public void Add(String s);
+    public void Init (CConnection c);
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/Misc.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/Misc.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/Misc.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,607 @@
+package org.darkstars.battlehub.framework;
+
+/*
+ * Misc.java
+ *
+ * Created on 27 May 2006, 21:09
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+/**
+ *
+ * @author AF
+ */
+
+import java.io.BufferedReader;
+import java.io.File;
+import java.io.IOException;
+import java.io.InputStreamReader;
+import java.net.InetAddress;
+import java.net.MalformedURLException;
+import java.net.NetworkInterface;
+import java.net.URISyntaxException;
+import java.net.URL;
+import java.net.UnknownHostException;
+import java.security.MessageDigest;
+import java.security.NoSuchAlgorithmException;
+import java.text.SimpleDateFormat;
+import java.util.Date;
+import java.util.Enumeration;
+import java.util.logging.Level;
+import java.util.logging.Logger;
+import java.util.regex.Matcher;
+import java.util.regex.Pattern;
+import org.darkstars.battlehub.framework.CBase64Coder;
+
+public class Misc {
+
+    public static final byte EOL = 13;
+    private static String hex = &quot;0123456789ABCDEF&quot;;
+    
+    public static String getOrdinalFor(int value) {
+        int hundredRemainder = value % 100;
+        int tenRemainder = value % 10;
+        if(hundredRemainder - tenRemainder == 10) {
+            return &quot;th&quot;;
+        }
+
+        switch (tenRemainder) {
+            case 1:
+                return &quot;st&quot;;
+            case 2:
+                return &quot;nd&quot;;
+            case 3:
+                return &quot;rd&quot;;
+            default:
+                return &quot;th&quot;;
+        }
+    }
+
+    public static String chat_string_create_urls(String input) {
+        
+        String strRegex = &quot;(@)?(href=\&quot;)?(<A HREF="http://">http://</A>)?[A-Za-z]+(\\.\\w+)+(/[&amp;\\n=?\\+\\%/\\.\\w]+)?&quot;;
+//                &quot;^(https?://)&quot;
+//        + &quot;?(([0-9a-z_!~*'().&amp;=+$%-]+: )?[0-9a-z_!~*'().&amp;=+$%-]+@)?&quot; //user@
+//        + &quot;(([0-9]{1,3}\\.){3}[0-9]{1,3}&quot; // IP- 199.194.52.184
+//        + &quot;|&quot; // allows either IP or domain
+//        + &quot;([0-9a-z_!~*'()-]+\\.)*&quot; // tertiary domain(s)- www.
+//        + &quot;([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\\.&quot; // second level domain
+//        + &quot;[a-z]{2,6})&quot; // first level domain- .com or .museum
+//        + &quot;(:[0-9]{1,4})?&quot; // port number- :80
+//        + &quot;((/?)|&quot; // a slash isn't required if there is no file name&lt;a href=&gt;&lt;/a&gt;
+//        + &quot;(/[0-9a-z_!~*'().;?:@&amp;=+$,%#-]+)+/?)$&quot;;
+        
+        Pattern re = Pattern.compile(strRegex/*&quot;&lt;a\\s+href=[^&gt;]+&gt;&quot;,Pattern.CASE_INSENSITIVE | Pattern.DOTALL*/);
+        Matcher m = re.matcher(input);
+        String result = m.replaceAll(&quot;&lt;a href=\\\&quot;$0\\\&quot;&gt;$0&lt;/a&gt;&quot;);
+        //result = Misc.toHTML(result);
+        return result;
+
+        //&quot;(http:|ftp:|teamspeak:|https:|ftps:|file|www\\.|ftp\\.|://)[a-z0-9/~_:#?&amp;=\\.-]*[a-z0-9/]&quot; jjjjjjjjjj
+//return input.replaceAll (&quot;[^\&quot;]((http:|ftp:|teamspeak:|https:|ftps:|file|www\\.|ftp\\.|://)[a-z0-9/~_:#?&amp;=\\.-]*[a-z0-9/])[^\&quot;]&quot;,&quot;&lt;a href=\&quot;$1\&quot;&gt;$1&lt;/a&gt;&quot;).replaceAll (&quot;href=\&quot;www.&quot;,&quot;href=\&quot;<A HREF="http://www.">http://www.</A>&quot;);
+//        String t = input; //
+//        t.replaceAll(&quot;((http:|ftp:|teamspeak:|https:|ftps:|file:|www|ftp\\.|://)[a-zA-Z0-9%/~_:;#?&amp;=\\.-]*[a-zA-Z0-9%/])&quot;, &quot;&gt;$0&quot;);
+//        t = t.replaceAll(&quot;(&gt;[^&lt;]*?)((http:|ftp:|teamspeak:|https:|ftps:|file|www|ftp\\.|://)[a-zA-Z0-9%/~_:#;?&amp;=\\.-]*[a-zA-Z0-9%/])&quot;, &quot;$1&lt;a href=\&quot;$2\&quot;&gt;$2&lt;/a&gt;&quot;); //replaceAll (&quot;href=\&quot;www.&quot;,&quot;href=\&quot;<A HREF="http://www.">http://www.</A>&quot;);
+//        t = t.replaceAll(&quot;=\&quot;&gt;&quot;, &quot;=\&quot;&quot;);
+//        t = t.replaceAll(&quot;=\&quot;www.&quot;, &quot;=\&quot;<A HREF="http://www.">http://www.</A>&quot;);
+//        //t = t.substring (1);
+//        //t = t.replaceAll (&quot;([^&lt;;])((ftp|http|https|gopher|mailto|news|nntp|telnet|wais|file|prospero|aim|webcal):[A-Za-z0-9/](([A-Za-z0-9$_.+!*(),;/?:@&amp;~=-])|%[A-Fa-f0-9]{2})+(#([a-zA-Z0-9][a-zA-Z0-9$_.+!*(),;/?:@&amp;~=%-]*))?)[^&gt;]&quot;,&quot;&lt;a href=\&quot;$0\&quot;&gt;$0&lt;/a&gt;&quot;);
+//        return t;
+    } //
+
+    public static String easyDateFormat(String format) {
+        Date today = new Date();
+        SimpleDateFormat formatter = new SimpleDateFormat(format);
+        return formatter.format(today);
+    }
+
+    public static String easyDateFormat(long date, String format) {
+        Date d = new Date(date);
+        SimpleDateFormat formatter = new SimpleDateFormat(format);
+        return formatter.format(d);
+    }
+
+    /**
+     * puts together strings from sl, starting at sl[startIndex]
+     * @param sl 
+     * @param startIndex 
+     * @return 
+     */
+    public static String makeSentence(String[] sl, int startIndex) {
+        if (startIndex &gt; sl.length - 1) {
+            return &quot;&quot;;
+        }
+        String res = new String(sl[startIndex]);
+        for (int i = startIndex + 1; i &lt; sl.length; i++) {
+            res = res.concat(&quot; &quot; + sl[i]);
+        }
+        return res;
+    }
+
+    /**
+     * Strips html of all tags allowing it to be shown without any formatting
+     *
+     * Specifically, it will take out all instances of &lt; &gt; and &amp; replacing them with their html characters
+     * @param s 
+     * @return 
+     */
+    public static String toHTML(String s) {
+        String s1 = &quot;&quot;;
+        char c;
+        for (int i = 0; i &lt; s.length(); i++) {
+            c = s.charAt(i);
+            if (c == '&lt;' || c == '&gt;' || c == '&amp;') {
+                s1 += &quot;&amp;#&quot; + (byte) c + &quot;;&quot;;
+            } else {
+                s1 += &quot;&quot; + c;
+            }
+        }
+        return s1;
+    }
+
+    /* returns false if char is not an allowed character in the name of a channel, nickname, username, ... */
+    public static boolean isValidChar(char c) {
+        if (((c &gt;= 48) &amp;&amp; (c &lt;= 57)) || ((c &gt;= 65) &amp;&amp; (c &lt;= 90)) || ((c &gt;= 97) &amp;&amp; (c &lt;= 122)) || (c == 95) || (c == 91) || (c == 93)) {
+            return true;
+        } else {
+            return false;
+        }
+    }
+
+    /* returns false if name (of a channel, nickname, username, ...) is invalid */
+    public static boolean isValidName(String name) {
+        for (int i = 0; i &lt; name.length(); i++) {
+            if (!isValidChar(name.charAt(i))) {
+                return false;
+            }
+        }
+        return true;
+    }
+
+    public static boolean isValidPass(String pass) {
+        if (pass.length() &lt; 2) {
+            return false;
+        }
+        if (pass.length() &gt; 30) {
+            return false; // md5-base64 encoded passwords require 24 chars
+        }
+        // we have to allow a bit wider range of possible chars as base64 can produce chars such as +, = and /
+        for (int i = 0; i &lt; pass.length(); i++) {
+            if ((pass.charAt(i) &lt; 43) || (pass.charAt(i) &gt; 122)) {
+                return false;
+            }
+        }
+        return true;
+    }
+
+    public static String boolToStr(boolean b) {
+        if (b) {
+            return &quot;1&quot;;
+        } else {
+            return &quot;0&quot;;
+        }
+    }
+
+    public static boolean strToBool(String s) {
+        if (s.equals(&quot;1&quot;)) {
+            return true;
+        } else {
+            return false;
+        }
+    }
+
+    public static char[] byteToHex(byte b) {
+        char[] res = new char[2];
+        res[0] = hex.charAt((b &amp; 0xF0) &gt;&gt; 4);
+        res[1] = hex.charAt(b &amp; 0x0F);
+        return res;
+    }
+
+    /* this method will return local IP address such as &quot;192.168.1.100&quot; instead of &quot;127.0.0.1&quot;.
+     * Found it here: <A HREF="http://forum.java.sun.com/thread.jspa?threadID=619056&amp;messageID=3477258">http://forum.java.sun.com/thread.jspa?threadID=619056&amp;messageID=3477258</A>
+     *  */
+    public static String getLocalIPAddress() {
+        try {
+            Enumeration e = NetworkInterface.getNetworkInterfaces();
+
+            while (e.hasMoreElements()) {
+                NetworkInterface netface = (NetworkInterface) e.nextElement ();
+                Enumeration e2 = netface.getInetAddresses();
+
+                while (e2.hasMoreElements()) {
+                    InetAddress ip = (InetAddress) e2.nextElement ();
+                    if (!ip.isLoopbackAddress() &amp;&amp; ip.getHostAddress().indexOf(&quot;:&quot;) == -1) {
+                        return ip.getHostAddress();
+                    }
+                }
+            }
+        } catch (Exception e) {
+            return null;
+        }
+        return null;
+    }
+
+    public static long IP2Long(String IP) {
+        long f1;
+        long f2;
+        long f3;
+        long f4;
+        String[] tokens = IP.split(&quot;\\.&quot;);
+        if (tokens.length != 4) {
+            return -1;
+        }
+        try {
+            f1 = Long.parseLong(tokens[0]) &lt;&lt; 24;
+            f2 = Long.parseLong(tokens[1]) &lt;&lt; 16;
+            f3 = Long.parseLong(tokens[2]) &lt;&lt; 8;
+            f4 = Long.parseLong(tokens[3]);
+            return f1 + f2 + f3 + f4;
+        } catch (Exception e) {
+            return -1;
+        }
+    }
+
+    /* converts time (in milliseconds) to &quot;&lt;x&gt; days, &lt;y&gt; hours and &lt;z&gt; minutes&quot; string */
+    public static String timeToDHM(long duration) {
+        long temp = duration / (1000 * 60 * 60 * 24);
+        String res = temp + &quot; days, &quot;;
+        duration -= temp * (1000 * 60 * 60 * 24);
+        temp = duration / (1000 * 60 * 60);
+        res += temp + &quot; hours and &quot;;
+        duration -= temp * (1000 * 60 * 60);
+        temp = duration / (1000 * 60);
+        res += temp + &quot; minutes&quot;;
+        return res;
+    }
+
+    /*
+     * copied from: <A HREF="http://www.source-code.biz/snippets/java/3.htm">http://www.source-code.biz/snippets/java/3.htm</A>
+     *
+     * Reallocates an array with a new size, and copies the contents
+     * of the old array to the new array.
+     * @param oldArray  the old array, to be reallocated.
+     * @param newSize   the new array size.
+     * @return          A new array with the same contents.
+     */
+    public static Object resizeArray(Object oldArray, int newSize) {
+        int oldSize = java.lang.reflect.Array.getLength(oldArray);
+        Class elementType = oldArray.getClass().getComponentType();
+        Object newArray = java.lang.reflect.Array.newInstance(elementType, newSize);
+        int preserveLength = Math.min(oldSize, newSize);
+        if (preserveLength &gt; 0) {
+            System.arraycopy(oldArray, 0, newArray, 0, preserveLength);
+        }
+        return newArray;
+    }
+
+    public static String getHashText(String plainText, String algorithm) throws NoSuchAlgorithmException {
+        MessageDigest mdAlgorithm = MessageDigest.getInstance(algorithm);
+
+        mdAlgorithm.update(plainText.getBytes());
+
+        byte[] digest = mdAlgorithm.digest();
+        StringBuffer hexString = new StringBuffer();
+
+        for (int i = 0; i &lt; digest.length; i++) {
+            plainText = Integer.toHexString(0xFF &amp; digest[i]);
+
+            if (plainText.length() &lt; 2) {
+                plainText = &quot;0&quot; + plainText;
+            }
+
+            hexString.append(plainText);
+        }
+
+        return hexString.toString();
+    }
+
+    public static byte[] getMD5(String plainText) throws NoSuchAlgorithmException {
+        MessageDigest mdAlgorithm = MessageDigest.getInstance(&quot;md5&quot;);
+
+        mdAlgorithm.update(plainText.getBytes());
+
+        byte[] digest = mdAlgorithm.digest();
+        return digest;
+    }
+
+    public static String getURLContent(String url, String defvalue) {
+        try {
+            String q = &quot;&quot;;
+            URL yahoo = new URL(url);
+            BufferedReader in;
+            in = new BufferedReader(new InputStreamReader(yahoo.openStream()));
+
+            String inputLine;
+
+            while ((inputLine = in.readLine()) != null) {
+                q += inputLine+&quot;\n&quot;;
+            }
+            in.close();
+            return q;
+        } catch (MalformedURLException ex) {
+            ex.printStackTrace();
+            return defvalue;
+        } catch(UnknownHostException e){
+            return defvalue;
+        }catch (IOException ex) {
+            ex.printStackTrace();
+            return defvalue;
+        }
+    }
+
+    // this method encodes plain-text password to md5 hashed one in base-64 form:
+    public static String encodePassword(String plainPassword) {
+        //return getURLContent(&quot;<A HREF="http://michielvdb.byethost7.com/lobbypass.php?pass=">http://michielvdb.byethost7.com/lobbypass.php?pass=</A>&quot;+plainPassword,plainPassword);
+        try {
+            return new String(CBase64Coder.encode(getMD5(plainPassword))); //new sun.misc.BASE64Encoder().encode
+        } catch (Exception e) {
+            // this should not happen!
+            System.out.println(&quot;WARNING: Serious error occured: &quot; + e.getMessage());
+            //TASServer.closeServerAndExit();
+            return plainPassword;
+        }
+    }
+
+    /* this method is thread-safe (or at least it is if not called from multiple threads with same Exception object)
+     * and must remain such since multiple threads may call it. */
+    public static String exceptionToFullString(Exception e) {
+        String res = e.toString();
+
+        StackTraceElement[] trace = e.getStackTrace();
+        for (int i = 0; i &lt; trace.length; i++) {
+            res += &quot;\r\n\tat &quot; + trace[i];
+        }
+        return res;
+    }
+
+    /* various methods dealing with battleStatus: */
+    public static int getReadyStatusFromBattleStatus(int battleStatus) {
+        return (battleStatus &amp; 0x2) &gt;&gt; 1;
+    }
+
+    /*public static int getSpectatorFromBattleStatus(int battleStatus) {
+    //return (battleStatus &amp; 0x2) &gt;&gt; 1;
+    return battleStatus &amp; (1 &lt;&lt; 5)
+    }*/
+    //
+    public static int getTeamNoFromBattleStatus(int battleStatus) {
+        return (battleStatus &amp; 0x3C) &gt;&gt; 2;
+    }
+
+    public static int getAllyNoFromBattleStatus(int battleStatus) {
+        return (battleStatus &amp; 0x3C0) &gt;&gt; 6;
+    }
+
+    public static int getModeFromBattleStatus(int battleStatus) {
+        return (battleStatus &amp; 0x400) &gt;&gt; 10;
+    }
+
+    public static int getHandicapFromBattleStatus(int battleStatus) {
+        return (battleStatus &amp; 0x3F800) &gt;&gt; 11;
+    }
+
+    public static int getTeamColorFromBattleStatus(int battleStatus) {
+        return (battleStatus &amp; 0x3C0000) &gt;&gt; 18;
+    }
+
+    public static int getSyncFromBattleStatus(int battleStatus) {
+        return (battleStatus &amp; 0xC00000) &gt;&gt; 22;
+    }
+
+    public static int getSideFromBattleStatus(int battleStatus) {
+        return (battleStatus &amp; 0xF000000) &gt;&gt; 24;
+    }
+
+    public static int setReadyStatusOfBattleStatus(int battleStatus, int ready) {
+        return (battleStatus &amp; 0xFFFFFFFD) | (ready &lt;&lt; 1);
+    }
+
+    public static int setTeamNoOfBattleStatus(int battleStatus, int team) {
+        return (battleStatus &amp; 0xFFFFFFC3) | (team &lt;&lt; 2);
+    }
+
+    public static int setAllyNoOfBattleStatus(int battleStatus, int ally) {
+        return (battleStatus &amp; 0xFFFFFC3F) | (ally &lt;&lt; 6);
+    }
+
+    public static int setModeOfBattleStatus(int battleStatus, int mode) {
+        return (battleStatus &amp; 0xFFFFFBFF) | (mode &lt;&lt; 10);
+    }
+
+    public static int setHandicapOfBattleStatus(int battleStatus, int handicap) {
+        return (battleStatus &amp; 0xFFFC07FF) | (handicap &lt;&lt; 11);
+    }
+
+    public static int setTeamColorOfBattleStatus(int battleStatus, int color) {
+        return (battleStatus &amp; 0xFFC3FFFF) | (color &lt;&lt; 18);
+    }
+
+    public static int setSyncOfBattleStatus(int battleStatus, int sync) {
+        return (battleStatus &amp; 0xFF3FFFFF) | (sync &lt;&lt; 22);
+    }
+
+    public static int setSideOfBattleStatus(int battleStatus, int side) {
+        return (battleStatus &amp; 0xF0FFFFFF) | (side &lt;&lt; 24);
+    }
+
+    /* various methods dealing with status: */
+    public static int getInGameFromStatus(int status) {
+        return status &amp; 0x1;
+    }
+
+    public static int getAwayBitFromStatus(int status) {
+        return (status &amp; 0x2) &gt;&gt; 1;
+    }
+
+    public static int getRankFromStatus(int status) {
+        return (status &amp; 0x1C) &gt;&gt; 2;
+    }
+
+    public static int getAccessFromStatus(int status) {
+        return (status &amp; 0x20) &gt;&gt; 5;
+    }
+
+    public static boolean getBotModeFromStatus(int status) {
+        return ((status &amp; 0x40) &gt;&gt; 6) == 1;
+    }
+
+    public static int setInGameToStatus(int status, int inGame) {
+        return (status &amp; 0xFFFFFFFE) | inGame;
+    }
+
+    public static int setAwayBitToStatus(int status, int away) {
+        return (status &amp; 0xFFFFFFFD) | (away &lt;&lt; 1);
+    }
+
+    public static int setRankToStatus(int status, int rank) {
+        return (status &amp; 0xFFFFFFE3) | (rank &lt;&lt; 2);
+    }
+
+    public static int setAccessToStatus(int status, int access) {
+        if ((access &lt; 0) || (access &gt; 1)) {
+            //System.out.println(&quot;Critical error: Invalid use of setAccessToStatus()! Shuting down the server ...&quot;);
+            //TASServer.closeServerAndExit();
+        }
+        return (status &amp; 0xFFFFFFDF) | (access &lt;&lt; 5);
+    }
+
+    public static boolean isWindows() {
+        String osName = System.getProperty(&quot;os.name&quot;);
+        return osName.startsWith(&quot;Windows&quot;);
+    }
+
+    // &quot;Linux
+    public static boolean isMacOSX() {
+        // <A HREF="http://developer.apple.com/technotes/tn2002/tn2110.html">http://developer.apple.com/technotes/tn2002/tn2110.html</A>
+        String lcOSName = System.getProperty(&quot;os.name&quot;).toLowerCase();
+        return lcOSName.startsWith(&quot;mac os x&quot;);
+    }
+
+    public static boolean isMacOS() {
+        // <A HREF="http://developer.apple.com/technotes/tn2002/tn2110.html">http://developer.apple.com/technotes/tn2002/tn2110.html</A>
+        return System.getProperty(&quot;os.name&quot;).toLowerCase().startsWith(&quot;mac os&quot;);
+    }
+
+    public static boolean isLinux() {
+        // <A HREF="http://developer.apple.com/technotes/tn2002/tn2110.html">http://developer.apple.com/technotes/tn2002/tn2110.html</A>
+        String lcOSName = System.getProperty(&quot;os.name&quot;).toLowerCase();
+        return lcOSName.startsWith(&quot;linux&quot;);
+    }
+
+    public static boolean isSolaris() {
+        // <A HREF="http://developer.apple.com/technotes/tn2002/tn2110.html">http://developer.apple.com/technotes/tn2002/tn2110.html</A>
+        String lcOSName = System.getProperty(&quot;os.name&quot;).toLowerCase();
+        return lcOSName.startsWith(&quot;SunOS&quot;);
+    }
+
+    public static boolean isJava6() {
+        // <A HREF="http://developer.apple.com/technotes/tn2002/tn2110.html">http://developer.apple.com/technotes/tn2002/tn2110.html</A>
+        String javaVersion = System.getProperty(&quot;java.version&quot;);
+        return javaVersion.startsWith(&quot;1.6&quot;);
+    }
+
+    public static boolean isJava5() {
+        // <A HREF="http://developer.apple.com/technotes/tn2002/tn2110.html">http://developer.apple.com/technotes/tn2002/tn2110.html</A>
+        String javaVersion = System.getProperty(&quot;java.version&quot;);
+        return javaVersion.startsWith(&quot;1.5&quot;);
+    }
+
+    public static boolean dev_environment = false;
+    /*public static String GetLobbyFolderPath() {
+    return &quot;lobby/aflobby/&quot;;
+    }*/
+    public static String GetAbsoluteLobbyFolderPath() {
+        if (!dev_environment) {
+            try {
+                // Get current classloader
+                Misc m = new Misc();
+                URL u = m.getClass().getProtectionDomain().getCodeSource().getLocation();
+                File f = new File(u.toURI());
+                String s = f.getParent().replaceAll(&quot;\\\\&quot;, &quot;/&quot;) + &quot;/lobby/battlehub/&quot;;
+                if (!isWindows()) {
+                    s = &quot;/&quot; + s;
+                }
+                s = s.replaceAll(&quot;%20&quot;, &quot; &quot;);
+                //System.out.println(f.getParent());
+                return s;
+            } catch (URISyntaxException ex) {
+                Logger.getLogger(Misc.class.getName()).log(Level.SEVERE, null, ex);
+            }
+            return null;
+        } else {
+            File f2 = new File(&quot;lobby/battlehub/&quot;);
+            try {
+                //pathSeparator = &quot;/&quot;;
+                //            try {
+                String s = f2.toURI().toURL().toString().substring(6);
+                if (isWindows() == false) {
+                    s = &quot;/&quot; + s;
+                }
+                s = s.replaceAll(&quot;%20&quot;, &quot; &quot;);
+                s = s.replaceAll(&quot;\\\\&quot;, &quot;/&quot;);
+                if (!isWindows()) {
+                    s = &quot;/&quot;+s;
+                }
+
+                //System.out.println(&quot;\&quot;&quot; + s + &quot;\&quot;&quot;);
+                return s;
+            } catch (MalformedURLException ex) {
+                ex.printStackTrace();
+            }
+            return &quot;&quot;;
+        }
+        /*
+        File f = new File(&quot;lobby/aflobby/&quot;);
+        try {
+        //pathSeparator = &quot;/&quot;;
+        //            try {
+        String s =  f.toURI().toURL().toString().substring(6).replaceAll(&quot;%20&quot;, &quot; &quot;);
+        if(isWindows()==false){
+        s = &quot;/&quot;+s;
+        }
+        if((s.endsWith(&quot;/&quot;)==false)&amp;&amp;(s.endsWith(&quot;\\&quot;)==false)){
+        s +=&quot;/&quot;;
+        }
+        return s;
+        } catch (MalformedURLException ex) {
+        ex.printStackTrace();
+        }
+        return &quot;&quot;;*/
+    }
+
+    public static String GetMinimapPath() {
+        //
+        return GetAbsoluteLobbyFolderPath() + &quot;minimaps/&quot;;
+        //return &quot;&quot;;
+    }
+
+    public static int bitStringToInt(String bitString) {
+        int intValue = 0;
+        for (int i = 1; i &lt;= bitString.length(); i++) {
+            int currBit = Integer.parseInt(bitString.substring(i - 1, i));
+            intValue += currBit * Math.pow(2d, (double) (i-1));
+        }
+
+        return intValue;
+    }
+
+    public static String formatDoubleStrToLength(String toFormat, int length) {
+        if (toFormat.length() &gt; length) {
+            toFormat = toFormat.substring(0, length);
+        }
+
+        if (toFormat.length() &lt; length) {
+            String zeros = &quot;&quot;;
+
+            for (int i = 0; i &lt; length - toFormat.length(); i++) {
+                zeros += &quot;0&quot;;
+            }
+
+            toFormat += zeros;
+        }
+
+        return toFormat;
+    }
+}
\ No newline at end of file

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/IChannelModel.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/IChannelModel.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/IChannelModel.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,25 @@
+/*
+ * To change this template, choose Tools | Templates
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework.protocol;
+
+/**
+ *
+ * @author AF-Standard
+ */
+public interface IChannelModel {
+
+    public abstract void SetName(String channelName);
+    public abstract String GetName();
+    public abstract void Exit();
+    public abstract void Exit(String reason);
+    public abstract void Say(String message);
+    public abstract void SayAction(String actionMessage);
+    
+    public abstract String GetTopic();
+    public abstract void SetTopic(String topicMessage);
+    
+    public abstract int GetPlayerCount();
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/IProtocol.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/IProtocol.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/IProtocol.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,159 @@
+/*
+ * IProtocol.java
+ *
+ * Created on 10 June 2007, 01:00
+ *
+ * Battle Hub
+ */
+
+package org.darkstars.battlehub.framework.protocol;
+
+import java.util.Map;
+import org.darkstars.battlehub.framework.IModule;
+import org.darkstars.battlehub.framework.IBattleInfo;
+
+/**
+ * 
+ * @author Tom J. Nowell
+ */
+public interface IProtocol extends IModule {
+    
+    /**
+     * 
+     * @return
+     */
+    String GetProtocolName();
+    
+    /**
+     * 
+     * @return
+     */
+    int GetProtocolVersion();
+    
+    /**
+     * 
+     * @param username
+     * @param password
+     * @param sha_hash
+     */
+    void Login (String username, String password, boolean sha_hash);
+    
+    /**
+     * 
+     */
+    void Logout ();
+    
+    /**
+     * 
+     * @return
+     */
+    boolean LoggedIn ();
+    
+    /**
+     * 
+     */
+    void UserAFKAction();
+    
+    /**
+     * 
+     * @return
+     */
+    String GetUsername();
+    
+    /**
+     * 
+     * @return
+     */
+    String Password();
+    
+    /**
+     * 
+     * @return
+     */
+    int GetAccessLevel();
+    
+    
+    
+    /**
+     * 
+     * @param username
+     * @param password
+     * @param sha_hash
+     */
+    void Register (String username,String password, boolean sha_hash);
+    
+    /**
+     * 
+     * @param server
+     * @param port
+     * @return
+     */
+    boolean Connect (String server, int port);
+    
+    /**
+     * 
+     */
+    void Disconnect ();
+    
+    /**
+     * 
+     * @return
+     */
+    boolean Connected ();
+    
+    /**
+     * 
+     * @param channelname
+     * @param password
+     */
+    void JoinChannel (String channelname, String password);
+    
+    /**
+     * 
+     * @param channelname
+     * @param reason
+     */
+    void LeaveChannel (String channelname, String reason);
+    
+    /**
+     * 
+     * @param s
+     */
+    void SendTraffic(String s);
+    
+    /**
+     * 
+     * @return
+     */
+    boolean IsIngame();
+    
+    /**
+     * 
+     * @return
+     */
+    boolean IsAway();
+    
+    /**
+     * 
+     * @param ingame
+     */
+    void SetIngame(boolean ingame);
+    
+    /**
+     * 
+     * @param away
+     */
+    void SetAway(boolean away);
+    
+    /**
+     * 
+     */
+    void SendUserStatus();
+    
+    /**
+     * 
+     * @return
+     */
+    Map&lt;Integer, IBattleInfo&gt; GetBattles();
+    
+}

Added: trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver/CBasicTASServerProtocol.java
===================================================================
--- trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver/CBasicTASServerProtocol.java	                        (rev 0)
+++ trunk/Lobby/BattleHubFramework/src/org/darkstars/battlehub/framework/protocol/tasserver/CBasicTASServerProtocol.java	2008-06-09 01:40:21 UTC (rev 6005)
@@ -0,0 +1,240 @@
+/*
+ * To change this template, choose Tools | Templates
+ * and open the template in the editor.
+ */
+
+package org.darkstars.battlehub.framework.protocol.tasserver;
+
+import java.io.IOException;
+import java.net.ConnectException;
+import java.net.UnknownHostException;
+import java.util.Map;
+import java.util.TreeMap;
+import org.darkstars.battlehub.framework.CConnection;
+import org.darkstars.battlehub.framework.CEvent;
+import org.darkstars.battlehub.framework.CStringHelper;
+import org.darkstars.battlehub.framework.IBattleInfo;
+import org.darkstars.battlehub.framework.ICentralClass;
+import org.darkstars.battlehub.framework.Misc;
+import org.darkstars.battlehub.framework.protocol.IProtocol;
+
+/**
+ *
+ * @author AF-Standard
+ */
+public class CBasicTASServerProtocol implements IProtocol{
+    
+    private int afk = 0;
+    private CConnection c = null;
+    private Map&lt;Integer, IBattleInfo&gt; battles;
+    private String username = &quot;&quot;;
+    private String password = &quot;&quot;;
+    private int status;
+    private ICentralClass central;
+    
+    public CBasicTASServerProtocol(){
+        battles = new TreeMap&lt;Integer, IBattleInfo&gt;();
+    }
+
+    @Override
+    public String GetProtocolName() {
+        return &quot;TASServer&quot;;
+    }
+
+    @Override
+    public int GetProtocolVersion() {
+        return 33;
+    }
+
+    @Override
+    public void Login(String username, String password, boolean sha_hash) {
+        this.username = username;
+        this.password = password;
+        if (sha_hash) {
+            password = CStringHelper.getSHA1Hash(password);
+        } else {
+            password = Misc.encodePassword(password);
+        }
+        String s = &quot;LOGIN &quot; + username + &quot; &quot; + password + &quot; 0 &quot; + c.ip + &quot; framework&quot;;// + CUpdateChecker.version;
+        SendTraffic(s);
+    }
+
+    @Override
+    public void Logout() {
+        Disconnect();
+    }
+
+    @Override
+    public boolean LoggedIn() {
+        return c.IsLoggedIn();
+    }
+
+    @Override
+    public void UserAFKAction() {
+        if (IsAway()) {
+            // send an event signifying the user isnt afk anymore.
+        }
+        SetAway(false);
+        afk = 0;
+    }
+
+    @Override
+    public String GetUsername() {
+        return username;
+    }
+
+    @Override
+    public String Password() {
+        return password;
+    }
+
+    @Override
+    public int GetAccessLevel() {
+        return Misc.getAccessFromStatus(status);
+    }
+
+    @Override
+    public void Register(String username, String password, boolean sha_hash) {
+        String p = password;
+        if (sha_hash) {
+            p = CStringHelper.getSHA1Hash(password);
+        } else {
+            p = Misc.encodePassword(password);
+        }
+        SendTraffic(&quot;REGISTER &quot; + username + &quot; &quot; + p);
+        Login(username, password, sha_hash);
+    }
+
+    @Override
+    public void Disconnect() {
+        if (c != null) {
+            c.SendLine(&quot;EXIT&quot;);
+            c.Disconnect();
+            c = null;
+        }
+    }
+
+    @Override
+    public boolean Connected() {
+        return c.IsConnected();
+    }
+
+    @Override
+    public void JoinChannel(String channelname, String password) {
+        if (password == null) {
+            SendTraffic(&quot;JOIN &quot; + channelname);
+        } else {
+            SendTraffic(&quot;JOIN &quot; + channelname + &quot; &quot; + password);
+        }
+    }
+
+    @Override
+    public void LeaveChannel(String channelname, String reason) {
+        SendTraffic(&quot;LEAVE &quot; + channelname);
+
+        CEvent e = new CEvent(CEvent.CHANNELCLOSED + &quot; &quot; + channelname);
+        central.core.NewGUIEvent(e);
+    }
+
+    @Override
+    public void SendTraffic(String s) {
+        c.SendLine(s);
+    }
+
+    @Override
+    public boolean IsIngame() {
+        return (Misc.getInGameFromStatus(status) == 1);
+    }
+
+    @Override
+    public boolean IsAway() {
+        return (Misc.getAwayBitFromStatus(status) == 1);
+    }
+
+    @Override
+    public void SetIngame(boolean ingame) {
+        if (ingame) {
+            status = Misc.setInGameToStatus(status, 1);
+        } else {
+            status = Misc.setInGameToStatus(status, 0);
+        }
+        SendUserStatus();
+    //return false;
+    }
+
+    @Override
+    public void SetAway(boolean away) {
+        if (away) {
+            status = Misc.setAwayBitToStatus(status, 1);
+        } else {
+            status = Misc.setAwayBitToStatus(status, 0);
+        }
+        SendUserStatus();
+    }
+
+    @Override
+    public void SendUserStatus() {
+        //
+        SendTraffic(&quot;MYSTATUS &quot; + status);
+    }
+
+    public Map&lt;Integer, IBattleInfo&gt; GetBattles() {
+        return battles;
+    }
+
+    public void Init(ICentralClass L) {
+        this.central = L;
+    }
+
+    public void Update() {
+        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;);
+    }
+
+    public void NewEvent(final CEvent e) {
+        if (e.IsEvent(&quot;TASSERVER&quot;)) {
+            c.UDPSourcePort = Integer.parseInt(e.data[3]);
+        }
+    }
+
+    public void NewGUIEvent(CEvent e) {
+        if (e.IsEvent(CEvent.DISCONNECT) || e.IsEvent(CEvent.DISCONNECTED)) {
+            central.core.RemoveModule(this);
+        } else if (e.IsEvent(CEvent.LOGGEDOUT) || e.IsEvent(CEvent.LOGOUT)) {
+            c.Disconnect();
+        }  else {
+            if (c != null) {
+                c.NewGUIEvent(e);
+            }
+        }
+    }
+
+    public void OnRemove() {
+        battles.clear();
+        battles = null;
+    }
+
+    @Override
+    public boolean Connect(String server, int port) {
+        try {
+            c = new CConnection(central.core);
+            boolean result = c.Connect(server, port);
+            return result;
+        } catch (UnknownHostException e) {
+            //LMain.Toasts.AddMessage(&quot;Error, unknown server: &quot; + e.getLocalizedMessage());
+            CEvent ev = new CEvent(CEvent.DISCONNECTUNKNOWNHOST);
+            central.core.NewGUIEvent(ev);
+        } catch (ConnectException e) {
+            //LMain.Toasts.AddMessage(&quot;Error connecting: &quot; + e.getLocalizedMessage());
+            CConnection.getTraffic().Add(&quot;Couldn't get I/O for the connection to: &quot; + server + &quot; \n&quot; + e.getMessage() + &quot;\n&quot; + e.getLocalizedMessage());
+        } catch (IOException e) {
+            CConnection.getTraffic().Add(&quot;Couldn't get I/O for the connection to: &quot; + server + &quot; \n&quot; + e.getMessage() + &quot;\n&quot; + e.getLocalizedMessage());
+        }
+//        } catch (Exception e){
+//            CConnection.traffic.add(&quot;Couldn't get I/O for the connection to: &quot; + server + &quot; \n&quot; + e.getMessage() + &quot;\n&quot; + e.getLocalizedMessage());
+//        }
+        return false;
+    }
+
+
+
+}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000785.html">[Taspring-linux-commit] r6004 - trunk
</A></li>
	<LI>Next message: <A HREF="000786.html">[Taspring-linux-commit] r6006 - in trunk/Lobby/BattleHubFramework:	. src src/aflobby
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#784">[ date ]</a>
              <a href="thread.html#784">[ thread ]</a>
              <a href="subject.html#784">[ subject ]</a>
              <a href="author.html#784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
