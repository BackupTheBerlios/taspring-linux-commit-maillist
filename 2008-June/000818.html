<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r6038 - trunk/Lobby/TASClient
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6038%20-%20trunk/Lobby/TASClient&In-Reply-To=%3C20080617142805.887674858%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000817.html">
   <LINK REL="Next"  HREF="000819.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r6038 - trunk/Lobby/TASClient</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6038%20-%20trunk/Lobby/TASClient&In-Reply-To=%3C20080617142805.887674858%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r6038 - trunk/Lobby/TASClient">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Tue Jun 17 16:28:05 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000817.html">[Taspring-linux-commit] r6037 - in trunk/Lobby/TASClient: . Graphics
</A></li>
        <LI>Next message: <A HREF="000819.html">[Taspring-linux-commit] r6039 - trunk/rts/Sim/Units
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#818">[ date ]</a>
              <a href="thread.html#818">[ thread ]</a>
              <a href="subject.html#818">[ subject ]</a>
              <a href="author.html#818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: satirik
Date: 2008-06-17 16:28:02 +0200 (Tue, 17 Jun 2008)
New Revision: 6038

Modified:
   trunk/Lobby/TASClient/BattleFormUnit.dfm
   trunk/Lobby/TASClient/HttpGetUnit.pas
   trunk/Lobby/TASClient/MainUnit.dfm
   trunk/Lobby/TASClient/MainUnit.pas
   trunk/Lobby/TASClient/PreferencesFormUnit.pas
   trunk/Lobby/TASClient/TASClient.dof
   trunk/Lobby/TASClient/TASClient.res
Log:
- text filters treeview anchors fixed
- if password length from registry != 24 then the password is crypted in md5
- mods options are back on vista (tab width changed)

Modified: trunk/Lobby/TASClient/BattleFormUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/BattleFormUnit.dfm	2008-06-16 22:20:02 UTC (rev 6037)
+++ trunk/Lobby/TASClient/BattleFormUnit.dfm	2008-06-17 14:28:02 UTC (rev 6038)
@@ -1,7 +1,7 @@
 object BattleForm: TBattleForm
-  Left = 829
-  Top = 171
-  Width = 748
+  Left = 464
+  Top = 195
+  Width = 787
   Height = 586
   Caption = 'Battle window'
   Color = clBtnFace
@@ -24,13 +24,13 @@
   object SpTBXTitleBar1: TSpTBXTitleBar
     Left = 0
     Top = 0
-    Width = 740
+    Width = 779
     Height = 559
     Caption = 'Battle window'
     object Splitter1: TSplitter
       Left = 4
       Top = 413
-      Width = 732
+      Width = 771
       Height = 3
       Cursor = crVSplit
       Align = alTop
@@ -40,7 +40,7 @@
     object Splitter2: TSplitter
       Left = 4
       Top = 305
-      Width = 732
+      Width = 771
       Height = 3
       Cursor = crVSplit
       Align = alTop
@@ -50,7 +50,7 @@
     object Panel3: TSpTBXPanel
       Left = 4
       Top = 514
-      Width = 732
+      Width = 771
       Height = 41
       Align = alBottom
       Color = clNone
@@ -59,7 +59,7 @@
       BorderType = pbrRaised
       TBXStyleBackground = True
       DesignSize = (
-        732
+        771
         41)
       object StartButton: TSpTBXButton
         Left = 104
@@ -153,7 +153,7 @@
         LinkFont.Style = [fsUnderline]
       end
       object LadderRulesButton: TSpTBXButton
-        Left = 646
+        Left = 685
         Top = 8
         Width = 75
         Height = 25
@@ -188,7 +188,7 @@
     object Panel2: TPanel
       Left = 4
       Top = 416
-      Width = 732
+      Width = 771
       Height = 98
       Align = alClient
       TabOrder = 2
@@ -3986,14 +3986,14 @@
     object Panel1: TPanel
       Left = 4
       Top = 30
-      Width = 732
+      Width = 771
       Height = 275
       Align = alTop
       TabOrder = 3
       object Splitter3: TSplitter
-        Left = 337
+        Left = 346
         Top = 1
-        Width = 4
+        Width = 5
         Height = 273
         Align = alRight
         AutoSnap = False
@@ -4001,9 +4001,9 @@
         Visible = False
       end
       object Panel5: TPanel
-        Left = 341
+        Left = 351
         Top = 1
-        Width = 390
+        Width = 419
         Height = 273
         Align = alRight
         BevelOuter = bvNone
@@ -4011,9 +4011,9 @@
         object SpTBXTabControl1: TSpTBXTabControl
           Left = 0
           Top = 0
-          Width = 390
+          Width = 419
           Height = 273
-          Align = alRight
+          Align = alClient
           Color = clBtnFace
           ActiveTabIndex = 0
           ThemeType = tttFlat
@@ -4036,21 +4036,21 @@
             Caption = 'Mod options'
             ThemeType = tttFlat
           end
-          object ModTabSheet: TSpTBXTabSheet
+          object MapTabSheet: TSpTBXTabSheet
             Left = 0
             Top = 23
-            Width = 390
+            Width = 419
             Height = 250
-            Caption = 'Mod options'
+            Caption = 'Map options'
             ImageIndex = -1
             DesignSize = (
-              390
+              419
               250)
-            TabItem = 'ModTab'
-            object ModOptionsScrollBox: TTntScrollBox
+            TabItem = 'MapTab'
+            object MapOptionsScrollBox: TTntScrollBox
               Left = 2
               Top = 48
-              Width = 385
+              Width = 414
               Height = 200
               VertScrollBar.Smooth = True
               VertScrollBar.Tracking = True
@@ -4065,49 +4065,49 @@
               ParentCtl3D = False
               TabOrder = 0
             end
-            object panelModOptionsDefault: TSpTBXPanel
+            object panelMapOptionsDefault: TSpTBXPanel
               Left = 5
               Top = 4
-              Width = 381
+              Width = 382
               Height = 41
               Align = alCustom
               TabOrder = 1
-              object btLoadDefaultMDO: TSpTBXButton
+              object btLoadDefaultMPO: TSpTBXButton
                 Left = 136
                 Top = 8
                 Width = 113
                 Height = 25
                 Caption = 'Load default'
                 TabOrder = 0
-                OnClick = btLoadDefaultMDOClick
+                OnClick = btLoadDefaultMPOClick
                 LinkFont.Charset = DEFAULT_CHARSET
                 LinkFont.Color = clBlue
                 LinkFont.Height = -11
                 LinkFont.Name = 'MS Sans Serif'
                 LinkFont.Style = [fsUnderline]
               end
-              object btSetAsDefaultMDO: TSpTBXButton
+              object btSetAsDefaultMPO: TSpTBXButton
                 Left = 256
                 Top = 8
                 Width = 113
                 Height = 25
                 Caption = 'Set as default'
                 TabOrder = 1
-                OnClick = btSetAsDefaultMDOClick
+                OnClick = btSetAsDefaultMPOClick
                 LinkFont.Charset = DEFAULT_CHARSET
                 LinkFont.Color = clBlue
                 LinkFont.Height = -11
                 LinkFont.Name = 'MS Sans Serif'
                 LinkFont.Style = [fsUnderline]
               end
-              object btLoadModsDefaultMDO: TSpTBXButton
+              object btLoadMapsDefaultMPO: TSpTBXButton
                 Left = 16
                 Top = 8
                 Width = 113
                 Height = 25
-                Caption = 'Load mod'#39's default'
+                Caption = 'Load map'#39's default'
                 TabOrder = 2
-                OnClick = btLoadModsDefaultMDOClick
+                OnClick = btLoadMapsDefaultMPOClick
                 LinkFont.Charset = DEFAULT_CHARSET
                 LinkFont.Color = clBlue
                 LinkFont.Height = -11
@@ -4116,21 +4116,71 @@
               end
             end
           end
-          object MapTabSheet: TSpTBXTabSheet
+          object SpTBXTabSheet1: TSpTBXTabSheet
             Left = 0
             Top = 23
-            Width = 390
+            Width = 419
             Height = 250
-            Caption = 'Map options'
+            Caption = 'Disabled Units (0)'
             ImageIndex = -1
             DesignSize = (
-              390
+              419
               250)
-            TabItem = 'MapTab'
-            object MapOptionsScrollBox: TTntScrollBox
+            TabItem = 'DisabledUnitsTab'
+            object UnitsGroupBox: TSpTBXGroupBox
+              Left = 8
+              Top = 4
+              Width = 249
+              Height = 237
+              Caption = 'Disabled units'
+              Anchors = [akLeft, akTop, akBottom]
+              Color = clNone
+              ParentColor = False
+              TabOrder = 0
+              DesignSize = (
+                249
+                237)
+              object AddUnitsSpeedButton: TSpeedButton
+                Left = 120
+                Top = 10
+                Width = 121
+                Height = 22
+                Caption = 'Add more units'
+                OnClick = AddUnitsSpeedButtonClick
+              end
+              object DisabledUnitsListBox: TListBox
+                Left = 8
+                Top = 32
+                Width = 233
+                Height = 193
+                Anchors = [akLeft, akTop, akBottom]
+                Font.Charset = DEFAULT_CHARSET
+                Font.Color = clWindowText
+                Font.Height = -11
+                Font.Name = 'Fixedsys'
+                Font.Style = []
+                ItemHeight = 15
+                MultiSelect = True
+                ParentFont = False
+                TabOrder = 0
+              end
+            end
+          end
+          object ModTabSheet: TSpTBXTabSheet
+            Left = 0
+            Top = 23
+            Width = 419
+            Height = 250
+            Caption = 'Mod options'
+            ImageIndex = -1
+            DesignSize = (
+              419
+              250)
+            TabItem = 'ModTab'
+            object ModOptionsScrollBox: TTntScrollBox
               Left = 2
               Top = 48
-              Width = 385
+              Width = 414
               Height = 200
               VertScrollBar.Smooth = True
               VertScrollBar.Tracking = True
@@ -4145,49 +4195,49 @@
               ParentCtl3D = False
               TabOrder = 0
             end
-            object panelMapOptionsDefault: TSpTBXPanel
+            object panelModOptionsDefault: TSpTBXPanel
               Left = 5
               Top = 4
-              Width = 382
+              Width = 381
               Height = 41
               Align = alCustom
               TabOrder = 1
-              object btLoadDefaultMPO: TSpTBXButton
+              object btLoadDefaultMDO: TSpTBXButton
                 Left = 136
                 Top = 8
                 Width = 113
                 Height = 25
                 Caption = 'Load default'
                 TabOrder = 0
-                OnClick = btLoadDefaultMPOClick
+                OnClick = btLoadDefaultMDOClick
                 LinkFont.Charset = DEFAULT_CHARSET
                 LinkFont.Color = clBlue
                 LinkFont.Height = -11
                 LinkFont.Name = 'MS Sans Serif'
                 LinkFont.Style = [fsUnderline]
               end
-              object btSetAsDefaultMPO: TSpTBXButton
+              object btSetAsDefaultMDO: TSpTBXButton
                 Left = 256
                 Top = 8
                 Width = 113
                 Height = 25
                 Caption = 'Set as default'
                 TabOrder = 1
-                OnClick = btSetAsDefaultMPOClick
+                OnClick = btSetAsDefaultMDOClick
                 LinkFont.Charset = DEFAULT_CHARSET
                 LinkFont.Color = clBlue
                 LinkFont.Height = -11
                 LinkFont.Name = 'MS Sans Serif'
                 LinkFont.Style = [fsUnderline]
               end
-              object btLoadMapsDefaultMPO: TSpTBXButton
+              object btLoadModsDefaultMDO: TSpTBXButton
                 Left = 16
                 Top = 8
                 Width = 113
                 Height = 25
-                Caption = 'Load map'#39's default'
+                Caption = 'Load mod'#39's default'
                 TabOrder = 2
-                OnClick = btLoadMapsDefaultMPOClick
+                OnClick = btLoadModsDefaultMDOClick
                 LinkFont.Charset = DEFAULT_CHARSET
                 LinkFont.Color = clBlue
                 LinkFont.Height = -11
@@ -4196,60 +4246,10 @@
               end
             end
           end
-          object SpTBXTabSheet1: TSpTBXTabSheet
-            Left = 0
-            Top = 23
-            Width = 390
-            Height = 250
-            Caption = 'Disabled Units (0)'
-            ImageIndex = -1
-            DesignSize = (
-              390
-              250)
-            TabItem = 'DisabledUnitsTab'
-            object UnitsGroupBox: TSpTBXGroupBox
-              Left = 8
-              Top = 4
-              Width = 249
-              Height = 237
-              Caption = 'Disabled units'
-              Anchors = [akLeft, akTop, akBottom]
-              Color = clNone
-              ParentColor = False
-              TabOrder = 0
-              DesignSize = (
-                249
-                237)
-              object AddUnitsSpeedButton: TSpeedButton
-                Left = 120
-                Top = 10
-                Width = 121
-                Height = 22
-                Caption = 'Add more units'
-                OnClick = AddUnitsSpeedButtonClick
-              end
-              object DisabledUnitsListBox: TListBox
-                Left = 8
-                Top = 32
-                Width = 233
-                Height = 193
-                Anchors = [akLeft, akTop, akBottom]
-                Font.Charset = DEFAULT_CHARSET
-                Font.Color = clWindowText
-                Font.Height = -11
-                Font.Name = 'Fixedsys'
-                Font.Style = []
-                ItemHeight = 15
-                MultiSelect = True
-                ParentFont = False
-                TabOrder = 0
-              end
-            end
-          end
           object SpTBXTabSheet2: TSpTBXTabSheet
             Left = 0
             Top = 23
-            Width = 390
+            Width = 419
             Height = 250
             Caption = 'Game options'
             ImageIndex = -1
@@ -4521,21 +4521,18 @@
       object Panel6: TPanel
         Left = 1
         Top = 1
-        Width = 336
+        Width = 345
         Height = 273
         Align = alClient
         BevelOuter = bvNone
         Constraints.MinWidth = 200
         TabOrder = 1
-        DesignSize = (
-          336
-          273)
         object MapPanel: TSpTBXPanel
-          Left = 7
-          Top = 8
-          Width = 329
-          Height = 257
-          Anchors = [akLeft, akTop, akRight, akBottom]
+          Left = 0
+          Top = 0
+          Width = 345
+          Height = 273
+          Align = alClient
           Color = clNone
           ParentColor = False
           TabOrder = 0
@@ -4543,12 +4540,12 @@
           OnResize = MapPanelResize
           TBXStyleBackground = True
           DesignSize = (
-            329
-            257)
+            345
+            273)
           object Bevel2: TBevel
             Left = 0
-            Top = 203
-            Width = 329
+            Top = 219
+            Width = 345
             Height = 46
             Anchors = [akLeft, akRight, akBottom]
             Shape = bsTopLine
@@ -4556,8 +4553,8 @@
           object MapImage: TImageEx
             Left = 5
             Top = 5
-            Width = 200
-            Height = 200
+            Width = 216
+            Height = 216
             Cursor = crHandPoint
             Hint = 'No map'
             Anchors = [akLeft, akTop, akRight, akBottom]
@@ -4571,8 +4568,8 @@
           end
           object MapDescLabel: TSpTBXLabel
             Left = 8
-            Top = 208
-            Width = 313
+            Top = 224
+            Width = 329
             Height = 41
             Caption = 'MapDescLabel'
             Anchors = [akLeft, akRight, akBottom]
@@ -4588,7 +4585,7 @@
             LinkFont.Style = [fsUnderline]
           end
           object TidalStrengthLabel: TSpTBXLabel
-            Left = 216
+            Left = 232
             Top = 123
             Width = 76
             Height = 13
@@ -4601,7 +4598,7 @@
             LinkFont.Style = [fsUnderline]
           end
           object GravityLabel: TSpTBXLabel
-            Left = 216
+            Left = 232
             Top = 138
             Width = 45
             Height = 13
@@ -4614,7 +4611,7 @@
             LinkFont.Style = [fsUnderline]
           end
           object MaxMetalLabel: TSpTBXLabel
-            Left = 216
+            Left = 232
             Top = 153
             Width = 63
             Height = 13
@@ -4627,7 +4624,7 @@
             LinkFont.Style = [fsUnderline]
           end
           object ExtRadiusLabel: TSpTBXLabel
-            Left = 216
+            Left = 232
             Top = 168
             Width = 85
             Height = 13
@@ -4640,7 +4637,7 @@
             LinkFont.Style = [fsUnderline]
           end
           object WindLabel: TSpTBXLabel
-            Left = 216
+            Left = 232
             Top = 183
             Width = 86
             Height = 13
@@ -4653,7 +4650,7 @@
             LinkFont.Style = [fsUnderline]
           end
           object SpTBXPanel1: TSpTBXPanel
-            Left = 208
+            Left = 224
             Top = 4
             Width = 113
             Height = 97
@@ -4714,7 +4711,7 @@
             end
           end
           object MapSizeLabel: TSpTBXLabel
-            Left = 216
+            Left = 232
             Top = 108
             Width = 54
             Height = 13
@@ -4732,17 +4729,17 @@
     object Panel4: TPanel
       Left = 4
       Top = 308
-      Width = 732
+      Width = 771
       Height = 105
       Align = alTop
       TabOrder = 4
       DesignSize = (
-        732
+        771
         105)
       object VDTBattleClients: TVirtualDrawTree
         Left = 8
         Top = 6
-        Width = 422
+        Width = 461
         Height = 91
         Anchors = [akLeft, akTop, akRight, akBottom]
         Font.Charset = DEFAULT_CHARSET
@@ -4829,7 +4826,7 @@
           end&gt;
       end
       object MyOptionsGroupBox: TSpTBXGroupBox
-        Left = 482
+        Left = 521
         Top = 5
         Width = 242
         Height = 92
@@ -4941,7 +4938,7 @@
         end
       end
       object lblTeamNbr: TSpTBXLabel
-        Left = 435
+        Left = 474
         Top = 8
         Width = 44
         Height = 0

Modified: trunk/Lobby/TASClient/HttpGetUnit.pas
===================================================================
--- trunk/Lobby/TASClient/HttpGetUnit.pas	2008-06-16 22:20:02 UTC (rev 6037)
+++ trunk/Lobby/TASClient/HttpGetUnit.pas	2008-06-17 14:28:02 UTC (rev 6038)
@@ -100,12 +100,13 @@
 
   if (DownloadFile.ServerOptions and $4) = 4 then
   begin
-
     HttpGetForm.SpTBXTitleBar1.Caption := 'Auto-updating lobby ...';
   end
   else
     HttpGetForm.SpTBXTitleBar1.Caption := 'File download';
 
+  HttpGetForm.SpTBXTitleBar1.Refresh;
+
   if DownloadStatus.Downloading then Exit;
   UpdateReceivedStatus;
   DownloadStatus.Downloading := True;

Modified: trunk/Lobby/TASClient/MainUnit.dfm
===================================================================
--- trunk/Lobby/TASClient/MainUnit.dfm	2008-06-16 22:20:02 UTC (rev 6037)
+++ trunk/Lobby/TASClient/MainUnit.dfm	2008-06-17 14:28:02 UTC (rev 6038)
@@ -394,21 +394,121 @@
               Height = 169
               Align = alClient
               Color = clBtnFace
-              ActiveTabIndex = 1
+              ActiveTabIndex = 0
               TabPosition = ttpBottom
               ThemeType = tttNone
               HiddenItems = &lt;&gt;
               object SpTBXTabItem1: TSpTBXTabItem
                 Caption = 'Filters'
+                Checked = True
                 TabPosition = ttpBottom
                 ThemeType = tttNone
               end
               object SpTBXTabItem2: TSpTBXTabItem
                 Caption = 'Presets'
-                Checked = True
                 TabPosition = ttpBottom
                 ThemeType = tttNone
               end
+              object SpTBXTabSheet2: TSpTBXTabSheet
+                Left = 0
+                Top = 0
+                Width = 617
+                Height = 146
+                Caption = 'Presets'
+                ImageIndex = -1
+                DesignSize = (
+                  617
+                  146)
+                TabItem = 'SpTBXTabItem2'
+                object PresetListbox: TSpTBXListBox
+                  Left = 152
+                  Top = 26
+                  Width = 457
+                  Height = 113
+                  Anchors = [akLeft, akTop, akRight]
+                  ItemHeight = 16
+                  Items.Strings = (
+                    'default')
+                  TabOrder = 0
+                  OnClick = PresetListboxClick
+                end
+                object SpTBXLabel3: TSpTBXLabel
+                  Left = 152
+                  Top = 8
+                  Width = 64
+                  Height = 16
+                  Caption = 'Preset list :'
+                  Font.Charset = DEFAULT_CHARSET
+                  Font.Color = clWindowText
+                  Font.Height = -13
+                  Font.Name = 'MS Sans Serif'
+                  Font.Style = []
+                  ParentFont = False
+                  LinkFont.Charset = DEFAULT_CHARSET
+                  LinkFont.Color = clBlue
+                  LinkFont.Height = -11
+                  LinkFont.Name = 'MS Sans Serif'
+                  LinkFont.Style = [fsUnderline]
+                end
+                object SpTBXGroupBox1: TSpTBXGroupBox
+                  Left = 8
+                  Top = 8
+                  Width = 137
+                  Height = 129
+                  Caption = 'Options'
+                  TabOrder = 2
+                  object btDeletePreset: TSpTBXButton
+                    Left = 8
+                    Top = 72
+                    Width = 121
+                    Height = 25
+                    Caption = 'Delete'
+                    TabOrder = 1
+                    OnClick = btDeletePresetClick
+                    LinkFont.Charset = DEFAULT_CHARSET
+                    LinkFont.Color = clBlue
+                    LinkFont.Height = -11
+                    LinkFont.Name = 'MS Sans Serif'
+                    LinkFont.Style = [fsUnderline]
+                  end
+                  object btSavePreset: TSpTBXButton
+                    Left = 8
+                    Top = 40
+                    Width = 121
+                    Height = 25
+                    Caption = 'Save'
+                    TabOrder = 2
+                    OnClick = btSavePresetClick
+                    LinkFont.Charset = DEFAULT_CHARSET
+                    LinkFont.Color = clBlue
+                    LinkFont.Height = -11
+                    LinkFont.Name = 'MS Sans Serif'
+                    LinkFont.Style = [fsUnderline]
+                  end
+                  object PresetNameTextbox: TSpTBXEdit
+                    Left = 8
+                    Top = 18
+                    Width = 121
+                    Height = 21
+                    TabOrder = 3
+                    Text = 'Preset name'
+                  end
+                  object btClearPreset: TSpTBXButton
+                    Left = 8
+                    Top = 96
+                    Width = 121
+                    Height = 25
+                    Caption = 'Clear'
+                    TabOrder = 0
+                    OnClick = btClearPresetClick
+                    LinkFont.Charset = DEFAULT_CHARSET
+                    LinkFont.Color = clBlue
+                    LinkFont.Height = -11
+                    LinkFont.Name = 'MS Sans Serif'
+                    LinkFont.Style = [fsUnderline]
+                  end
+                end
+              end
               object SpTBXTabSheet1: TSpTBXTabSheet
                 Left = 0
                 Top = 0
@@ -416,12 +516,16 @@
                 Height = 146
                 Caption = 'Filters'
                 ImageIndex = -1
+                DesignSize = (
+                  617
+                  146)
                 TabItem = 'SpTBXTabItem1'
                 object FilterList: TVirtualStringTree
                   Left = 424
                   Top = 8
                   Width = 177
                   Height = 129
+                  Anchors = [akLeft, akTop, akRight]
                   CheckImageKind = ckSystem
                   ClipboardFormats.Strings = (
                     'Unicode text')
@@ -725,109 +829,9 @@
                   end
                 end
               end
-              object SpTBXTabSheet2: TSpTBXTabSheet
-                Left = 0
-                Top = 0
-                Width = 617
-                Height = 146
-                Caption = 'Presets'
-                ImageIndex = -1
-                DesignSize = (
-                  617
-                  146)
-                TabItem = 'SpTBXTabItem2'
-                object PresetListbox: TSpTBXListBox
-                  Left = 152
-                  Top = 26
-                  Width = 457
-                  Height = 113
-                  Anchors = [akLeft, akTop, akRight]
-                  ItemHeight = 16
-                  Items.Strings = (
-                    'default')
-                  TabOrder = 0
-                  OnClick = PresetListboxClick
-                end
-                object SpTBXLabel3: TSpTBXLabel
-                  Left = 152
-                  Top = 8
-                  Width = 64
-                  Height = 16
-                  Caption = 'Preset list :'
-                  Font.Charset = DEFAULT_CHARSET
-                  Font.Color = clWindowText
-                  Font.Height = -13
-                  Font.Name = 'MS Sans Serif'
-                  Font.Style = []
-                  ParentFont = False
-                  LinkFont.Charset = DEFAULT_CHARSET
-                  LinkFont.Color = clBlue
-                  LinkFont.Height = -11
-                  LinkFont.Name = 'MS Sans Serif'
-                  LinkFont.Style = [fsUnderline]
-                end
-                object SpTBXGroupBox1: TSpTBXGroupBox
-                  Left = 8
-                  Top = 8
-                  Width = 137
-                  Height = 129
-                  Caption = 'Options'
-                  TabOrder = 2
-                  object btDeletePreset: TSpTBXButton
-                    Left = 8
-                    Top = 72
-                    Width = 121
-                    Height = 25
-                    Caption = 'Delete'
-                    TabOrder = 1
-                    OnClick = btDeletePresetClick
-                    LinkFont.Charset = DEFAULT_CHARSET
-                    LinkFont.Color = clBlue
-                    LinkFont.Height = -11
-                    LinkFont.Name = 'MS Sans Serif'
-                    LinkFont.Style = [fsUnderline]
-                  end
-                  object btSavePreset: TSpTBXButton
-                    Left = 8
-                    Top = 40
-                    Width = 121
-                    Height = 25
-                    Caption = 'Save'
-                    TabOrder = 2
-                    OnClick = btSavePresetClick
-                    LinkFont.Charset = DEFAULT_CHARSET
-                    LinkFont.Color = clBlue
-                    LinkFont.Height = -11
-                    LinkFont.Name = 'MS Sans Serif'
-                    LinkFont.Style = [fsUnderline]
-                  end
-                  object PresetNameTextbox: TSpTBXEdit
-                    Left = 8
-                    Top = 18
-                    Width = 121
-                    Height = 21
-                    TabOrder = 3
-                    Text = 'Preset name'
-                  end
-                  object btClearPreset: TSpTBXButton
-                    Left = 8
-                    Top = 96
-                    Width = 121
-                    Height = 25
-                    Caption = 'Clear'
-                    TabOrder = 0
-                    OnClick = btClearPresetClick
-                    LinkFont.Charset = DEFAULT_CHARSET
-                    LinkFont.Color = clBlue
-                    LinkFont.Height = -11
-                    LinkFont.Name = 'MS Sans Serif'
-                    LinkFont.Style = [fsUnderline]
-                  end
-                end
-              end
             end
             object EnableFilters: TSpTBXCheckBox
-              Left = 501
+              Left = 509
               Top = 154
               Width = 110
               Height = 18
@@ -1180,7 +1184,7 @@
     Left = 176
     Top = 296
     Bitmap = {
-      494C010119001D00040010001000FFFFFFFFFF00FFFFFFFFFFFFFFFF424D3600
+      494C010119001D00040010001000FFFFFFFFFF10FFFFFFFFFFFFFFFF424D3600
       0000000000003600000028000000400000008000000001002000000000000080
       0000000000000000000000000000000000000000000000000000000000000000
       0000000000000000000000000000000000000000000000000000000000000000
@@ -2240,7 +2244,8 @@
       FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
       FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
       FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
-      FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF}
+      FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000000000000000000000000000
+      000000000000}
   end
   object PlayerStateImageList: TImageList
     Left = 209

Modified: trunk/Lobby/TASClient/MainUnit.pas
===================================================================
--- trunk/Lobby/TASClient/MainUnit.pas	2008-06-16 22:20:02 UTC (rev 6037)
+++ trunk/Lobby/TASClient/MainUnit.pas	2008-06-17 14:28:02 UTC (rev 6038)
@@ -510,7 +510,7 @@
 
 const
   VERSION_NUMBER = '0.38'; // Must be float value! (with a period as a decimal seperator)
-  BETA_NUMBER = 315;
+  BETA_NUMBER = 317;
   CHECK_BETA_LOBBY_URL = '<A HREF="http://tasclient.no-ip.org/TASClient.txt">http://tasclient.no-ip.org/TASClient.txt</A>';
   PROGRAM_VERSION = 'TASClient ' + VERSION_NUMBER + ' beta';
   KEEP_ALIVE_INTERVAL = 10000; // in milliseconds. Tells us what should be the maximum &quot;silence&quot; time before we send a ping to the server.
@@ -6892,7 +6892,7 @@
 procedure TMainForm.TryToRegister(Username, Password: string);
 begin;
   if Password = '' then Password := '*'; // we should never send empty password
-  TryToSendCommand('REGISTER', Username + ' ' + Misc.GetMD5Hash(Password));
+  TryToSendCommand('REGISTER', Username + ' ' + Password);
 end;
 
 // &quot;Edit&quot; must be from TMyTabSheet container! (this method uses clients
@@ -9077,7 +9077,7 @@
 procedure TMainForm.FilterGroupResize(Sender: TObject);
 begin
   //FilterList.Width := FilterGroup.Width - 402;
-  EnableFilters.left := FilterGroup.Width - 120;
+  EnableFilters.left := FilterGroup.Width - 112;
 end;
 
 procedure TMainForm.ReplaysFilterClick(Sender: TObject);

Modified: trunk/Lobby/TASClient/PreferencesFormUnit.pas
===================================================================
--- trunk/Lobby/TASClient/PreferencesFormUnit.pas	2008-06-16 22:20:02 UTC (rev 6037)
+++ trunk/Lobby/TASClient/PreferencesFormUnit.pas	2008-06-17 14:28:02 UTC (rev 6038)
@@ -304,6 +304,8 @@
     try Preferences.TimeStamps := Misc.GetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Preferences', 'TimeStamps'); except end;
     try Preferences.Username := Misc.GetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Preferences', 'Username'); except end;
     try Preferences.Password := Misc.GetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Preferences', 'Password'); except end;
+    if Length(Preferences.Password) &lt;&gt; 24 then // not md5 password = old system
+      Preferences.Password := Misc.GetMD5Hash(Preferences.Password);
     try Preferences.LadderPassword := Misc.GetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Preferences', 'LadderPassword'); except end;
     try Preferences.ConnectOnStartup := Misc.GetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Preferences', 'ConnectOnStartup'); except end;
     try Preferences.SortStyle := Misc.GetRegistryData(HKEY_CURRENT_USER, '\Software\TASClient\Preferences', 'SortStyle'); except end;
@@ -971,6 +973,8 @@
   UsernameEdit.Text := NewAccountForm.UsernameEdit.Text;
   PasswordEdit.Text :=  NewAccountForm.PasswordEdit.Text;
 
+  PasswordChanged := true;
+
   PostMessage(MainForm.Handle, WM_DOREGISTER, 0, 0);
   ApplyAndCloseButton.OnClick(nil);
 end;

Modified: trunk/Lobby/TASClient/TASClient.dof
===================================================================
--- trunk/Lobby/TASClient/TASClient.dof	2008-06-16 22:20:02 UTC (rev 6037)
+++ trunk/Lobby/TASClient/TASClient.dof	2008-06-17 14:28:02 UTC (rev 6038)
@@ -115,7 +115,7 @@
 MajorVer=0
 MinorVer=3
 Release=0
-Build=315
+Build=317
 Debug=0
 PreRelease=0
 Special=0
@@ -126,7 +126,7 @@
 [Version Info Keys]
 CompanyName=
 FileDescription=TA Spring lobby client
-FileVersion=0.3.0.315
+FileVersion=0.3.0.317
 InternalName=
 LegalCopyright=
 LegalTrademarks=

Modified: trunk/Lobby/TASClient/TASClient.res
===================================================================
(Binary files differ)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000817.html">[Taspring-linux-commit] r6037 - in trunk/Lobby/TASClient: . Graphics
</A></li>
	<LI>Next message: <A HREF="000819.html">[Taspring-linux-commit] r6039 - trunk/rts/Sim/Units
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#818">[ date ]</a>
              <a href="thread.html#818">[ thread ]</a>
              <a href="subject.html#818">[ subject ]</a>
              <a href="author.html#818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
