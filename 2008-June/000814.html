<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r6034 - in trunk/rts/Sim/Units: . CommandAI
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6034%20-%20in%20trunk/rts/Sim/Units%3A%20.%20CommandAI&In-Reply-To=%3C20080615173322.66723487A%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000813.html">
   <LINK REL="Next"  HREF="000815.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r6034 - in trunk/rts/Sim/Units: . CommandAI</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6034%20-%20in%20trunk/rts/Sim/Units%3A%20.%20CommandAI&In-Reply-To=%3C20080615173322.66723487A%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r6034 - in trunk/rts/Sim/Units: . CommandAI">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Sun Jun 15 19:33:22 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000813.html">[Taspring-linux-commit] r6033 - trunk/game/LuaUI/Widgets
</A></li>
        <LI>Next message: <A HREF="000815.html">[Taspring-linux-commit] r6035 - in trunk/rts: Lua	Sim/Projectiles/WeaponProjectiles Sim/Weapons
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#814">[ date ]</a>
              <a href="thread.html#814">[ thread ]</a>
              <a href="subject.html#814">[ subject ]</a>
              <a href="author.html#814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: trepan
Date: 2008-06-15 19:33:21 +0200 (Sun, 15 Jun 2008)
New Revision: 6034

Modified:
   trunk/rts/Sim/Units/CommandAI/CommandAI.cpp
   trunk/rts/Sim/Units/Unit.cpp
Log:

- whitespace / formatting



Modified: trunk/rts/Sim/Units/CommandAI/CommandAI.cpp
===================================================================
--- trunk/rts/Sim/Units/CommandAI/CommandAI.cpp	2008-06-15 13:55:55 UTC (rev 6033)
+++ trunk/rts/Sim/Units/CommandAI/CommandAI.cpp	2008-06-15 17:33:21 UTC (rev 6034)
@@ -94,43 +94,42 @@
 	unimportantMove(false),
 	targetLostTimer(TARGET_LOST_TIMER)
 {
-	owner-&gt;commandAI=this;
+	owner-&gt;commandAI = this;
 	CommandDescription c;
-	c.id=CMD_STOP;
-	c.action=&quot;stop&quot;;
-	c.type=CMDTYPE_ICON;
-	c.name=&quot;Stop&quot;;
-	c.mouseicon=c.name;
-	c.tooltip=&quot;Stop: Cancel the units current actions&quot;;
+	c.id = CMD_STOP;
+	c.action = &quot;stop&quot;;
+	c.type = CMDTYPE_ICON;
+	c.name = &quot;Stop&quot;;
+	c.mouseicon = c.name;
+	c.tooltip = &quot;Stop: Cancel the units current actions&quot;;
 	possibleCommands.push_back(c);
 
 	if (isAttackCapable()) {
-		c.id=CMD_ATTACK;
-		c.action=&quot;attack&quot;;
-		c.type=CMDTYPE_ICON_UNIT_OR_MAP;
-		c.name=&quot;Attack&quot;;
-		c.mouseicon=c.name;
-		c.tooltip=&quot;Attack: Attacks an unit or a position on the ground&quot;;
+		c.id = CMD_ATTACK;
+		c.action = &quot;attack&quot;;
+		c.type = CMDTYPE_ICON_UNIT_OR_MAP;
+		c.name = &quot;Attack&quot;;
+		c.mouseicon = c.name;
+		c.tooltip = &quot;Attack: Attacks an unit or a position on the ground&quot;;
 		possibleCommands.push_back(c);
 	}
 
 	if (owner-&gt;unitDef-&gt;canDGun) {
-		c.id=CMD_DGUN;
-		c.action=&quot;dgun&quot;;
-		c.type=CMDTYPE_ICON_MAP;
-		c.name=&quot;DGun&quot;;
-		c.mouseicon=c.name;
-		c.tooltip=&quot;DGun: Attacks using the units special weapon&quot;;
+		c.id = CMD_DGUN;
+		c.action = &quot;dgun&quot;;
+		c.type = CMDTYPE_ICON_MAP;
+		c.name = &quot;DGun&quot;;
+		c.mouseicon = c.name;
+		c.tooltip = &quot;DGun: Attacks using the units special weapon&quot;;
 		possibleCommands.push_back(c);
 	}
 
- 	c.id=CMD_WAIT;
-	c.action=&quot;wait&quot;;
- 	c.type=CMDTYPE_ICON;
- 	c.name=&quot;Wait&quot;;
- 	c.mouseicon=c.name;
- 	c.onlyKey=false;
- 	c.tooltip=&quot;Wait: Tells the unit to wait until another units handles him&quot;;
+ 	c.id = CMD_WAIT;
+	c.action = &quot;wait&quot;;
+ 	c.type = CMDTYPE_ICON;
+ 	c.name = &quot;Wait&quot;;
+ 	c.mouseicon = c.name;
+ 	c.tooltip = &quot;Wait: Tells the unit to wait until another units handles him&quot;;
  	possibleCommands.push_back(c);
 //	nonQueingCommands.insert(CMD_WAIT);
 
@@ -139,11 +138,12 @@
 	c.type = CMDTYPE_NUMBER;
 	c.name = &quot;TimeWait&quot;;
 	c.mouseicon=c.name;
-	c.onlyKey = true;
 	c.tooltip = &quot;TimeWait: Wait for a period of time before continuing&quot;;
 	c.params.push_back(&quot;1&quot;);  // min
 	c.params.push_back(&quot;60&quot;); // max
+	c.onlyKey = true;
 	possibleCommands.push_back(c);
+ 	c.onlyKey = false;
 	c.params.clear();
 
 	// only for games with 2 ally teams  --  checked later
@@ -152,20 +152,22 @@
 	c.type = CMDTYPE_ICON_UNIT_OR_RECTANGLE;
 	c.name = &quot;DeathWait&quot;;
 	c.mouseicon=c.name;
+	c.tooltip = &quot;DeathWait: Wait until units die before continuing&quot;;
 	c.onlyKey = true;
-	c.tooltip = &quot;DeathWait: Wait until units die before continuing&quot;;
 	possibleCommands.push_back(c);
+ 	c.onlyKey = false;
 
 	c.id = CMD_SQUADWAIT;
 	c.action = &quot;squadwait&quot;;
 	c.type = CMDTYPE_NUMBER;
 	c.name = &quot;SquadWait&quot;;
 	c.mouseicon=c.name;
-	c.onlyKey = true;
 	c.tooltip = &quot;SquadWait: Wait for a number of units to arrive before continuing&quot;;
 	c.params.push_back(&quot;2&quot;);   // min
 	c.params.push_back(&quot;100&quot;); // max
+	c.onlyKey = true;
 	possibleCommands.push_back(c);
+ 	c.onlyKey = false;
 	c.params.clear();
 
 	c.id = CMD_GATHERWAIT;
@@ -173,9 +175,10 @@
 	c.type = CMDTYPE_ICON;
 	c.name = &quot;GatherWait&quot;;
 	c.mouseicon=c.name;
+	c.tooltip = &quot;GatherWait: Wait until all units arrive before continuing&quot;;
 	c.onlyKey = true;
-	c.tooltip = &quot;GatherWait: Wait until all units arrive before continuing&quot;;
 	possibleCommands.push_back(c);
+ 	c.onlyKey = false;
 
 	if (owner-&gt;unitDef-&gt;canSelfD) {
 		c.id = CMD_SELFD;
@@ -183,84 +186,83 @@
 		c.type = CMDTYPE_ICON;
 		c.name = &quot;SelfD&quot;;
 		c.mouseicon = c.name;
+		c.tooltip = &quot;SelfD: Tells the unit to self destruct&quot;;
 		c.onlyKey = true;
-		c.tooltip = &quot;SelfD: Tells the unit to self destruct&quot;;
 		possibleCommands.push_back(c);
+	 	c.onlyKey = false;
 	}
 //	nonQueingCommands.insert(CMD_SELFD);
 
-	c.onlyKey=false;
-
 	if(CanChangeFireState()) {
-		c.id=CMD_FIRE_STATE;
-		c.action=&quot;firestate&quot;;
-		c.type=CMDTYPE_ICON_MODE;
-		c.name=&quot;Fire state&quot;;
-		c.mouseicon=c.name;
+		c.id = CMD_FIRE_STATE;
+		c.action = &quot;firestate&quot;;
+		c.type = CMDTYPE_ICON_MODE;
+		c.name = &quot;Fire state&quot;;
+		c.mouseicon = c.name;
 		c.params.push_back(&quot;2&quot;);
 		c.params.push_back(&quot;Hold fire&quot;);
 		c.params.push_back(&quot;Return fire&quot;);
 		c.params.push_back(&quot;Fire at will&quot;);
-		c.tooltip=&quot;Fire State: Sets under what conditions an\n unit will start to fire at enemy units\n without an explicit attack order&quot;;
+		c.tooltip = &quot;Fire State: Sets under what conditions an\n unit will start to fire at enemy units\n without an explicit attack order&quot;;
 		possibleCommands.push_back(c);
 		nonQueingCommands.insert(CMD_FIRE_STATE);
 	}
 
 	if (owner-&gt;unitDef-&gt;canmove || owner-&gt;unitDef-&gt;builder) {
 		c.params.clear();
-		c.id=CMD_MOVE_STATE;
-		c.action=&quot;movestate&quot;;
-		c.type=CMDTYPE_ICON_MODE;
-		c.name=&quot;Move state&quot;;
-		c.mouseicon=c.name;
+		c.id = CMD_MOVE_STATE;
+		c.action = &quot;movestate&quot;;
+		c.type = CMDTYPE_ICON_MODE;
+		c.name = &quot;Move state&quot;;
+		c.mouseicon = c.name;
 		c.params.push_back(&quot;1&quot;);
 		c.params.push_back(&quot;Hold pos&quot;);
 		c.params.push_back(&quot;Maneuver&quot;);
 		c.params.push_back(&quot;Roam&quot;);
-		c.tooltip=&quot;Move State: Sets how far out of its way\n an unit will move to attack enemies&quot;;
+		c.tooltip = &quot;Move State: Sets how far out of its way\n an unit will move to attack enemies&quot;;
 		possibleCommands.push_back(c);
 		nonQueingCommands.insert(CMD_MOVE_STATE);
 	} else {
-		owner-&gt;moveState=0;
+		owner-&gt;moveState = 0;
 	}
 
 	if (owner-&gt;unitDef-&gt;canRepeat) {
 		c.params.clear();
-		c.id=CMD_REPEAT;
-		c.action=&quot;repeat&quot;;
-		c.type=CMDTYPE_ICON_MODE;
-		c.name=&quot;Repeat&quot;;
-		c.mouseicon=c.name;
+		c.id = CMD_REPEAT;
+		c.action = &quot;repeat&quot;;
+		c.type = CMDTYPE_ICON_MODE;
+		c.name = &quot;Repeat&quot;;
+		c.mouseicon = c.name;
 		c.params.push_back(&quot;0&quot;);
 		c.params.push_back(&quot;Repeat off&quot;);
 		c.params.push_back(&quot;Repeat on&quot;);
-		c.tooltip=&quot;Repeat: If on the unit will continously\n push finished orders to the end of its\n order que&quot;;
+		c.tooltip = &quot;Repeat: If on the unit will continously\n push finished orders to the end of its\n order que&quot;;
 		possibleCommands.push_back(c);
 		nonQueingCommands.insert(CMD_REPEAT);
 	}
 
 	if (owner-&gt;unitDef-&gt;highTrajectoryType&gt;1) {
 		c.params.clear();
-		c.id=CMD_TRAJECTORY;
-		c.action=&quot;trajectory&quot;;
-		c.type=CMDTYPE_ICON_MODE;
-		c.name=&quot;Trajectory&quot;;
-		c.mouseicon=c.name;
+		c.id = CMD_TRAJECTORY;
+		c.action = &quot;trajectory&quot;;
+		c.type = CMDTYPE_ICON_MODE;
+		c.name = &quot;Trajectory&quot;;
+		c.mouseicon = c.name;
 		c.params.push_back(&quot;0&quot;);
 		c.params.push_back(&quot;Low traj&quot;);
 		c.params.push_back(&quot;High traj&quot;);
-		c.tooltip=&quot;Trajectory: If set to high, weapons that\n support it will try to fire in a higher\n trajectory than usual (experimental)&quot;;
+		c.tooltip = &quot;Trajectory: If set to high, weapons that\n support it will try to fire in a higher\n trajectory than usual (experimental)&quot;;
 		possibleCommands.push_back(c);
 		nonQueingCommands.insert(CMD_TRAJECTORY);
 	}
 
 	if (owner-&gt;unitDef-&gt;onoffable) {
 		c.params.clear();
-		c.id=CMD_ONOFF;
-		c.action=&quot;onoff&quot;;
-		c.type=CMDTYPE_ICON_MODE;
-		c.name=&quot;Active state&quot;;
-		c.mouseicon=c.name;
+		c.id = CMD_ONOFF;
+		c.action = &quot;onoff&quot;;
+		c.type = CMDTYPE_ICON_MODE;
+		c.name = &quot;Active state&quot;;
+		c.mouseicon = c.name;
 
 		if (owner-&gt;unitDef-&gt;activateWhenBuilt) {
 			c.params.push_back(&quot;1&quot;);
@@ -271,18 +273,18 @@
 		c.params.push_back(&quot; Off &quot;);
 		c.params.push_back(&quot; On &quot;);
 
-		c.tooltip=&quot;Active State: Sets the active state of the unit to on or off&quot;;
+		c.tooltip = &quot;Active State: Sets the active state of the unit to on or off&quot;;
 		possibleCommands.push_back(c);
 		nonQueingCommands.insert(CMD_ONOFF);
 	}
 
 	if (owner-&gt;unitDef-&gt;canCloak) {
 		c.params.clear();
-		c.id=CMD_CLOAK;
-		c.action=&quot;cloak&quot;;
-		c.type=CMDTYPE_ICON_MODE;
-		c.name=&quot;Cloak state&quot;;
-		c.mouseicon=c.name;
+		c.id = CMD_CLOAK;
+		c.action = &quot;cloak&quot;;
+		c.type = CMDTYPE_ICON_MODE;
+		c.name = &quot;Cloak state&quot;;
+		c.mouseicon = c.name;
 
 		if (owner-&gt;unitDef-&gt;startCloaked) {
 			c.params.push_back(&quot;1&quot;);
@@ -293,7 +295,7 @@
 		c.params.push_back(&quot;UnCloaked&quot;);
 		c.params.push_back(&quot;Cloaked&quot;);
 
-		c.tooltip=&quot;Cloak State: Sets wheter the unit is cloaked or not&quot;;
+		c.tooltip = &quot;Cloak State: Sets wheter the unit is cloaked or not&quot;;
 		possibleCommands.push_back(c);
 		nonQueingCommands.insert(CMD_CLOAK);
 	}
@@ -303,13 +305,13 @@
 {
 	if(orderTarget){
 		DeleteDeathDependence(orderTarget);
-		orderTarget=0;
+		orderTarget = 0;
 	}
 }
 
 void CCommandAI::PostLoad()
 {
-	selected=false;//HACK: selected list does not serialized
+	selected = false; // HACK: selected list does not serialized
 }
 
 vector&lt;CommandDescription&gt;&amp; CCommandAI::GetPossibleCommands()
@@ -321,7 +323,8 @@
 bool CCommandAI::isAttackCapable() const
 {
 	const UnitDef* ud = owner-&gt;unitDef;
-	return (ud-&gt;canAttack &amp;&amp; (!ud-&gt;weapons.empty() || ud-&gt;canKamikaze || (ud-&gt;type == &quot;Factory&quot;)));
+	return (ud-&gt;canAttack &amp;&amp;
+	        (!ud-&gt;weapons.empty() || ud-&gt;canKamikaze || (ud-&gt;type == &quot;Factory&quot;)));
 }
 
 

Modified: trunk/rts/Sim/Units/Unit.cpp
===================================================================
--- trunk/rts/Sim/Units/Unit.cpp	2008-06-15 13:55:55 UTC (rev 6033)
+++ trunk/rts/Sim/Units/Unit.cpp	2008-06-15 17:33:21 UTC (rev 6034)
@@ -279,15 +279,17 @@
 	group = NULL;
 
 	std::vector&lt;CWeapon*&gt;::iterator wi;
-	for (wi = weapons.begin(); wi != weapons.end(); ++wi)
+	for (wi = weapons.begin(); wi != weapons.end(); ++wi) {
 		delete *wi;
+	}
 
 	qf-&gt;RemoveUnit(this);
 	loshandler-&gt;DelayedFreeInstance(los);
 	los = 0;
 
-	if (hasRadarCapacity)
+	if (hasRadarCapacity) {
 		radarhandler-&gt;RemoveUnit(this);
+	}
 
 	delete cob;
 	delete localmodel;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000813.html">[Taspring-linux-commit] r6033 - trunk/game/LuaUI/Widgets
</A></li>
	<LI>Next message: <A HREF="000815.html">[Taspring-linux-commit] r6035 - in trunk/rts: Lua	Sim/Projectiles/WeaponProjectiles Sim/Weapons
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#814">[ date ]</a>
              <a href="thread.html#814">[ thread ]</a>
              <a href="subject.html#814">[ subject ]</a>
              <a href="author.html#814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
