<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Taspring-linux-commit] r6080 - trunk/tools/unitsync/test
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/taspring-linux-commit/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6080%20-%20trunk/tools/unitsync/test&In-Reply-To=%3C20080627033959.38B754636%40progate.clan-sy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000859.html">
   <LINK REL="Next"  HREF="000861.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Taspring-linux-commit] r6080 - trunk/tools/unitsync/test</H1>
    <B>taspring-linux-commit at lists.berlios.de</B> 
    <A HREF="mailto:taspring-linux-commit%40lists.berlios.de?Subject=Re%3A%20%5BTaspring-linux-commit%5D%20r6080%20-%20trunk/tools/unitsync/test&In-Reply-To=%3C20080627033959.38B754636%40progate.clan-sy.com%3E"
       TITLE="[Taspring-linux-commit] r6080 - trunk/tools/unitsync/test">taspring-linux-commit at lists.berlios.de
       </A><BR>
    <I>Fri Jun 27 05:39:58 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000859.html">[Taspring-linux-commit] r6079 - in trunk: . game game/LuaUI	game/LuaUI/Widgets installer/builddata/maphelper	installer/builddata/maphelper/maphelper	installer/builddata/springcontent/LuaGadgets	installer/builddata/springcontent/gamedata rts/Game	rts/Game/StartScripts rts/Game/UI rts/Lua rts/Map rts/Map/SMF	rts/Rendering rts/Sim rts/Sim/Misc rts/Sim/Path rts/Sim/Units	rts/System rts/System/FileSystem rts/System/Platform	rts/lib/lua rts/lib/lua/include tools/unitsync tools/unitsync/test
</A></li>
        <LI>Next message: <A HREF="000861.html">[Taspring-linux-commit] r6081 - trunk/rts/Game
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#860">[ date ]</a>
              <a href="thread.html#860">[ thread ]</a>
              <a href="subject.html#860">[ subject ]</a>
              <a href="author.html#860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: trepan
Date: 2008-06-27 05:39:58 +0200 (Fri, 27 Jun 2008)
New Revision: 6080

Removed:
   trunk/tools/unitsync/test/test.cxx
Log:

- removed test.cxx



Deleted: trunk/tools/unitsync/test/test.cxx
===================================================================
--- trunk/tools/unitsync/test/test.cxx	2008-06-27 03:35:24 UTC (rev 6079)
+++ trunk/tools/unitsync/test/test.cxx	2008-06-27 03:39:58 UTC (rev 6080)
@@ -1,350 +0,0 @@
-#/*START
-#//##########################################################################//#
-
-file=test.cpp
-
-start=`grep -n '^#END' $file | grep -o '^[^:]*'`
-start=`expr $start + 1`
-tail -n +$start $file &gt; test.tmp.cxx
-echo Clipped $start lines
-
-g++ -I../../../rts/System test.tmp.cxx ../../../game/unitsync.so
-
-echo ./a.out Castles.smf ba621.sd7
-./a.out Castles.smf ba621.sd7
-
-exit
-
-#//##########################################################################//#
-#END*/
-
-
-/******************************************************************************/
-/******************************************************************************/
-//  Simple file to help test unitsync, compile with:
-//
-//    g++ -I../../../rts/System test.cxx ../../../game/unitsync.so
-//
-
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-
-#include &lt;string&gt;
-#include &lt;vector&gt;
-using namespace std;
-
-#include &quot;../unitsync.h&quot;
-
-
-/******************************************************************************/
-/******************************************************************************/
-//
-//  Generated using:  'grep DLL_EXPORT unitsync.cpp'
-//
-
-DLL_EXPORT const char*  __stdcall GetSpringVersion();
-
-DLL_EXPORT void         __stdcall Message(const char* p_szMessage);
-
-DLL_EXPORT void         __stdcall UnInit();
-DLL_EXPORT int          __stdcall Init(bool isServer, int id);
-DLL_EXPORT int          __stdcall InitArchiveScanner(void);
-
-DLL_EXPORT int          __stdcall ProcessUnits(void);
-DLL_EXPORT int          __stdcall ProcessUnitsNoChecksum(void);
-DLL_EXPORT const char*  __stdcall GetCurrentList();
-
-DLL_EXPORT void         __stdcall AddClient(int id, const char *unitList);
-DLL_EXPORT void         __stdcall RemoveClient(int id);
-
-DLL_EXPORT const char*  __stdcall GetClientDiff(int id);
-DLL_EXPORT void         __stdcall InstallClientDiff(const char *diff);
-
-DLL_EXPORT int          __stdcall GetUnitCount();
-DLL_EXPORT const char*  __stdcall GetUnitName(int unit);
-DLL_EXPORT const char*  __stdcall GetFullUnitName(int unit);
-DLL_EXPORT int          __stdcall IsUnitDisabled(int unit);
-DLL_EXPORT int          __stdcall IsUnitDisabledByClient(int unit, int clientId);
-
-DLL_EXPORT void         __stdcall AddArchive(const char* name);
-DLL_EXPORT void         __stdcall AddAllArchives(const char* root);
-DLL_EXPORT unsigned int __stdcall GetArchiveChecksum(const char* arname);
-
-DLL_EXPORT int          __stdcall GetMapCount();
-DLL_EXPORT const char*  __stdcall GetMapName(int index);
-DLL_EXPORT int          __stdcall GetMapInfoEx(const char* name, MapInfo* outInfo, int version);
-DLL_EXPORT int          __stdcall GetMapInfo(const char* name, MapInfo* outInfo);
-DLL_EXPORT int          __stdcall GetMapArchiveCount(const char* mapName);
-DLL_EXPORT const char*  __stdcall GetMapArchiveName(int index);
-DLL_EXPORT unsigned int __stdcall GetMapChecksum(int index);
-DLL_EXPORT void*        __stdcall GetMinimap(const char* filename, int miplevel);
-
-DLL_EXPORT int          __stdcall GetPrimaryModCount();
-DLL_EXPORT const char*  __stdcall GetPrimaryModName(int index);
-DLL_EXPORT const char*  __stdcall GetPrimaryModShortName(int index);
-DLL_EXPORT const char*  __stdcall GetPrimaryModVersion(int index);
-DLL_EXPORT const char*  __stdcall GetPrimaryModMutator(int index);
-DLL_EXPORT const char*  __stdcall GetPrimaryModArchive(int index);
-DLL_EXPORT int          __stdcall GetPrimaryModArchiveCount(int index);
-DLL_EXPORT const char*  __stdcall GetPrimaryModArchiveList(int arnr);
-DLL_EXPORT int          __stdcall GetPrimaryModIndex(const char* name);
-DLL_EXPORT unsigned int __stdcall GetPrimaryModChecksum(int index);
-
-DLL_EXPORT int          __stdcall GetSideCount();
-DLL_EXPORT const char*  __stdcall GetSideName(int side);
-
-DLL_EXPORT int          __stdcall GetLuaAICount();
-DLL_EXPORT const char*  __stdcall GetLuaAIName(int aiIndex);
-DLL_EXPORT const char*  __stdcall GetLuaAIDesc(int aiIndex);
-
-DLL_EXPORT int          __stdcall GetMapOptionCount(const char* name);
-DLL_EXPORT int          __stdcall GetModOptionCount();
-DLL_EXPORT const char*  __stdcall GetOptionKey(int optIndex);
-DLL_EXPORT const char*  __stdcall GetOptionName(int optIndex);
-DLL_EXPORT const char*  __stdcall GetOptionDesc(int optIndex);
-DLL_EXPORT int          __stdcall GetOptionType(int optIndex);
-DLL_EXPORT int          __stdcall GetOptionBoolDef(int optIndex);
-DLL_EXPORT float        __stdcall GetOptionNumberDef(int optIndex);
-DLL_EXPORT float        __stdcall GetOptionNumberMin(int optIndex);
-DLL_EXPORT float        __stdcall GetOptionNumberMax(int optIndex);
-DLL_EXPORT float        __stdcall GetOptionNumberStep(int optIndex);
-DLL_EXPORT const char*  __stdcall GetOptionStringDef(int optIndex);
-DLL_EXPORT int          __stdcall GetOptionStringMaxLen(int optIndex);
-DLL_EXPORT int          __stdcall GetOptionListCount(int optIndex);
-DLL_EXPORT const char*  __stdcall GetOptionListDef(int optIndex);
-DLL_EXPORT const char*  __stdcall GetOptionListItemKey(int optIndex, int itemIndex);
-DLL_EXPORT const char*  __stdcall GetOptionListItemName(int optIndex, int itemIndex);
-DLL_EXPORT const char*  __stdcall GetOptionListItemDesc(int optIndex, int itemIndex);
-
-DLL_EXPORT int          __stdcall GetModValidMapCount();
-DLL_EXPORT const char*  __stdcall GetModValidMap(int index);
-
-DLL_EXPORT int          __stdcall OpenFileVFS(const char* name);
-DLL_EXPORT void         __stdcall CloseFileVFS(int handle);
-DLL_EXPORT void         __stdcall ReadFileVFS(int handle, void* buf, int length);
-DLL_EXPORT int          __stdcall FileSizeVFS(int handle);
-DLL_EXPORT int          __stdcall InitFindVFS(const char* pattern);
-DLL_EXPORT int          __stdcall FindFilesVFS(int handle, char* nameBuf, int size);
-
-DLL_EXPORT int          __stdcall OpenArchive(const char* name);
-DLL_EXPORT void         __stdcall CloseArchive(int archive);
-DLL_EXPORT int          __stdcall FindFilesArchive(int archive, int cur, char* nameBuf, int* size);
-DLL_EXPORT int          __stdcall OpenArchiveFile(int archive, const char* name);
-DLL_EXPORT int          __stdcall ReadArchiveFile(int archive, int handle, void* buffer, int numBytes);
-DLL_EXPORT void         __stdcall CloseArchiveFile(int archive, int handle);
-DLL_EXPORT int          __stdcall SizeArchiveFile(int archive, int handle);
-
-
-/******************************************************************************/
-/******************************************************************************/
-
-static void DisplayOptions(int optionCount);
-
-
-/******************************************************************************/
-/******************************************************************************/
-
-static bool PrintMapInfo(const string&amp; mapName)
-{
-  printf(&quot;  MAP INFO  (for %s)\n&quot;, mapName.c_str());
-  MapInfo mi;
-  char auth[256];
-  char desc[256];
-  mi.author = auth;
-  mi.author[0] = 0;
-  mi.description = desc;
-  mi.description[0] = 0;
-  if (!GetMapInfoEx(mapName.c_str(), &amp;mi, 1)) {
-    printf(&quot;ERROR getting info for map %s  (%s)\n&quot;,
-    mapName.c_str(), mi.description);
-  }
-  else {
-    printf(&quot;    author:    '%s'\n&quot;, mi.author);
-    printf(&quot;    desc:      '%s'\n&quot;, mi.description);
-    printf(&quot;    gravity:   %i\n&quot;,   mi.gravity);
-    printf(&quot;    tidal:     %i\n&quot;,   mi.tidalStrength);
-    printf(&quot;    maxMetal:  %f\n&quot;,   mi.maxMetal);
-    printf(&quot;    mexRad:    %i\n&quot;,   mi.extractorRadius);
-    printf(&quot;    minWind:   %i\n&quot;,   mi.minWind);
-    printf(&quot;    maxWind:   %i\n&quot;,   mi.maxWind);
-    printf(&quot;    width:     %i\n&quot;,   mi.width);
-    printf(&quot;    height:    %i\n&quot;,   mi.height);
-    for (int p = 0; p &lt; mi.posCount; p++) {
-      const StartPos&amp; sp = mi.positions[p];
-      printf(&quot;    pos %i:     &lt;%5i, %5i&gt;\n&quot;, p, sp.x, sp.z);
-    }
-  }
-}
-
-
-int main(int argc, char** argv)
-{
-  if (argc &lt; 3) {
-    printf(&quot;usage:  %s &lt;map&gt; &lt;mod&gt;\n&quot;, argv[0]);
-    exit(1);
-  }
-  const string map = argv[1];
-  const string mod = argv[2];
-  printf(&quot;MAP = %s\n&quot;, map.c_str());
-  printf(&quot;MOD = %s\n&quot;, mod.c_str());
-
-  Init(false, 0);
-  InitArchiveScanner();
-
-  printf(&quot;GetSpringVersion() = %s\n&quot;, GetSpringVersion());
-
-  // map names
-  printf(&quot;  MAPS\n&quot;);
-  vector&lt;string&gt; mapNames;
-  const int mapCount = GetMapCount();
-  for (int i = 0; i &lt; mapCount; i++) {
-    const string mapName = GetMapName(i);
-    mapNames.push_back(mapName);
-    printf(&quot;    [map %3i]   %s\n&quot;, i, mapName.c_str());
-  }
-
-  // map archives
-  printf(&quot;  MAP ARCHIVES  (for %s)\n&quot;, map.c_str());
-  const int mapArcCount = GetMapArchiveCount(map.c_str());
-  for (int a = 0; a &lt; mapArcCount; a++) {
-    printf(&quot;      arc %i: %s\n&quot;, a, GetMapArchiveName(a));
-  }
-  
-  // map info
-  PrintMapInfo(map);
-
-  if (true) { // FIXME -- debugging
-    for (int i = 0; i &lt; mapNames.size(); i++) {
-      PrintMapInfo(mapNames[i]);
-    }
-  }
-    
-  // mod names
-  printf(&quot;  MODS\n&quot;);
-  const int modCount = GetPrimaryModCount();
-  for (int i = 0; i &lt; modCount; i++) {
-    const string modName      = GetPrimaryModName(i);
-    const string modShortName = GetPrimaryModShortName(i);
-    const string modVersion   = GetPrimaryModVersion(i);
-    const string modMutator   = GetPrimaryModMutator(i);
-    const string modArchive = GetPrimaryModArchive(i);
-    printf(&quot;    [mod %3i]   %-32s  &lt;%s&gt; %s %s %s\n&quot;, i,
-           modName.c_str(), modArchive.c_str(),
-           modShortName.c_str(), modVersion.c_str(), modMutator.c_str());
-  }
-
-  // load the mod archives
-  AddAllArchives(mod.c_str());
-
-  // unit names
-  while (true) {
-  //const int left = ProcessUnits();
-    const int left = ProcessUnitsNoChecksum();
-  //printf(&quot;unitsLeft = %i\n&quot;, left);
-    if (left &lt;= 0) {
-      break;
-    }
-  }
-  printf(&quot;  UNITS\n&quot;);
-  const int unitCount = GetUnitCount();
-  for (int i = 0; i &lt; unitCount; i++) {
-    const string unitName     = GetUnitName(i);
-    const string unitFullName = GetFullUnitName(i);
-    printf(&quot;    [unit %3i]   %-16s  &lt;%s&gt;\n&quot;, i,
-           unitName.c_str(), unitFullName.c_str());
-  }
-  printf(&quot;  SIDES\n&quot;);
-  const int sideCount = GetSideCount();
-  for (int i = 0; i &lt; sideCount; i++) {
-    const string sideName= GetSideName(i);
-    printf(&quot;    side %i = '%s'\n&quot;, i, sideName.c_str());
-  }
-
-  // LuaAI options
-  printf(&quot;  LuaAI\n&quot;);
-  const int luaAICount = GetLuaAICount();
-  for (int i = 0; i &lt; luaAICount; i++) {
-    printf(&quot;    %i: name = %s\n&quot;, i, GetLuaAIName(i));
-    printf(&quot;       desc = %s\n&quot;,     GetLuaAIDesc(i));
-  }
-
-  // MapOptions
-  printf(&quot;  MapOptions\n&quot;);
-  const int mapOptCount = GetMapOptionCount(map.c_str());
-  DisplayOptions(mapOptCount);
-
-  // ModOptions
-  printf(&quot;  ModOptions\n&quot;);
-  const int modOptCount = GetModOptionCount();
-  DisplayOptions(modOptCount);
-
-  // ModValidMaps
-  printf(&quot;  ModValidMaps\n&quot;);
-  const int modValidMapCount = GetModValidMapCount();
-  if (modValidMapCount == 0) {
-    printf(&quot;    * ALL MAPS *\n&quot;);
-  }
-  else {
-    for (int i = 0; i &lt; modValidMapCount; i++) {
-      printf(&quot;    %i: %s\n&quot;, i, GetModValidMap(i));
-    }
-  }
-
-  UnInit();
-
-  return 0;
-}
-
-
-/******************************************************************************/
-/******************************************************************************/
-
-static void DisplayOptions(int optionCount)
-{
-  for (int i = 0; i &lt; optionCount; i++) {
-    printf(&quot;    Option #%i\n&quot;, i);
-    printf(&quot;      key  = '%s'\n&quot;, GetOptionKey(i));
-    printf(&quot;      name = '%s'\n&quot;, GetOptionName(i));
-    printf(&quot;      desc = '%s'\n&quot;, GetOptionDesc(i));
-    printf(&quot;      type = %i\n&quot;, GetOptionType(i));
-
-    const int type = GetOptionType(i);
-
-    if (type == opt_error) {
-      printf(&quot;      BAD OPTION\n&quot;);
-    }
-    else if (type == opt_bool) {
-      printf(&quot;      BOOL: def = %s\n&quot;,
-             GetOptionBoolDef(i) ? &quot;true&quot; : &quot;false&quot;);
-    }
-    else if (type == opt_string) {
-      printf(&quot;      STRING: def = '%s', maxlen = %i\n&quot;,
-             GetOptionStringDef(i),
-             GetOptionStringMaxLen(i));
-    }
-    else if (type == opt_number) {
-      printf(&quot;      NUMBER: def = %f, min = %f, max = %f, step = %f\n&quot;,
-             GetOptionNumberDef(i),
-             GetOptionNumberMin(i),
-             GetOptionNumberMax(i),
-             GetOptionNumberStep(i));
-    }
-    else if (type == opt_list) {
-      printf(&quot;      LIST: def = '%s'\n&quot;,
-             GetOptionListDef(i));
-
-      const int listCount = GetOptionListCount(i);
-      for (int li = 0; li &lt; listCount; li++) {
-        printf(&quot;      %3i: key  = '%s'\n&quot;, li,
-                                         GetOptionListItemKey(i, li));
-        printf(&quot;           name = '%s'\n&quot;, GetOptionListItemName(i, li));
-        printf(&quot;           desc = '%s'\n&quot;, GetOptionListItemDesc(i, li));
-      }
-    }
-  }
-}
-
-
-/******************************************************************************/
-/******************************************************************************/


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000859.html">[Taspring-linux-commit] r6079 - in trunk: . game game/LuaUI	game/LuaUI/Widgets installer/builddata/maphelper	installer/builddata/maphelper/maphelper	installer/builddata/springcontent/LuaGadgets	installer/builddata/springcontent/gamedata rts/Game	rts/Game/StartScripts rts/Game/UI rts/Lua rts/Map rts/Map/SMF	rts/Rendering rts/Sim rts/Sim/Misc rts/Sim/Path rts/Sim/Units	rts/System rts/System/FileSystem rts/System/Platform	rts/lib/lua rts/lib/lua/include tools/unitsync tools/unitsync/test
</A></li>
	<LI>Next message: <A HREF="000861.html">[Taspring-linux-commit] r6081 - trunk/rts/Game
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#860">[ date ]</a>
              <a href="thread.html#860">[ thread ]</a>
              <a href="subject.html#860">[ subject ]</a>
              <a href="author.html#860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/taspring-linux-commit">More information about the Taspring-linux-commit
mailing list</a><br>
</body></html>
